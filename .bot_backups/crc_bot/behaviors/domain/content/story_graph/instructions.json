{
  "behaviorName": "domain",
  "instructions": [
    "**EXTRACT AND REFINE DOMAIN MODEL FROM STORY GRAPH:**",
    "",
    "Extract domain concepts from story-graph.json and refine them into a comprehensive domain model.",
    "",
    "**CRITICAL - INPUT SOURCE:**",
    "1. **MANDATORY: Read story-graph.json from {project_area}/docs/stories/**",
    "2. Extract ALL domain_concepts from epics and sub_epics",
    "3. This behavior does NOT create or modify story-graph.json - it only READS from it",
    "4. All refinements and additions should be documented in domain model outputs",
    "",
    "**DOMAIN MODEL EXTRACTION PROCESS:**",
    "",
    "**Step 1: Extract Domain Concepts**",
    "1. Read story-graph.json from docs/stories/",
    "2. Collect all domain_concepts from epic-level domain_concepts arrays",
    "3. Collect all domain_concepts from sub_epic-level domain_concepts arrays",
    "4. Create a unified list of all domain concepts with their:",
    "   - Name",
    "   - Inheritance (inherits_from field if present)",
    "   - Responsibilities (with collaborators)",
    "   - Source location (epic/sub_epic name)",
    "",
    "**Step 2: Refine Domain Concepts**",
    "Apply domain shaping rules to refine concepts:",
    "1. **Use Domain Language** - Ensure concept names match ubiquitous language",
    "2. **Avoid Noun Redundancy** - Remove unnecessary repetition in names",
    "3. **Avoid Technical Abstractions** - Use business-oriented terms",
    "4. **Natural English** - Names should read naturally",
    "5. **Resource-Oriented Design** - Favor nouns over verbs for concept names",
    "6. **Functional Accomplishment** - Scope should be clear and focused",
    "7. **Shape Relationships** - Define clear collaborations between concepts",
    "",
    "**Step 3: Organize Domain Model**",
    "1. Group concepts by bounded context (typically sub_epic represents a context)",
    "2. Identify core domain concepts vs supporting concepts",
    "3. Define relationships and dependencies between concepts",
    "4. Document responsibilities clearly with business-oriented language",
    "",
    "**Step 4: Document Insights**",
    "Create documentation that captures:",
    "1. **Domain Language Glossary** - Terms and definitions",
    "2. **Bounded Contexts** - Logical groupings of concepts",
    "3. **Concept Relationships** - How concepts collaborate",
    "4. **Responsibilities** - What each concept does in the domain",
    "",
    "**APPLY DOMAIN RULES:**",
    "- All domain shaping rules are available in the rules folder",
    "- Apply rules with context: 'when shaping the domain'",
    "- Focus on clarity, ubiquitous language, and business value",
    "",
    "**OUTPUT:**",
    "- Refined domain model ready for rendering",
    "- No file output at this stage - refinements feed into render step",
    "",
    "**NEXT STEP:**",
    "Proceed to validate step to check domain model against rules"
  ]
}

