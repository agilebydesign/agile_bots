{
  "priority": 8,
  "description": "Objects create themselves from their context. Factory/registry selects which implementation to use, but creation logic belongs to the object being created. Example: Order Creates from shopping cart: Order, Cart, Customer; ScannerRegistry Finds scanner for rule: Scanner, Rule.",
  "scanners": [
    "scanners.self_creating_objects_scanner.SelfCreatingObjectsScanner",
    "scanners.factory_selection_scanner.FactorySelectionScanner"
  ],
  "do": {
    "description": "Objects create themselves, factory/registry selects implementations. Example: Order Creates from cart: Order, Cart, Customer (self-creation); ScannerRegistry Finds scanner: Scanner, Rule (selection)",
    "guidance": [
      {
        "description": "Objects know how to create themselves from context",
        "example": [
          "Order",
          "    Creates from shopping cart: Order, Cart, Customer",
          "    Creates from quote: Order, Quote, Customer",
          "",
          "Trade",
          "    Creates from rebalance recommendation: Trade, RebalanceRecommendation, Portfolio",
          "    Creates from manual request: Trade, Symbol, Shares, TradeType",
          "",
          "(Order and Trade know how to create themselves from different contexts)"
        ]
      },
      {
        "description": "Use factory/registry to select which implementation to use",
        "example": [
          "ScannerRegistry",
          "    Finds scanner for rule: Scanner, Rule",
          "",
          "ImportPlacementScanner : Scanner",
          "    Creates to scan scope: ImportPlacementScanner, Scope, Rule (self-creation)",
          "    Scans imports: Violation, Block, ImportRules",
          "",
          "(Registry selects which scanner, scanner creates itself)"
        ]
      },
      {
        "description": "Factory returns base type, caller uses polymorphically",
        "example": [
          "ShippingCalculatorFactory",
          "    Selects calculator for destination: ShippingCalculator, Destination",
          "",
          "DomesticShippingCalculator : ShippingCalculator",
          "    Calculates rate: Money, Weight, Distance",
          "",
          "InternationalShippingCalculator : ShippingCalculator",
          "    Calculates rate: Money, Weight, Country, CustomsFees",
          "",
          "(Factory returns base type, caller doesn't know which implementation)"
        ]
      }
    ]
  },
  "dont": {
    "description": "Don't delegate creation to other objects, don't hardcode type selection. Example: Cart Creates order (wrong) vs Order Creates from cart (right); Factory Creates scanner (wrong) vs Registry Finds scanner (right)",
    "guidance": [
      {
        "description": "Don't have other objects create domain objects",
        "example": [
          "Cart (WRONG: creates Order)",
          "    Creates order: Order, Customer",
          "",
          "Rule (WRONG: creates Violation)",
          "    Creates violation: Violation, Block",
          "",
          "(Order should create itself from Cart, Violation should create itself from Rule)"
        ]
      },
      {
        "description": "Don't have factory create objects - it selects, objects create themselves",
        "example": [
          "ScannerFactory (WRONG: creates instead of selects)",
          "    Creates import scanner: ImportPlacementScanner, Scope",
          "    Creates naming scanner: NamingScanner, Scope",
          "",
          "(Should be: Registry finds scanner, scanner creates itself)"
        ]
      },
      {
        "description": "Don't hardcode type selection in calling code",
        "example": [
          "ScanOrchestrator (WRONG: hardcoded selection)",
          "    Scans with import scanner: Violation, ImportPlacementScanner",
          "    Scans with naming scanner: Violation, NamingScanner",
          "",
          "(Should use factory to select, orchestrator uses base Scanner type)"
        ]
      },
      {
        "description": "Don't list all implementations in parent relationships",
        "example": [
          "PaymentProcessor (WRONG: lists all implementations)",
          "    Processes payment: Result, StripeGateway, PayPalGateway, SquareGateway",
          "",
          "(Should use factory to select, processor uses base PaymentGateway type)"
        ]
      }
    ]
  }
}

