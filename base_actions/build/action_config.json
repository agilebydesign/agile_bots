{
  "name": "build_knowledge",
  "description": "Build story graph from content area and render using story graph renderer",
  "workflow": true,
  "order": 4,
  "next_action": "validate_output",
  "instructions": [
    "@build-instructions.txt",
    "",
    "**BUILD PROCESS:**",
    "",
    "**1. Load Context**",
    "Load clarification.json, planning.json, and source material from context sources (listed above).",
    "",
    "**2. Load Build Configs**",
    "From `{bot}/behaviors/{behavior}/content/`, each folder contains:",
    "- `build_*.json` - Config (name, path, template, output)",
    "- `instructions.json` - Build instructions",
    "- `template-file.json` - Output schema/structure",
    "",
    "**3. Execute Build**",
    "1. Load config, instructions, and template (injected as 'story_graph_template')",
    "2. Check if output file exists - read it FIRST",
    "3. Follow instructions.json - match template structure exactly (check '_explanation' section)",
    "4. Apply context from Step 1",
    "5. If file exists: ADD/EXTEND only, never overwrite/delete",
    "6. Validate against template schema",
    "7. Write to `{project_area}/{config.path}/{config.output}`",
    "- Read existing files before changes - preserve all content",
    "- Match template structure exactly - don't invent schemas",
    "- Trace all knowledge to clarification/planning data",
    "- Process builds sequentially - validate each"
  ]
}
