{
  "epics": [
    {
      "name": "Build Agile Bots",
      "sequential_order": null,
      "behavior": null,
      "domain_concepts": [],
      "sub_epics": [
        {
          "name": "Generate MCP Tools",
          "sequential_order": 0.0,
          "behavior": null,
          "domain_concepts": [],
          "sub_epics": [],
          "story_groups": [
            {
              "name": "",
              "sequential_order": 0.0,
              "type": "and",
              "connector": "or",
              "behavior": null,
              "stories": [
                {
                  "name": "Generate Bot Tools",
                  "sequential_order": 0.0,
                  "connector": "or",
                  "story_type": "user",
                  "users": [],
                  "test_class": "TestGenerateBotTools",
                  "scenarios": [
                    {
                      "name": "Generator fails when bot config malformed",
                      "sequential_order": 1.0,
                      "type": "",
                      "background": [],
                      "test_method": "test_generator_fails_when_bot_config_malformed",
                      "steps": "Given A bot directory exists\nAnd Bot Config file exists with invalid JSON syntax\nWhen MCP Server Generator attempts to receive Bot Config\nThen Generator raises JSONDecodeError and does not create MCP Server instance",
                      "examples": [
                        {
                          "columns": [
                            "epic_name",
                            "story_name",
                            "test_class",
                            "acceptance_criteria",
                            "expected_behavior",
                            "action",
                            "expected_instructions_contain",
                            "scenario",
                            "test_method"
                          ],
                          "rows": [
                            [
                              "File Management",
                              "Upload File",
                              "test_file_upload.py",
                              "File size validated; File type checked; Upload progress tracked",
                              "code",
                              "build",
                              "code behavior; build action; file upload functionality; implement production code",
                              "User uploads valid file and sees success confirmation",
                              "test_user_uploads_valid_file_and_sees_success_confirmation"
                            ],
                            [
                              "File Management",
                              "Upload File",
                              "test_file_upload.py",
                              "File size validated; File type checked; Upload progress tracked",
                              "code",
                              "build",
                              "code behavior; build action; file upload functionality; implement production code",
                              "User uploads oversized file and sees size limit error",
                              "test_user_uploads_oversized_file_and_sees_size_limit_error"
                            ],
                            [
                              "File Management",
                              "Upload File",
                              "test_file_upload.py",
                              "File size validated; File type checked; Upload progress tracked",
                              "code",
                              "build",
                              "code behavior; build action; file upload functionality; implement production code",
                              "User uploads invalid file type and sees type error",
                              "test_user_uploads_invalid_file_type_and_sees_type_error"
                            ],
                            [
                              "File Management",
                              "Upload File",
                              "test_file_upload.py",
                              "File size validated; File type checked; Upload progress tracked",
                              "code",
                              "build",
                              "code behavior; build action; file upload functionality; implement production code",
                              "User cancels upload mid-transfer and sees cancellation confirmation",
                              "test_user_cancels_upload_mid_transfer_and_sees_cancellation_confirmation"
                            ],
                            [
                              "File Management",
                              "Upload File",
                              "test_file_upload.py",
                              "File size validated; File type checked; Upload progress tracked",
                              "code",
                              "build",
                              "code behavior; build action; file upload functionality; implement production code",
                              "Upload fails with network error and user sees retry option",
                              "test_upload_fails_with_network_error_and_user_sees_retry_option"
                            ],
                            [
                              "File Management",
                              "Download File",
                              "test_file_download.py",
                              "Download initiated; Progress displayed",
                              "test",
                              "build",
                              "test behavior; build action; file download test coverage; implement test methods for scenarios",
                              "User downloads file successfully and sees progress",
                              "test_user_downloads_file_successfully_and_sees_progress"
                            ],
                            [
                              "File Management",
                              "Download File",
                              "test_file_download.py",
                              "Download initiated; Progress displayed",
                              "test",
                              "build",
                              "test behavior; build action; file download test coverage; implement test methods for scenarios",
                              "User downloads file with network interruption and retries",
                              "test_user_downloads_file_with_network_interruption_and_retries"
                            ]
                          ]
                        }
                      ]
                    }
                  ],
                  "acceptance_criteria": [
                    {
                      "name": "WHEN MCP Server Generator receives Bot Config\nTHEN Generator generates unique MCP Server instance with Unique server name from bot name AND Generated server includes Bot Config reference AND Generated server leverages Specific Bot instantiation code",
                      "text": "WHEN MCP Server Generator receives Bot Config\nTHEN Generator generates unique MCP Server instance with Unique server name from bot name AND Generated server includes Bot Config reference AND Generated server leverages Specific Bot instantiation code",
                      "sequential_order": 1.0
                    }
                  ],
                  "behavior": null
                },
                {
                  "name": "Generate Behavior Action Tools",
                  "sequential_order": 1.0,
                  "connector": "or",
                  "story_type": "user",
                  "users": [
                    "MCP Server Generator"
                  ],
                  "test_class": "TestGenerateBehaviorActionTools",
                  "scenarios": [
                    {
                      "name": "Tools generated for each behavior action",
                      "sequential_order": 1.0,
                      "type": "",
                      "background": [],
                      "test_method": "test_tools_generated_for_each_behavior_action",
                      "steps": "GIVEN: Bot with behaviors and actions\nWHEN: Tool generation is triggered\nTHEN: MCP tools are created for each action"
                    }
                  ],
                  "acceptance_criteria": [
                    {
                      "name": "WHEN Generator processes Bot Config\nTHEN Generator creates tool code for each (behavior, action) pair AND Enumerates all behaviors and actions from Bot Config AND For each pair, generates tool code with unique name, trigger words, forwarding logic AND Tool catalog prepared with all generated tool instances",
                      "text": "WHEN Generator processes Bot Config\nTHEN Generator creates tool code for each (behavior, action) pair AND Enumerates all behaviors and actions from Bot Config AND For each pair, generates tool code with unique name, trigger words, forwarding logic AND Tool catalog prepared with all generated tool instances",
                      "sequential_order": 1.0
                    }
                  ],
                  "behavior": null
                },
                {
                  "name": "Deploy MCP BOT Server",
                  "sequential_order": 2.0,
                  "connector": "or",
                  "story_type": "user",
                  "users": [
                    "MCP Server Generator"
                  ],
                  "test_class": "TestDeployMCPBotServer",
                  "scenarios": [
                    {
                      "name": "MCP server deployed with tools",
                      "sequential_order": 1.0,
                      "type": "",
                      "background": [],
                      "test_method": "test_mcp_server_deployed_with_tools",
                      "steps": "GIVEN: Bot tools are generated\nWHEN: Server deployment is triggered\nTHEN: MCP server is running with tools"
                    }
                  ],
                  "acceptance_criteria": [
                    {
                      "name": "WHEN Generation Complete\nTHEN Generator deploys/starts generated MCP Server AND Server initializes in separate thread AND Server registers with MCP Protocol Handler using unique server name AND Server publishes tool catalog to AI Chat AND Each tool entry includes name, description, trigger patterns, parameters",
                      "text": "WHEN Generation Complete\nTHEN Generator deploys/starts generated MCP Server AND Server initializes in separate thread AND Server registers with MCP Protocol Handler using unique server name AND Server publishes tool catalog to AI Chat AND Each tool entry includes name, description, trigger patterns, parameters",
                      "sequential_order": 1.0
                    }
                  ],
                  "behavior": null
                },
                {
                  "name": "Restart MCP Server To Load Code Changes",
                  "sequential_order": 3.0,
                  "connector": "or",
                  "story_type": "user",
                  "users": [],
                  "test_class": "TestRestartMCPServerToLoadCodeChanges",
                  "scenarios": [
                    {
                      "name": "Clear Python bytecode cache",
                      "sequential_order": 1.0,
                      "type": "",
                      "background": [],
                      "test_method": "test_clear_python_bytecode_cache",
                      "steps": "Given __pycache__ directories exist with .pyc files\nWhen clear_python_cache is called\nThen All __pycache__ directories are removed\nAnd All .pyc files are deleted\nAnd Cache is cleared before server restart"
                    }
                  ],
                  "acceptance_criteria": [
                    {
                      "name": "WHEN Bot code changes are detected\nTHEN MCP Server clears Python bytecode cache (__pycache__) AND MCP Server restarts to load new code AND Server restarts gracefully without losing state AND Server re-registers with MCP Protocol Handler after restart",
                      "text": "WHEN Bot code changes are detected\nTHEN MCP Server clears Python bytecode cache (__pycache__) AND MCP Server restarts to load new code AND Server restarts gracefully without losing state AND Server re-registers with MCP Protocol Handler after restart",
                      "sequential_order": 1.0
                    },
                    {
                      "name": "Acceptance-criteria1",
                      "text": "Acceptance-criteria1",
                      "sequential_order": 1.0
                    }
                  ],
                  "behavior": null
                }
              ]
            }
          ]
        },
        {
          "name": "Generate CLI",
          "sequential_order": 1.0,
          "behavior": null,
          "domain_concepts": [],
          "sub_epics": [],
          "story_groups": [
            {
              "name": "",
              "sequential_order": 0.0,
              "type": "and",
              "connector": null,
              "behavior": null,
              "stories": [
                {
                  "name": "Create Rule Files From Bot Behavior",
                  "sequential_order": 1.0,
                  "connector": "or",
                  "story_type": "user",
                  "users": [
                    "Generator"
                  ],
                  "test_class": "TestCreateRuleFilesFromBotBehavior",
                  "scenarios": [
                    {
                      "name": "Generator produces rule file per behavior when bot has valid behaviors",
                      "sequential_order": 1.0,
                      "type": "happy_path",
                      "background": [],
                      "test_method": "test_generator_produces_rule_file_per_behavior_when_bot_has_valid_behaviors",
                      "steps": "Given Bot {bot_name} exists with behaviors directory\nAnd Behavior {behavior_name} has valid behavior.json with behaviorName, description, goal, inputs, outputs\nWhen Generator runs generate context package command on {bot_name}\nThen Generator walks bots/{bot_name}/behaviors/ directory\nAnd Generator reads each behavior.json\nAnd Generator creates one .mdc rule file at .cursor/rules/{bot_name}_{behavior}.mdc per behavior"
                    },
                    {
                      "name": "Generator writes rule file header with title subtitle and sections",
                      "sequential_order": 2.0,
                      "type": "happy_path",
                      "background": [],
                      "test_method": "test_generator_writes_rule_file_header_with_title_subtitle_and_sections",
                      "steps": "Given Bot story_bot exists with shape behavior\nWhen Generator writes rule file for story_bot shape\nThen Generator adds title # story_bot shape Behavior\nAnd Generator adds description as subtitle\nAnd Generator adds sections Goal, Inputs, Outputs"
                    },
                    {
                      "name": "Generator adds trigger words section from behavior.json patterns",
                      "sequential_order": 3.0,
                      "type": "happy_path",
                      "background": [],
                      "test_method": "test_generator_adds_trigger_words_section_from_behavior_json_patterns",
                      "steps": "Given Behavior has trigger_words.patterns in behavior.json\nWhen Generator adds trigger words section\nThen Generator creates ## When to use this behavior\nAnd Generator extracts trigger_words.patterns from behavior.json\nAnd Generator formats as Use this behavior when: with each pattern as bullet\nAnd Generator converts regex patterns to natural language"
                    },
                    {
                      "name": "Generator merges clarification section from guardrails and base actions",
                      "sequential_order": 4.0,
                      "type": "happy_path",
                      "background": [],
                      "test_method": "test_generator_merges_clarification_section_from_guardrails_and_base_actions",
                      "steps": "Given Behavior has guardrails/required_context/key_questions.json and evidence.json\nAnd Behavior has clarify action in actions_workflow\nWhen Generator adds clarification section\nThen Generator reads key_questions.json and evidence.json\nAnd Generator merges clarify action from behavior.json and base_actions/clarify/action_config.json\nAnd Generator adds logic to state NOT ENOUGH INFORMATION when context missing\nAnd Generator specifies save to clarification.strategy"
                    },
                    {
                      "name": "Generator merges strategy section from guardrails and base actions",
                      "sequential_order": 5.0,
                      "type": "happy_path",
                      "background": [],
                      "test_method": "test_generator_merges_strategy_section_from_guardrails_and_base_actions",
                      "steps": "Given Behavior has guardrails/strategy/typical_assumptions.json and decision_criteria\nWhen Generator adds strategy section\nThen Generator reads typical_assumptions.json and decision_criteria/*.json\nAnd Generator merges strategy action from behavior.json and base_actions/strategy/action_config.json\nAnd Generator adds logic to state NOT ENOUGH INFORMATION when context insufficient\nAnd Generator specifies save to strategy.json"
                    },
                    {
                      "name": "Generator adds build and render sections from content config",
                      "sequential_order": 6.0,
                      "type": "happy_path",
                      "background": [],
                      "test_method": "test_generator_adds_build_and_render_sections_from_content_config",
                      "steps": "Given Behavior has build action and content/render/*.json configs\nWhen Generator adds build section\nThen Generator merges build action instructions from behavior.json\nAnd Generator specifies templates from content/render/*.json\nWhen Generator adds render section\nThen Generator walks content/render/*.json\nAnd Generator extracts template path, output path, instructions per config\nAnd Generator formats as bullets"
                    },
                    {
                      "name": "Generator processes rules directory and formats DO DON'T blocks",
                      "sequential_order": 7.0,
                      "type": "happy_path",
                      "background": [],
                      "test_method": "test_generator_processes_rules_directory_and_formats_do_dont_blocks",
                      "steps": "Given Behavior has rules/*.json files sorted by priority\nWhen Generator processes rules directory\nThen Generator walks rules/*.json\nAnd Generator extracts description, do.description, do.guidance, dont.description, dont.guidance\nAnd Generator formats as ## Rules with DO/DON'T blocks\nAnd Generator includes examples as code blocks"
                    },
                    {
                      "name": "Generator outputs .mdc files to workspace .cursor/rules folder",
                      "sequential_order": 8.0,
                      "type": "happy_path",
                      "background": [],
                      "test_method": "test_generator_outputs_mdc_files_to_workspace_cursor_rules_folder",
                      "steps": "Given Generator has produced rule content for each behavior\nWhen Generator completes\nThen Generator saves .mdc rule files to workspace .cursor/rules/ folder\nAnd One .mdc file exists per behavior"
                    },
                    {
                      "name": "Generator skips behavior when behavior.json is malformed",
                      "sequential_order": 9.0,
                      "type": "error_case",
                      "background": [],
                      "test_method": "test_generator_skips_behavior_when_behavior_json_is_malformed",
                      "steps": "Given Bot has behaviors directory\nAnd One behavior.json contains invalid JSON\nWhen Generator runs generate context package command\nThen Generator does not crash\nAnd Generator produces rule files for valid behaviors only\nAnd Generator skips or reports malformed behavior"
                    },
                    {
                      "name": "Generator produces rule file when bot has single behavior",
                      "sequential_order": 10.0,
                      "type": "edge_case",
                      "background": [],
                      "test_method": "test_generator_produces_rule_file_when_bot_has_single_behavior",
                      "steps": "Given Bot has exactly one behavior in behaviors directory\nWhen Generator runs generate context package command\nThen Generator creates one .mdc rule file\nAnd Rule file path follows {bot_name}_{behavior}.mdc pattern"
                    },
                    {
                      "name": "Display Cursor VS Code Test Explorer",
                      "sequential_order": 11.0,
                      "type": "",
                      "background": [],
                      "test_method": null,
                      "steps": ""
                    }
                  ],
                  "acceptance_criteria": [
                    {
                      "name": "WHEN generate context package command runs on bot, THEN Generator iterates over bot behaviors:\n- Walks bots/{bot_name}/behaviors/ directory\n- Reads each behavior.json\n- Extracts: behaviorName, description, goal, inputs, outputs\n- Creates one .mdc rule file per behavior in workspace .cursor/rules/{bot_name}_{behavior}.mdc (e.g. story_bot â†’ story_shape.mdc)",
                      "text": "WHEN generate context package command runs on bot, THEN Generator iterates over bot behaviors:\n- Walks bots/{bot_name}/behaviors/ directory\n- Reads each behavior.json\n- Extracts: behaviorName, description, goal, inputs, outputs\n- Creates one .mdc rule file per behavior in workspace .cursor/rules/{bot_name}_{behavior}.mdc (e.g. story_bot â†’ story_shape.mdc)",
                      "sequential_order": 1.0
                    },
                    {
                      "name": "WHEN Generator writes rule file header, THEN it adds:\n- Title: # {bot_name} {behaviorName} Behavior\n- Subtitle: description\n- Sections: Goal, Inputs, Outputs",
                      "text": "WHEN Generator writes rule file header, THEN it adds:\n- Title: # {bot_name} {behaviorName} Behavior\n- Subtitle: description\n- Sections: Goal, Inputs, Outputs",
                      "sequential_order": 2.0
                    },
                    {
                      "name": "WHEN Generator adds trigger words section, THEN it:\n- Section: ## When to use this behavior\n- Extracts trigger_words.patterns from behavior.json\n- Formats as Use this behavior when: with each pattern as bullet\n- Converts regex patterns to natural language",
                      "text": "WHEN Generator adds trigger words section, THEN it:\n- Section: ## When to use this behavior\n- Extracts trigger_words.patterns from behavior.json\n- Formats as Use this behavior when: with each pattern as bullet\n- Converts regex patterns to natural language",
                      "sequential_order": 3.0
                    },
                    {
                      "name": "WHEN Generator adds clarification section, THEN it:\n- Section: ## Clarification\n- Reads guardrails/required_context/key_questions.json â†’ key questions as bullets\n- Reads guardrails/required_context/evidence.json â†’ evidence list\n- Merges clarify action instructions from behavior.json actions_workflow (action name clarify)\n- Merges instructions from base_actions/clarify/action_config.json\n- Adds clarification logic: answer each question from context; if you can't answer, state [!] NOT ENOUGH INFORMATION - REQUIRES USER INPUT; store answers to clarification.json for later session; don't guess or inferâ€”be explicit when information is missing; save to clarification.strategy",
                      "text": "WHEN Generator adds clarification section, THEN it:\n- Section: ## Clarification\n- Reads guardrails/required_context/key_questions.json â†’ key questions as bullets\n- Reads guardrails/required_context/evidence.json â†’ evidence list\n- Merges clarify action instructions from behavior.json actions_workflow (action name clarify)\n- Merges instructions from base_actions/clarify/action_config.json\n- Adds clarification logic: answer each question from context; if you can't answer, state [!] NOT ENOUGH INFORMATION - REQUIRES USER INPUT; store answers to clarification.json for later session; don't guess or inferâ€”be explicit when information is missing; save to clarification.strategy",
                      "sequential_order": 4.0
                    },
                    {
                      "name": "WHEN Generator adds strategy section, THEN it:\n- Section: ## Strategy\n- Reads guardrails/strategy/typical_assumptions.json â†’ assumptions as bullets\n- Reads guardrails/strategy/decision_criteria/*.json â†’ each decision (question, options) as structured bullets\n- Merges strategy action instructions from behavior.json actions_workflow (action name strategy)\n- Merges instructions from base_actions/strategy/action_config.json\n- Adds strategy logic: review context, make decisions, compile assumptions; if insufficient context state [!] NOT ENOUGH INFORMATION; save to strategy.json",
                      "text": "WHEN Generator adds strategy section, THEN it:\n- Section: ## Strategy\n- Reads guardrails/strategy/typical_assumptions.json â†’ assumptions as bullets\n- Reads guardrails/strategy/decision_criteria/*.json â†’ each decision (question, options) as structured bullets\n- Merges strategy action instructions from behavior.json actions_workflow (action name strategy)\n- Merges instructions from base_actions/strategy/action_config.json\n- Adds strategy logic: review context, make decisions, compile assumptions; if insufficient context state [!] NOT ENOUGH INFORMATION; save to strategy.json",
                      "sequential_order": 5.0
                    },
                    {
                      "name": "WHEN Generator adds build section, THEN it:\n- Section: ## Build\n- Merges build action instructions from behavior.json actions_workflow (action name build)\n- Specifies templates from content/render/*.json (template paths, output formats)â€”no JSON schema for build output",
                      "text": "WHEN Generator adds build section, THEN it:\n- Section: ## Build\n- Merges build action instructions from behavior.json actions_workflow (action name build)\n- Specifies templates from content/render/*.json (template paths, output formats)â€”no JSON schema for build output",
                      "sequential_order": 6.0
                    },
                    {
                      "name": "WHEN Generator adds render section, THEN it:\n- Section: ## Render\n- Walks content/render/*.json\n- For each: extracts template path, output path, instructions\n- Formats as bullets (e.g. story-map.md template â†’ story-map.txt)",
                      "text": "WHEN Generator adds render section, THEN it:\n- Section: ## Render\n- Walks content/render/*.json\n- For each: extracts template path, output path, instructions\n- Formats as bullets (e.g. story-map.md template â†’ story-map.txt)",
                      "sequential_order": 7.0
                    },
                    {
                      "name": "WHEN Generator processes rules directory, THEN it:\n- Walks rules/*.json, sorts by priority\n- For each: extracts description, do.description, do.guidance, dont.description, dont.guidance\n- Formats as ## Rules with DO/DON'T blocks\n- Includes examples as code blocks",
                      "text": "WHEN Generator processes rules directory, THEN it:\n- Walks rules/*.json, sorts by priority\n- For each: extracts description, do.description, do.guidance, dont.description, dont.guidance\n- Formats as ## Rules with DO/DON'T blocks\n- Includes examples as code blocks",
                      "sequential_order": 8.0
                    },
                    {
                      "name": "WHEN Generator completes, THEN output is .mdc rule files saved to workspace .cursor/rules/ folder (one per behavior)",
                      "text": "WHEN Generator completes, THEN output is .mdc rule files saved to workspace .cursor/rules/ folder (one per behavior)",
                      "sequential_order": 9.0
                    }
                  ],
                  "behavior": null
                }
              ]
            }
          ]
        }
      ],
      "story_groups": []
    },
    {
      "name": "Invoke Bot",
      "sequential_order": null,
      "behavior": null,
      "domain_concepts": [],
      "sub_epics": [
        {
          "name": "Initialize Bot",
          "sequential_order": 0.0,
          "behavior": null,
          "domain_concepts": [],
          "test_file": "invoke_bot/initialize_bot/",
          "sub_epics": [
            {
              "name": "Load Behavior, and Actions",
              "sequential_order": 0.0,
              "behavior": null,
              "domain_concepts": [
                {
                  "name": "Base Bot",
                  "responsibilities": [
                    {
                      "name": "Executes Actions",
                      "collaborators": [
                        "Workflow",
                        "Behavior",
                        "Action"
                      ]
                    },
                    {
                      "name": "Execute behavior",
                      "collaborators": [
                        "Behavior",
                        "BotResult"
                      ]
                    },
                    {
                      "name": "Execute current action",
                      "collaborators": [
                        "BotResult"
                      ]
                    },
                    {
                      "name": "Navigate and execute",
                      "collaborators": [
                        "Behavior",
                        "Action",
                        "ActionContext",
                        "BotResult"
                      ]
                    },
                    {
                      "name": "Validate behavior exists",
                      "collaborators": [
                        "Behavior",
                        "Boolean"
                      ]
                    },
                    {
                      "name": "Validate action exists",
                      "collaborators": [
                        "Behavior",
                        "Action",
                        "Boolean"
                      ]
                    },
                    {
                      "name": "Track activity",
                      "collaborators": [
                        "Behavior",
                        "Action"
                      ]
                    },
                    {
                      "name": "Route to behaviors and actions",
                      "collaborators": [
                        "Router",
                        "Trigger Words"
                      ]
                    },
                    {
                      "name": "Persist content",
                      "collaborators": [
                        "Content"
                      ]
                    },
                    {
                      "name": "Manage Project State",
                      "collaborators": [
                        "Project"
                      ]
                    },
                    {
                      "name": "Render",
                      "collaborators": []
                    },
                    {
                      "name": "Get scope",
                      "collaborators": [
                        "Scope (read-only property)"
                      ]
                    },
                    {
                      "name": "Get status",
                      "collaborators": [
                        "Status"
                      ]
                    },
                    {
                      "name": "Navigate next",
                      "collaborators": [
                        "NavigationResult"
                      ]
                    },
                    {
                      "name": "Navigate back",
                      "collaborators": [
                        "NavigationResult"
                      ]
                    },
                    {
                      "name": "Get bot path",
                      "collaborators": [
                        "BotPath"
                      ]
                    },
                    {
                      "name": "Get help",
                      "collaborators": [
                        "Help"
                      ]
                    },
                    {
                      "name": "Exit",
                      "collaborators": [
                        "ExitResult"
                      ]
                    }
                  ],
                  "module": "bot",
                  "_source_path": "Invoke Bot.Invoke Bot Directly"
                },
                {
                  "name": "Specific Bot",
                  "responsibilities": [
                    {
                      "name": "Provide Behavior config",
                      "collaborators": [
                        "Bot Config",
                        "Behavior"
                      ]
                    },
                    {
                      "name": "Provide MCP config",
                      "collaborators": [
                        "MCP Config"
                      ]
                    },
                    {
                      "name": "Provide Renderers",
                      "collaborators": []
                    },
                    {
                      "name": "Provide Extractors",
                      "collaborators": []
                    },
                    {
                      "name": "Provide Synchronizer",
                      "collaborators": []
                    },
                    {
                      "name": "Provide Trigger Words",
                      "collaborators": []
                    }
                  ],
                  "module": "bot",
                  "_source_path": "Invoke Bot.Invoke Bot Directly"
                },
                {
                  "name": "TTYBot",
                  "responsibilities": [
                    {
                      "name": "Execute behavior by name",
                      "collaborators": [
                        "Behavior Name String",
                        "TTY String"
                      ]
                    },
                    {
                      "name": "Execute current action",
                      "collaborators": [
                        "TTY String"
                      ]
                    },
                    {
                      "name": "Navigate and execute",
                      "collaborators": [
                        "Dot Notation String",
                        "TTY String"
                      ]
                    },
                    {
                      "name": "Validate behavior exists",
                      "collaborators": [
                        "Behavior Name String",
                        "TTY String (True/False)"
                      ]
                    },
                    {
                      "name": "Validate action exists",
                      "collaborators": [
                        "Dot Notation String",
                        "TTY String (True/False)"
                      ]
                    },
                    {
                      "name": "Serialize entire bot to TTY",
                      "collaborators": [
                        "Bot",
                        "TTY String"
                      ]
                    },
                    {
                      "name": "Bot header",
                      "collaborators": [
                        "Bot Name",
                        "TTY String"
                      ]
                    },
                    {
                      "name": "Behaviors",
                      "collaborators": [
                        "Bot",
                        "Behaviors",
                        "TTY Behaviors"
                      ]
                    },
                    {
                      "name": "Get status",
                      "collaborators": [
                        "TTY String (delegates to TTYStatus)"
                      ]
                    },
                    {
                      "name": "Get scope",
                      "collaborators": [
                        "TTY String (delegates to TTYScope)"
                      ]
                    },
                    {
                      "name": "Navigate next",
                      "collaborators": [
                        "TTY String (delegates to TTYNavigation)"
                      ]
                    },
                    {
                      "name": "Navigate back",
                      "collaborators": [
                        "TTY String (delegates to TTYNavigation)"
                      ]
                    },
                    {
                      "name": "Get bot path",
                      "collaborators": [
                        "TTY String (delegates to TTYBotPath)"
                      ]
                    },
                    {
                      "name": "Get help",
                      "collaborators": [
                        "TTY String (delegates to TTYHelp)"
                      ]
                    },
                    {
                      "name": "Exit",
                      "collaborators": [
                        "TTY String (delegates to TTYExitResult)"
                      ]
                    },
                    {
                      "name": "Wraps domain bot",
                      "collaborators": [
                        "Bot"
                      ]
                    }
                  ],
                  "module": "bot",
                  "inherits_from": "TTYAdapter",
                  "_source_path": "Invoke Bot.Invoke Bot Directly"
                },
                {
                  "name": "JSONBot",
                  "responsibilities": [
                    {
                      "name": "Execute behavior by name",
                      "collaborators": [
                        "Behavior Name String",
                        "JSON String"
                      ]
                    },
                    {
                      "name": "Execute current action",
                      "collaborators": [
                        "JSON String"
                      ]
                    },
                    {
                      "name": "Navigate and execute",
                      "collaborators": [
                        "Dot Notation String",
                        "JSON String"
                      ]
                    },
                    {
                      "name": "Validate behavior exists",
                      "collaborators": [
                        "Behavior Name String",
                        "JSON String"
                      ]
                    },
                    {
                      "name": "Validate action exists",
                      "collaborators": [
                        "Dot Notation String",
                        "JSON String"
                      ]
                    },
                    {
                      "name": "Serialize bot to JSON",
                      "collaborators": [
                        "Bot",
                        "JSON String"
                      ]
                    },
                    {
                      "name": "Include bot metadata",
                      "collaborators": [
                        "Name",
                        "Directory",
                        "Paths"
                      ]
                    },
                    {
                      "name": "Behaviors",
                      "collaborators": [
                        "Bot",
                        "Behaviors",
                        "JSON Behaviors"
                      ]
                    },
                    {
                      "name": "Get status",
                      "collaborators": [
                        "JSON String (delegates to JSONStatus)"
                      ]
                    },
                    {
                      "name": "Get scope",
                      "collaborators": [
                        "JSON String (delegates to JSONScope)"
                      ]
                    },
                    {
                      "name": "Navigate next",
                      "collaborators": [
                        "JSON String (delegates to JSONNavigation)"
                      ]
                    },
                    {
                      "name": "Navigate back",
                      "collaborators": [
                        "JSON String (delegates to JSONNavigation)"
                      ]
                    },
                    {
                      "name": "Get bot path",
                      "collaborators": [
                        "JSON String (delegates to JSONBotPath)"
                      ]
                    },
                    {
                      "name": "Get help",
                      "collaborators": [
                        "JSON String (delegates to JSONHelp)"
                      ]
                    },
                    {
                      "name": "Exit",
                      "collaborators": [
                        "JSON String (delegates to JSONExitResult)"
                      ]
                    },
                    {
                      "name": "Wraps domain bot",
                      "collaborators": [
                        "Bot"
                      ]
                    }
                  ],
                  "module": "bot",
                  "inherits_from": "JSONAdapter",
                  "_source_path": "Invoke Bot.Invoke Bot Directly"
                },
                {
                  "name": "MarkdownBot",
                  "responsibilities": [
                    {
                      "name": "Execute behavior by name",
                      "collaborators": [
                        "Behavior Name String",
                        "Markdown String"
                      ]
                    },
                    {
                      "name": "Execute current action",
                      "collaborators": [
                        "Markdown String"
                      ]
                    },
                    {
                      "name": "Navigate and execute",
                      "collaborators": [
                        "Dot Notation String",
                        "Markdown String"
                      ]
                    },
                    {
                      "name": "Validate behavior exists",
                      "collaborators": [
                        "Behavior Name String",
                        "Markdown String"
                      ]
                    },
                    {
                      "name": "Validate action exists",
                      "collaborators": [
                        "Dot Notation String",
                        "Markdown String"
                      ]
                    },
                    {
                      "name": "Serialize bot to Markdown",
                      "collaborators": [
                        "Bot",
                        "Markdown String"
                      ]
                    },
                    {
                      "name": "Format bot documentation",
                      "collaborators": [
                        "Bot Name",
                        "Description",
                        "Markdown Header"
                      ]
                    },
                    {
                      "name": "Behaviors",
                      "collaborators": [
                        "Bot",
                        "Behaviors",
                        "Markdown Behaviors"
                      ]
                    },
                    {
                      "name": "Get status",
                      "collaborators": [
                        "Markdown String (delegates to MarkdownStatus)"
                      ]
                    },
                    {
                      "name": "Get scope",
                      "collaborators": [
                        "Markdown String (delegates to MarkdownScope)"
                      ]
                    },
                    {
                      "name": "Navigate next",
                      "collaborators": [
                        "Markdown String (delegates to MarkdownNavigation)"
                      ]
                    },
                    {
                      "name": "Navigate back",
                      "collaborators": [
                        "Markdown String (delegates to MarkdownNavigation)"
                      ]
                    },
                    {
                      "name": "Get bot path",
                      "collaborators": [
                        "Markdown String (delegates to MarkdownBotPath)"
                      ]
                    },
                    {
                      "name": "Get help",
                      "collaborators": [
                        "Markdown String (delegates to MarkdownHelp)"
                      ]
                    },
                    {
                      "name": "Exit",
                      "collaborators": [
                        "Markdown String (delegates to MarkdownExitResult)"
                      ]
                    },
                    {
                      "name": "Wraps domain bot",
                      "collaborators": [
                        "Bot"
                      ]
                    }
                  ],
                  "module": "bot",
                  "inherits_from": "MarkdownAdapter",
                  "_source_path": "Invoke Bot.Invoke Bot Directly"
                },
                {
                  "name": "Behavior",
                  "responsibilities": [
                    {
                      "name": "Name",
                      "collaborators": [
                        "String"
                      ]
                    },
                    {
                      "name": "Description",
                      "collaborators": [
                        "String"
                      ]
                    },
                    {
                      "name": "Goal",
                      "collaborators": [
                        "String"
                      ]
                    },
                    {
                      "name": "Folder",
                      "collaborators": [
                        "Path"
                      ]
                    },
                    {
                      "name": "Is completed",
                      "collaborators": [
                        "Boolean"
                      ]
                    },
                    {
                      "name": "Actions workflow",
                      "collaborators": [
                        "List"
                      ]
                    },
                    {
                      "name": "Action Names",
                      "collaborators": [
                        "List"
                      ]
                    },
                    {
                      "name": "Validation type",
                      "collaborators": [
                        "ValidationType"
                      ]
                    },
                    {
                      "name": "CurrentAction",
                      "collaborators": [
                        "Action"
                      ]
                    },
                    {
                      "name": "Guardrails",
                      "collaborators": [
                        "Guardrails"
                      ]
                    },
                    {
                      "name": "Content",
                      "collaborators": [
                        "Content"
                      ]
                    },
                    {
                      "name": "Rules",
                      "collaborators": [
                        "Rules"
                      ]
                    },
                    {
                      "name": "Actions",
                      "collaborators": [
                        "Actions"
                      ]
                    }
                  ],
                  "module": "behaviors",
                  "_source_path": "Invoke Bot.Invoke Bot Directly"
                },
                {
                  "name": "TTYBehavior",
                  "responsibilities": [
                    {
                      "name": "Serialize behavior to TTY",
                      "collaborators": [
                        "Behavior",
                        "String"
                      ]
                    },
                    {
                      "name": "Format behavior line",
                      "collaborators": [
                        "Behavior Name",
                        "Marker",
                        "Color"
                      ]
                    },
                    {
                      "name": "Format actions",
                      "collaborators": [
                        "Actions",
                        "String"
                      ]
                    },
                    {
                      "name": "Wraps domain behavior",
                      "collaborators": [
                        "Behavior"
                      ]
                    }
                  ],
                  "module": "behaviors",
                  "inherits_from": "TTYProgressAdapter",
                  "_source_path": "Invoke Bot.Invoke Bot Directly"
                },
                {
                  "name": "JSONBehavior",
                  "responsibilities": [
                    {
                      "name": "Serialize behavior to JSON dict",
                      "collaborators": [
                        "Behavior",
                        "Dict"
                      ]
                    },
                    {
                      "name": "Include behavior metadata",
                      "collaborators": [
                        "Name",
                        "Description",
                        "Status"
                      ]
                    },
                    {
                      "name": "Include actions",
                      "collaborators": [
                        "Actions",
                        "Array"
                      ]
                    },
                    {
                      "name": "Wraps domain behavior",
                      "collaborators": [
                        "Behavior"
                      ]
                    }
                  ],
                  "module": "behaviors",
                  "inherits_from": "JSONProgressAdapter",
                  "_source_path": "Invoke Bot.Invoke Bot Directly"
                },
                {
                  "name": "MarkdownBehavior",
                  "responsibilities": [
                    {
                      "name": "Serialize behavior to Markdown",
                      "collaborators": [
                        "Behavior",
                        "String"
                      ]
                    },
                    {
                      "name": "Format behavior documentation",
                      "collaborators": [
                        "Behavior Name",
                        "Description",
                        "Section"
                      ]
                    },
                    {
                      "name": "Format actions",
                      "collaborators": [
                        "Actions",
                        "Markdown Subsections"
                      ]
                    },
                    {
                      "name": "Wraps domain behavior",
                      "collaborators": [
                        "Behavior"
                      ]
                    }
                  ],
                  "module": "behaviors",
                  "inherits_from": "MarkdownProgressAdapter",
                  "_source_path": "Invoke Bot.Invoke Bot Directly"
                }
              ],
              "test_file": "invoke_bot/initialize_bot/test_load_bot_behavior_and_actions.py",
              "sub_epics": [],
              "story_groups": [
                {
                  "name": "",
                  "sequential_order": 0.0,
                  "type": "and",
                  "connector": null,
                  "behavior": null,
                  "stories": [
                    {
                      "name": "Load Bot Behaviors",
                      "sequential_order": 4.0,
                      "connector": "or",
                      "story_type": "user",
                      "users": [
                        "Bot Behavior"
                      ],
                      "test_class": "TestLoadBotBehaviors",
                      "scenarios": [
                        {
                          "name": "Bot behaviors are loaded from BotConfig.",
                          "sequential_order": 1.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_load_behaviors_from_bot_config",
                          "steps": "",
                          "test": {
                            "method": "test_load_behaviors_from_bot_config",
                            "file": "invoke_bot/initialize_bot/test_load_bot_behavior_and_actions.py",
                            "line": 108
                          }
                        },
                        {
                          "name": "When behaviors are loaded, first behavior is set as current.",
                          "sequential_order": 2.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_load_behaviors_sets_first_as_current",
                          "steps": "",
                          "test": {
                            "method": "test_load_behaviors_sets_first_as_current",
                            "file": "invoke_bot/initialize_bot/test_load_bot_behavior_and_actions.py",
                            "line": 116
                          }
                        },
                        {
                          "name": "Loaded behavior provides access to all config properties",
                          "sequential_order": 3.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_behavior_provides_access_to_all_config_properties",
                          "steps": "Given Behavior loaded from production config\nWhen Config properties accessed\nThen All properties accessible with correct structure",
                          "test": {
                            "method": "test_behavior_provides_access_to_all_config_properties",
                            "file": "invoke_bot/initialize_bot/test_load_bot_behavior_and_actions.py",
                            "line": 123
                          }
                        }
                      ],
                      "acceptance_criteria": [],
                      "behavior": null
                    },
                    {
                      "name": "Load Actions",
                      "sequential_order": 5.0,
                      "connector": "or",
                      "story_type": "user",
                      "users": [
                        "Bot Behavior"
                      ],
                      "test_class": "TestLoadActions",
                      "scenarios": [
                        {
                          "name": "Actions are loaded and available.",
                          "sequential_order": 1.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_load_actions_from_behavior_config",
                          "steps": "",
                          "test": {
                            "method": "test_load_actions_from_behavior_config",
                            "file": "invoke_bot/initialize_bot/test_load_bot_behavior_and_actions.py",
                            "line": 145
                          }
                        },
                        {
                          "name": "When actions are loaded, first action is set as current.",
                          "sequential_order": 2.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_load_actions_sets_first_as_current",
                          "steps": "",
                          "test": {
                            "method": "test_load_actions_sets_first_as_current",
                            "file": "invoke_bot/initialize_bot/test_load_bot_behavior_and_actions.py",
                            "line": 164
                          }
                        },
                        {
                          "name": "Action merges instructions from BaseActionConfig and Behavior config.",
                          "sequential_order": 3.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_action_merges_instructions_from_base_and_behavior",
                          "steps": "",
                          "test": {
                            "method": "test_action_merges_instructions_from_base_and_behavior",
                            "file": "invoke_bot/initialize_bot/test_load_bot_behavior_and_actions.py",
                            "line": 170
                          }
                        }
                      ],
                      "acceptance_criteria": [],
                      "behavior": null
                    },
                    {
                      "name": "Load Bot Behaviors Using CLI",
                      "sequential_order": 7.0,
                      "connector": null,
                      "story_type": "user",
                      "users": [
                        "User"
                      ],
                      "test_class": "TestLoadBotBehaviorsUsingCLI",
                      "scenarios": [
                        {
                          "name": "CLI session loads behaviors from bot config",
                          "sequential_order": 1.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_cli_session_loads_behaviors_from_config",
                          "steps": "GIVEN: CLI session initialized\nWHEN: Behaviors accessed\nTHEN: All behaviors loaded correctly",
                          "test": {
                            "method": "test_cli_session_loads_behaviors_from_config",
                            "file": "invoke_bot/initialize_bot/test_load_bot_behavior_and_actions.py",
                            "line": 500
                          }
                        },
                        {
                          "name": "CLI session sets first behavior as current",
                          "sequential_order": 2.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_cli_session_sets_first_behavior_as_current",
                          "steps": "GIVEN: CLI session initialized\nWHEN: Current behavior accessed\nTHEN: First behavior is current",
                          "test": {
                            "method": "test_cli_session_sets_first_behavior_as_current",
                            "file": "invoke_bot/initialize_bot/test_load_bot_behavior_and_actions.py",
                            "line": 521
                          }
                        },
                        {
                          "name": "Behavior config properties accessible via CLI session",
                          "sequential_order": 3.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_cli_session_behavior_config_properties_accessible",
                          "steps": "GIVEN: CLI session at prioritization behavior\nWHEN: Behavior config properties accessed\nTHEN: All properties accessible with correct structure",
                          "test": {
                            "method": "test_cli_session_behavior_config_properties_accessible",
                            "file": "invoke_bot/initialize_bot/test_load_bot_behavior_and_actions.py",
                            "line": 542
                          }
                        }
                      ],
                      "acceptance_criteria": [],
                      "behavior": null
                    },
                    {
                      "name": "Load Actions Using CLI",
                      "sequential_order": 8.0,
                      "connector": null,
                      "story_type": "user",
                      "users": [
                        "User"
                      ],
                      "test_class": "TestLoadActionsUsingCLI",
                      "scenarios": [
                        {
                          "name": "CLI session loads actions from behavior config",
                          "sequential_order": 1.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_cli_session_loads_actions_from_behavior_config",
                          "steps": "GIVEN: CLI session at shape behavior\nWHEN: Actions accessed\nTHEN: All actions loaded correctly",
                          "test": {
                            "method": "test_cli_session_loads_actions_from_behavior_config",
                            "file": "invoke_bot/initialize_bot/test_load_bot_behavior_and_actions.py",
                            "line": 587
                          }
                        },
                        {
                          "name": "CLI session sets first action as current",
                          "sequential_order": 2.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_cli_session_sets_first_action_as_current",
                          "steps": "GIVEN: CLI session at shape behavior\nWHEN: Current action accessed\nTHEN: First action is current",
                          "test": {
                            "method": "test_cli_session_sets_first_action_as_current",
                            "file": "invoke_bot/initialize_bot/test_load_bot_behavior_and_actions.py",
                            "line": 615
                          }
                        },
                        {
                          "name": "Action instructions accessible via CLI session",
                          "sequential_order": 3.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_cli_session_action_instructions_accessible",
                          "steps": "GIVEN: CLI session at shape.clarify\nWHEN: Action instructions accessed\nTHEN: Merged instructions from base and behavior available",
                          "test": {
                            "method": "test_cli_session_action_instructions_accessible",
                            "file": "invoke_bot/initialize_bot/test_load_bot_behavior_and_actions.py",
                            "line": 639
                          }
                        }
                      ],
                      "acceptance_criteria": [],
                      "behavior": null
                    }
                  ]
                }
              ]
            },
            {
              "name": "Render Bot Interface",
              "sequential_order": 2.0,
              "behavior": null,
              "domain_concepts": [
                {
                  "name": "BotView",
                  "responsibilities": [
                    {
                      "name": "Wraps bot JSON",
                      "collaborators": [
                        "Bot JSON"
                      ]
                    },
                    {
                      "name": "Displays BotHeaderView",
                      "collaborators": [
                        "BotHeaderView"
                      ]
                    },
                    {
                      "name": "Displays PathsSection",
                      "collaborators": [
                        "PathsSection"
                      ]
                    },
                    {
                      "name": "Displays BehaviorsView",
                      "collaborators": [
                        "BehaviorsView"
                      ]
                    },
                    {
                      "name": "Displays ScopeSection",
                      "collaborators": [
                        "ScopeSection"
                      ]
                    },
                    {
                      "name": "Displays InstructionsSection",
                      "collaborators": [
                        "InstructionsSection"
                      ]
                    }
                  ],
                  "module": "bot",
                  "inherits_from": "PanelView",
                  "_source_path": "Invoke Bot.Invoke Bot Directly"
                },
                {
                  "name": "BotHeaderView",
                  "responsibilities": [
                    {
                      "name": "Wraps bot JSON",
                      "collaborators": [
                        "Bot JSON"
                      ]
                    },
                    {
                      "name": "Displays image",
                      "collaborators": [
                        "Image"
                      ]
                    },
                    {
                      "name": "Displays title",
                      "collaborators": [
                        "String",
                        "Bot JSON"
                      ]
                    },
                    {
                      "name": "Displays version number",
                      "collaborators": [
                        "String",
                        "Bot JSON"
                      ]
                    },
                    {
                      "name": "Refreshes panel",
                      "collaborators": [
                        "CLI"
                      ]
                    }
                  ],
                  "module": "bot",
                  "inherits_from": "PanelView",
                  "_source_path": "Invoke Bot.Invoke Bot Directly"
                },
                {
                  "name": "PathsSection",
                  "responsibilities": [
                    {
                      "name": "Wraps bot paths JSON",
                      "collaborators": [
                        "BotPaths JSON"
                      ]
                    },
                    {
                      "name": "Displays bot directory",
                      "collaborators": [
                        "String",
                        "BotPaths JSON"
                      ]
                    },
                    {
                      "name": "Edits workspace directory",
                      "collaborators": [
                        "CLI",
                        "BotPaths JSON"
                      ]
                    },
                    {
                      "name": "Displays available bots",
                      "collaborators": [
                        "AvailableBotsView"
                      ]
                    }
                  ],
                  "module": "bot",
                  "inherits_from": "SectionView",
                  "_source_path": "Invoke Bot.Invoke Bot Directly"
                },
                {
                  "name": "AvailableBotsView",
                  "responsibilities": [
                    {
                      "name": "Wraps bot registry JSON",
                      "collaborators": [
                        "BotRegistry JSON"
                      ]
                    },
                    {
                      "name": "Displays available bots",
                      "collaborators": [
                        "List",
                        "BotRegistry JSON"
                      ]
                    },
                    {
                      "name": "Selects bot",
                      "collaborators": [
                        "CLI",
                        "Bot"
                      ]
                    }
                  ],
                  "module": "bot",
                  "inherits_from": "PanelView",
                  "_source_path": "Invoke Bot.Invoke Bot Directly"
                },
                {
                  "name": "BehaviorsView",
                  "responsibilities": [
                    {
                      "name": "Wraps behaviors JSON",
                      "collaborators": [
                        "Behaviors JSON"
                      ]
                    },
                    {
                      "name": "Displays behavior names list",
                      "collaborators": [
                        "List",
                        "Behavior JSON"
                      ]
                    },
                    {
                      "name": "Navigates to behavior",
                      "collaborators": [
                        "CLI",
                        "Behavior"
                      ]
                    },
                    {
                      "name": "Toggles collapsed",
                      "collaborators": [
                        "State",
                        "Behavior JSON"
                      ]
                    },
                    {
                      "name": "Displays tooltip",
                      "collaborators": [
                        "String",
                        "Behavior JSON"
                      ]
                    },
                    {
                      "name": "Displays actions",
                      "collaborators": [
                        "ActionsView"
                      ]
                    },
                    {
                      "name": "Executes behavior",
                      "collaborators": [
                        "CLI",
                        "Behavior"
                      ]
                    },
                    {
                      "name": "Displays completion progress",
                      "collaborators": [
                        "Status",
                        "Behavior JSON"
                      ]
                    },
                    {
                      "name": "Displays navigation",
                      "collaborators": [
                        "NavigationView"
                      ]
                    }
                  ],
                  "realization": [
                    {
                      "scope": "Invoke Bot Through Panel.Navigate Behavior Action Status.Display Hierarchy",
                      "scenario": "Panel displays behavior hierarchy with actions, user expands/collapses behaviors (instant), completion status from JSON",
                      "walks": [
                        {
                          "covers": "Rendering behavior hierarchy from JSON",
                          "object_flow": [
                            "this.behaviorsJSON = behaviorsJSON",
                            "this.cliClient = cliClient",
                            "html: String = this.render()",
                            "  -> behaviorsHTML: String = this.render_all_behaviors()",
                            "     -> behaviorView: BehaviorView = new BehaviorView(behavior, this.cliClient)",
                            "     -> behaviorHTML: String = behaviorView.render()",
                            "        -> name: String = this.behaviorJSON.name",
                            "        -> status: String = this.behaviorJSON.status",
                            "        -> actionsHTML: String = actionsView.render_all_actions()",
                            "           return actionsHTML: \"<div>gather_context [completed]</div>...\"",
                            "        return `<div class='behavior ${status}'>${name}${actionsHTML}</div>`",
                            "     return behaviorsHTML: \"<div class='behavior current'>discover...</div>\"",
                            "return behaviorsHTML"
                          ]
                        },
                        {
                          "covers": "User expands behavior (client-side toggle)",
                          "object_flow": [
                            "BehaviorView.onToggleClick()",
                            "  -> this.expanded = !this.expanded",
                            "  -> elementHTML: String = this.render()",
                            "  -> document.getElementById(this.elementId).innerHTML = elementHTML",
                            "return"
                          ]
                        }
                      ],
                      "model_updates": []
                    },
                    {
                      "scope": "Invoke Bot Through Panel.Navigate Behavior Action Status.Execute Behavior Action",
                      "scenario": "User clicks behavior to execute, system navigates to behavior and executes first action via CLI",
                      "walks": [
                        {
                          "covers": "User executes behavior via CLI",
                          "object_flow": [
                            "BehaviorView.onExecuteClick()",
                            "  -> behaviorName: String = this.behaviorJSON.name",
                            "  -> result: JSON = this.cliClient.execute(behaviorName)",
                            "     -> cli:  = spawn('python', ['repl_main.py'])",
                            "     -> stdin.write(behaviorName)",
                            "     -> REPLSession.handle_command(behaviorName)",
                            "        -> botResult: BotResult = this.bot.execute_behavior(behaviorName)",
                            "           -> isValid: Boolean = this.validate_behavior_exists(behaviorName)",
                            "              return True",
                            "           -> behavior: Behavior = this.behaviors.get(behaviorName)",
                            "           -> action: Action = behavior.get_current_action()",
                            "           -> result: ActionResult = action.execute()",
                            "           -> this.track_activity(behavior, action)",
                            "           return botResult: {behavior: behaviorName, action: action.name, status: 'in_progress'}",
                            "        -> output: String = this.adapter.serialize(botResult)",
                            "        -> print(output)",
                            "     return statusJSON",
                            "  -> panel.update(result)",
                            "     -> this.behaviorsJSON = result.behaviors",
                            "     -> html: String = behaviorsSection.render()",
                            "     -> webview.postMessage({update: 'behaviors', html: html})",
                            "return"
                          ]
                        }
                      ],
                      "model_updates": []
                    }
                  ],
                  "module": "behaviors",
                  "inherits_from": "SectionView",
                  "_source_path": "Invoke Bot.Invoke Bot Directly"
                },
                {
                  "name": "ActionsView",
                  "responsibilities": [
                    {
                      "name": "Wraps actions JSON",
                      "collaborators": [
                        "Actions JSON"
                      ]
                    },
                    {
                      "name": "Displays action names list",
                      "collaborators": [
                        "List",
                        "Action JSON"
                      ]
                    },
                    {
                      "name": "Navigates to action",
                      "collaborators": [
                        "CLI",
                        "Action"
                      ]
                    },
                    {
                      "name": "Displays status indicators",
                      "collaborators": [
                        "Status",
                        "Action JSON"
                      ]
                    },
                    {
                      "name": "Executes action",
                      "collaborators": [
                        "CLI",
                        "Action"
                      ]
                    },
                    {
                      "name": "Displays completion progress",
                      "collaborators": [
                        "Progress",
                        "Action JSON"
                      ]
                    }
                  ],
                  "module": "actions",
                  "inherits_from": "PanelView",
                  "_source_path": "Invoke Bot.Invoke Bot Directly"
                },
                {
                  "name": "PanelView (Base)",
                  "responsibilities": [
                    {
                      "name": "Wraps JSON data",
                      "collaborators": [
                        "JSON"
                      ]
                    },
                    {
                      "name": "Spawns subprocess",
                      "collaborators": [
                        "CLI",
                        "Python Process"
                      ]
                    },
                    {
                      "name": "Sends command to CLI",
                      "collaborators": [
                        "Command",
                        "Stdin"
                      ]
                    },
                    {
                      "name": "Receives JSON from CLI",
                      "collaborators": [
                        "Stdout"
                      ]
                    },
                    {
                      "name": "Parses JSON",
                      "collaborators": [
                        "String",
                        "Dict"
                      ]
                    },
                    {
                      "name": "Provides element ID",
                      "collaborators": [
                        "String"
                      ]
                    },
                    {
                      "name": "Renders to HTML",
                      "collaborators": [
                        "HTML",
                        "JSON"
                      ]
                    }
                  ],
                  "realization": [
                    {
                      "scope": "Invoke Bot Through Panel.Manage Bot Information.Open Panel",
                      "scenario": "User activates panel command, extension creates panel and displays bot information by calling Python CLI, wrapping JSON response, and rendering all sections",
                      "walks": [
                        {
                          "covers": "Extension activation and panel creation",
                          "object_flow": [
                            "panelData: JSON = CLI.execute('status')",
                            "  -> cli:  = spawn('python', ['repl_main.py'])",
                            "  -> main()",
                            "     -> bot: Bot = load_bot()",
                            "     -> session: REPLSession = REPLSession(bot)",
                            "        -> this.bot = bot",
                            "        -> this.adapter: ChannelAdapter = this.determine_channel_adapter()",
                            "           return adapter: JSONBotAdapter",
                            "     -> session.run()",
                            "  -> stdin.write('status')",
                            "  -> REPLSession.read_and_execute_command('status')",
                            "     -> response: REPLCommandResponse = this.route_to_command_handler('status')",
                            "        -> handler: Method = this.get_handler_for_verb('status')",
                            "           return handler",
                            "        -> response: REPLCommandResponse = handler()",
                            "        -> jsonString: String = this.serialize()",
                            "           return jsonString: \"{name: 'story_bot', workspace: 'base_bot', behaviors: [...], paths: {...}}\"",
                            "        return output: \"{...json...}\"",
                            "     -> print(output)",
                            "  -> stdout: String = cli.stdout.read()",
                            "  -> panelData: JSON = JSON.parse(stdout)",
                            "return panelData",
                            "panel: Panel = new Panel(panelData, cliClient)",
                            "return panel"
                          ]
                        },
                        {
                          "covers": "Panel constructor and section rendering",
                          "object_flow": [
                            "this.botJSON = panelData",
                            "this.cliClient = cliClient",
                            "headerView: BotHeaderView = new BotHeaderView(this.botJSON, this.cliClient)",
                            "pathsSection: PathsSection = new PathsSection(this.botJSON.paths, this.cliClient)",
                            "behaviorsSection: BehaviorsSection = new PathsSection(this.botJSON.behaviors, this.cliClient)",
                            "scopeSection: ScopeSection = new ScopeSection(this.botJSON.scope, this.cliClient)",
                            "instructionsSection: InstructionsSection = new InstructionsSection(this.botJSON.instructions, this.cliClient)",
                            "html: String = this.render()",
                            "  -> headerHTML: String = headerView.render()",
                            "     return `<div>${this.botJSON.name} v${this.botJSON.version}</div>`",
                            "  -> pathsHTML: String = pathsSection.render()",
                            "     return `<div>${this.botJSON.paths.workspace}</div>`",
                            "  -> behaviorsHTML: String = behaviorsSection.render()",
                            "  -> scopeHTML: String = scopeSection.render()",
                            "  -> instructionsHTML: String = instructionsSection.render()",
                            "return html",
                            "webview.html = html"
                          ]
                        }
                      ],
                      "model_updates": []
                    },
                    {
                      "scope": "Invoke Bot Through Panel.Manage Bot Information.Refresh Panel",
                      "scenario": "User clicks refresh button, panel calls CLI to get updated status, wraps new JSON, and re-renders all sections",
                      "walks": [
                        {
                          "covers": "User refresh action and CLI round-trip",
                          "object_flow": [
                            "BotHeaderView.onRefreshClick()",
                            "  -> newData: JSON = this.cliClient.execute('status')",
                            "     -> cli.stdin.write('status')",
                            "     -> REPLSession.handle_command('status')",
                            "        -> output: String = this.adapter.serialize()",
                            "           return jsonString: \"{...}\"",
                            "        -> print(output)",
                            "     -> stdout: String = cli.stdout.read()",
                            "     -> newData: JSON = JSON.parse(stdout)",
                            "     return newData",
                            "  -> this.botJSON = newData",
                            "  -> panel.update(newData)",
                            "     -> this.botJSON = newData",
                            "     -> html: String = this.render()",
                            "     -> webview.html = html",
                            "return success"
                          ]
                        }
                      ],
                      "model_updates": []
                    }
                  ],
                  "module": "panel",
                  "_source_path": "Invoke Bot.Invoke Bot Through Panel"
                },
                {
                  "name": "SectionView",
                  "responsibilities": [
                    {
                      "name": "Renders section header",
                      "collaborators": [
                        "PanelHeader"
                      ]
                    },
                    {
                      "name": "Toggles collapsed state",
                      "collaborators": [
                        "State"
                      ]
                    },
                    {
                      "name": "May contain subsections",
                      "collaborators": [
                        "SubSectionView"
                      ]
                    }
                  ],
                  "module": "panel",
                  "inherits_from": "PanelView (Base)",
                  "_source_path": "Invoke Bot.Invoke Bot Through Panel"
                },
                {
                  "name": "SubSectionView",
                  "responsibilities": [
                    {
                      "name": "Toggles collapsed state",
                      "collaborators": [
                        "State"
                      ]
                    }
                  ],
                  "module": "panel",
                  "inherits_from": "PanelView",
                  "_source_path": "Invoke Bot.Invoke Bot Through Panel"
                },
                {
                  "name": "PanelHeader",
                  "responsibilities": [
                    {
                      "name": "Displays header image",
                      "collaborators": [
                        "Image"
                      ]
                    },
                    {
                      "name": "Displays title",
                      "collaborators": [
                        "String"
                      ]
                    }
                  ],
                  "module": "panel",
                  "_source_path": "Invoke Bot.Invoke Bot Through Panel"
                },
                {
                  "name": "ValidationMessageDisplay",
                  "responsibilities": [
                    {
                      "name": "Shows warning message",
                      "collaborators": [
                        "Message Text",
                        "DOM Element"
                      ]
                    },
                    {
                      "name": "Hides message",
                      "collaborators": [
                        "DOM Element"
                      ]
                    },
                    {
                      "name": "Applies message styling",
                      "collaborators": [
                        "CSS Class",
                        "Message Type"
                      ]
                    }
                  ],
                  "module": "story_graph.nodes",
                  "_source_path": "Invoke Bot.Invoke Bot Through Panel",
                  "instantiated_with": []
                },
                {
                  "name": "ConfirmationDialog",
                  "responsibilities": [
                    {
                      "name": "Shows confirmation inline",
                      "collaborators": [
                        "Message",
                        "DOM Element"
                      ]
                    },
                    {
                      "name": "Shows confirm and cancel buttons",
                      "collaborators": [
                        "Button Set"
                      ]
                    },
                    {
                      "name": "Invokes callback on confirm",
                      "collaborators": [
                        "Callback Function"
                      ]
                    },
                    {
                      "name": "Hides confirmation on cancel",
                      "collaborators": [
                        "DOM Element"
                      ]
                    }
                  ],
                  "module": "panel",
                  "_source_path": "Invoke Bot.Invoke Bot Through Panel",
                  "instantiated_with": [
                    "Message",
                    "Callback"
                  ]
                }
              ],
              "test_file": "invoke_bot/initialize_bot/test_render_bot_interface.py",
              "sub_epics": [],
              "story_groups": [
                {
                  "name": "",
                  "sequential_order": 0.0,
                  "type": "and",
                  "connector": null,
                  "behavior": null,
                  "stories": [
                    {
                      "name": "Display CLI Header",
                      "sequential_order": 0.0,
                      "connector": null,
                      "story_type": "system",
                      "users": [
                        "CLI"
                      ],
                      "test_class": "TestViewSessionHeader",
                      "scenarios": [
                        {
                          "name": "CLI displays CLI STATUS section header when status command is run",
                          "sequential_order": 1.0,
                          "type": "",
                          "background": [],
                          "test_method": "test_cli_displays_cli_status_section_header_when_status_command_is_run",
                          "steps": "Given: CLI is initialized\nWhen: user enters 'status' command\nThen: CLI displays CLI STATUS section header\nAND: CLI shows section separator line\nAND: CLI shows '*** CLI STATUS section ***' header text\nAND: CLI shows description text explaining what the section contains\nAND: CLI shows warning text: 'You MUST DISPLAY this entire section in your response to the user exactly as you see it'\nAND: CLI shows subsection separator\nAND: CLI shows section separator after header"
                        },
                        {
                          "name": "CLI displays bot name with robot emoji in header",
                          "sequential_order": 2.0,
                          "type": "",
                          "background": [],
                          "test_method": "test_cli_displays_bot_name_with_robot_emoji_in_header",
                          "steps": "Given CLI is initialized with story_bot\nAnd CLI is in piped mode\nWhen CLI renders the dashboard header\nThen output contains heading with robot emoji and bot name\nAnd output shows Bot: story_bot"
                        },
                        {
                          "name": "CLI displays bot path in code block",
                          "sequential_order": 3.0,
                          "type": "",
                          "background": [],
                          "test_method": "test_cli_displays_bot_path_in_code_block",
                          "steps": "Given CLI is initialized with story_bot at path C:/dev/augmented-teams/agile_bot/bots/story_bot\nWhen CLI renders the dashboard header\nThen output contains '**Bot Path:**' label\nAnd output shows code block with three backticks\nAnd output shows the full bot directory path: 'C:\\dev\\augmented-teams\\agile_bot\\bots\\story_bot'\nAnd output closes code block with three backticks"
                        },
                        {
                          "name": "CLI displays workspace name and path",
                          "sequential_order": 4.0,
                          "type": "",
                          "background": [],
                          "test_method": "test_cli_displays_workspace_name_and_path",
                          "steps": "Given CLI is initialized with workspace base_bot\nAnd workspace path is C:/dev/augmented-teams/agile_bot/bots/base_bot\nWhen CLI renders the dashboard header\nThen output contains 'ÃƒÂ°Ã…Â¸Ã¢â‚¬Å“Ã¢â‚¬Å¡ **Workspace:** base_bot' with folder emoji\nAnd output shows code block with three backticks\nAnd output shows full workspace path: 'C:\\dev\\augmented-teams\\agile_bot\\bots\\base_bot'\nAnd output closes code block with three backticks"
                        },
                        {
                          "name": "CLI displays path change instructions",
                          "sequential_order": 5.0,
                          "type": "",
                          "background": [],
                          "test_method": "test_cli_displays_path_change_instructions",
                          "steps": "Given CLI is in piped mode\nWhen CLI renders the dashboard header\nThen output contains 'To change path:' label\nAnd output shows code block with three backticks\nAnd output shows path command example: 'path demo/mob_minion              # Change to specific project'\nAnd output shows path command example: 'path ../another_bot               # Change to relative path'\nAnd output closes code block with three backticks"
                        },
                        {
                          "name": "CLI applies separator after header section",
                          "sequential_order": 6.0,
                          "type": "",
                          "background": [],
                          "test_method": "test_cli_applies_separator_after_header_section",
                          "steps": "Given CLI is in piped mode\nWhen CLI renders the dashboard header\nThen output ends with horizontal separator line (subsection separator)"
                        },
                        {
                          "name": "CLI displays headless mode section when configured",
                          "sequential_order": 7.0,
                          "type": "",
                          "background": [],
                          "test_method": "test_cli_displays_headless_mode_section_when_configured",
                          "steps": "Given: Headless mode is configured with API key\nWhen: CLI renders status display\nThen: CLI displays 'Headless Mode:' label\nAND: CLI shows 'Status: Available (configured)'\nAND: CLI shows API key prefix\nAND: CLI shows Usage section with headless command format\nAND: CLI shows Examples section with headless command examples\nAND: CLI applies subsection separator after headless section"
                        },
                        {
                          "name": "CLI displays active headless session when running",
                          "sequential_order": 8.0,
                          "type": "",
                          "background": [],
                          "test_method": "test_cli_displays_active_headless_session_when_running",
                          "steps": "Given: Headless mode is configured\nAND: Active headless session is running\nWhen: CLI renders status display\nThen: CLI displays 'Active Session:' section\nAND: CLI shows Session ID\nAND: CLI shows session Status (running)\nAND: CLI shows Log file path"
                        },
                        {
                          "name": "CLI displays headless mode unavailable when not configured",
                          "sequential_order": 9.0,
                          "type": "",
                          "background": [],
                          "test_method": "test_cli_displays_headless_mode_unavailable_when_not_configured",
                          "steps": "Given: Headless mode is not configured\nWhen: CLI renders status display\nThen: CLI displays 'Headless Mode:' label\nAND: CLI shows 'Status: Unavailable (not configured)'\nAND: CLI shows configuration instructions"
                        }
                      ],
                      "acceptance_criteria": [
                        {
                          "name": "WHEN CLI displays status\nTHEN CLI shows header with bot name AND workspace path",
                          "text": "WHEN CLI displays status\nTHEN CLI shows header with bot name AND workspace path",
                          "sequential_order": 1.0
                        },
                        {
                          "name": "WHEN displaying header in terminal mode\nTHEN CLI uses plain text formatting",
                          "text": "WHEN displaying header in terminal mode\nTHEN CLI uses plain text formatting",
                          "sequential_order": 2.0
                        },
                        {
                          "name": "WHEN displaying header in piped mode\nTHEN CLI uses markdown formatting",
                          "text": "WHEN displaying header in piped mode\nTHEN CLI uses markdown formatting",
                          "sequential_order": 3.0
                        },
                        {
                          "name": "WHEN header is displayed\nTHEN CLI includes separator line after header",
                          "text": "WHEN header is displayed\nTHEN CLI includes separator line after header",
                          "sequential_order": 4.0
                        }
                      ],
                      "behavior": null
                    },
                    {
                      "name": "Display CLI Bot Command in Navigation Menu Footer",
                      "sequential_order": 1.0,
                      "connector": "and",
                      "story_type": "system",
                      "users": [
                        "CLI"
                      ],
                      "test_class": "TestDisplayCLIBotCommandInNavigationMenuFooter",
                      "scenarios": [
                        {
                          "name": "CLI displays bot command in footer",
                          "sequential_order": 1.0,
                          "type": "",
                          "background": [],
                          "test_method": "test_cli_displays_bot_command_in_footer",
                          "steps": "Given: CLI displays footer\nWhen: CLI renders footer\nThen: CLI shows available navigation commands"
                        }
                      ],
                      "acceptance_criteria": [
                        {
                          "name": "WHEN CLI displays footer\nTHEN CLI shows available navigation commands",
                          "text": "WHEN CLI displays footer\nTHEN CLI shows available navigation commands",
                          "sequential_order": 1.0
                        },
                        {
                          "name": "WHEN displaying footer\nTHEN CLI shows command syntax for navigation and actions",
                          "text": "WHEN displaying footer\nTHEN CLI shows command syntax for navigation and actions",
                          "sequential_order": 2.0
                        },
                        {
                          "name": "WHEN displaying footer\nTHEN CLI includes examples of dot notation commands",
                          "text": "WHEN displaying footer\nTHEN CLI includes examples of dot notation commands",
                          "sequential_order": 3.0
                        },
                        {
                          "name": "WHEN displaying commands\nTHEN CLI shows behavior.action.operation format examples",
                          "text": "WHEN displaying commands\nTHEN CLI shows behavior.action.operation format examples",
                          "sequential_order": 4.0
                        }
                      ],
                      "behavior": null
                    },
                    {
                      "name": "Display Piped Mode Instructions for AI Agents",
                      "sequential_order": 2.0,
                      "connector": "and",
                      "story_type": "system",
                      "users": [
                        "CLI"
                      ],
                      "test_class": "TestDisplayPipedModeInstructionsForAIAgents",
                      "scenarios": [
                        {
                          "name": "CLI displays piped mode instructions in pipe mode",
                          "sequential_order": 1.0,
                          "type": "",
                          "background": [],
                          "test_method": "test_cli_displays_piped_mode_instructions_in_pipe_mode",
                          "steps": "GIVEN: REPLSession detects piped input\nWHEN: CLI initializes\nTHEN: CLI displays piped mode instructions header"
                        },
                        {
                          "name": "CLI omits piped mode instructions in interactive mode",
                          "sequential_order": 2.0,
                          "type": "",
                          "background": [],
                          "test_method": "test_cli_omits_piped_mode_instructions_in_interactive_mode",
                          "steps": "GIVEN: REPLSession detects interactive TTY\nWHEN: CLI initializes\nTHEN: CLI does not display piped mode instructions"
                        }
                      ],
                      "acceptance_criteria": [],
                      "behavior": null
                    },
                    {
                      "name": "Display Headless Mode Status in CLI",
                      "sequential_order": 3.0,
                      "connector": "and",
                      "story_type": "system",
                      "users": [
                        "CLI"
                      ],
                      "test_class": "TestViewHeadlessModeStatus",
                      "scenarios": [
                        {
                          "name": "CLI displays headless mode section when configured",
                          "sequential_order": 1.0,
                          "type": "",
                          "background": [],
                          "test_method": "test_cli_displays_headless_mode_section_when_configured",
                          "steps": "Given: CLI is initialized\nAnd: headless mode is configured with API key\nWhen: user enters 'status'\nThen: CLI displays headless mode section\nAND: CLI shows 'Headless Mode:' label\nAND: CLI shows 'Status: Available (configured)'\nAND: CLI shows 'API Key: key_2780b8...' (masked)\nAND: CLI shows 'Usage:' section with headless command format\nAND: CLI shows 'Examples:' section with example commands\nAND: CLI shows subsection separator after headless mode section"
                        },
                        {
                          "name": "CLI displays active headless session when running",
                          "sequential_order": 2.0,
                          "type": "",
                          "background": [],
                          "test_method": "test_cli_displays_active_headless_session_when_running",
                          "steps": "Given: CLI is initialized\nAnd: headless mode is configured\nAnd: active headless session is running\nWhen: user enters 'status'\nThen: CLI displays 'Active Session:' section\nAND: CLI shows 'Session ID: 2025-12-30-01-31-17'\nAND: CLI shows 'Status: running'\nAND: CLI shows 'Log:' with log file path"
                        }
                      ],
                      "acceptance_criteria": [
                        {
                          "name": "WHEN CLI displays status\nTHEN CLI shows headless mode section",
                          "text": "WHEN CLI displays status\nTHEN CLI shows headless mode section",
                          "sequential_order": 1.0
                        },
                        {
                          "name": "WHEN headless mode is configured\nTHEN CLI shows headless mode status as Available\nAND: CLI shows configured API key prefix\nAND: CLI shows usage examples\nAND: CLI shows command examples",
                          "text": "WHEN headless mode is configured\nTHEN CLI shows headless mode status as Available\nAND: CLI shows configured API key prefix\nAND: CLI shows usage examples\nAND: CLI shows command examples",
                          "sequential_order": 2.0
                        },
                        {
                          "name": "WHEN headless mode is not configured\nTHEN CLI shows headless mode status as unavailable",
                          "text": "WHEN headless mode is not configured\nTHEN CLI shows headless mode status as unavailable",
                          "sequential_order": 3.0
                        },
                        {
                          "name": "WHEN active headless session exists\nTHEN CLI shows active session section\nAND: CLI shows session ID\nAND: CLI shows session status\nAND: CLI shows log file path",
                          "text": "WHEN active headless session exists\nTHEN CLI shows active session section\nAND: CLI shows session ID\nAND: CLI shows session status\nAND: CLI shows log file path",
                          "sequential_order": 4.0
                        }
                      ],
                      "behavior": null
                    },
                    {
                      "name": "Display Session Status panel",
                      "sequential_order": 4.0,
                      "connector": "and",
                      "story_type": "user",
                      "users": [
                        "User"
                      ],
                      "test_class": "TestDisplaySessionStatus",
                      "scenarios": [
                        {
                          "name": "",
                          "sequential_order": 1.0,
                          "type": "",
                          "background": [],
                          "test_method": null,
                          "steps": "Given Panel is open displaying current bot status\nAnd Bot state has changed since panel was opened\nWhen User clicks refresh button\nThen Panel displays updated bot name\nAnd Panel displays updated workspace path\nAnd Panel displays updated behavior action section\nAnd Panel displays updated scope\nAnd Panel displays updated instructions"
                        },
                        {
                          "name": "",
                          "sequential_order": 2.0,
                          "type": "",
                          "background": [],
                          "test_method": null,
                          "steps": "Given Bot is at behavior shape and action clarify\nWhen Panel opens\nThen Panel displays current bot name\nAnd Panel displays current workspace path\nAnd Panel displays shape.clarify as current action"
                        }
                      ],
                      "acceptance_criteria": [
                        {
                          "name": "WHEN User clicks refresh button\nTHEN System displays bot name AND System displays updated workspace path AND System displays updated bot path AND System displays updated available botss AND System displays updated behavior action section AND System displays updated scope section AND System displays updated instructions section",
                          "text": "WHEN User clicks refresh button\nTHEN System displays bot name AND System displays updated workspace path AND System displays updated bot path AND System displays updated available botss AND System displays updated behavior action section AND System displays updated scope section AND System displays updated instructions section",
                          "sequential_order": 1.0
                        }
                      ],
                      "behavior": null
                    },
                    {
                      "name": "Toggle Panel Section",
                      "sequential_order": 5.0,
                      "connector": "and",
                      "story_type": "user",
                      "users": [
                        "User"
                      ],
                      "test_class": "TestTogglePanelSection",
                      "scenarios": [
                        {
                          "name": "",
                          "sequential_order": 1.0,
                          "type": "",
                          "background": [],
                          "test_method": null,
                          "steps": "Given Panel is open with behaviors section collapsed\nWhen User clicks behaviors section header\nThen Behaviors section expands\nAnd User sees behavior tree content"
                        },
                        {
                          "name": "",
                          "sequential_order": 2.0,
                          "type": "",
                          "background": [],
                          "test_method": null,
                          "steps": "Given Panel is open with instructions section expanded\nWhen User clicks instructions section header\nThen Instructions section collapses\nAnd User no longer sees instructions content"
                        }
                      ],
                      "acceptance_criteria": [
                        {
                          "name": "WHEN User clicks section header\nTHEN System expands or collapses section",
                          "text": "WHEN User clicks section header\nTHEN System expands or collapses section",
                          "sequential_order": 1.0
                        }
                      ],
                      "behavior": null
                    },
                    {
                      "name": "Detect CLI Mode",
                      "sequential_order": 0.0,
                      "connector": null,
                      "story_type": "user",
                      "users": [
                        "User"
                      ],
                      "test_class": "TestDetectCLIMode",
                      "scenarios": [
                        {
                          "name": "CLI detects TTY mode",
                          "sequential_order": 1.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_cli_detects_tty_mode",
                          "steps": "GIVEN: stdin/stdout are TTY\nWHEN: CLISession created without explicit mode\nTHEN: Session uses TTY mode"
                        },
                        {
                          "name": "CLI detects pipe mode",
                          "sequential_order": 2.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_cli_detects_pipe_mode",
                          "steps": "GIVEN: stdin/stdout are piped (not TTY)\nWHEN: CLISession created without explicit mode\nTHEN: Session uses markdown mode"
                        },
                        {
                          "name": "CLI accepts JSON mode flag",
                          "sequential_order": 3.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_cli_accepts_json_mode_flag",
                          "steps": "GIVEN: JSON mode explicitly requested\nWHEN: CLISession created with mode='json'\nTHEN: Session uses JSON mode"
                        }
                      ],
                      "acceptance_criteria": [],
                      "behavior": null,
                      "file_link": "C:\\dev\\agile_bots\\docs\\story\\map\\Invoke Bot\\Initialize Bot\\Initialize Bot Interface\\ðŸ“„ Detect CLI Mode.md"
                    },
                    {
                      "name": "Initialize CLI Session",
                      "sequential_order": 1.0,
                      "connector": null,
                      "story_type": "user",
                      "users": [
                        "User"
                      ],
                      "test_class": "TestInitializeCLISession",
                      "scenarios": [
                        {
                          "name": "CLI session initializes bot (all channels)",
                          "sequential_order": 1.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_cli_session_initializes_bot",
                          "steps": "GIVEN: Bot and workspace configured\nWHEN: CLISession is created\nTHEN: Session wraps bot"
                        },
                        {
                          "name": "CLI session loads existing state (all channels)",
                          "sequential_order": 2.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_cli_session_loads_existing_state",
                          "steps": "GIVEN: Bot with saved state\nWHEN: CLISession is created\nTHEN: Bot loads previous state"
                        },
                        {
                          "name": "CLI session can execute commands (all channels)",
                          "sequential_order": 3.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_cli_session_can_execute_commands",
                          "steps": "GIVEN: Initialized CLI session\nWHEN: Command is executed\nTHEN: Session returns response"
                        }
                      ],
                      "acceptance_criteria": [],
                      "behavior": null,
                      "file_link": "C:\\dev\\agile_bots\\docs\\story\\map\\Invoke Bot\\Initialize Bot\\Initialize Bot Interface\\ðŸ“„ Initialize CLI Session.md"
                    },
                    {
                      "name": "Open Panel",
                      "sequential_order": 2.0,
                      "connector": null,
                      "story_type": "user",
                      "users": [
                        "User"
                      ],
                      "test_class": "TestOpenPanel",
                      "scenarios": [
                        {
                          "name": "",
                          "sequential_order": 1.0,
                          "type": "",
                          "background": [],
                          "test_method": "test_user_opens_panel_via_command_palette_happy_path",
                          "steps": "Given VS Code workspace with bot installed\nWhen User executes 'Open Status Panel' command\nThen Panel webview appears\nAnd Panel displays bot name\nAnd Panel displays workspace path\nAnd Panel displays behavior action section\nAnd Panel displays scope section\nAnd Panel displays instructions section"
                        },
                        {
                          "name": "",
                          "sequential_order": 2.0,
                          "type": "",
                          "background": [],
                          "test_method": null,
                          "steps": "Given Panel is already open in VS Code\nWhen User executes 'Open Status Panel' command again\nThen Existing panel is brought to front\nAnd No duplicate panel is created"
                        },
                        {
                          "name": "",
                          "sequential_order": 3.0,
                          "type": "",
                          "background": [],
                          "test_method": null,
                          "steps": "Given VS Code workspace with no bots installed\nWhen User executes 'Open Status Panel' command\nThen Panel displays error message\nAnd Error message indicates no bots found"
                        }
                      ],
                      "acceptance_criteria": [
                        {
                          "name": "WHEN User activates panel command\nTHEN System displays bot name AND System displays workspace path AND System displays bot path AND System displays available botss AND System displays behavior action section AND System displays scope section AND System displays instructions section",
                          "text": "WHEN User activates panel command\nTHEN System displays bot name AND System displays workspace path AND System displays bot path AND System displays available botss AND System displays behavior action section AND System displays scope section AND System displays instructions section",
                          "sequential_order": 1.0
                        },
                        {
                          "name": "Acceptance-criteria1",
                          "text": "Acceptance-criteria1",
                          "sequential_order": 1.0
                        }
                      ],
                      "behavior": null
                    },
                    {
                      "name": "Apply Visual Branding",
                      "sequential_order": 3.0,
                      "connector": "and",
                      "story_type": "user",
                      "users": [
                        "Panel"
                      ],
                      "test_class": null,
                      "scenarios": [
                        {
                          "name": "Panel applies default Agile By Design branding when no config entry exists",
                          "sequential_order": 1.0,
                          "type": "edge",
                          "background": [],
                          "test_method": "test_panel_applies_default_agile_by_design_branding_when_no_config_entry_exists",
                          "steps": "GIVEN: Config file missing OR branding property not set OR repo root not set\nWHEN: Panel initializes with workspace root\nTHEN: Branding module logs warning about missing config\nAND: Branding module returns default ABD settings\nWHEN: Panel generates webview content\nTHEN: Panel injects --bg-base as #000000 (dark background)\nAND: Panel injects --text-color as #FFFFFF\nAND: Panel injects --accent-color as #FF8C00 (orange)\nAND: Panel injects --font-weight-normal as 400\nAND: Panel sets --hover-bg to light overlay for dark background\nWHEN: Header view renders\nTHEN: Header displays 'Agile Bots' as product name\nAND: Header loads images from default img/ directory\nBUT: Panel does not crash or show error"
                        },
                        {
                          "name": "Panel applies Scotia branding when config specifies Scotia brand",
                          "sequential_order": 2.0,
                          "type": "happy",
                          "background": [],
                          "test_method": "test_panel_applies_scotia_branding_when_config_specifies_scotia_brand",
                          "steps": "GIVEN: Config file exists at conf/config.json with branding property set to 'Scotia'\nWHEN: Panel initializes with workspace root\nTHEN: Branding module reads conf/config.json\nAND: Branding module caches config for subsequent calls\nAND: Panel logs 'Scotia' as active branding\nWHEN: Panel generates webview content\nTHEN: Panel injects --bg-base as #FFFFFF (light background)\nAND: Panel injects --text-color as #000000\nAND: Panel injects --accent-color as #EC111A (Scotia red)\nAND: Panel injects --font-weight-normal as 600\nAND: Panel sets --hover-bg to dark overlay for light background\nWHEN: Header view renders\nTHEN: Header displays 'Scotia Bots' as product name\nAND: Header applies Scotia red to title style\nAND: Header loads images from img/scotia/ subdirectory"
                        },
                        {
                          "name": "Panel applies ACE branding when config specifies ACE brand",
                          "sequential_order": 3.0,
                          "type": "happy",
                          "background": [],
                          "test_method": "test_panel_applies_ace_branding_when_config_specifies_ace_brand",
                          "steps": "GIVEN: Config file exists at conf/config.json with branding property set to 'ACE'\nWHEN: Panel initializes with workspace root\nTHEN: Branding module reads conf/config.json\nAND: Panel logs 'ACE' as active branding\nWHEN: Panel generates webview content\nTHEN: Panel injects --bg-base as #1E1E1E (VS Code dark grey)\nAND: Panel injects --text-color as #D4D4D4 (VS Code light grey)\nAND: Panel injects --accent-color as #569CD6 (VS Code blue)\nAND: Panel injects --font-weight-normal as 400\nAND: Panel sets --hover-bg to light overlay for dark background\nWHEN: Header view renders\nTHEN: Header displays 'Agile Context Engine' as product name\nAND: Header applies VS Code blue to title style\nAND: Header loads images from img/ace/ subdirectory"
                        }
                      ],
                      "acceptance_criteria": [
                        {
                          "name": "WHEN Panel initializes\nTHEN Panel loads branding config from conf/config.json",
                          "text": "WHEN Panel initializes\nTHEN Panel loads branding config from conf/config.json",
                          "sequential_order": 1.0
                        },
                        {
                          "name": "WHEN branding property specifies brand name\nTHEN Panel activates that brand's settings",
                          "text": "WHEN branding property specifies brand name\nTHEN Panel activates that brand's settings",
                          "sequential_order": 2.0
                        },
                        {
                          "name": "WHEN Panel generates webview\nTHEN Panel injects CSS variables from brand colors (--bg-base, --text-color, --accent-color, --text-color-faded, --font-weight-normal)",
                          "text": "WHEN Panel generates webview\nTHEN Panel injects CSS variables from brand colors (--bg-base, --text-color, --accent-color, --text-color-faded, --font-weight-normal)",
                          "sequential_order": 3.0
                        },
                        {
                          "name": "WHEN brand has path property\nTHEN Panel loads images from that subdirectory",
                          "text": "WHEN brand has path property\nTHEN Panel loads images from that subdirectory",
                          "sequential_order": 4.0
                        },
                        {
                          "name": "WHEN Header renders\nTHEN Header displays product name from brand title AND applies brand accent color to title",
                          "text": "WHEN Header renders\nTHEN Header displays product name from brand title AND applies brand accent color to title",
                          "sequential_order": 5.0
                        },
                        {
                          "name": "WHEN config file missing\nTHEN Panel uses default ABD branding BUT does not crash",
                          "text": "WHEN config file missing\nTHEN Panel uses default ABD branding BUT does not crash",
                          "sequential_order": 6.0
                        },
                        {
                          "name": "WHEN background is light (#FFFFFF)\nTHEN Panel uses dark overlays for hover states",
                          "text": "WHEN background is light (#FFFFFF)\nTHEN Panel uses dark overlays for hover states",
                          "sequential_order": 7.0
                        },
                        {
                          "name": "WHEN background is dark (#000000)\nTHEN Panel uses light overlays for hover states",
                          "text": "WHEN background is dark (#000000)\nTHEN Panel uses light overlays for hover states",
                          "sequential_order": 8.0
                        },
                        {
                          "name": "WHEN branding loads\nTHEN branding caches config for subsequent calls",
                          "text": "WHEN branding loads\nTHEN branding caches config for subsequent calls",
                          "sequential_order": 9.0
                        }
                      ],
                      "behavior": null,
                      "file_link": "C:\\dev\\agile_bots\\docs\\story\\map\\Invoke Bot\\Initialize Bot\\Initialize Bot Interface\\ðŸ“„ Apply Visual Branding.md"
                    },
                    {
                      "name": "Exit CLI REPL",
                      "sequential_order": 4.0,
                      "connector": "and",
                      "story_type": "user",
                      "users": [
                        "User"
                      ],
                      "test_class": "TestExitREPL",
                      "scenarios": [
                        {
                          "name": "User exits REPL with exit command",
                          "sequential_order": 1.0,
                          "type": "",
                          "background": [],
                          "test_method": "test_user_exits_repl_with_exit_command",
                          "steps": "GIVEN: CLI is running\nWHEN: user enters 'exit'\nTHEN: CLI terminates REPL loop"
                        }
                      ],
                      "acceptance_criteria": [],
                      "behavior": null
                    },
                    {
                      "name": "Auto Refresh State Changing Events",
                      "sequential_order": 6.0,
                      "connector": null,
                      "story_type": "user",
                      "users": [],
                      "test_class": null,
                      "scenarios": [],
                      "acceptance_criteria": [],
                      "behavior": null
                    },
                    {
                      "name": "Display Syncing Message",
                      "sequential_order": 7.0,
                      "connector": null,
                      "story_type": "user",
                      "users": [],
                      "test_class": null,
                      "scenarios": [],
                      "acceptance_criteria": [],
                      "behavior": null
                    },
                    {
                      "name": "Display Bot  Help",
                      "sequential_order": 8.0,
                      "connector": null,
                      "story_type": "user",
                      "users": [],
                      "test_class": null,
                      "scenarios": [],
                      "acceptance_criteria": [],
                      "behavior": null
                    },
                    {
                      "name": "Provide Bot Guidance",
                      "sequential_order": 9.0,
                      "connector": null,
                      "story_type": "user",
                      "users": [],
                      "test_class": null,
                      "scenarios": [],
                      "acceptance_criteria": [],
                      "behavior": null
                    }
                  ]
                }
              ]
            },
            {
              "name": "Load Bot",
              "sequential_order": 4.0,
              "behavior": null,
              "domain_concepts": [],
              "sub_epics": [],
              "story_groups": [
                {
                  "name": "",
                  "sequential_order": 0.0,
                  "type": "and",
                  "connector": null,
                  "behavior": null,
                  "stories": [
                    {
                      "name": "Resolve Bot Path Using CLI",
                      "sequential_order": 1.0,
                      "connector": null,
                      "story_type": "user",
                      "users": [
                        "User"
                      ],
                      "test_class": "TestResolveBotPathUsingCLI",
                      "scenarios": [
                        {
                          "name": "CLI session resolves bot and workspace directories",
                          "sequential_order": 1.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_cli_session_resolves_bot_and_workspace_directories",
                          "steps": "GIVEN: CLI session initialized\nWHEN: Bot paths accessed via CLI\nTHEN: Directories resolved correctly"
                        },
                        {
                          "name": "Base actions directory accessible via CLI session",
                          "sequential_order": 2.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_cli_session_base_actions_directory_accessible",
                          "steps": "GIVEN: CLI session initialized\nWHEN: base_actions_directory accessed via CLI\nTHEN: Returns real agile_bots/base_actions path"
                        },
                        {
                          "name": "Python workspace root accessible via CLI session",
                          "sequential_order": 3.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_cli_session_python_workspace_root_accessible",
                          "steps": "GIVEN: CLI session initialized\nWHEN: python_workspace_root accessed via CLI\nTHEN: Returns Python workspace root path"
                        },
                        {
                          "name": "find_repo_root method works via CLI session",
                          "sequential_order": 4.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_cli_session_find_repo_root_method_works",
                          "steps": "GIVEN: CLI session initialized\nWHEN: find_repo_root() called via CLI\nTHEN: Returns repository root path"
                        }
                      ],
                      "acceptance_criteria": [],
                      "behavior": null
                    },
                    {
                      "name": "Resolve Bot Path",
                      "sequential_order": 0.0,
                      "connector": "or",
                      "story_type": "user",
                      "users": [
                        "Bot Behavior"
                      ],
                      "test_class": "TestResolveBotPath",
                      "scenarios": [
                        {
                          "name": "BotPath.base_actions_directory returns real agile_bot base_actions",
                          "sequential_order": 1.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_bot_paths_base_actions_directory_property",
                          "steps": "Given BotPath instantiated\nWhen base_actions_directory property accessed\nThen Returns real agile_bot/base_actions path (not test directory)\nThen Note: base_actions_directory always returns the real agile_bot/base_actions path,\nThen not the test directory. This is by design - see get_base_actions_directory() in workspace.py."
                        },
                        {
                          "name": "BotPath resolves directories from environment variables",
                          "sequential_order": 2.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_bot_paths_resolves_bot_and_workspace_directories_from_environment",
                          "steps": "Given BOT_DIRECTORY and WORKING_AREA environment variables set\nWhen BotPath accessed from bot\nThen Both directory properties return paths from environment"
                        },
                        {
                          "name": "BotPath.python_workspace_root property returns Python workspace root.",
                          "sequential_order": 3.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_bot_paths_python_workspace_root_property",
                          "steps": ""
                        },
                        {
                          "name": "BotPath raises error when environment variables not set",
                          "sequential_order": 4.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_bot_paths_raises_error_when_environment_variables_not_set",
                          "steps": "Given No BOT_DIRECTORY or WORKING_AREA environment variables\nWhen BotPath instantiated\nThen Raises RuntimeError"
                        },
                        {
                          "name": "BotPath.find_repo_root() method returns repository root.",
                          "sequential_order": 5.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_bot_paths_find_repo_root_method",
                          "steps": ""
                        }
                      ],
                      "acceptance_criteria": [],
                      "behavior": null
                    },
                    {
                      "name": "Load Bot Using CLI",
                      "sequential_order": 6.0,
                      "connector": null,
                      "story_type": "user",
                      "users": [
                        "User"
                      ],
                      "test_class": "TestLoadBotUsingCLI",
                      "scenarios": [
                        {
                          "name": "CLI session loads bot with name and workspace",
                          "sequential_order": 1.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_cli_session_loads_bot_with_name_and_workspace",
                          "steps": "GIVEN: CLI session initialized\nWHEN: Bot accessed via CLI\nTHEN: Bot has correct name and workspace"
                        },
                        {
                          "name": "Bot name property accessible via CLI session",
                          "sequential_order": 2.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_cli_session_bot_name_property_accessible",
                          "steps": "GIVEN: CLI session initialized\nWHEN: Bot name accessed\nTHEN: Returns correct bot name"
                        }
                      ],
                      "acceptance_criteria": [],
                      "behavior": null
                    },
                    {
                      "name": "Switch Registered Bots in CLI",
                      "sequential_order": 2.0,
                      "connector": "and",
                      "story_type": "system",
                      "users": [
                        "CLI"
                      ],
                      "test_class": "TestSwitchRegisteredBots",
                      "scenarios": [
                        {
                          "name": "Display Registered Bots in CLI STATUS",
                          "sequential_order": 1.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_display_registered_bots_in_cli_status",
                          "steps": ""
                        },
                        {
                          "name": "Switch to Valid Registered Bot",
                          "sequential_order": 2.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_switch_to_valid_registered_bot",
                          "steps": ""
                        },
                        {
                          "name": "Attempt to Switch to Unregistered Bot",
                          "sequential_order": 3.0,
                          "type": "error_path",
                          "background": [],
                          "test_method": "test_attempt_to_switch_to_unregistered_bot",
                          "steps": ""
                        }
                      ],
                      "acceptance_criteria": [
                        {
                          "name": "WHEN CLI STATUS section is displayed\nTHEN CLI shows current bot name followed by pipe-separated list of all registered bots AND format is: Bot: <current_bot> | Registered: <bot1> | <bot2> | <bot3>",
                          "text": "WHEN CLI STATUS section is displayed\nTHEN CLI shows current bot name followed by pipe-separated list of all registered bots AND format is: Bot: <current_bot> | Registered: <bot1> | <bot2> | <bot3>",
                          "sequential_order": 1.0
                        },
                        {
                          "name": "WHEN CLI STATUS section is displayed\nTHEN CLI shows bot switching instructions AND format is: To change bots: bot <name>",
                          "text": "WHEN CLI STATUS section is displayed\nTHEN CLI shows bot switching instructions AND format is: To change bots: bot <name>",
                          "sequential_order": 2.0
                        },
                        {
                          "name": "WHEN user enters bot <name> command AND bot name is registered\nTHEN CLI switches to the specified bot AND updates CLI STATUS section to show new current bot",
                          "text": "WHEN user enters bot <name> command AND bot name is registered\nTHEN CLI switches to the specified bot AND updates CLI STATUS section to show new current bot",
                          "sequential_order": 3.0
                        },
                        {
                          "name": "WHEN user enters bot <name> command AND bot name is not registered\nTHEN CLI displays error message AND shows list of available registered bots AND keeps current bot active",
                          "text": "WHEN user enters bot <name> command AND bot name is not registered\nTHEN CLI displays error message AND shows list of available registered bots AND keeps current bot active",
                          "sequential_order": 4.0
                        },
                        {
                          "name": "WHEN bot is switched\nTHEN CLI loads bot configuration from bot_config.json AND makes bot behaviors and actions available",
                          "text": "WHEN bot is switched\nTHEN CLI loads bot configuration from bot_config.json AND makes bot behaviors and actions available",
                          "sequential_order": 5.0
                        }
                      ],
                      "behavior": null
                    },
                    {
                      "name": "Switch Bot panel",
                      "sequential_order": 3.0,
                      "connector": "and",
                      "story_type": "user",
                      "users": [
                        "User"
                      ],
                      "test_class": "TestSwitchBot",
                      "scenarios": [
                        {
                          "name": "Panel shows story_bot and multiple bots available",
                          "sequential_order": 1.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_panel_shows_story_bot_and_multiple_bots_available",
                          "steps": "Given Panel is open showing story_bot\nAnd Multiple bots are available (story_bot, crc_bot)\nWhen User selects crc_bot from bot selector dropdown\nThen Panel displays crc_bot as current bot\nAnd Panel displays crc_bot's behaviors\nAnd Panel displays crc_bot's current action\nAnd Panel refreshes all sections with crc_bot data"
                        },
                        {
                          "name": "User switches to crc_bot",
                          "sequential_order": 2.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_user_switches_to_crc_bot",
                          "steps": "Given Panel is open with story_bot at workspace c:/dev/project_a\nWhen User switches to crc_bot\nThen Panel displays crc_bot\nAnd Panel retains workspace c:/dev/project_a\nAnd Panel displays crc_bot state for that workspace"
                        }
                      ],
                      "acceptance_criteria": [
                        {
                          "name": "WHEN User switches bot\nTHEN System displays updated bot name AND System displays behavior action section for new bot AND System displays behavior action stateof workspace for new bot",
                          "text": "WHEN User switches bot\nTHEN System displays updated bot name AND System displays behavior action section for new bot AND System displays behavior action stateof workspace for new bot",
                          "sequential_order": 1.0
                        }
                      ],
                      "behavior": null
                    },
                    {
                      "name": "Manage Bot Registry",
                      "sequential_order": 0.0,
                      "connector": "or",
                      "story_type": "system",
                      "users": [
                        "Bot Behavior"
                      ],
                      "test_class": "TestManageBotRegistry",
                      "scenarios": [
                        {
                          "name": "Get List of Registered Bots",
                          "sequential_order": 1.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_get_list_of_registered_bots",
                          "steps": ""
                        },
                        {
                          "name": "Get Active Bot",
                          "sequential_order": 2.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_get_active_bot",
                          "steps": ""
                        },
                        {
                          "name": "Set Active Bot to Registered Bot",
                          "sequential_order": 3.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_set_active_bot_to_registered_bot",
                          "steps": ""
                        },
                        {
                          "name": "Attempt to Set Unregistered Bot",
                          "sequential_order": 4.0,
                          "type": "error_path",
                          "background": [],
                          "test_method": "test_attempt_to_set_unregistered_bot",
                          "steps": ""
                        },
                        {
                          "name": "Set Active Bot to Current Bot",
                          "sequential_order": 5.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_set_active_bot_to_current_bot",
                          "steps": ""
                        },
                        {
                          "name": "Child1",
                          "sequential_order": 6.0,
                          "type": "",
                          "background": [],
                          "test_method": null,
                          "steps": ""
                        }
                      ],
                      "acceptance_criteria": [],
                      "behavior": null
                    },
                    {
                      "name": "Load and Display Workspace Context in CLI",
                      "sequential_order": 1.0,
                      "connector": "and",
                      "story_type": "system",
                      "users": [
                        "CLI"
                      ],
                      "test_class": "TestLoadWorkspaceContext",
                      "scenarios": [
                        {
                          "name": "CLI loads and displays workspace context",
                          "sequential_order": 1.0,
                          "type": "",
                          "background": [],
                          "test_method": "test_cli_loads_and_displays_workspace_context",
                          "steps": "GIVEN: Bot has workspace path\nAND: workspace contains story-graph.json\nWHEN: REPLSession initializes CLIBot\nTHEN: CLIBot loads workspace context from bot paths"
                        }
                      ],
                      "acceptance_criteria": [],
                      "behavior": null
                    },
                    {
                      "name": "Change Workspace Path panel",
                      "sequential_order": 2.0,
                      "connector": "and",
                      "story_type": "user",
                      "users": [
                        "User"
                      ],
                      "test_class": "TestChangeWorkspacePath",
                      "scenarios": [
                        {
                          "name": "User changes workspace and panel displays new state",
                          "sequential_order": 1.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "testUserChangesWorkspacePanelDisplaysNewState",
                          "steps": "Given Panel is open showing workspace at c:/dev/project_a\nAnd Workspace at c:/dev/project_b exists with different bot state\nWhen User changes workspace path to c:/dev/project_b\nThen Panel displays c:/dev/project_b as current workspace\nAnd Panel displays behavior action state from project_b\nAnd Panel refreshes all sections with project_b data"
                        },
                        {
                          "name": "User changes to nonexistent directory shows error",
                          "sequential_order": 2.0,
                          "type": "error_case",
                          "background": [],
                          "test_method": "testUserChangesToNonexistentDirectoryShowsError",
                          "steps": "Given Panel is open showing valid workspace\nWhen User changes workspace path to non-existent directory\nThen Panel displays error message\nAnd Error message indicates directory not found\nAnd Panel retains previous valid workspace"
                        },
                        {
                          "name": "Workspace path persists after panel refresh",
                          "sequential_order": 3.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "testWorkspacePathPersistsAfterPanelRefresh",
                          "steps": "Given Panel is open showing default workspace c:/dev/project_a\nWhen User changes workspace path to c:/dev/project_b\nAnd Panel displays project_b workspace and state\nAnd User refreshes panel\nThen Panel displays c:/dev/project_b as current workspace\nAnd Workspace path was persisted and restored"
                        },
                        {
                          "name": "Set path by dragging folder to panel",
                          "sequential_order": 4.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "testWorkspaceInputAcceptsDrop",
                          "steps": "Given Panel is open showing workspace at c:/dev/project_a\nAnd Folder c:/dev/project_b exists in VS Code explorer\nWhen User drags folder c:/dev/project_b from explorer to workspace text entry\nThen Workspace text entry displays c:/dev/project_b\nAnd Panel displays c:/dev/project_b as current workspace\nAnd Panel displays behavior action state from project_b"
                        }
                      ],
                      "acceptance_criteria": [
                        {
                          "name": "WHEN User changes workspace path\nTHEN System displays updated workspace path AND System displays behavior action state of new workspace",
                          "text": "WHEN User changes workspace path\nTHEN System displays updated workspace path AND System displays behavior action state of new workspace",
                          "sequential_order": 1.0
                        },
                        {
                          "name": "WHEN User sets workspace path\nTHEN System persists workspace path value",
                          "text": "WHEN User sets workspace path\nTHEN System persists workspace path value",
                          "sequential_order": 2.0
                        },
                        {
                          "name": "WHEN Panel refreshes\nTHEN System restores previously set workspace path",
                          "text": "WHEN Panel refreshes\nTHEN System restores previously set workspace path",
                          "sequential_order": 3.0
                        }
                      ],
                      "behavior": null
                    }
                  ]
                }
              ]
            }
          ],
          "story_groups": []
        },
        {
          "name": "Work With Story Map",
          "sequential_order": 1.0,
          "behavior": null,
          "domain_concepts": [
            {
              "name": "StoryNode (Base)",
              "responsibilities": [
                {
                  "name": "Serializes",
                  "collaborators": [
                    "StoryNodeSerializer"
                  ]
                },
                {
                  "name": "Get/Update name",
                  "collaborators": [
                    "String"
                  ]
                },
                {
                  "name": "Get node type",
                  "collaborators": [
                    "String"
                  ]
                },
                {
                  "name": "Get node ID",
                  "collaborators": [
                    "String",
                    "StoryNode",
                    "StoryNodeNavigator"
                  ]
                },
                {
                  "name": "Get parent",
                  "collaborators": [
                    "StoryNode"
                  ]
                },
                {
                  "name": "Get sequential order",
                  "collaborators": [
                    "StoryNodeNavigator",
                    "Float"
                  ]
                },
                {
                  "name": "Contains Children",
                  "collaborators": [
                    "StoryNodeChildren"
                  ]
                },
                {
                  "name": "Delete self",
                  "collaborators": [
                    "StoryNodeSerializer"
                  ]
                },
                {
                  "name": "Delete with children",
                  "collaborators": [
                    "StoryNodeSerializer",
                    "StoryNodeChildren"
                  ]
                },
                {
                  "name": "Get/Update test",
                  "collaborators": [
                    "Test"
                  ]
                }
              ],
              "module": "story_graph.nodes",
              "_source_path": "Invoke Bot.Invoke Bot Directly"
            },
            {
              "name": "StoryNodeChildren",
              "responsibilities": [
                {
                  "name": "Get children",
                  "collaborators": [
                    "List[StoryNode]"
                  ]
                },
                {
                  "name": "Find child by name",
                  "collaborators": [
                    "String",
                    "StoryNode"
                  ]
                },
                {
                  "name": "Delete child",
                  "collaborators": [
                    "StoryNode"
                  ]
                }
              ],
              "module": "story_graph.nodes",
              "_source_path": "Invoke Bot.Invoke Bot Directly"
            },
            {
              "name": "StoryNodeNavigator",
              "responsibilities": [
                {
                  "name": "Build node ID from hierarchy path",
                  "collaborators": [
                    "String",
                    "StoryNode"
                  ]
                },
                {
                  "name": "Get parent",
                  "collaborators": [
                    "StoryNode"
                  ]
                },
                {
                  "name": "Move to parent",
                  "collaborators": [
                    "New Parent",
                    "Position"
                  ]
                },
                {
                  "name": "Move after",
                  "collaborators": [
                    "StoryNode",
                    "sequential order"
                  ]
                },
                {
                  "name": "Move before",
                  "collaborators": [
                    "StoryNode",
                    "sequential order"
                  ]
                },
                {
                  "name": "DetermineOrder",
                  "collaborators": [
                    "FLoat",
                    "StoryNode"
                  ]
                }
              ],
              "module": "story_graph.nodes",
              "_source_path": "Invoke Bot.Invoke Bot Directly"
            },
            {
              "name": "StoryNodeSerializer",
              "responsibilities": [
                {
                  "name": "File",
                  "collaborators": [
                    "File"
                  ]
                },
                {
                  "name": "Create Node",
                  "collaborators": [
                    "File",
                    "StoryNode"
                  ]
                },
                {
                  "name": "Load Node",
                  "collaborators": [
                    "File",
                    "StoryNode"
                  ]
                },
                {
                  "name": "Update Node",
                  "collaborators": [
                    "File",
                    "StoryNode"
                  ]
                },
                {
                  "name": "Delete Node",
                  "collaborators": [
                    "File",
                    "StoryNode"
                  ]
                },
                {
                  "name": "From JSON",
                  "collaborators": [
                    "JSON",
                    "StoryNode"
                  ]
                },
                {
                  "name": "To JSON",
                  "collaborators": [
                    "JSON",
                    "StoryNode"
                  ]
                }
              ],
              "module": "story_graph.nodes",
              "_source_path": "Invoke Bot.Invoke Bot Directly"
            },
            {
              "name": "TTYStoryNode",
              "responsibilities": [
                {
                  "name": "Serialize node to TTY",
                  "collaborators": [
                    "StoryNode",
                    "TTY String"
                  ]
                },
                {
                  "name": "Format name",
                  "collaborators": [
                    "String",
                    "TTY String"
                  ]
                },
                {
                  "name": "Format sequential order",
                  "collaborators": [
                    "Float",
                    "TTY String"
                  ]
                },
                {
                  "name": "Format children",
                  "collaborators": [
                    "List[StoryNode]",
                    "TTY String"
                  ]
                },
                {
                  "name": "Add child",
                  "collaborators": [
                    "StoryNode",
                    "CLI Result"
                  ]
                },
                {
                  "name": "Add child at position",
                  "collaborators": [
                    "StoryNode",
                    "Position",
                    "CLI Result"
                  ]
                },
                {
                  "name": "Delete child",
                  "collaborators": [
                    "StoryNode",
                    "CLI Result"
                  ]
                },
                {
                  "name": "Delete this node",
                  "collaborators": [
                    "CLI Result"
                  ]
                },
                {
                  "name": "Delete with children",
                  "collaborators": [
                    "CLI Result"
                  ]
                },
                {
                  "name": "Update name",
                  "collaborators": [
                    "String",
                    "CLI Result"
                  ]
                },
                {
                  "name": "Move to parent",
                  "collaborators": [
                    "New Parent",
                    "Position",
                    "CLI Result"
                  ]
                },
                {
                  "name": "Move after target",
                  "collaborators": [
                    "Target StoryNode",
                    "CLI Result"
                  ]
                },
                {
                  "name": "Move before target",
                  "collaborators": [
                    "Target StoryNode",
                    "CLI Result"
                  ]
                },
                {
                  "name": "Reorder children",
                  "collaborators": [
                    "Start Pos",
                    "End Pos",
                    "CLI Result"
                  ]
                },
                {
                  "name": "Automatically refresh story graph",
                  "collaborators": [
                    "CLI Result"
                  ]
                },
                {
                  "name": "Wraps domain story node",
                  "collaborators": [
                    "StoryNode"
                  ]
                }
              ],
              "module": "story_graph.nodes",
              "inherits_from": "TTYAdapter (Base)",
              "_source_path": "Invoke Bot.Invoke Bot Directly"
            },
            {
              "name": "JSONStoryNode",
              "responsibilities": [
                {
                  "name": "Serialize node to JSON",
                  "collaborators": [
                    "StoryNode",
                    "JSON String"
                  ]
                },
                {
                  "name": "Include name",
                  "collaborators": [
                    "String",
                    "JSON"
                  ]
                },
                {
                  "name": "Include sequential order",
                  "collaborators": [
                    "Float",
                    "JSON"
                  ]
                },
                {
                  "name": "Include children",
                  "collaborators": [
                    "List[StoryNode]",
                    "JSON Array"
                  ]
                },
                {
                  "name": "Add child",
                  "collaborators": [
                    "StoryNode",
                    "JSON Result"
                  ]
                },
                {
                  "name": "Add child at position",
                  "collaborators": [
                    "StoryNode",
                    "Position",
                    "JSON Result"
                  ]
                },
                {
                  "name": "Delete child",
                  "collaborators": [
                    "StoryNode",
                    "JSON Result"
                  ]
                },
                {
                  "name": "Delete this node",
                  "collaborators": [
                    "JSON Result"
                  ]
                },
                {
                  "name": "Delete with children",
                  "collaborators": [
                    "JSON Result"
                  ]
                },
                {
                  "name": "Update name",
                  "collaborators": [
                    "String",
                    "JSON Result"
                  ]
                },
                {
                  "name": "Move to parent",
                  "collaborators": [
                    "New Parent",
                    "Position",
                    "JSON Result"
                  ]
                },
                {
                  "name": "Move after target",
                  "collaborators": [
                    "Target StoryNode",
                    "JSON Result"
                  ]
                },
                {
                  "name": "Move before target",
                  "collaborators": [
                    "Target StoryNode",
                    "JSON Result"
                  ]
                },
                {
                  "name": "Reorder children",
                  "collaborators": [
                    "Start Pos",
                    "End Pos",
                    "JSON Result"
                  ]
                },
                {
                  "name": "Automatically refresh story graph",
                  "collaborators": [
                    "JSON Result"
                  ]
                },
                {
                  "name": "Wraps domain story node",
                  "collaborators": [
                    "StoryNode"
                  ]
                }
              ],
              "module": "story_graph.nodes",
              "inherits_from": "JSONAdapter (Base)",
              "_source_path": "Invoke Bot.Invoke Bot Directly"
            },
            {
              "name": "MarkdownStoryNode",
              "responsibilities": [
                {
                  "name": "Serialize node to Markdown",
                  "collaborators": [
                    "StoryNode",
                    "Markdown String"
                  ]
                },
                {
                  "name": "Format node header",
                  "collaborators": [
                    "String",
                    "Sequential Order",
                    "Markdown"
                  ]
                },
                {
                  "name": "Format children list",
                  "collaborators": [
                    "List[StoryNode]",
                    "Markdown"
                  ]
                },
                {
                  "name": "Wraps domain story node",
                  "collaborators": [
                    "StoryNode"
                  ]
                }
              ],
              "module": "story_graph.nodes",
              "inherits_from": "MarkdownAdapter (Base)",
              "_source_path": "Invoke Bot.Invoke Bot Directly"
            },
            {
              "name": "StoryNodeView",
              "responsibilities": [
                {
                  "name": "Wraps story node JSON",
                  "collaborators": [
                    "StoryNode JSON"
                  ]
                },
                {
                  "name": "Toggles collapsed",
                  "collaborators": [
                    "State"
                  ]
                },
                {
                  "name": "Add child node",
                  "collaborators": [
                    "StoryNode",
                    "Panel Result"
                  ]
                },
                {
                  "name": "Add child at position",
                  "collaborators": [
                    "StoryNode",
                    "Position",
                    "Panel Result"
                  ]
                },
                {
                  "name": "Delete this node",
                  "collaborators": [
                    "Panel Result"
                  ]
                },
                {
                  "name": "Delete with children",
                  "collaborators": [
                    "Panel Result"
                  ]
                },
                {
                  "name": "Update node name",
                  "collaborators": [
                    "String",
                    "Panel Result"
                  ]
                },
                {
                  "name": "Move to parent",
                  "collaborators": [
                    "New Parent",
                    "Position",
                    "Panel Result"
                  ]
                },
                {
                  "name": "Move after target",
                  "collaborators": [
                    "Target StoryNode",
                    "Panel Result"
                  ]
                },
                {
                  "name": "Move before target",
                  "collaborators": [
                    "Target StoryNode",
                    "Panel Result"
                  ]
                },
                {
                  "name": "Drag and drop",
                  "collaborators": [
                    "Drop Target",
                    "Position",
                    "Panel Result"
                  ]
                },
                {
                  "name": "Reorder children",
                  "collaborators": [
                    "Start Pos",
                    "End Pos",
                    "Panel Result"
                  ]
                },
                {
                  "name": "Automatically refresh story graph",
                  "collaborators": [
                    "Panel Result"
                  ]
                }
              ],
              "module": "story_graph.nodes",
              "inherits_from": "PanelView (Base)",
              "_source_path": "Invoke Bot.Invoke Bot Directly"
            },
            {
              "name": "StoryMap",
              "responsibilities": [
                {
                  "name": "Load from bot directory",
                  "collaborators": [
                    "Bot",
                    "StoryMap"
                  ]
                },
                {
                  "name": "Load from story graph",
                  "collaborators": [
                    "File Path",
                    "StoryMap"
                  ]
                },
                {
                  "name": "Walk nodes",
                  "collaborators": [
                    "StoryNode",
                    "Iterator[StoryNode]"
                  ]
                },
                {
                  "name": "Get all stories",
                  "collaborators": [
                    "List[Story]"
                  ]
                },
                {
                  "name": "Get all scenarios",
                  "collaborators": [
                    "List[Scenario]"
                  ]
                },
                {
                  "name": "Get all domain concepts",
                  "collaborators": [
                    "List[DomainConcept]"
                  ]
                },
                {
                  "name": "Find by name",
                  "collaborators": [
                    "Name",
                    "StoryNode"
                  ]
                },
                {
                  "name": "Find node by path",
                  "collaborators": [
                    "Path String",
                    "StoryNode"
                  ]
                },
                {
                  "name": "Get story graph dict",
                  "collaborators": [
                    "Dict"
                  ]
                },
                {
                  "name": "Get epics",
                  "collaborators": [
                    "List[Epic]"
                  ]
                },
                {
                  "name": "Save to story graph",
                  "collaborators": [
                    "File Path"
                  ]
                },
                {
                  "name": "Reload from story graph",
                  "collaborators": [
                    "File Path",
                    "StoryMap"
                  ]
                },
                {
                  "name": "Validate graph structure",
                  "collaborators": [
                    "Validation Result"
                  ]
                }
              ],
              "module": "story_graph.story_map",
              "_source_path": "Invoke Bot.Invoke Bot Directly"
            },
            {
              "name": "TTYStoryMap",
              "responsibilities": [
                {
                  "name": "Serialize story map to TTY",
                  "collaborators": [
                    "StoryMap",
                    "TTY String"
                  ]
                },
                {
                  "name": "Format epics list",
                  "collaborators": [
                    "List[Epic]",
                    "TTY String"
                  ]
                },
                {
                  "name": "Format story hierarchy",
                  "collaborators": [
                    "StoryMap",
                    "TTY String"
                  ]
                },
                {
                  "name": "Walk and format nodes",
                  "collaborators": [
                    "StoryNode",
                    "TTY String"
                  ]
                },
                {
                  "name": "Wraps domain story map",
                  "collaborators": [
                    "StoryMap"
                  ]
                }
              ],
              "module": "story_graph.story_map",
              "inherits_from": "TTYAdapter",
              "_source_path": "Invoke Bot.Invoke Bot Directly"
            },
            {
              "name": "JSONStoryMap",
              "responsibilities": [
                {
                  "name": "Serialize story map to JSON",
                  "collaborators": [
                    "StoryMap",
                    "JSON String"
                  ]
                },
                {
                  "name": "Include story graph",
                  "collaborators": [
                    "Dict",
                    "JSON"
                  ]
                },
                {
                  "name": "Include all epics",
                  "collaborators": [
                    "List[Epic]",
                    "JSON Array"
                  ]
                },
                {
                  "name": "Wraps domain story map",
                  "collaborators": [
                    "StoryMap"
                  ]
                }
              ],
              "module": "story_graph.story_map",
              "inherits_from": "JSONAdapter",
              "_source_path": "Invoke Bot.Invoke Bot Directly"
            },
            {
              "name": "MarkdownStoryMap",
              "responsibilities": [
                {
                  "name": "Serialize story map to Markdown",
                  "collaborators": [
                    "StoryMap",
                    "Markdown String"
                  ]
                },
                {
                  "name": "Format epic hierarchy",
                  "collaborators": [
                    "List[Epic]",
                    "Markdown"
                  ]
                },
                {
                  "name": "Format story index",
                  "collaborators": [
                    "List[Story]",
                    "Markdown"
                  ]
                },
                {
                  "name": "Wraps domain story map",
                  "collaborators": [
                    "StoryMap"
                  ]
                }
              ],
              "module": "story_graph.story_map",
              "inherits_from": "MarkdownAdapter",
              "_source_path": "Invoke Bot.Invoke Bot Directly"
            },
            {
              "name": "StoryMapView",
              "responsibilities": [
                {
                  "name": "Wraps story map JSON",
                  "collaborators": [
                    "StoryMap JSON"
                  ]
                },
                {
                  "name": "Renders story graph as tree hierarchy",
                  "collaborators": [
                    "StoryNode",
                    "HTML"
                  ]
                },
                {
                  "name": "Displays epic hierarchy",
                  "collaborators": [
                    "EpicView",
                    "Epic JSON"
                  ]
                },
                {
                  "name": "Shows context-appropriate action buttons",
                  "collaborators": [
                    "StoryNode",
                    "ButtonSet"
                  ]
                },
                {
                  "name": "Refreshes tree display",
                  "collaborators": [
                    "StoryGraph",
                    "DOM"
                  ]
                },
                {
                  "name": "Searches stories",
                  "collaborators": [
                    "Filter",
                    "StoryGraph JSON"
                  ]
                },
                {
                  "name": "Opens story graph file",
                  "collaborators": [
                    "CLI",
                    "File JSON"
                  ]
                },
                {
                  "name": "Opens story map file",
                  "collaborators": [
                    "CLI",
                    "File JSON"
                  ]
                },
                {
                  "name": "Delegates to InlineNameEditor",
                  "collaborators": [
                    "InlineNameEditor",
                    "StoryNode"
                  ]
                },
                {
                  "name": "Delegates to StoryNodeDragDropManager",
                  "collaborators": [
                    "StoryNodeDragDropManager",
                    "StoryNode"
                  ]
                }
              ],
              "realization": [
                {
                  "scope": "Invoke Bot Through Panel.Filter And Navigate Scope.Display Story Scope Hierarchy",
                  "scenario": "Panel displays nested epic/sub-epic/story/scenario hierarchy from story graph JSON, user can expand/collapse and navigate",
                  "walks": [
                    {
                      "covers": "Rendering 4-level nested hierarchy from JSON",
                      "object_flow": [
                        "this.storyMapJSON = storyMapJSON",
                        "this.cliClient = cliClient",
                        "html: String = this.render()",
                        "  -> epicsHTML: String = this.render_all_epics()",
                        "     epicView: EpicView = new EpicView(epic, this.cliClient)",
                        "     epicHTML: String = epicView.render()",
                        "       -> name: String = this.epicJSON.name",
                        "       -> icon: String = this.epicJSON.icon",
                        "       -> subEpicsHTML: String = this.render_sub_epics()",
                        "          subEpicView: SubEpicView = new SubEpicView(subEpic, this.cliClient)",
                        "          subEpicHTML: String = subEpicView.render()",
                        "            -> storiesHTML: String = this.render_stories()",
                        "               storyView: StoryView = new StoryView(story, this.cliClient)",
                        "               storyHTML: String = storyView.render()",
                        "                 -> scenariosHTML: String = this.render_scenarios()",
                        "                    return scenariosHTML: \"<div>Scenario 1</div>...\"",
                        "                 return `<div>${this.storyJSON.name}${scenariosHTML}</div>`",
                        "               return storiesHTML: \"<div>Story 1...</div>\"",
                        "            return `<div>${this.subEpicJSON.name}${storiesHTML}</div>`",
                        "          return subEpicsHTML: \"<div>Sub-Epic 1...</div>\"",
                        "       return `<div>${name}${subEpicsHTML}</div>`",
                        "     return epicsHTML: \"<div>Epic 1...</div>\"",
                        "return epicsHTML"
                      ]
                    },
                    {
                      "covers": "User opens epic folder via CLI",
                      "object_flow": [
                        "EpicView.onFolderClick()",
                        "  -> folderPath: String = this.epicJSON.folder_path",
                        "  -> this.cliClient.sendMessage({command: 'openScope', filePath: folderPath})",
                        "     -> vscode.commands.executeCommand('vscode.open', fileUri)",
                        "return"
                      ]
                    }
                  ],
                  "model_updates": []
                }
              ],
              "module": "story_graph.story_map",
              "inherits_from": "PanelView",
              "_source_path": "Invoke Bot.Invoke Bot Directly",
              "instantiated_with": [
                "StoryGraph",
                "PanelView"
              ],
              "ownership": {
                "has": [
                  "InlineNameEditor",
                  "StoryNodeDragDropManager",
                  "ValidationMessageDisplay"
                ],
                "references": [
                  "StoryGraph",
                  "StoryNode"
                ]
              }
            },
            {
              "name": "Epic",
              "responsibilities": [
                {
                  "name": "Test file property",
                  "collaborators": [
                    "String"
                  ]
                },
                {
                  "name": "Get all stories",
                  "collaborators": [
                    "List[Story]"
                  ]
                },
                {
                  "name": "Get domain concepts",
                  "collaborators": [
                    "List[DomainConcept]"
                  ]
                }
              ],
              "module": "story_graph.epic",
              "inherits_from": "StoryNode",
              "_source_path": "Invoke Bot.Invoke Bot Directly"
            },
            {
              "name": "TTYEpic",
              "responsibilities": [
                {
                  "name": "Format domain concepts",
                  "collaborators": [
                    "List[DomainConcept]",
                    "TTY String"
                  ]
                },
                {
                  "name": "Wraps domain epic",
                  "collaborators": [
                    "Epic"
                  ]
                }
              ],
              "module": "story_graph.epic",
              "inherits_from": "TTYStoryNode",
              "_source_path": "Invoke Bot.Invoke Bot Directly"
            },
            {
              "name": "JSONEpic",
              "responsibilities": [
                {
                  "name": "Include domain concepts",
                  "collaborators": [
                    "List[DomainConcept]",
                    "JSON Array"
                  ]
                },
                {
                  "name": "Wraps domain epic",
                  "collaborators": [
                    "Epic"
                  ]
                }
              ],
              "module": "story_graph.epic",
              "inherits_from": "JSONStoryNode",
              "_source_path": "Invoke Bot.Invoke Bot Directly"
            },
            {
              "name": "MarkdownEpic",
              "responsibilities": [
                {
                  "name": "Format domain concepts table",
                  "collaborators": [
                    "List[DomainConcept]",
                    "Markdown"
                  ]
                },
                {
                  "name": "Wraps domain epic",
                  "collaborators": [
                    "Epic"
                  ]
                }
              ],
              "module": "story_graph.epic",
              "inherits_from": "MarkdownStoryNode",
              "_source_path": "Invoke Bot.Invoke Bot Directly"
            },
            {
              "name": "EpicView",
              "responsibilities": [
                {
                  "name": "Wraps epic JSON",
                  "collaborators": [
                    "Epic JSON"
                  ]
                },
                {
                  "name": "Displays epic name",
                  "collaborators": [
                    "String",
                    "Epic JSON"
                  ]
                },
                {
                  "name": "Displays epic icon",
                  "collaborators": [
                    "Image"
                  ]
                },
                {
                  "name": "Displays sub epics",
                  "collaborators": [
                    "SubEpicView",
                    "SubEpic JSON"
                  ]
                },
                {
                  "name": "Opens epic folder",
                  "collaborators": [
                    "CLI",
                    "Epic JSON"
                  ]
                },
                {
                  "name": "Opens epic test file",
                  "collaborators": [
                    "CLI",
                    "Epic JSON"
                  ]
                }
              ],
              "realization": [
                {
                  "scope": "Invoke Bot Through Panel.Filter And Navigate Scope.Display Story Scope Hierarchy",
                  "scenario": "Panel displays nested epic/sub-epic/story/scenario hierarchy from story graph JSON, user can expand/collapse and navigate",
                  "walks": [
                    {
                      "covers": "Rendering 4-level nested hierarchy from JSON",
                      "object_flow": [
                        "this.storyMapJSON = storyMapJSON",
                        "this.cliClient = cliClient",
                        "html: String = this.render()",
                        "  -> epicsHTML: String = this.render_all_epics()",
                        "     epicView: EpicView = new EpicView(epic, this.cliClient)",
                        "     epicHTML: String = epicView.render()",
                        "       -> name: String = this.epicJSON.name",
                        "       -> icon: String = this.epicJSON.icon",
                        "       -> subEpicsHTML: String = this.render_sub_epics()",
                        "          subEpicView: SubEpicView = new SubEpicView(subEpic, this.cliClient)",
                        "          subEpicHTML: String = subEpicView.render()",
                        "            -> storiesHTML: String = this.render_stories()",
                        "               storyView: StoryView = new StoryView(story, this.cliClient)",
                        "               storyHTML: String = storyView.render()",
                        "                 -> scenariosHTML: String = this.render_scenarios()",
                        "                    return scenariosHTML: \"<div>Scenario 1</div>...\"",
                        "                 return `<div>${this.storyJSON.name}${scenariosHTML}</div>`",
                        "               return storiesHTML: \"<div>Story 1...</div>\"",
                        "            return `<div>${this.subEpicJSON.name}${storiesHTML}</div>`",
                        "          return subEpicsHTML: \"<div>Sub-Epic 1...</div>\"",
                        "       return `<div>${name}${subEpicsHTML}</div>`",
                        "     return epicsHTML: \"<div>Epic 1...</div>\"",
                        "return epicsHTML"
                      ]
                    },
                    {
                      "covers": "User opens epic folder via CLI",
                      "object_flow": [
                        "EpicView.onFolderClick()",
                        "  -> folderPath: String = this.epicJSON.folder_path",
                        "  -> this.cliClient.sendMessage({command: 'openScope', filePath: folderPath})",
                        "     -> vscode.commands.executeCommand('vscode.open', fileUri)",
                        "return"
                      ]
                    }
                  ],
                  "model_updates": []
                }
              ],
              "module": "story_graph.epic",
              "inherits_from": "StoryNodeView",
              "_source_path": "Invoke Bot.Invoke Bot Directly"
            },
            {
              "name": "SubEpic",
              "responsibilities": [
                {
                  "name": "Test file property",
                  "collaborators": [
                    "String"
                  ]
                }
              ],
              "module": "story_graph.sub_epic",
              "inherits_from": "StoryNode",
              "_source_path": "Invoke Bot.Invoke Bot Directly"
            },
            {
              "name": "SubEpicView",
              "responsibilities": [
                {
                  "name": "Wraps sub epic JSON",
                  "collaborators": [
                    "SubEpic JSON"
                  ]
                },
                {
                  "name": "Displays sub epic name",
                  "collaborators": [
                    "String",
                    "SubEpic JSON"
                  ]
                },
                {
                  "name": "Displays sub epic icon",
                  "collaborators": [
                    "Image"
                  ]
                },
                {
                  "name": "Displays nested sub epics",
                  "collaborators": [
                    "SubEpicView",
                    "SubEpic JSON"
                  ]
                },
                {
                  "name": "Displays stories",
                  "collaborators": [
                    "StoryView",
                    "Story JSON"
                  ]
                },
                {
                  "name": "Opens sub epic folder",
                  "collaborators": [
                    "CLI",
                    "SubEpic JSON"
                  ]
                },
                {
                  "name": "Opens sub epic test file",
                  "collaborators": [
                    "CLI",
                    "SubEpic JSON"
                  ]
                }
              ],
              "module": "story_graph.sub_epic",
              "inherits_from": "StoryNodeView",
              "_source_path": "Invoke Bot.Invoke Bot Directly"
            },
            {
              "name": "StoryGroup",
              "responsibilities": [],
              "module": "story_graph.story_group",
              "inherits_from": "StoryNode",
              "_source_path": "Invoke Bot.Invoke Bot Directly"
            },
            {
              "name": "Story",
              "responsibilities": [
                {
                  "name": "Test class property",
                  "collaborators": [
                    "String"
                  ]
                },
                {
                  "name": "Get test class",
                  "collaborators": [
                    "String"
                  ]
                },
                {
                  "name": "Get default test class",
                  "collaborators": [
                    "String"
                  ]
                },
                {
                  "name": "Get story type",
                  "collaborators": [
                    "String"
                  ]
                },
                {
                  "name": "Get users",
                  "collaborators": [
                    "List[StoryUser]"
                  ]
                },
                {
                  "name": "Get scenarios",
                  "collaborators": [
                    "List[Scenario]"
                  ]
                },
                {
                  "name": "Get scenario outlines",
                  "collaborators": [
                    "List[ScenarioOutline]"
                  ]
                },
                {
                  "name": "Get acceptance criteria",
                  "collaborators": [
                    "List[AcceptanceCriteria]"
                  ]
                }
              ],
              "module": "story_graph.story",
              "inherits_from": "StoryNode",
              "_source_path": "Invoke Bot.Invoke Bot Directly"
            },
            {
              "name": "TTYStory",
              "responsibilities": [
                {
                  "name": "Format users",
                  "collaborators": [
                    "List[StoryUser]",
                    "TTY String"
                  ]
                },
                {
                  "name": "Format test metadata",
                  "collaborators": [
                    "Test File",
                    "Test Class",
                    "TTY String"
                  ]
                },
                {
                  "name": "Wraps domain story",
                  "collaborators": [
                    "Story"
                  ]
                }
              ],
              "module": "story_graph.story",
              "inherits_from": "TTYStoryNode",
              "_source_path": "Invoke Bot.Invoke Bot Directly"
            },
            {
              "name": "JSONStory",
              "responsibilities": [
                {
                  "name": "Include users",
                  "collaborators": [
                    "List[StoryUser]",
                    "JSON Array"
                  ]
                },
                {
                  "name": "Include test metadata",
                  "collaborators": [
                    "Test File",
                    "Test Class",
                    "JSON"
                  ]
                },
                {
                  "name": "Wraps domain story",
                  "collaborators": [
                    "Story"
                  ]
                }
              ],
              "module": "story_graph.story",
              "inherits_from": "JSONStoryNode",
              "_source_path": "Invoke Bot.Invoke Bot Directly"
            },
            {
              "name": "MarkdownStory",
              "responsibilities": [
                {
                  "name": "Format story card",
                  "collaborators": [
                    "Story",
                    "Markdown"
                  ]
                },
                {
                  "name": "Format users section",
                  "collaborators": [
                    "List[StoryUser]",
                    "Markdown"
                  ]
                },
                {
                  "name": "Wraps domain story",
                  "collaborators": [
                    "Story"
                  ]
                }
              ],
              "module": "story_graph.story",
              "inherits_from": "MarkdownStoryNode",
              "_source_path": "Invoke Bot.Invoke Bot Directly"
            },
            {
              "name": "StoryView",
              "responsibilities": [
                {
                  "name": "Wraps story JSON",
                  "collaborators": [
                    "Story JSON"
                  ]
                },
                {
                  "name": "Displays story name",
                  "collaborators": [
                    "String",
                    "Story JSON"
                  ]
                },
                {
                  "name": "Displays story icon",
                  "collaborators": [
                    "Image"
                  ]
                },
                {
                  "name": "Displays scenarios",
                  "collaborators": [
                    "ScenarioView",
                    "Scenario JSON"
                  ]
                },
                {
                  "name": "Opens test at class",
                  "collaborators": [
                    "CLI",
                    "Story JSON"
                  ]
                }
              ],
              "module": "story_graph.story",
              "inherits_from": "StoryNodeView",
              "_source_path": "Invoke Bot.Invoke Bot Directly"
            },
            {
              "name": "Scenario",
              "responsibilities": [
                {
                  "name": "Test method property",
                  "collaborators": [
                    "String"
                  ]
                },
                {
                  "name": "Get test method",
                  "collaborators": [
                    "String"
                  ]
                },
                {
                  "name": "Get default test method",
                  "collaborators": [
                    "String"
                  ]
                },
                {
                  "name": "Get steps",
                  "collaborators": [
                    "List[Step]"
                  ]
                }
              ],
              "module": "story_graph.scenario",
              "inherits_from": "StoryNode",
              "_source_path": "Invoke Bot.Invoke Bot Directly"
            },
            {
              "name": "TTYScenario",
              "responsibilities": [
                {
                  "name": "Format steps",
                  "collaborators": [
                    "List[Step]",
                    "TTY String"
                  ]
                },
                {
                  "name": "Format test method",
                  "collaborators": [
                    "Test Method",
                    "TTY String"
                  ]
                },
                {
                  "name": "Wraps domain scenario",
                  "collaborators": [
                    "Scenario"
                  ]
                }
              ],
              "module": "story_graph.scenario",
              "inherits_from": "TTYStoryNode",
              "_source_path": "Invoke Bot.Invoke Bot Directly"
            },
            {
              "name": "JSONScenario",
              "responsibilities": [
                {
                  "name": "Include steps",
                  "collaborators": [
                    "List[Step]",
                    "JSON Array"
                  ]
                },
                {
                  "name": "Include test method",
                  "collaborators": [
                    "Test Method",
                    "JSON"
                  ]
                },
                {
                  "name": "Wraps domain scenario",
                  "collaborators": [
                    "Scenario"
                  ]
                }
              ],
              "module": "story_graph.scenario",
              "inherits_from": "JSONStoryNode",
              "_source_path": "Invoke Bot.Invoke Bot Directly"
            },
            {
              "name": "MarkdownScenario",
              "responsibilities": [
                {
                  "name": "Format Gherkin scenario",
                  "collaborators": [
                    "Scenario",
                    "Markdown"
                  ]
                },
                {
                  "name": "Format steps as Given/When/Then",
                  "collaborators": [
                    "List[Step]",
                    "Markdown"
                  ]
                },
                {
                  "name": "Wraps domain scenario",
                  "collaborators": [
                    "Scenario"
                  ]
                }
              ],
              "module": "story_graph.scenario",
              "inherits_from": "MarkdownStoryNode",
              "_source_path": "Invoke Bot.Invoke Bot Directly"
            },
            {
              "name": "ScenarioView",
              "responsibilities": [
                {
                  "name": "Wraps scenario JSON",
                  "collaborators": [
                    "Scenario JSON"
                  ]
                },
                {
                  "name": "Displays scenario name",
                  "collaborators": [
                    "String",
                    "Scenario JSON"
                  ]
                },
                {
                  "name": "Displays scenario icon",
                  "collaborators": [
                    "Image"
                  ]
                },
                {
                  "name": "Opens test at scenario",
                  "collaborators": [
                    "CLI",
                    "Scenario JSON"
                  ]
                }
              ],
              "module": "story_graph.scenario",
              "inherits_from": "StoryNodeView",
              "_source_path": "Invoke Bot.Invoke Bot Directly"
            },
            {
              "name": "ScenarioOutline",
              "responsibilities": [
                {
                  "name": "Test method property",
                  "collaborators": [
                    "String"
                  ]
                },
                {
                  "name": "Get test method",
                  "collaborators": [
                    "String"
                  ]
                },
                {
                  "name": "Get default test method",
                  "collaborators": [
                    "String"
                  ]
                },
                {
                  "name": "Get examples",
                  "collaborators": [
                    "List[Dict]"
                  ]
                },
                {
                  "name": "Get steps",
                  "collaborators": [
                    "List[Step]"
                  ]
                }
              ],
              "module": "story_graph.scenario_outline",
              "inherits_from": "StoryNode",
              "_source_path": "Invoke Bot.Invoke Bot Directly"
            },
            {
              "name": "TTYScenarioOutline",
              "responsibilities": [
                {
                  "name": "Format steps",
                  "collaborators": [
                    "List[Step]",
                    "TTY String"
                  ]
                },
                {
                  "name": "Format examples",
                  "collaborators": [
                    "List[Dict]",
                    "TTY String"
                  ]
                },
                {
                  "name": "Format test method",
                  "collaborators": [
                    "Test Method",
                    "TTY String"
                  ]
                },
                {
                  "name": "Wraps domain scenario outline",
                  "collaborators": [
                    "ScenarioOutline"
                  ]
                }
              ],
              "module": "story_graph.scenario_outline",
              "inherits_from": "TTYStoryNode",
              "_source_path": "Invoke Bot.Invoke Bot Directly"
            },
            {
              "name": "JSONScenarioOutline",
              "responsibilities": [
                {
                  "name": "Include steps",
                  "collaborators": [
                    "List[Step]",
                    "JSON Array"
                  ]
                },
                {
                  "name": "Include examples",
                  "collaborators": [
                    "List[Dict]",
                    "JSON Array"
                  ]
                },
                {
                  "name": "Include test method",
                  "collaborators": [
                    "Test Method",
                    "JSON"
                  ]
                },
                {
                  "name": "Wraps domain scenario outline",
                  "collaborators": [
                    "ScenarioOutline"
                  ]
                }
              ],
              "module": "story_graph.scenario_outline",
              "inherits_from": "JSONStoryNode",
              "_source_path": "Invoke Bot.Invoke Bot Directly"
            },
            {
              "name": "MarkdownScenarioOutline",
              "responsibilities": [
                {
                  "name": "Format Gherkin scenario outline",
                  "collaborators": [
                    "ScenarioOutline",
                    "Markdown"
                  ]
                },
                {
                  "name": "Format steps as Given/When/Then",
                  "collaborators": [
                    "List[Step]",
                    "Markdown"
                  ]
                },
                {
                  "name": "Format examples table",
                  "collaborators": [
                    "List[Dict]",
                    "Markdown"
                  ]
                },
                {
                  "name": "Wraps domain scenario outline",
                  "collaborators": [
                    "ScenarioOutline"
                  ]
                }
              ],
              "module": "story_graph.scenario_outline",
              "inherits_from": "MarkdownStoryNode",
              "_source_path": "Invoke Bot.Invoke Bot Directly"
            },
            {
              "name": "ScenarioOutlineView",
              "responsibilities": [
                {
                  "name": "Wraps scenario outline JSON",
                  "collaborators": [
                    "ScenarioOutline JSON"
                  ]
                },
                {
                  "name": "Displays scenario outline name",
                  "collaborators": [
                    "String",
                    "ScenarioOutline JSON"
                  ]
                },
                {
                  "name": "Displays scenario outline icon",
                  "collaborators": [
                    "Image"
                  ]
                },
                {
                  "name": "Displays examples table",
                  "collaborators": [
                    "List[Dict]",
                    "Table HTML"
                  ]
                },
                {
                  "name": "Opens test at scenario outline",
                  "collaborators": [
                    "CLI",
                    "ScenarioOutline JSON"
                  ]
                }
              ],
              "module": "story_graph.scenario_outline",
              "inherits_from": "StoryNodeView",
              "_source_path": "Invoke Bot.Invoke Bot Directly"
            },
            {
              "name": "AcceptanceCriteria",
              "responsibilities": [
                {
                  "name": "Get steps",
                  "collaborators": [
                    "List[Step]"
                  ]
                }
              ],
              "module": "story_graph.acceptance_criteria",
              "inherits_from": "StoryNode",
              "_source_path": "Invoke Bot.Invoke Bot Directly"
            },
            {
              "name": "TTYAcceptanceCriteria",
              "responsibilities": [
                {
                  "name": "Format steps",
                  "collaborators": [
                    "List[Step]",
                    "TTY String"
                  ]
                },
                {
                  "name": "Format criteria list",
                  "collaborators": [
                    "List[Step]",
                    "TTY String"
                  ]
                },
                {
                  "name": "Wraps domain acceptance criteria",
                  "collaborators": [
                    "AcceptanceCriteria"
                  ]
                }
              ],
              "module": "story_graph.acceptance_criteria",
              "inherits_from": "TTYStoryNode",
              "_source_path": "Invoke Bot.Invoke Bot Directly"
            },
            {
              "name": "JSONAcceptanceCriteria",
              "responsibilities": [
                {
                  "name": "Include steps",
                  "collaborators": [
                    "List[Step]",
                    "JSON Array"
                  ]
                },
                {
                  "name": "Wraps domain acceptance criteria",
                  "collaborators": [
                    "AcceptanceCriteria"
                  ]
                }
              ],
              "module": "story_graph.acceptance_criteria",
              "inherits_from": "JSONStoryNode",
              "_source_path": "Invoke Bot.Invoke Bot Directly"
            },
            {
              "name": "MarkdownAcceptanceCriteria",
              "responsibilities": [
                {
                  "name": "Format criteria as checklist",
                  "collaborators": [
                    "List[Step]",
                    "Markdown"
                  ]
                },
                {
                  "name": "Format steps list",
                  "collaborators": [
                    "List[Step]",
                    "Markdown"
                  ]
                },
                {
                  "name": "Wraps domain acceptance criteria",
                  "collaborators": [
                    "AcceptanceCriteria"
                  ]
                }
              ],
              "module": "story_graph.acceptance_criteria",
              "inherits_from": "MarkdownStoryNode",
              "_source_path": "Invoke Bot.Invoke Bot Directly"
            },
            {
              "name": "AcceptanceCriteriaView",
              "responsibilities": [
                {
                  "name": "Wraps acceptance criteria JSON",
                  "collaborators": [
                    "AcceptanceCriteria JSON"
                  ]
                },
                {
                  "name": "Displays criteria name",
                  "collaborators": [
                    "String",
                    "AcceptanceCriteria JSON"
                  ]
                },
                {
                  "name": "Displays criteria icon",
                  "collaborators": [
                    "Image"
                  ]
                },
                {
                  "name": "Displays steps as checklist",
                  "collaborators": [
                    "List[Step]",
                    "HTML"
                  ]
                }
              ],
              "module": "story_graph.acceptance_criteria",
              "inherits_from": "StoryNodeView",
              "_source_path": "Invoke Bot.Invoke Bot Directly"
            },
            {
              "name": "Step",
              "responsibilities": [
                {
                  "name": "Get text",
                  "collaborators": [
                    "String"
                  ]
                }
              ],
              "module": "story_graph.step",
              "inherits_from": "StoryNode",
              "_source_path": "Invoke Bot.Invoke Bot Directly"
            },
            {
              "name": "TTYStep",
              "responsibilities": [
                {
                  "name": "Format step text",
                  "collaborators": [
                    "String",
                    "TTY String"
                  ]
                },
                {
                  "name": "Format step keyword",
                  "collaborators": [
                    "String",
                    "TTY String"
                  ]
                },
                {
                  "name": "Wraps domain step",
                  "collaborators": [
                    "Step"
                  ]
                }
              ],
              "module": "story_graph.step",
              "inherits_from": "TTYStoryNode",
              "_source_path": "Invoke Bot.Invoke Bot Directly"
            },
            {
              "name": "JSONStep",
              "responsibilities": [
                {
                  "name": "Include step text",
                  "collaborators": [
                    "String",
                    "JSON"
                  ]
                },
                {
                  "name": "Wraps domain step",
                  "collaborators": [
                    "Step"
                  ]
                }
              ],
              "module": "story_graph.step",
              "inherits_from": "JSONStoryNode",
              "_source_path": "Invoke Bot.Invoke Bot Directly"
            },
            {
              "name": "MarkdownStep",
              "responsibilities": [
                {
                  "name": "Format step as Gherkin",
                  "collaborators": [
                    "Step",
                    "Markdown"
                  ]
                },
                {
                  "name": "Wraps domain step",
                  "collaborators": [
                    "Step"
                  ]
                }
              ],
              "module": "story_graph.step",
              "inherits_from": "MarkdownStoryNode",
              "_source_path": "Invoke Bot.Invoke Bot Directly"
            },
            {
              "name": "StepView",
              "responsibilities": [
                {
                  "name": "Wraps step JSON",
                  "collaborators": [
                    "Step JSON"
                  ]
                },
                {
                  "name": "Displays step text",
                  "collaborators": [
                    "String",
                    "Step JSON"
                  ]
                },
                {
                  "name": "Displays step icon",
                  "collaborators": [
                    "Image"
                  ]
                }
              ],
              "module": "story_graph.step",
              "inherits_from": "StoryNodeView",
              "_source_path": "Invoke Bot.Invoke Bot Directly"
            },
            {
              "name": "Test",
              "responsibilities": [
                {
                  "name": "Get test file",
                  "collaborators": [
                    "String"
                  ]
                },
                {
                  "name": "Get test class",
                  "collaborators": [
                    "String"
                  ]
                },
                {
                  "name": "Get test method",
                  "collaborators": [
                    "String"
                  ]
                },
                {
                  "name": "Get default test class",
                  "collaborators": [
                    "String"
                  ]
                },
                {
                  "name": "Get default test method",
                  "collaborators": [
                    "String"
                  ]
                },
                {
                  "name": "Build from story node",
                  "collaborators": [
                    "StoryNode",
                    "TestMetadata"
                  ]
                }
              ],
              "module": "story_graph.test",
              "_source_path": "Invoke Bot.Invoke Bot Directly"
            },
            {
              "name": "TTYTest",
              "responsibilities": [
                {
                  "name": "Serialize test to TTY",
                  "collaborators": [
                    "Test",
                    "TTY String"
                  ]
                },
                {
                  "name": "Format test file",
                  "collaborators": [
                    "String",
                    "TTY String"
                  ]
                },
                {
                  "name": "Format test class",
                  "collaborators": [
                    "String",
                    "TTY String"
                  ]
                },
                {
                  "name": "Format test method",
                  "collaborators": [
                    "String",
                    "TTY String"
                  ]
                },
                {
                  "name": "Wraps domain test",
                  "collaborators": [
                    "Test"
                  ]
                }
              ],
              "module": "story_graph.test",
              "inherits_from": "TTYAdapter",
              "_source_path": "Invoke Bot.Invoke Bot Directly"
            },
            {
              "name": "JSONTest",
              "responsibilities": [
                {
                  "name": "Serialize test to JSON",
                  "collaborators": [
                    "Test",
                    "JSON String"
                  ]
                },
                {
                  "name": "Include test file",
                  "collaborators": [
                    "String",
                    "JSON"
                  ]
                },
                {
                  "name": "Include test class",
                  "collaborators": [
                    "String",
                    "JSON"
                  ]
                },
                {
                  "name": "Include test method",
                  "collaborators": [
                    "String",
                    "JSON"
                  ]
                },
                {
                  "name": "Wraps domain test",
                  "collaborators": [
                    "Test"
                  ]
                }
              ],
              "module": "story_graph.test",
              "inherits_from": "JSONAdapter",
              "_source_path": "Invoke Bot.Invoke Bot Directly"
            },
            {
              "name": "MarkdownTest",
              "responsibilities": [
                {
                  "name": "Serialize test to Markdown",
                  "collaborators": [
                    "Test",
                    "Markdown String"
                  ]
                },
                {
                  "name": "Format test link",
                  "collaborators": [
                    "Test File",
                    "Test Class",
                    "Test Method",
                    "Markdown"
                  ]
                },
                {
                  "name": "Wraps domain test",
                  "collaborators": [
                    "Test"
                  ]
                }
              ],
              "module": "story_graph.test",
              "inherits_from": "MarkdownAdapter",
              "_source_path": "Invoke Bot.Invoke Bot Directly"
            },
            {
              "name": "TestView",
              "responsibilities": [
                {
                  "name": "Wraps test JSON",
                  "collaborators": [
                    "Test JSON"
                  ]
                },
                {
                  "name": "Displays test file",
                  "collaborators": [
                    "String",
                    "Test JSON"
                  ]
                },
                {
                  "name": "Displays test class",
                  "collaborators": [
                    "String",
                    "Test JSON"
                  ]
                },
                {
                  "name": "Displays test method",
                  "collaborators": [
                    "String",
                    "Test JSON"
                  ]
                },
                {
                  "name": "Opens test file",
                  "collaborators": [
                    "CLI",
                    "Test JSON"
                  ]
                },
                {
                  "name": "Opens test at class",
                  "collaborators": [
                    "CLI",
                    "Test JSON"
                  ]
                },
                {
                  "name": "Opens test at method",
                  "collaborators": [
                    "CLI",
                    "Test JSON"
                  ]
                }
              ],
              "module": "story_graph.test",
              "inherits_from": "PanelView",
              "_source_path": "Invoke Bot.Invoke Bot Directly"
            },
            {
              "name": "StoryUser",
              "responsibilities": [
                {
                  "name": "Get name",
                  "collaborators": [
                    "String"
                  ]
                },
                {
                  "name": "From string",
                  "collaborators": [
                    "String",
                    "StoryUser"
                  ]
                },
                {
                  "name": "From list",
                  "collaborators": [
                    "List[String]",
                    "List[StoryUser]"
                  ]
                },
                {
                  "name": "To string",
                  "collaborators": [
                    "String"
                  ]
                }
              ],
              "module": "story_graph.story_user",
              "_source_path": "Invoke Bot.Invoke Bot Directly"
            },
            {
              "name": "TTYStoryUser",
              "responsibilities": [
                {
                  "name": "Serialize user to TTY",
                  "collaborators": [
                    "StoryUser",
                    "TTY String"
                  ]
                },
                {
                  "name": "Format user name",
                  "collaborators": [
                    "String",
                    "TTY String"
                  ]
                },
                {
                  "name": "Format user list",
                  "collaborators": [
                    "List[StoryUser]",
                    "TTY String"
                  ]
                },
                {
                  "name": "Wraps domain story user",
                  "collaborators": [
                    "StoryUser"
                  ]
                }
              ],
              "module": "story_graph.story_user",
              "inherits_from": "TTYAdapter",
              "_source_path": "Invoke Bot.Invoke Bot Directly"
            },
            {
              "name": "JSONStoryUser",
              "responsibilities": [
                {
                  "name": "Serialize user to JSON",
                  "collaborators": [
                    "StoryUser",
                    "JSON String"
                  ]
                },
                {
                  "name": "Include user name",
                  "collaborators": [
                    "String",
                    "JSON"
                  ]
                },
                {
                  "name": "Include user list",
                  "collaborators": [
                    "List[StoryUser]",
                    "JSON Array"
                  ]
                },
                {
                  "name": "Wraps domain story user",
                  "collaborators": [
                    "StoryUser"
                  ]
                }
              ],
              "module": "story_graph.story_user",
              "inherits_from": "JSONAdapter",
              "_source_path": "Invoke Bot.Invoke Bot Directly"
            },
            {
              "name": "MarkdownStoryUser",
              "responsibilities": [
                {
                  "name": "Serialize user to Markdown",
                  "collaborators": [
                    "StoryUser",
                    "Markdown String"
                  ]
                },
                {
                  "name": "Format user badge",
                  "collaborators": [
                    "StoryUser",
                    "Markdown"
                  ]
                },
                {
                  "name": "Format user list",
                  "collaborators": [
                    "List[StoryUser]",
                    "Markdown"
                  ]
                },
                {
                  "name": "Wraps domain story user",
                  "collaborators": [
                    "StoryUser"
                  ]
                }
              ],
              "module": "story_graph.story_user",
              "inherits_from": "MarkdownAdapter",
              "_source_path": "Invoke Bot.Invoke Bot Directly"
            },
            {
              "name": "StoryUserView",
              "responsibilities": [
                {
                  "name": "Wraps story user JSON",
                  "collaborators": [
                    "StoryUser JSON"
                  ]
                },
                {
                  "name": "Displays user name",
                  "collaborators": [
                    "String",
                    "StoryUser JSON"
                  ]
                },
                {
                  "name": "Displays user icon",
                  "collaborators": [
                    "Image"
                  ]
                },
                {
                  "name": "Filters stories by user",
                  "collaborators": [
                    "StoryUser",
                    "Panel Result"
                  ]
                }
              ],
              "module": "story_graph.story_user",
              "inherits_from": "PanelView",
              "_source_path": "Invoke Bot.Invoke Bot Directly"
            },
            {
              "name": "StoryNode (Base)",
              "responsibilities": [
                {
                  "name": "Execute action scoped to node: Action, Parameters",
                  "collaborators": [
                    "Bot"
                  ]
                },
                {
                  "name": "Create child node with name and position",
                  "collaborators": [
                    "StoryNodeChildren",
                    "NodeValidator"
                  ]
                },
                {
                  "name": "Delete self and handle children",
                  "collaborators": [
                    "Parent",
                    "StoryNodeChildren"
                  ]
                },
                {
                  "name": "Validate child name unique among siblings",
                  "collaborators": [
                    "StoryNodeChildren"
                  ]
                },
                {
                  "name": "Adjust position to valid range",
                  "collaborators": [
                    "StoryNodeChildren"
                  ]
                },
                {
                  "name": "Resequence children after insert or delete",
                  "collaborators": [
                    "StoryNodeChildren"
                  ]
                }
              ],
              "realization": [
                {
                  "scope": "Invoke Bot.Invoke Bot Directly.Manage Story Graph.Edit Story Graph.Create Child Story Node.Create child node with specified position",
                  "scenario": "Parent node creates new child at specific position, shifting existing children and maintaining sequential order",
                  "walks": [
                    {
                      "covers": "Steps 1-2 (Initialize parent, validate position)",
                      "object_flow": [
                        "parent_node: Epic = StoryGraph.get_epic(name: 'User Management')",
                        "existing_children: ['SubEpic A', 'SubEpic B'] = parent_node.get_children()",
                        "target_position: 1 = request.position",
                        "is_valid: True = parent_node.validate_position(position: 1, child_count: 2)",
                        "  -> max_position: 2 = StoryNodeChildren.get_max_position(children: ['SubEpic A', 'SubEpic B'])",
                        "  -> is_in_range: True = (position: 1 <= max_position: 2)",
                        "     return is_in_range: True",
                        "return is_valid: True"
                      ]
                    },
                    {
                      "covers": "Step 3 (Create child and insert at position)",
                      "object_flow": [
                        "new_child: SubEpic = parent_node.create_child(name: 'SubEpic C', position: 1)",
                        "  -> is_duplicate: False = parent_node.validate_child_name_unique(name: 'SubEpic C')",
                        "     -> existing_names: ['SubEpic A', 'SubEpic B'] = StoryNodeChildren.get_child_names()",
                        "     -> is_unique: True = ('SubEpic C' not in existing_names)",
                        "        return is_unique: True",
                        "     return is_duplicate: False",
                        "  -> child: SubEpic = SubEpic.create(name: 'SubEpic C', parent: Epic)",
                        "  -> parent_node.resequence_children(insert_at: 1, new_child: child)",
                        "     -> children_to_shift: ['SubEpic B'] = StoryNodeChildren.get_children_from_position(position: 1)",
                        "     -> StoryNodeChildren.shift_positions(children: ['SubEpic B'], offset: 1)",
                        "        SubEpic B.position = 1 + 1 = 2",
                        "     -> StoryNodeChildren.insert(child: SubEpic C, position: 1)",
                        "        SubEpic C.position = 1",
                        "  -> final_order: ['SubEpic A', 'SubEpic C', 'SubEpic B'] = parent_node.get_children()",
                        "     return final_order",
                        "return new_child: SubEpic"
                      ]
                    }
                  ],
                  "model_updates": [
                    "Added 'Create child node with name and position' responsibility to StoryNode",
                    "Added 'Validate child name unique among siblings' responsibility to StoryNode",
                    "Added 'Adjust position to valid range' responsibility to StoryNode",
                    "Added 'Resequence children after insert or delete' responsibility to StoryNode",
                    "Added NodeValidator as collaborator for validation operations",
                    "Added Parent as collaborator for delete operations"
                  ]
                },
                {
                  "scope": "Invoke Bot.Invoke Bot Directly.Manage Story Graph.Edit Story Graph.Delete Story Node.Delete node including children (cascade delete)",
                  "scenario": "Node with descendants is deleted using cascade option, removing entire subtree and resequencing siblings",
                  "walks": [
                    {
                      "covers": "Steps 1-3 (Locate node, count descendants, initiate cascade delete)",
                      "object_flow": [
                        "parent_node: Epic = StoryGraph.get_epic(name: 'User Management')",
                        "target_node: SubEpic = parent_node.get_child(name: 'SubEpic B')",
                        "child_count: 2 = target_node.count_children()",
                        "  -> direct_children: ['Story A', 'Story B'] = StoryNodeChildren.get_children()",
                        "     return len(direct_children): 2",
                        "total_descendants: 5 = target_node.count_all_descendants()",
                        "  -> count: 2 = child_count",
                        "  -> for each child in direct_children:",
                        "     -> child_descendants: 3 = child.count_all_descendants()",
                        "        count = count + 1 + child_descendants = 2 + 1 + 2 = 5",
                        "     return count: 5",
                        "cascade_flag: True = request.cascade",
                        "return {node: target_node, descendants: 5, cascade: True}"
                      ]
                    },
                    {
                      "covers": "Steps 4-5 (Recursively delete descendants, remove from parent)",
                      "object_flow": [
                        "target_node.delete(cascade: True)",
                        "  -> target_node.delete_all_descendants()",
                        "     -> children: ['Story A', 'Story B'] = target_node.get_children()",
                        "     -> for each child in children:",
                        "        -> child.delete(cascade: True)",
                        "           -> nested_children = child.get_children()",
                        "           -> for each nested in nested_children:",
                        "              -> nested.delete(cascade: True)",
                        "                 # Recursively deletes scenarios under stories",
                        "           -> child.remove_from_parent()",
                        "        # Stories A and B and their scenarios deleted",
                        "  -> target_node.remove_from_parent()",
                        "     -> parent: Epic = target_node.parent",
                        "     -> position: 1 = target_node.position",
                        "     -> parent.remove_child(child: target_node)",
                        "        -> StoryNodeChildren.remove(child: target_node)",
                        "        -> parent.resequence_children(deleted_position: 1)",
                        "           -> siblings_after: ['SubEpic C', 'SubEpic D'] = StoryNodeChildren.get_children_from_position(position: 2)",
                        "           -> StoryNodeChildren.shift_positions(children: siblings_after, offset: -1)",
                        "              SubEpic C.position = 2 - 1 = 1",
                        "              SubEpic D.position = 3 - 1 = 2",
                        "           -> final_children: ['SubEpic A', 'SubEpic C', 'SubEpic D'] = parent.get_children()",
                        "              return final_children",
                        "return deleted: True"
                      ]
                    }
                  ],
                  "model_updates": [
                    "Added 'Delete self and handle children' responsibility to StoryNode",
                    "Confirmed 'Resequence children after insert or delete' handles both insert and delete cases",
                    "Added recursive deletion pattern for cascade deletes"
                  ]
                }
              ],
              "module": "story_graph.nodes",
              "_source_path": "Invoke Bot.Invoke Bot Directly.Manage Story Graph.Edit Story Graph"
            },
            {
              "name": "SubEpic",
              "responsibilities": [
                {
                  "name": "Validate cannot mix Sub-Epics and Stories",
                  "collaborators": [
                    "StoryNodeChildren"
                  ]
                },
                {
                  "name": "Create StoryGroup when first Story added",
                  "collaborators": [
                    "StoryGroup"
                  ]
                },
                {
                  "name": "Check child type compatibility before add",
                  "collaborators": [
                    "StoryNodeChildren"
                  ]
                }
              ],
              "realization": [
                {
                  "scope": "Invoke Bot.Invoke Bot Directly.Manage Story Graph.Edit Story Graph.Create Child Story Node.SubEpic with SubEpics cannot create Story child",
                  "scenario": "SubEpic that already contains SubEpic children rejects attempt to add Story child, maintaining hierarchy rules",
                  "walks": [
                    {
                      "covers": "Steps 1-4 (Attempt Story creation, validate hierarchy, reject with error)",
                      "object_flow": [
                        "subepic_node: SubEpic = StoryGraph.get_subepic(name: 'User Management')",
                        "existing_subepic: SubEpic = subepic_node.get_child(name: 'Authentication')",
                        "requested_child_type: 'Story' = request.child_type",
                        "can_add: False = subepic_node.check_child_type_compatibility(child_type: 'Story')",
                        "  -> has_subepics: True = subepic_node.has_children_of_type(type: 'SubEpic')",
                        "     -> children: [Authentication] = StoryNodeChildren.get_children()",
                        "     -> subepic_count: 1 = len([c for c in children if c.type == 'SubEpic'])",
                        "     -> has_subepics: True = (subepic_count: 1 > 0)",
                        "        return has_subepics: True",
                        "  -> is_compatible: False = SubEpic.validate_cannot_mix_subepics_and_stories(has_subepics: True, adding_type: 'Story')",
                        "     -> if has_subepics: True and adding_type: 'Story':",
                        "        return is_compatible: False",
                        "  return can_add: False",
                        "error: ValidationError = SubEpic.create_hierarchy_error(message: 'Cannot create Story under SubEpic with SubEpics')",
                        "return error: ValidationError"
                      ]
                    }
                  ],
                  "model_updates": [
                    "Added 'Create StoryGroup when first Story added' responsibility to SubEpic",
                    "Added 'Check child type compatibility before add' responsibility to SubEpic",
                    "Clarified that 'Validate cannot mix Sub-Epics and Stories' is used during create_child operations"
                  ]
                }
              ],
              "module": "story_graph.sub_epic",
              "_source_path": "Invoke Bot.Invoke Bot Directly.Manage Story Graph.Edit Story Graph"
            },
            {
              "name": "Story",
              "responsibilities": [
                {
                  "name": "Maintain separate sequential ordering for scenarios and acceptance criteria",
                  "collaborators": [
                    "StoryNodeChildren"
                  ]
                },
                {
                  "name": "Route child to correct collection by type",
                  "collaborators": [
                    "ScenarioCollection",
                    "AcceptanceCriteriaCollection"
                  ]
                }
              ],
              "realization": [
                {
                  "scope": "Invoke Bot.Invoke Bot Directly.Manage Story Graph.Edit Story Graph.Create Child Story Node.Story creates child and adds to correct collection",
                  "scenario": "Story creates Scenario and AcceptanceCriteria children, routing each to separate collections with independent ordering",
                  "walks": [
                    {
                      "covers": "Steps 1-3 (Create Scenario child, route to scenarios collection)",
                      "object_flow": [
                        "story_node: Story = StoryGraph.get_story(name: 'Validate Password')",
                        "child_type: 'Scenario' = request.child_type",
                        "child_name: 'Valid Password Entered' = request.child_name",
                        "new_scenario: Scenario = story_node.create_child(name: child_name, type: child_type)",
                        "  -> target_collection: 'scenarios' = story_node.route_child_to_correct_collection(child_type: 'Scenario')",
                        "     -> if child_type in ['Scenario', 'ScenarioOutline']:",
                        "        return collection: 'scenarios'",
                        "     -> elif child_type == 'AcceptanceCriteria':",
                        "        return collection: 'acceptance_criteria'",
                        "  -> scenario: Scenario = Scenario.create(name: 'Valid Password Entered', parent: story_node)",
                        "  -> position: 0 = ScenarioCollection.get_next_position()",
                        "  -> ScenarioCollection.add(child: scenario, position: 0)",
                        "     scenario.position = 0",
                        "  -> scenarios: ['Valid Password Entered'] = ScenarioCollection.get_all()",
                        "  -> acceptance_criteria: [] = AcceptanceCriteriaCollection.get_all()",
                        "     # Verify scenario NOT added to acceptance_criteria collection",
                        "     return {scenarios: scenarios, acceptance_criteria: acceptance_criteria}",
                        "return new_scenario: Scenario"
                      ]
                    },
                    {
                      "covers": "Steps 4-6 (Create AcceptanceCriteria child, route to separate collection with independent ordering)",
                      "object_flow": [
                        "ac_child_type: 'AcceptanceCriteria' = request.child_type",
                        "ac_name: 'Password Must Not Be Empty' = request.child_name",
                        "new_ac: AcceptanceCriteria = story_node.create_child(name: ac_name, type: ac_child_type)",
                        "  -> target_collection: 'acceptance_criteria' = story_node.route_child_to_correct_collection(child_type: 'AcceptanceCriteria')",
                        "     return collection: 'acceptance_criteria'",
                        "  -> ac: AcceptanceCriteria = AcceptanceCriteria.create(name: 'Password Must Not Be Empty', parent: story_node)",
                        "  -> ac_position: 0 = AcceptanceCriteriaCollection.get_next_position()",
                        "     # Independent ordering from scenarios - both start at 0",
                        "  -> AcceptanceCriteriaCollection.add(child: ac, position: 0)",
                        "     ac.position = 0",
                        "  -> scenarios: ['Valid Password Entered'] = ScenarioCollection.get_all()",
                        "     # Verify AC NOT added to scenarios collection",
                        "  -> acceptance_criteria: ['Password Must Not Be Empty'] = AcceptanceCriteriaCollection.get_all()",
                        "     return {scenarios: scenarios, acceptance_criteria: acceptance_criteria}",
                        "return new_ac: AcceptanceCriteria"
                      ]
                    }
                  ],
                  "model_updates": [
                    "Added 'Route child to correct collection by type' responsibility to Story",
                    "Added ScenarioCollection and AcceptanceCriteriaCollection as collaborators",
                    "Clarified that 'Maintain separate sequential ordering' means independent position counters per collection"
                  ]
                }
              ],
              "module": "story_graph.story",
              "_source_path": "Invoke Bot.Invoke Bot Directly.Manage Story Graph.Edit Story Graph"
            },
            {
              "name": "InlineNameEditor",
              "responsibilities": [
                {
                  "name": "Enables inline editing mode",
                  "collaborators": [
                    "DOM Element",
                    "Input Field"
                  ]
                },
                {
                  "name": "Validates name in real-time",
                  "collaborators": [
                    "StoryNode",
                    "Siblings Collection"
                  ]
                },
                {
                  "name": "Saves name on blur or Enter",
                  "collaborators": [
                    "StoryNode",
                    "Event"
                  ]
                },
                {
                  "name": "Cancels on Escape",
                  "collaborators": [
                    "Event",
                    "Original Value"
                  ]
                },
                {
                  "name": "Shows validation messages",
                  "collaborators": [
                    "ValidationMessageDisplay",
                    "Message"
                  ]
                }
              ],
              "module": "story_graph.nodes",
              "_source_path": "Invoke Bot.Invoke Bot Through Panel",
              "instantiated_with": [
                "StoryNode"
              ],
              "ownership": {
                "has": [
                  "ValidationMessageDisplay"
                ],
                "references": [
                  "StoryNode"
                ]
              }
            },
            {
              "name": "StoryNodeDragDropManager",
              "responsibilities": [
                {
                  "name": "Shows drag cursor with icon",
                  "collaborators": [
                    "Cursor Style",
                    "Node Icon"
                  ]
                },
                {
                  "name": "Validates drop target compatibility at UI level",
                  "collaborators": [
                    "Source Node Type",
                    "Target Parent Type"
                  ]
                },
                {
                  "name": "Shows no-drop cursor for incompatible targets",
                  "collaborators": [
                    "Cursor Style"
                  ]
                },
                {
                  "name": "Highlights valid drop target",
                  "collaborators": [
                    "Target Element",
                    "CSS Class"
                  ]
                },
                {
                  "name": "Delegates move to StoryNode domain operation",
                  "collaborators": [
                    "StoryNode",
                    "Target Parent",
                    "Position"
                  ]
                },
                {
                  "name": "Returns node to original on invalid drop",
                  "collaborators": [
                    "Original Position",
                    "Animation"
                  ]
                }
              ],
              "module": "story_graph.story_map",
              "_source_path": "Invoke Bot.Invoke Bot Through REPL",
              "instantiated_with": [
                "StoryGraph"
              ],
              "ownership": {
                "references": [
                  "StoryGraph",
                  "StoryNode"
                ]
              }
            }
          ],
          "test_file": "invoke_bot/edit_story_map/",
          "sub_epics": [
            {
              "name": "Filter Scope",
              "sequential_order": 0.0,
              "behavior": null,
              "domain_concepts": [],
              "sub_epics": [],
              "story_groups": [
                {
                  "name": "",
                  "sequential_order": 0.0,
                  "type": "and",
                  "connector": null,
                  "behavior": null,
                  "stories": [
                    {
                      "name": "Add Filter Part To File Scope",
                      "sequential_order": 0.0,
                      "connector": "or",
                      "story_type": "user",
                      "users": [
                        "Bot Behavior"
                      ],
                      "test_class": "TestAddFilterPartToFileScope",
                      "scenarios": [],
                      "acceptance_criteria": [],
                      "behavior": null
                    },
                    {
                      "name": "Filter File Scope  By Files",
                      "sequential_order": 1.0,
                      "connector": null,
                      "story_type": "user",
                      "users": [],
                      "test_class": null,
                      "scenarios": [],
                      "acceptance_criteria": [],
                      "behavior": null,
                      "file_link": "C:\\dev\\agile_bots\\docs\\story\\scenarios\\Invoke Bot\\Work With Story Map\\Filter Scope\\Filter Stories\\📄 Filter File Scope  By Files.md"
                    },
                    {
                      "name": "Remove Filter Part From File Scope",
                      "sequential_order": 2.0,
                      "connector": "or",
                      "story_type": "user",
                      "users": [
                        "Bot Behavior"
                      ],
                      "test_class": "TestRemoveFilterPartFromFileScope",
                      "scenarios": [],
                      "acceptance_criteria": [],
                      "behavior": null
                    }
                  ]
                }
              ]
            },
            {
              "name": "Edit Story Map",
              "sequential_order": 1.0,
              "behavior": null,
              "domain_concepts": [],
              "test_file": "invoke_bot/edit_story_map/test_edit_story_nodes.py",
              "sub_epics": [],
              "story_groups": [
                {
                  "name": "",
                  "sequential_order": 0.0,
                  "type": "and",
                  "connector": null,
                  "behavior": null,
                  "stories": [
                    {
                      "name": "Navigate Story Graph",
                      "sequential_order": 0.0,
                      "connector": "or",
                      "story_type": "user",
                      "users": [
                        "Bot Behavior"
                      ],
                      "test_class": "TestNavigateStoryGraph",
                      "scenarios": [
                        {
                          "name": "Story Map Loads Epics",
                          "sequential_order": 1.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_story_map_loads_epics",
                          "steps": "",
                          "test": {
                            "method": "test_story_map_loads_epics",
                            "file": "invoke_bot/edit_story_map/test_edit_story_nodes.py",
                            "line": 44
                          }
                        },
                        {
                          "name": "Epic Has Sub Epics",
                          "sequential_order": 2.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_epic_has_sub_epics",
                          "steps": "",
                          "test": {
                            "method": "test_epic_has_sub_epics",
                            "file": "invoke_bot/edit_story_map/test_edit_story_nodes.py",
                            "line": 56
                          }
                        },
                        {
                          "name": "Sub Epic Has Story Groups",
                          "sequential_order": 3.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_sub_epic_has_story_groups",
                          "steps": "",
                          "test": {
                            "method": "test_sub_epic_has_story_groups",
                            "file": "invoke_bot/edit_story_map/test_edit_story_nodes.py",
                            "line": 72
                          }
                        },
                        {
                          "name": "Story Group Has Stories",
                          "sequential_order": 4.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_story_group_has_stories",
                          "steps": "",
                          "test": {
                            "method": "test_story_group_has_stories",
                            "file": "invoke_bot/edit_story_map/test_edit_story_nodes.py",
                            "line": 88
                          }
                        },
                        {
                          "name": "Story Has Properties",
                          "sequential_order": 5.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_story_has_properties",
                          "steps": "",
                          "test": {
                            "method": "test_story_has_properties",
                            "file": "invoke_bot/edit_story_map/test_edit_story_nodes.py",
                            "line": 106
                          }
                        },
                        {
                          "name": "Story Has Scenarios",
                          "sequential_order": 6.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_story_has_scenarios",
                          "steps": "",
                          "test": {
                            "method": "test_story_has_scenarios",
                            "file": "invoke_bot/edit_story_map/test_edit_story_nodes.py",
                            "line": 123
                          }
                        },
                        {
                          "name": "Scenario Has Properties",
                          "sequential_order": 7.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_scenario_has_properties",
                          "steps": "",
                          "test": {
                            "method": "test_scenario_has_properties",
                            "file": "invoke_bot/edit_story_map/test_edit_story_nodes.py",
                            "line": 143
                          }
                        },
                        {
                          "name": "Scenario Default Test Method",
                          "sequential_order": 8.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_scenario_default_test_method",
                          "steps": "",
                          "test": {
                            "method": "test_scenario_default_test_method",
                            "file": "invoke_bot/edit_story_map/test_edit_story_nodes.py",
                            "line": 162
                          }
                        },
                        {
                          "name": "Story Has Scenario Outlines",
                          "sequential_order": 9.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_story_has_scenario_outlines",
                          "steps": ""
                        },
                        {
                          "name": "Scenario Outline Has Examples",
                          "sequential_order": 10.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_scenario_outline_has_examples",
                          "steps": ""
                        },
                        {
                          "name": "Story Default Test Class",
                          "sequential_order": 11.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_story_default_test_class",
                          "steps": "",
                          "test": {
                            "method": "test_story_default_test_class",
                            "file": "invoke_bot/edit_story_map/test_edit_story_nodes.py",
                            "line": 209
                          }
                        },
                        {
                          "name": "Story Map Walk Traverses All Nodes",
                          "sequential_order": 12.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_story_map_walk_traverses_all_nodes",
                          "steps": "",
                          "test": {
                            "method": "test_story_map_walk_traverses_all_nodes",
                            "file": "invoke_bot/edit_story_map/test_edit_story_nodes.py",
                            "line": 221
                          }
                        },
                        {
                          "name": "Map Location For Epic",
                          "sequential_order": 13.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_map_location_for_epic",
                          "steps": "",
                          "test": {
                            "method": "test_map_location_for_epic",
                            "file": "invoke_bot/edit_story_map/test_edit_story_nodes.py",
                            "line": 242
                          }
                        },
                        {
                          "name": "Map Location For Sub Epic",
                          "sequential_order": 14.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_map_location_for_sub_epic",
                          "steps": "",
                          "test": {
                            "method": "test_map_location_for_sub_epic",
                            "file": "invoke_bot/edit_story_map/test_edit_story_nodes.py",
                            "line": 255
                          }
                        },
                        {
                          "name": "Map Location For Story",
                          "sequential_order": 15.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_map_location_for_story",
                          "steps": "",
                          "test": {
                            "method": "test_map_location_for_story",
                            "file": "invoke_bot/edit_story_map/test_edit_story_nodes.py",
                            "line": 268
                          }
                        },
                        {
                          "name": "Scenario Map Location",
                          "sequential_order": 16.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_scenario_map_location",
                          "steps": "",
                          "test": {
                            "method": "test_scenario_map_location",
                            "file": "invoke_bot/edit_story_map/test_edit_story_nodes.py",
                            "line": 281
                          }
                        },
                        {
                          "name": "Scenario Outline Map Location",
                          "sequential_order": 17.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_scenario_outline_map_location",
                          "steps": ""
                        },
                        {
                          "name": "From Bot Loads Story Graph",
                          "sequential_order": 18.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_from_bot_loads_story_graph",
                          "steps": "",
                          "test": {
                            "method": "test_from_bot_loads_story_graph",
                            "file": "invoke_bot/edit_story_map/test_edit_story_nodes.py",
                            "line": 309
                          }
                        },
                        {
                          "name": "From Bot With Path",
                          "sequential_order": 19.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_from_bot_with_path",
                          "steps": "",
                          "test": {
                            "method": "test_from_bot_with_path",
                            "file": "invoke_bot/edit_story_map/test_edit_story_nodes.py",
                            "line": 322
                          }
                        },
                        {
                          "name": "Scenario Map Location",
                          "sequential_order": 20.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_scenario_map_location_duplicate",
                          "steps": "",
                          "test": {
                            "method": "test_scenario_map_location_duplicate",
                            "file": "invoke_bot/edit_story_map/test_edit_story_nodes.py",
                            "line": 338
                          }
                        },
                        {
                          "name": "Scenario Outline Map Location",
                          "sequential_order": 21.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_scenario_outline_map_location_duplicate",
                          "steps": ""
                        },
                        {
                          "name": "Child1",
                          "sequential_order": 22.0,
                          "type": "",
                          "background": [],
                          "test_method": null,
                          "steps": ""
                        }
                      ],
                      "acceptance_criteria": [],
                      "behavior": null
                    },
                    {
                      "name": "Navigate Story Graph Using CLI",
                      "sequential_order": 1.0,
                      "connector": null,
                      "story_type": "user",
                      "users": [
                        "User"
                      ],
                      "test_class": "TestNavigateStoryGraphUsingCLI",
                      "scenarios": [
                        {
                          "name": "Navigation commands respect active scope",
                          "sequential_order": 1.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_navigate_story_graph_with_scope_via_cli",
                          "steps": "GIVEN: CLI session with story graph and scope\nWHEN: navigation commands used\nTHEN: Navigation respects scope"
                        }
                      ],
                      "acceptance_criteria": [],
                      "behavior": null
                    },
                    {
                      "name": "Display Story Hierarchy Panel",
                      "sequential_order": 2.0,
                      "connector": "and",
                      "story_type": "user",
                      "users": [
                        "User"
                      ],
                      "test_class": "TestDisplayStoryScopeHierarchy",
                      "scenarios": [
                        {
                          "name": "Display nested epic and story hierarchy",
                          "sequential_order": 1.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": null,
                          "steps": "Given Story graph has epics with nested sub-epics\nWhen User views scope section\nThen Panel displays epic names (Invoke Bot)\nWhen User expands Invoke Bot epic\nThen Panel displays sub-epics (Invoke Bot Through Panel, Invoke Bot Through REPL)\nWhen User expands Invoke Bot Through Panel sub-epic\nThen Panel displays nested sub-epics (Manage Panel Session, Navigate Behaviors)\nWhen User expands Manage Panel Session sub-epic\nThen Panel displays stories (Open Panel, Display Session Status)"
                        },
                        {
                          "name": "Open test file at story test class",
                          "sequential_order": 2.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": null,
                          "steps": "Given Story has test link displayed\nAnd Test file is test_manage_panel_session.spec.js\nAnd Test class is TestOpenPanel\nWhen User clicks test link for Open Panel story\nThen VS Code opens test_manage_panel_session.spec.js file\nAnd Editor scrolls to TestOpenPanel class"
                        },
                        {
                          "name": "Open story markdown from story link",
                          "sequential_order": 3.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": null,
                          "steps": "Given Story has story file link displayed\nAnd Story file is Open Panel.md\nWhen User clicks story link for Open Panel\nThen VS Code opens Open Panel.md file in editor"
                        },
                        {
                          "name": "Display error for missing test file",
                          "sequential_order": 4.0,
                          "type": "error_path",
                          "background": [],
                          "test_method": null,
                          "steps": "Given Story has test link displayed\nAnd Test file does not exist\nWhen User clicks test link\nThen Panel displays error message\nAnd Error message indicates file not found"
                        },
                        {
                          "name": "Display test tube icons for all node types",
                          "sequential_order": 5.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": null,
                          "steps": "Given Epic has test file\nAnd Sub-epic has test file\nAnd Story has test class\nAnd Scenario has test method\nWhen Panel renders scope hierarchy\nThen Test tube icon appears next to epic name\nAnd Test tube icon appears next to sub-epic name\nAnd Test tube icon appears next to story name\nAnd Test tube icon appears next to scenario name\nAnd All test tube icons show correct test_tube.png image\nAnd Test tube icons are large enough to see clearly"
                        },
                        {
                          "name": "Reveal epic and sub-epic folders in explorer",
                          "sequential_order": 6.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": null,
                          "steps": "Given Panel displays scope hierarchy with epics and sub-epics\nWhen User clicks epic name\nThen VS Code reveals epic folder in explorer\nWhen User clicks sub-epic name\nThen VS Code reveals sub-epic folder in explorer"
                        },
                        {
                          "name": "Open story markdown from hierarchy",
                          "sequential_order": 7.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": null,
                          "steps": "Given Panel displays scope hierarchy with stories\nAnd Story has matching markdown file\nWhen User clicks story name\nThen VS Code opens story markdown file in editor"
                        },
                        {
                          "name": "Open test file at scenario test method",
                          "sequential_order": 8.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": null,
                          "steps": "Given Story has scenarios with test methods\nAnd Scenario test method is at line 145 in test file\nWhen User clicks scenario test tube icon\nThen VS Code opens test file\nAnd Editor scrolls to line 145\nAnd Test method definition is visible at cursor"
                        },
                        {
                          "name": "Scroll to scenario anchor in story file",
                          "sequential_order": 9.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": null,
                          "steps": "Given Story markdown file has scenario sections with anchors\nAnd Scenario is named User expands collapsed section\nWhen User clicks scenario name in panel\nThen VS Code opens story markdown file\nAnd Editor scrolls to scenario anchor\nAnd Scenario section is visible with heading"
                        },
                        {
                          "name": "Reveal folders in explorer from name links",
                          "sequential_order": 10.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": null,
                          "steps": "Given Epic has matching folder in docs/story/map\nAnd Sub-epic has matching folder\nWhen User clicks epic name link\nThen VS Code reveals folder in explorer view\nWhen User clicks sub-epic name link\nThen VS Code reveals sub-epic folder in explorer view"
                        }
                      ],
                      "acceptance_criteria": [
                        {
                          "name": "WHEN User views story scope\nTHEN System displays epic list collapsed",
                          "text": "WHEN User views story scope\nTHEN System displays epic list collapsed",
                          "sequential_order": 1.0
                        },
                        {
                          "name": "WHEN User clicks collapsed epic expand icon AND epic has sub-epics\nTHEN System expands epic showing sub-epics collapsed beneath it",
                          "text": "WHEN User clicks collapsed epic expand icon AND epic has sub-epics\nTHEN System expands epic showing sub-epics collapsed beneath it",
                          "sequential_order": 2.0
                        },
                        {
                          "name": "WHEN User clicks epic name AND matching epic folder exists\nTHEN System opens epic folder in IDE explorer",
                          "text": "WHEN User clicks epic name AND matching epic folder exists\nTHEN System opens epic folder in IDE explorer",
                          "sequential_order": 3.0
                        },
                        {
                          "name": "WHEN Epic has test file\nTHEN System displays test tube icon next to epic name",
                          "text": "WHEN Epic has test file\nTHEN System displays test tube icon next to epic name",
                          "sequential_order": 4.0
                        },
                        {
                          "name": "WHEN User clicks epic test link\nTHEN System opens test file in editor",
                          "text": "WHEN User clicks epic test link\nTHEN System opens test file in editor",
                          "sequential_order": 5.0
                        },
                        {
                          "name": "WHEN User clicks collapsed sub-epic expand icon AND matching sub-epic has stories\nTHEN System expands sub-epic showing stories collapsed beneath it",
                          "text": "WHEN User clicks collapsed sub-epic expand icon AND matching sub-epic has stories\nTHEN System expands sub-epic showing stories collapsed beneath it",
                          "sequential_order": 6.0
                        },
                        {
                          "name": "WHEN Sub-epic has test file\nTHEN System displays test tube icon next to sub-epic name",
                          "text": "WHEN Sub-epic has test file\nTHEN System displays test tube icon next to sub-epic name",
                          "sequential_order": 7.0
                        },
                        {
                          "name": "WHEN User clicks sub-epic test link\nTHEN System opens test file in editor",
                          "text": "WHEN User clicks sub-epic test link\nTHEN System opens test file in editor",
                          "sequential_order": 8.0
                        },
                        {
                          "name": "WHEN User clicks sub-epic name\nTHEN System opens sub-epic folder in IDE explorer",
                          "text": "WHEN User clicks sub-epic name\nTHEN System opens sub-epic folder in IDE explorer",
                          "sequential_order": 9.0
                        },
                        {
                          "name": "WHEN User clicks collapsed story expand icon AND matching sub-epic has stories\nTHEN System expands story showing scenarios collapsed beneath it",
                          "text": "WHEN User clicks collapsed story expand icon AND matching sub-epic has stories\nTHEN System expands story showing scenarios collapsed beneath it",
                          "sequential_order": 10.0
                        },
                        {
                          "name": "WHEN User clicks story name\nTHEN System opens story markdown file in editor",
                          "text": "WHEN User clicks story name\nTHEN System opens story markdown file in editor",
                          "sequential_order": 11.0
                        },
                        {
                          "name": "WHEN Story has test file\nTHEN System displays test tube icon next to story name",
                          "text": "WHEN Story has test file\nTHEN System displays test tube icon next to story name",
                          "sequential_order": 12.0
                        },
                        {
                          "name": "WHEN User clicks story test link\nTHEN System opens test file at test class",
                          "text": "WHEN User clicks story test link\nTHEN System opens test file at test class",
                          "sequential_order": 13.0
                        },
                        {
                          "name": "WHEN User clicks collapsed story expand icon\nTHEN System expands story showing scenarios",
                          "text": "WHEN User clicks collapsed story expand icon\nTHEN System expands story showing scenarios",
                          "sequential_order": 14.0
                        },
                        {
                          "name": "WHEN User clicks scenario name\nTHEN System opens story markdown file at scenario anchor",
                          "text": "WHEN User clicks scenario name\nTHEN System opens story markdown file at scenario anchor",
                          "sequential_order": 15.0
                        },
                        {
                          "name": "WHEN Scenario has test method\nTHEN System displays test tube icon next to scenario name",
                          "text": "WHEN Scenario has test method\nTHEN System displays test tube icon next to scenario name",
                          "sequential_order": 16.0
                        },
                        {
                          "name": "WHEN User clicks scenario test link\nTHEN System opens test file at scenario test method line",
                          "text": "WHEN User clicks scenario test link\nTHEN System opens test file at scenario test method line",
                          "sequential_order": 17.0
                        },
                        {
                          "name": "WHEN Test tube icon is displayed\nTHEN System shows correct test tube image",
                          "text": "WHEN Test tube icon is displayed\nTHEN System shows correct test tube image",
                          "sequential_order": 18.0
                        },
                        {
                          "name": "WHEN User clicks epic or sub-epic or story name\nTHEN System opens corresponding file or folder",
                          "text": "WHEN User clicks epic or sub-epic or story name\nTHEN System opens corresponding file or folder",
                          "sequential_order": 19.0
                        }
                      ],
                      "behavior": null
                    },
                    {
                      "name": "Create Child Story Node",
                      "sequential_order": 3.0,
                      "connector": null,
                      "story_type": "user",
                      "users": [],
                      "test_class": "TestCreateChildStoryNode",
                      "scenarios": [
                        {
                          "name": "Create child node at any hierarchy level with default position",
                          "sequential_order": 1.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_create_child_node_at_hierarchy_level",
                          "steps": "Given Story Graph has parent node with existing children\nWhen Parent creates child node of specified type\nThen Child is added at last position with correct total count",
                          "test": {
                            "method": "test_create_child_node_at_hierarchy_level",
                            "file": "invoke_bot/edit_story_map/test_edit_story_nodes.py",
                            "line": 555
                          }
                        },
                        {
                          "name": "Create child node with specified position",
                          "sequential_order": 2.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_create_child_node_with_position",
                          "steps": "Given Story Graph has parent node with existing children\nWhen Parent creates child node at specific position\nThen Child is inserted at position and existing children shift",
                          "test": {
                            "method": "test_create_child_node_with_position",
                            "file": "invoke_bot/edit_story_map/test_edit_story_nodes.py",
                            "line": 585
                          }
                        },
                        {
                          "name": "Create child node with invalid position adjusts to last position",
                          "sequential_order": 3.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_create_child_invalid_position_adjusts",
                          "steps": "Given Story Graph has parent node with existing children\nWhen Parent creates child node at invalid position (exceeds child count)\nThen System adjusts position to last valid position",
                          "test": {
                            "method": "test_create_child_invalid_position_adjusts",
                            "file": "invoke_bot/edit_story_map/test_edit_story_nodes.py",
                            "line": 615
                          }
                        },
                        {
                          "name": "Create child node with duplicate name returns error",
                          "sequential_order": 4.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_create_child_with_duplicate_name_returns_error",
                          "steps": "Given Story Graph has parent node with existing child\nWhen Parent attempts to create child with duplicate name\nThen System identifies duplicate and returns error",
                          "test": {
                            "method": "test_create_child_with_duplicate_name_returns_error",
                            "file": "invoke_bot/edit_story_map/test_edit_story_nodes.py",
                            "line": 645
                          }
                        },
                        {
                          "name": "Create child node without name generates unique name",
                          "sequential_order": 5.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_create_child_without_name_generates_unique_name",
                          "steps": "Given Story Graph has parent node with existing children\nWhen Parent creates child without providing name\nThen System generates unique name (Child1, Child2, etc.)",
                          "test": {
                            "method": "test_create_child_without_name_generates_unique_name",
                            "file": "invoke_bot/edit_story_map/test_edit_story_nodes.py",
                            "line": 674
                          }
                        },
                        {
                          "name": "SubEpic creates Story and auto-creates StoryGroup on first Story",
                          "sequential_order": 6.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_subepic_creates_story_and_storygroup",
                          "steps": "Given SubEpic has existing Story count (0 or more)\nWhen SubEpic creates new Story\nThen StoryGroup is created (if first) or existing StoryGroup is used",
                          "test": {
                            "method": "test_subepic_creates_story_and_storygroup",
                            "file": "invoke_bot/edit_story_map/test_edit_story_nodes.py",
                            "line": 703
                          }
                        },
                        {
                          "name": "SubEpic with Stories cannot create SubEpic child",
                          "sequential_order": 7.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_subepic_with_stories_cannot_create_subepic_child",
                          "steps": "Given SubEpic has existing Story children\nWhen SubEpic attempts to create SubEpic child\nThen System identifies hierarchy violation and returns error",
                          "test": {
                            "method": "test_subepic_with_stories_cannot_create_subepic_child",
                            "file": "invoke_bot/edit_story_map/test_edit_story_nodes.py",
                            "line": 727
                          }
                        },
                        {
                          "name": "SubEpic with SubEpics cannot create Story child",
                          "sequential_order": 8.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_subepic_with_subepics_cannot_create_story_child",
                          "steps": "Given SubEpic has existing SubEpic children\nWhen SubEpic attempts to create Story child\nThen System identifies hierarchy violation and returns error",
                          "test": {
                            "method": "test_subepic_with_subepics_cannot_create_story_child",
                            "file": "invoke_bot/edit_story_map/test_edit_story_nodes.py",
                            "line": 749
                          }
                        },
                        {
                          "name": "Story creates child and adds to correct collection",
                          "sequential_order": 9.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_story_creates_child_in_correct_collection",
                          "steps": "Given Story exists in story graph\nWhen Story creates child of specific type (Scenario, ScenarioOutline, AcceptanceCriteria)\nThen Child is added to correct collection and not to others",
                          "test": {
                            "method": "test_story_creates_child_in_correct_collection",
                            "file": "invoke_bot/edit_story_map/test_edit_story_nodes.py",
                            "line": 772
                          }
                        }
                      ],
                      "acceptance_criteria": [],
                      "behavior": null
                    },
                    {
                      "name": "Create Child Story Node Under Parent Panel",
                      "sequential_order": 4.0,
                      "connector": "or",
                      "story_type": "user",
                      "users": [
                        "User"
                      ],
                      "test_class": "TestCreateChildStoryNodeUnderParent",
                      "scenarios": [
                        {
                          "name": "Panel shows appropriate create button for Epic node",
                          "sequential_order": 1.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_panel_shows_create_sub_epic_button_for_epic",
                          "steps": "And Story Graph has Epic named \"User Management\"\nWhen User selects Epic \"User Management\"\nThen Panel displays \"Create Sub-Epic\" button\nAnd Panel does not display \"Create Story\" button"
                        },
                        {
                          "name": "Panel shows both create buttons for SubEpic without children",
                          "sequential_order": 2.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_panel_shows_both_buttons_for_empty_subepic",
                          "steps": "And Story Graph has Epic \"User Management\" with SubEpic \"Authentication\"\nAnd SubEpic \"Authentication\" has no children\nWhen User selects SubEpic \"Authentication\"\nThen Panel displays \"Create Sub-Epic\" button\nAnd Panel displays \"Create Story\" button"
                        },
                        {
                          "name": "Panel shows only create SubEpic button for SubEpic with SubEpic children",
                          "sequential_order": 3.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_panel_shows_subepic_button_only_when_has_subepics",
                          "steps": "And Story Graph has SubEpic \"User Management\" with child SubEpic \"Authentication\"\nWhen User selects SubEpic \"User Management\"\nThen Panel displays \"Create Sub-Epic\" button\nAnd Panel does not display \"Create Story\" button"
                        },
                        {
                          "name": "Panel shows only create Story button for SubEpic with Stories",
                          "sequential_order": 4.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_panel_shows_story_button_only_when_has_stories",
                          "steps": "And Story Graph has SubEpic \"Authentication\" with child Story \"Login Form\"\nWhen User selects SubEpic \"Authentication\"\nThen Panel displays \"Create Story\" button\nAnd Panel does not display \"Create Sub-Epic\" button"
                        },
                        {
                          "name": "Panel shows scenario create buttons for Story node",
                          "sequential_order": 5.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_panel_shows_scenario_buttons_for_story",
                          "steps": "And Story Graph has Story \"Validate Password\"\nWhen User selects Story \"Validate Password\"\nThen Panel displays \"Create Scenario\" button\nAnd Panel displays \"Create Scenario Outline\" button\nAnd Panel displays \"Create Acceptance Criteria\" button"
                        },
                        {
                          "name": "User creates child node with auto-generated name in edit mode",
                          "sequential_order": 6.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_create_child_auto_name_edit_mode",
                          "steps": "And Story Graph has Epic \"User Management\" with two SubEpic children\nAnd Epic \"User Management\" is selected\nWhen User clicks \"Create Sub-Epic\" button\nThen Panel creates new SubEpic with name \"SubEpic3\"\nAnd Panel puts node name in edit mode\nAnd Panel selects all text in name field\nAnd Panel refreshes Story Tree showing new child\nAnd new SubEpic appears as last child of \"User Management\""
                        },
                        {
                          "name": "User enters duplicate name and Panel shows warning",
                          "sequential_order": 7.0,
                          "type": "error_case",
                          "background": [],
                          "test_method": "test_duplicate_name_shows_warning_stays_in_edit",
                          "steps": "And Story Graph has Epic \"User Management\" with SubEpic \"Authentication\"\nAnd new SubEpic exists under \"User Management\" with name in edit mode\nWhen User types \"Authentication\" in name field\nAnd User presses Tab\nThen Panel validates name in real-time\nAnd Panel shows warning message \"Child with name 'Authentication' already exists\"\nAnd Panel keeps node name in edit mode\nAnd Panel keeps text selected\nAnd Panel does not save the duplicate name"
                        }
                      ],
                      "acceptance_criteria": [
                        {
                          "name": "WHEN User selects Epic node\nTHEN Panel shows \"Create Sub-Epic\" button",
                          "text": "WHEN User selects Epic node\nTHEN Panel shows \"Create Sub-Epic\" button",
                          "sequential_order": 1.0
                        },
                        {
                          "name": "WHEN User selects SubEpic without children\nTHEN Panel shows \"Create Sub-Epic\" and \"Create Story\" buttons",
                          "text": "WHEN User selects SubEpic without children\nTHEN Panel shows \"Create Sub-Epic\" and \"Create Story\" buttons",
                          "sequential_order": 2.0
                        },
                        {
                          "name": "WHEN User selects SubEpic with Sub-Epic children\nTHEN Panel shows \"Create Sub-Epic\" button",
                          "text": "WHEN User selects SubEpic with Sub-Epic children\nTHEN Panel shows \"Create Sub-Epic\" button",
                          "sequential_order": 3.0
                        },
                        {
                          "name": "WHEN User selects SubEpic with Stories\nTHEN Panel shows \"Create Story\" button",
                          "text": "WHEN User selects SubEpic with Stories\nTHEN Panel shows \"Create Story\" button",
                          "sequential_order": 4.0
                        },
                        {
                          "name": "WHEN User selects Story node\nTHEN Panel shows \"Create Scenario\", \"Create Scenario Outline\", and \"Create Acceptance Criteria\" buttons",
                          "text": "WHEN User selects Story node\nTHEN Panel shows \"Create Scenario\", \"Create Scenario Outline\", and \"Create Acceptance Criteria\" buttons",
                          "sequential_order": 5.0
                        },
                        {
                          "name": "WHEN User creates child node\nTHEN Panel creates child with unique generic name\nAnd sets the child type based on the create button pressed\nAND puts node name in edit mode with text selected\nAND refreshes Story Tree",
                          "text": "WHEN User creates child node\nTHEN Panel creates child with unique generic name\nAnd sets the child type based on the create button pressed\nAND puts node name in edit mode with text selected\nAND refreshes Story Tree",
                          "sequential_order": 6.0
                        },
                        {
                          "name": "WHEN User enters duplicate name\nAND user presses Tab or Enter or clicks anywhere away from the name field.\nTHEN Panel shows warning in real-time\nAND leaves node name in edit mode with head selected.",
                          "text": "WHEN User enters duplicate name\nAND user presses Tab or Enter or clicks anywhere away from the name field.\nTHEN Panel shows warning in real-time\nAND leaves node name in edit mode with head selected.",
                          "sequential_order": 7.0
                        }
                      ],
                      "behavior": null
                    },
                    {
                      "name": "Create Child Story Node Under Parent CLI",
                      "sequential_order": 5.0,
                      "connector": "or",
                      "story_type": "user",
                      "users": [
                        "User"
                      ],
                      "test_class": "TestCreateChildStoryNodeUnderParent",
                      "scenarios": [
                        {
                          "name": "User creates child with dot notation at default position",
                          "sequential_order": 1.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_create_child_with_dot_notation_default_position",
                          "steps": "And Story Graph has Epic \"Invoke Bot\" with two SubEpic children\nWhen User executes CLI command: story_graph.\"Invoke Bot\".create_sub_epic.\"Manage Bot Information\"\nThen CLI parses dot notation to parent \"Invoke Bot\"\nAnd CLI resolves parent \"Invoke Bot\" successfully\nAnd CLI validates parent exists\nAnd CLI creates SubEpic \"Manage Bot Information\" as last child of \"Invoke Bot\"\nAnd CLI outputs success message: \"Created SubEpic 'Manage Bot Information' under 'Invoke Bot' at position 2\"\nAnd Story Graph shows \"Manage Bot Information\" at position 2 under \"Invoke Bot\"",
                          "test": {
                            "method": "test_create_child_with_dot_notation_default_position",
                            "file": "invoke_bot/edit_story_map/test_edit_story_nodes.py",
                            "line": 1475
                          }
                        },
                        {
                          "name": "User creates child with position specified",
                          "sequential_order": 2.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_create_child_with_position_specified",
                          "steps": "And Story Graph has Epic \"Invoke Bot\" with children: \"SubEpic A\", \"SubEpic B\", \"SubEpic C\"\nWhen User executes CLI command: story_graph.\"Invoke Bot\".create_sub_epic name:\"Info\" at_position:1\nThen CLI parses dot notation to parent \"Invoke Bot\"\nAnd CLI parses position parameter as 1\nAnd CLI creates SubEpic \"Info\" at position 1\nAnd CLI resequences children\nAnd CLI outputs success message: \"Created SubEpic 'Info' under 'Invoke Bot' at position 1\"\nAnd Story Graph shows children in order: \"SubEpic A\", \"Info\", \"SubEpic B\", \"SubEpic C\"",
                          "test": {
                            "method": "test_create_child_with_position_specified",
                            "file": "invoke_bot/edit_story_map/test_edit_story_nodes.py",
                            "line": 1504
                          }
                        },
                        {
                          "name": "User creates child with invalid position and CLI adjusts",
                          "sequential_order": 3.0,
                          "type": "edge_case",
                          "background": [],
                          "test_method": "test_create_child_invalid_position_adjusts",
                          "steps": "And Story Graph has Epic \"Invoke Bot\" with two SubEpic children\nWhen User executes CLI command: story_graph.\"Invoke Bot\".create_sub_epic name:\"Info\" at_position:99\nThen CLI parses position parameter as 99\nAnd CLI detects position 99 exceeds children count of 2\nAnd CLI adjusts position to 2\nAnd CLI creates SubEpic \"Info\" at adjusted position 2\nAnd CLI outputs success message: \"Created SubEpic 'Info' under 'Invoke Bot' at position 2 (adjusted from 99)\"\nAnd Story Graph shows \"Info\" as last child",
                          "test": {
                            "method": "test_create_child_invalid_position_adjusts",
                            "file": "invoke_bot/edit_story_map/test_edit_story_nodes.py",
                            "line": 1535
                          }
                        },
                        {
                          "name": "User enters non-existent parent path and CLI outputs error",
                          "sequential_order": 4.0,
                          "type": "error_case",
                          "background": [],
                          "test_method": "test_nonexistent_parent_outputs_error",
                          "steps": "And Story Graph has Epic \"Invoke Bot\"\nAnd Story Graph does not have Epic \"Non-existent Epic\"\nWhen User executes CLI command: story_graph.\"Non-existent Epic\".create_sub_epic name:\"New SubEpic\"\nThen CLI parses dot notation to parent \"Non-existent Epic\"\nAnd CLI attempts to resolve parent \"Non-existent Epic\"\nAnd CLI identifies parent does not exist\nAnd CLI outputs error: \"Parent 'Non-existent Epic' not found. Valid paths: 'Invoke Bot'\"\nAnd CLI does not create SubEpic",
                          "test": {
                            "method": "test_nonexistent_parent_outputs_error",
                            "file": "invoke_bot/edit_story_map/test_edit_story_nodes.py",
                            "line": 1560
                          }
                        },
                        {
                          "name": "User enters incompatible child type and CLI outputs error",
                          "sequential_order": 5.0,
                          "type": "error_case",
                          "background": [],
                          "test_method": "test_incompatible_child_type_outputs_error",
                          "steps": "And Story Graph has SubEpic \"Authentication\" with child Story \"Login Form\"\nWhen User executes CLI command: story_graph.\"Authentication\".create_sub_epic name:\"OAuth Flow\"\nThen CLI parses dot notation to parent \"Authentication\"\nAnd CLI resolves parent \"Authentication\" successfully\nAnd CLI identifies parent \"Authentication\" already contains Stories\nAnd CLI identifies SubEpic is incompatible child type for SubEpic with Stories\nAnd CLI outputs error: \"Cannot create SubEpic under SubEpic 'Authentication' that contains Stories. Allowed child types: Story\"\nAnd CLI does not create SubEpic \"OAuth Flow\"",
                          "test": {
                            "method": "test_incompatible_child_type_outputs_error",
                            "file": "invoke_bot/edit_story_map/test_edit_story_nodes.py",
                            "line": 1584
                          }
                        },
                        {
                          "name": "User enters duplicate name and CLI outputs error",
                          "sequential_order": 6.0,
                          "type": "error_case",
                          "background": [],
                          "test_method": "test_duplicate_name_outputs_error",
                          "steps": "And Story Graph has Epic \"Invoke Bot\" with SubEpic \"Manage Bot Information\"\nWhen User executes CLI command: story_graph.\"Invoke Bot\".create_sub_epic.\"Manage Bot Information\"\nThen CLI parses dot notation to parent \"Invoke Bot\"\nAnd CLI resolves parent \"Invoke Bot\" successfully\nAnd CLI validates child name \"Manage Bot Information\"\nAnd CLI identifies duplicate name among siblings\nAnd CLI outputs error: \"Child with name 'Manage Bot Information' already exists under parent 'Invoke Bot'\"\nAnd CLI does not create duplicate SubEpic",
                          "test": {
                            "method": "test_duplicate_name_outputs_error",
                            "file": "invoke_bot/edit_story_map/test_edit_story_nodes.py",
                            "line": 1608
                          }
                        }
                      ],
                      "acceptance_criteria": [
                        {
                          "name": "WHEN User creates new child with dot notation\nEXAMPLE: cli.story_graph.\"Invoke Bot\".create_sub_epic name:\"Manage Bot Information\"\nTHEN CLI parses dot notation to parent\nAND resolves and validates parent exists\nAND sets the child type based on the command used\nAND creates child as last child\nAND outputs success message with node path",
                          "text": "WHEN User creates new child with dot notation\nEXAMPLE: cli.story_graph.\"Invoke Bot\".create_sub_epic name:\"Manage Bot Information\"\nTHEN CLI parses dot notation to parent\nAND resolves and validates parent exists\nAND sets the child type based on the command used\nAND creates child as last child\nAND outputs success message with node path",
                          "sequential_order": 1.0
                        },
                        {
                          "name": "WHEN User creates child with position\nEXAMPLE: cli.story_graph.\"Invoke Bot\".create_sub_epic name:\"Info\" at_position:1\nTHEN CLI parses notation and position [ - see previous acceptance criteria]\nAND adjusts position if exceeds children count\nAND creates child at position\nAND resequences children",
                          "text": "WHEN User creates child with position\nEXAMPLE: cli.story_graph.\"Invoke Bot\".create_sub_epic name:\"Info\" at_position:1\nTHEN CLI parses notation and position [ - see previous acceptance criteria]\nAND adjusts position if exceeds children count\nAND creates child at position\nAND resequences children",
                          "sequential_order": 2.0
                        },
                        {
                          "name": "WHEN User enters non-existent parent path\nTHEN CLI identifies parent does not exist\nAND outputs error with valid paths",
                          "text": "WHEN User enters non-existent parent path\nTHEN CLI identifies parent does not exist\nAND outputs error with valid paths",
                          "sequential_order": 3.0
                        },
                        {
                          "name": "WHEN User enters incompatible child type\nTHEN CLI identifies type incompatibility\nAND outputs error with allowed child types",
                          "text": "WHEN User enters incompatible child type\nTHEN CLI identifies type incompatibility\nAND outputs error with allowed child types",
                          "sequential_order": 4.0
                        },
                        {
                          "name": "WHEN User enters duplicate name\nTHEN CLI identifies duplicate\nAND outputs error",
                          "text": "WHEN User enters duplicate name\nTHEN CLI identifies duplicate\nAND outputs error",
                          "sequential_order": 5.0
                        }
                      ],
                      "behavior": null
                    },
                    {
                      "name": "Create Epic",
                      "sequential_order": 6.0,
                      "connector": null,
                      "story_type": "user",
                      "users": [],
                      "test_class": "TestCreateEpic",
                      "scenarios": [
                        {
                          "name": "Create Epic with name at default position",
                          "sequential_order": 1.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_create_epic_with_name_at_default_position",
                          "steps": "Given Story Map is initialized\nWhen Story Map creates Epic with name\nThen Epic is added at last position",
                          "test": {
                            "method": "test_create_epic_with_name_at_default_position",
                            "file": "invoke_bot/edit_story_map/test_edit_story_nodes.py",
                            "line": 373
                          }
                        },
                        {
                          "name": "Create Epic with position specified",
                          "sequential_order": 2.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_create_epic_with_position_specified",
                          "steps": "Given Story Map has existing Epics\nWhen Story Map creates Epic at specific position\nThen Epic is inserted at position and existing Epics shift",
                          "test": {
                            "method": "test_create_epic_with_position_specified",
                            "file": "invoke_bot/edit_story_map/test_edit_story_nodes.py",
                            "line": 391
                          }
                        },
                        {
                          "name": "Create Epic with invalid position adjusts to last",
                          "sequential_order": 3.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_create_epic_with_invalid_position_adjusts",
                          "steps": "Given Story Map has 2 Epics\nWhen Story Map creates Epic at position 99\nThen Position is adjusted to last (position 2)",
                          "test": {
                            "method": "test_create_epic_with_invalid_position_adjusts",
                            "file": "invoke_bot/edit_story_map/test_edit_story_nodes.py",
                            "line": 412
                          }
                        },
                        {
                          "name": "Create Epic without name generates unique name",
                          "sequential_order": 4.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_create_epic_without_name_generates_unique_name",
                          "steps": "Given Story Map has existing Epics\nWhen Story Map creates Epic without name\nThen System generates unique name (Epic1, Epic2, etc.)",
                          "test": {
                            "method": "test_create_epic_without_name_generates_unique_name",
                            "file": "invoke_bot/edit_story_map/test_edit_story_nodes.py",
                            "line": 430
                          }
                        },
                        {
                          "name": "Create Epic with duplicate name returns error",
                          "sequential_order": 5.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_create_epic_with_duplicate_name_returns_error",
                          "steps": "Given Story Map has Epic \"User Management\"\nWhen Story Map attempts to create Epic with duplicate name\nThen System identifies duplicate and returns error",
                          "test": {
                            "method": "test_create_epic_with_duplicate_name_returns_error",
                            "file": "invoke_bot/edit_story_map/test_edit_story_nodes.py",
                            "line": 454
                          }
                        },
                        {
                          "name": "Create Epic updates epics collection",
                          "sequential_order": 6.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_create_epic_updates_epics_collection",
                          "steps": "Given Story Map has existing Epics\nWhen Story Map creates new Epic\nThen Epics collection is updated and new Epic is accessible",
                          "test": {
                            "method": "test_create_epic_updates_epics_collection",
                            "file": "invoke_bot/edit_story_map/test_edit_story_nodes.py",
                            "line": 469
                          }
                        },
                        {
                          "name": "Create Epic updates underlying story_graph dict",
                          "sequential_order": 7.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_create_epic_updates_story_graph_dict",
                          "steps": "Given Story Map has existing Epics\nWhen Story Map creates new Epic\nThen story_graph dict is updated with new Epic",
                          "test": {
                            "method": "test_create_epic_updates_story_graph_dict",
                            "file": "invoke_bot/edit_story_map/test_edit_story_nodes.py",
                            "line": 486
                          }
                        },
                        {
                          "name": "Create multiple Epics in sequence",
                          "sequential_order": 8.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_create_multiple_epics_in_sequence",
                          "steps": "Given Story Map is initialized\nWhen Story Map creates multiple Epics\nThen All Epics are added in correct order",
                          "test": {
                            "method": "test_create_multiple_epics_in_sequence",
                            "file": "invoke_bot/edit_story_map/test_edit_story_nodes.py",
                            "line": 503
                          }
                        },
                        {
                          "name": "Create Epic at beginning (position 0)",
                          "sequential_order": 9.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_create_epic_at_beginning_position",
                          "steps": "Given Story Map has existing Epics\nWhen Story Map creates Epic at position 0\nThen Epic is inserted at beginning",
                          "test": {
                            "method": "test_create_epic_at_beginning_position",
                            "file": "invoke_bot/edit_story_map/test_edit_story_nodes.py",
                            "line": 525
                          }
                        }
                      ],
                      "acceptance_criteria": [],
                      "behavior": null
                    },
                    {
                      "name": "Delete Story Node",
                      "sequential_order": 7.0,
                      "connector": null,
                      "story_type": "user",
                      "users": [],
                      "test_class": "TestDeleteStoryNode",
                      "scenarios": [
                        {
                          "name": "Delete node without children",
                          "sequential_order": 1.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_delete_node_without_children",
                          "steps": "Given Story Graph has parent node with children\nWhen Node with no children is deleted\nThen Node is removed and siblings are resequenced",
                          "test": {
                            "method": "test_delete_node_without_children",
                            "file": "invoke_bot/edit_story_map/test_edit_story_nodes.py",
                            "line": 796
                          }
                        },
                        {
                          "name": "Delete node including children (cascade delete)",
                          "sequential_order": 2.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_delete_node_including_children_cascade_delete",
                          "steps": "Given Node has descendants\nWhen Node is deleted with cascade option\nThen Node and all descendants are deleted",
                          "test": {
                            "method": "test_delete_node_including_children_cascade_delete",
                            "file": "invoke_bot/edit_story_map/test_edit_story_nodes.py",
                            "line": 826
                          }
                        },
                        {
                          "name": "Delete node at different positions verifies resequencing",
                          "sequential_order": 3.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_delete_node_at_different_positions_verifies_resequencing",
                          "steps": "Given Parent has children in order\nWhen Node at specific position is deleted\nThen Remaining children are resequenced properly",
                          "test": {
                            "method": "test_delete_node_at_different_positions_verifies_resequencing",
                            "file": "invoke_bot/edit_story_map/test_edit_story_nodes.py",
                            "line": 855
                          }
                        }
                      ],
                      "acceptance_criteria": [],
                      "behavior": null
                    },
                    {
                      "name": "Delete Story Node From Parent CLI",
                      "sequential_order": 8.0,
                      "connector": "or",
                      "story_type": "user",
                      "users": [
                        "User"
                      ],
                      "test_class": "TestDeleteStoryNodeFromParent",
                      "scenarios": [
                        {
                          "name": "User deletes node without children using dot notation",
                          "sequential_order": 1.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_delete_node_without_children",
                          "steps": "And Story Graph has Epic \"Invoke Bot\" with SubEpics: \"SubEpic A\", \"Manage Bot\", \"SubEpic B\"\nAnd SubEpic \"Manage Bot\" has no children\nWhen User executes CLI command: story_graph.\"Invoke Bot\".\"Manage Bot\".delete\nThen CLI parses dot notation to node \"Manage Bot\"\nAnd CLI resolves node \"Manage Bot\" successfully\nAnd CLI validates node exists\nAnd CLI removes node \"Manage Bot\" from parent \"Invoke Bot\"\nAnd CLI resequences siblings\nAnd CLI outputs success message: \"Deleted SubEpic 'Manage Bot' from 'Invoke Bot'\"\nAnd Epic \"Invoke Bot\" shows children: \"SubEpic A\", \"SubEpic B\"",
                          "test": {
                            "method": "test_delete_node_without_children",
                            "file": "invoke_bot/edit_story_map/test_edit_story_nodes.py",
                            "line": 1646
                          }
                        },
                        {
                          "name": "User deletes node with children and CLI moves children to parent",
                          "sequential_order": 2.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_delete_node_with_children_moves_to_parent",
                          "steps": "And Story Graph has Epic \"Invoke Bot\" with SubEpic \"Manage Bot\"\nAnd SubEpic \"Manage Bot\" has children Stories: \"Story A\", \"Story B\"\nWhen User executes CLI command: story_graph.\"Invoke Bot\".\"Manage Bot\".delete\nThen CLI parses dot notation to node \"Manage Bot\"\nAnd CLI resolves node \"Manage Bot\" successfully\nAnd CLI moves children \"Story A\" and \"Story B\" to Epic \"Invoke Bot\"\nAnd CLI removes node \"Manage Bot\"\nAnd CLI resequences siblings\nAnd CLI outputs success message: \"Deleted SubEpic 'Manage Bot' from 'Invoke Bot'. Moved 2 children to parent.\"\nAnd Epic \"Invoke Bot\" shows children including \"Story A\" and \"Story B\""
                        },
                        {
                          "name": "User enters non-existent node path and CLI outputs error",
                          "sequential_order": 3.0,
                          "type": "error_case",
                          "background": [],
                          "test_method": "test_delete_nonexistent_node_outputs_error",
                          "steps": "And Story Graph has Epic \"Invoke Bot\" with SubEpic \"Manage Bot\"\nAnd Story Graph does not have SubEpic \"Non-existent Node\"\nWhen User executes CLI command: story_graph.\"Invoke Bot\".\"Non-existent Node\".delete\nThen CLI parses dot notation to node \"Non-existent Node\"\nAnd CLI attempts to resolve node \"Non-existent Node\"\nAnd CLI identifies node does not exist\nAnd CLI outputs error: \"Node 'Non-existent Node' not found. Valid paths under 'Invoke Bot': 'Manage Bot'\"\nAnd CLI does not modify Story Graph",
                          "test": {
                            "method": "test_delete_nonexistent_node_outputs_error",
                            "file": "invoke_bot/edit_story_map/test_edit_story_nodes.py",
                            "line": 1676
                          }
                        }
                      ],
                      "acceptance_criteria": [
                        {
                          "name": "WHEN User deletes node with dot notation\nEXAMPLE: cli.story_graph.\"Invoke Bot\".\"Manage Bot\".delete\nTHEN CLI parses notation to node\nAND resolves and validates node exists\nAND removes node from parent\nAND resequences siblings\nAND outputs success message",
                          "text": "WHEN User deletes node with dot notation\nEXAMPLE: cli.story_graph.\"Invoke Bot\".\"Manage Bot\".delete\nTHEN CLI parses notation to node\nAND resolves and validates node exists\nAND removes node from parent\nAND resequences siblings\nAND outputs success message",
                          "sequential_order": 1.0
                        },
                        {
                          "name": "WHEN User deletes node with children\nTHEN CLI moves children to node's parent [ - see previous acceptance criteria]\nAND removes node",
                          "text": "WHEN User deletes node with children\nTHEN CLI moves children to node's parent [ - see previous acceptance criteria]\nAND removes node",
                          "sequential_order": 2.0
                        },
                        {
                          "name": "WHEN User enters non-existent node path\nTHEN CLI identifies node does not exist\nAND outputs error with valid paths",
                          "text": "WHEN User enters non-existent node path\nTHEN CLI identifies node does not exist\nAND outputs error with valid paths",
                          "sequential_order": 3.0
                        }
                      ],
                      "behavior": null
                    },
                    {
                      "name": "Delete Story Node From Parent Panel",
                      "sequential_order": 9.0,
                      "connector": "or",
                      "story_type": "user",
                      "users": [
                        "User"
                      ],
                      "test_class": "TestDeleteStoryNodeFromParent",
                      "scenarios": [
                        {
                          "name": "Panel shows delete button for node without children",
                          "sequential_order": 1.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_panel_shows_delete_button_for_node",
                          "steps": "And Story Graph has SubEpic \"Authentication\" without children\nWhen User selects SubEpic \"Authentication\"\nThen Panel displays \"Delete\" button\nAnd Panel does not display \"Delete Including Children\" button"
                        },
                        {
                          "name": "Panel shows both delete buttons for node with children",
                          "sequential_order": 2.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_panel_shows_both_delete_buttons_for_parent",
                          "steps": "And Story Graph has SubEpic \"Authentication\" with child Story \"Login Form\"\nWhen User selects SubEpic \"Authentication\"\nThen Panel displays \"Delete\" button\nAnd Panel displays \"Delete Including Children\" button"
                        },
                        {
                          "name": "User clicks delete button and Panel shows confirmation",
                          "sequential_order": 3.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_delete_button_shows_confirmation",
                          "steps": "And Story Graph has SubEpic \"Authentication\"\nAnd SubEpic \"Authentication\" is selected\nWhen User clicks \"Delete\" button\nThen Panel displays confirmation message inline\nAnd Panel displays \"Confirm\" button\nAnd Panel displays \"Cancel\" button\nAnd Panel hides \"Delete\" button"
                        },
                        {
                          "name": "User confirms delete for node without children",
                          "sequential_order": 4.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_confirm_delete_node_without_children",
                          "steps": "And Story Graph has Epic \"User Management\" with SubEpics: \"SubEpic A\", \"Authentication\", \"SubEpic B\"\nAnd SubEpic \"Authentication\" has no children\nAnd Delete confirmation is displayed on panel for \"Authentication\"\nWhen User clicks \"Confirm\" button\nThen Panel removes SubEpic \"Authentication\" from parent\nAnd Panel resequences siblings\nAnd Panel refreshes Story Tree\nAnd Epic \"User Management\" shows children: \"SubEpic A\", \"SubEpic B\""
                        },
                        {
                          "name": "User confirms delete for node with children and children move to parent",
                          "sequential_order": 5.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_confirm_delete_node_moves_children_to_parent",
                          "steps": "And Story Graph has Epic \"User Management\" with SubEpic \"Authentication\"\nAnd SubEpic \"Authentication\" has children Stories: \"Login Form\", \"Password Reset\"\nAnd Delete confirmation is displayed on panel for \"Authentication\"\nWhen User clicks \"Confirm\" button\nThen Panel moves children \"Login Form\" and \"Password Reset\" to Epic \"User Management\"\nAnd Panel removes SubEpic \"Authentication\"\nAnd Panel resequences siblings\nAnd Panel refreshes Story Tree\nAnd Epic \"User Management\" shows children including \"Login Form\" and \"Password Reset\""
                        },
                        {
                          "name": "User confirms delete including children and Panel recursively deletes all",
                          "sequential_order": 6.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_confirm_delete_including_children_deletes_recursively",
                          "steps": "And Story Graph has Epic \"User Management\" with SubEpic \"Authentication\"\nAnd SubEpic \"Authentication\" has child Story \"Login Form\"\nAnd Story \"Login Form\" has child Scenario \"Valid Login\"\nAnd Delete Including Children confirmation is displayed on panel for \"Authentication\"\nWhen User clicks \"Confirm\" button\nThen Panel recursively removes Scenario \"Valid Login\"\nAnd Panel recursively removes Story \"Login Form\"\nAnd Panel removes SubEpic \"Authentication\"\nAnd Panel refreshes Story Tree\nAnd Epic \"User Management\" no longer shows \"Authentication\""
                        },
                        {
                          "name": "User cancels delete and node remains unchanged",
                          "sequential_order": 7.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_cancel_delete_keeps_node",
                          "steps": "And Story Graph has SubEpic \"Authentication\" with child Story \"Login Form\"\nAnd Delete confirmation is displayed on panel for \"Authentication\"\nWhen User clicks \"Cancel\" button\nThen Panel hides confirmation\nAnd Panel shows \"Delete\" button again\nAnd SubEpic \"Authentication\" remains in Story Graph\nAnd Story \"Login Form\" remains under \"Authentication\""
                        }
                      ],
                      "acceptance_criteria": [
                        {
                          "name": "WHEN User selects node\nTHEN Panel shows \"Delete\" button",
                          "text": "WHEN User selects node\nTHEN Panel shows \"Delete\" button",
                          "sequential_order": 1.0
                        },
                        {
                          "name": "WHEN User selects node with children\nTHEN Panel shows \"Delete\" and \"Delete Including Children\" buttons",
                          "text": "WHEN User selects node with children\nTHEN Panel shows \"Delete\" and \"Delete Including Children\" buttons",
                          "sequential_order": 2.0
                        },
                        {
                          "name": "WHEN User clicks \"Delete\" button\nTHEN Panel shows confirmation inline\nAND shows confirm and cancel buttons",
                          "text": "WHEN User clicks \"Delete\" button\nTHEN Panel shows confirmation inline\nAND shows confirm and cancel buttons",
                          "sequential_order": 3.0
                        },
                        {
                          "name": "WHEN User confirms delete without children\nTHEN Panel removes node from parent\nAND resequences siblings\nAND refreshes Story Tree",
                          "text": "WHEN User confirms delete without children\nTHEN Panel removes node from parent\nAND resequences siblings\nAND refreshes Story Tree",
                          "sequential_order": 4.0
                        },
                        {
                          "name": "WHEN User confirms delete with children\nTHEN Panel moves children to node's parent\nAND removes node\nAND resequences siblings",
                          "text": "WHEN User confirms delete with children\nTHEN Panel moves children to node's parent\nAND removes node\nAND resequences siblings",
                          "sequential_order": 5.0
                        },
                        {
                          "name": "WHEN User confirms \"Delete Including Children\"\nTHEN Panel recursively removes all children\nAND removes node",
                          "text": "WHEN User confirms \"Delete Including Children\"\nTHEN Panel recursively removes all children\nAND removes node",
                          "sequential_order": 6.0
                        },
                        {
                          "name": "WHEN User cancels\nTHEN Panel hides confirmation\nAND node remains unchanged",
                          "text": "WHEN User cancels\nTHEN Panel hides confirmation\nAND node remains unchanged",
                          "sequential_order": 7.0
                        }
                      ],
                      "behavior": null
                    },
                    {
                      "name": "Move Story Node To Parent",
                      "sequential_order": 11.0,
                      "connector": null,
                      "story_type": "user",
                      "users": [],
                      "test_class": "TestMoveStoryNodeToParent",
                      "scenarios": [
                        {
                          "name": "Move node to new parent with default position",
                          "sequential_order": 1.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_move_node_to_new_parent_with_default_position",
                          "steps": "Given Node exists under source parent\nWhen Node moves to target parent\nThen Node is removed from source and added to target at last position",
                          "test": {
                            "method": "test_move_node_to_new_parent_with_default_position",
                            "file": "invoke_bot/edit_story_map/test_edit_story_nodes.py",
                            "line": 1049
                          }
                        },
                        {
                          "name": "Move node to new parent with specified position",
                          "sequential_order": 2.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_move_node_to_new_parent_with_specified_position",
                          "steps": "Given Node exists under source parent, target parent has children\nWhen Node moves to target parent at specific position\nThen Node is inserted at position and target children shift",
                          "test": {
                            "method": "test_move_node_to_new_parent_with_specified_position",
                            "file": "invoke_bot/edit_story_map/test_edit_story_nodes.py",
                            "line": 1084
                          }
                        },
                        {
                          "name": "Move node with invalid position adjusts to last",
                          "sequential_order": 3.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_move_node_with_invalid_position_adjusts_to_last",
                          "steps": "Given Node exists under source parent\nWhen Moving to target with invalid position\nThen Position is adjusted to last valid position",
                          "test": {
                            "method": "test_move_node_with_invalid_position_adjusts_to_last",
                            "file": "invoke_bot/edit_story_map/test_edit_story_nodes.py",
                            "line": 1109
                          }
                        },
                        {
                          "name": "Move node to same parent at different position",
                          "sequential_order": 4.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_move_node_to_same_parent_at_different_position",
                          "steps": "Given Parent has children in order\nWhen Node moves to different position within same parent\nThen Children are reordered correctly",
                          "test": {
                            "method": "test_move_node_to_same_parent_at_different_position",
                            "file": "invoke_bot/edit_story_map/test_edit_story_nodes.py",
                            "line": 1134
                          }
                        },
                        {
                          "name": "Move node to parent where it already exists returns error",
                          "sequential_order": 5.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_move_node_to_parent_where_it_already_exists_returns_error",
                          "steps": "Given Node is already child of parent\nWhen Attempting to move node to same parent\nThen System identifies duplicate and returns error",
                          "test": {
                            "method": "test_move_node_to_parent_where_it_already_exists_returns_error",
                            "file": "invoke_bot/edit_story_map/test_edit_story_nodes.py",
                            "line": 1162
                          }
                        },
                        {
                          "name": "Move SubEpic to SubEpic with Stories returns error",
                          "sequential_order": 6.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_move_subepic_to_subepic_with_stories_returns_error",
                          "steps": "Given Source has SubEpic, target has Stories\nWhen Attempting to move SubEpic to target with Stories\nThen System identifies hierarchy violation and returns error",
                          "test": {
                            "method": "test_move_subepic_to_subepic_with_stories_returns_error",
                            "file": "invoke_bot/edit_story_map/test_edit_story_nodes.py",
                            "line": 1189
                          }
                        },
                        {
                          "name": "Move Story to SubEpic with SubEpics returns error",
                          "sequential_order": 7.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_move_story_to_subepic_with_subepics_returns_error",
                          "steps": "Given Source has Story, target has SubEpics\nWhen Attempting to move Story to target with SubEpics\nThen System identifies hierarchy violation and returns error",
                          "test": {
                            "method": "test_move_story_to_subepic_with_subepics_returns_error",
                            "file": "invoke_bot/edit_story_map/test_edit_story_nodes.py",
                            "line": 1213
                          }
                        },
                        {
                          "name": "Move node to create circular reference returns error",
                          "sequential_order": 8.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_move_node_to_create_circular_reference_returns_error",
                          "steps": "Given Parent has descendant\nWhen Attempting to move parent to its descendant\nThen System identifies circular reference and returns error",
                          "test": {
                            "method": "test_move_node_to_create_circular_reference_returns_error",
                            "file": "invoke_bot/edit_story_map/test_edit_story_nodes.py",
                            "line": 1237
                          }
                        },
                        {
                          "name": "Move story node to new sub epic moves associative test class to correct test epic sub-epic file",
                          "sequential_order": 9.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_move_story_node_to_new_sub_epic_moves_test_class_to_target_file",
                          "steps": "Given Story Navigate Story Graph exists under Manage Story Scope sub-epic\nAnd Test class TestNavigateStoryGraph exists in test_manage_story_scope.py file\nWhen Story Navigate Story Graph is moved to Edit Story Nodes sub-epic\nThen Test class TestNavigateStoryGraph is removed from test_manage_story_scope.py file\nAnd Test class TestNavigateStoryGraph is added to test_edit_story_nodes.py file\nAnd Test class imports are updated for new file location\nAnd All test methods remain intact after move",
                          "test": {
                            "method": "test_move_story_node_to_new_sub_epic_moves_test_class_to_target_file",
                            "file": "invoke_bot/edit_story_map/test_edit_story_nodes.py",
                            "line": 1259
                          }
                        }
                      ],
                      "acceptance_criteria": [],
                      "behavior": null
                    },
                    {
                      "name": "Move Story Node  CLI",
                      "sequential_order": 12.0,
                      "connector": "or",
                      "story_type": "user",
                      "users": [
                        "User"
                      ],
                      "test_class": "TestMoveStoryNode",
                      "scenarios": [
                        {
                          "name": "User moves node to different parent with position using dot notation",
                          "sequential_order": 1.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_move_node_to_different_parent_with_position",
                          "steps": "And Story Graph has Epic \"Invoke Bot\" with SubEpics: \"SubEpic A\", \"Manage Bot\", \"SubEpic B\"\nAnd Story Graph has Epic \"Other Epic\" with SubEpics: \"SubEpic C\", \"SubEpic D\"\nWhen User executes CLI command: story_graph.\"Invoke Bot\".\"Manage Bot\".move_to target:\"Other Epic\" at_position:1\nThen CLI parses dot notation to source node \"Manage Bot\"\nAnd CLI parses dot notation to target parent \"Other Epic\"\nAnd CLI resolves both nodes successfully\nAnd CLI validates \"Other Epic\" can accept SubEpic children\nAnd CLI validates position 1 is valid\nAnd CLI removes \"Manage Bot\" from Epic \"Invoke Bot\"\nAnd CLI inserts \"Manage Bot\" under Epic \"Other Epic\" at position 1\nAnd CLI resequences children in \"Invoke Bot\" to show: \"SubEpic A\", \"SubEpic B\"\nAnd CLI resequences children in \"Other Epic\" to show: \"SubEpic C\", \"Manage Bot\", \"SubEpic D\"\nAnd CLI outputs success message: \"Moved SubEpic 'Manage Bot' from 'Invoke Bot' to 'Other Epic' at position 1\"",
                          "test": {
                            "method": "test_move_node_to_different_parent_with_position",
                            "file": "invoke_bot/edit_story_map/test_edit_story_nodes.py",
                            "line": 1846
                          }
                        },
                        {
                          "name": "User moves node to same parent different position",
                          "sequential_order": 2.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_move_node_same_parent_different_position",
                          "steps": "And Story Graph has Epic \"Invoke Bot\" with SubEpics: \"SubEpic A\", \"Manage Bot\", \"SubEpic B\", \"SubEpic C\"\nAnd SubEpic \"Manage Bot\" is at position 1\nWhen User executes CLI command: story_graph.\"Invoke Bot\".\"Manage Bot\".move_to_position position:3\nThen CLI parses dot notation to node \"Manage Bot\"\nAnd CLI parses position parameter as 3\nAnd CLI resolves node \"Manage Bot\" successfully\nAnd CLI removes \"Manage Bot\" from position 1\nAnd CLI inserts \"Manage Bot\" at position 3\nAnd CLI resequences children to show: \"SubEpic A\", \"SubEpic B\", \"SubEpic C\", \"Manage Bot\"\nAnd CLI outputs success message: \"Moved SubEpic 'Manage Bot' to position 3 within 'Invoke Bot'\"",
                          "test": {
                            "method": "test_move_node_same_parent_different_position",
                            "file": "invoke_bot/edit_story_map/test_edit_story_nodes.py",
                            "line": 1874
                          }
                        },
                        {
                          "name": "User enters non-existent source path and CLI outputs error",
                          "sequential_order": 3.0,
                          "type": "error_case",
                          "background": [],
                          "test_method": "test_move_nonexistent_source_outputs_error",
                          "steps": "And Story Graph has Epic \"Invoke Bot\"\nAnd Story Graph has Epic \"Other Epic\"\nAnd Story Graph does not have SubEpic \"Non-existent Node\"\nWhen User executes CLI command: story_graph.\"Invoke Bot\".\"Non-existent Node\".move_to target:\"Other Epic\"\nThen CLI parses dot notation to source node \"Non-existent Node\"\nAnd CLI attempts to resolve source node\nAnd CLI identifies source node does not exist\nAnd CLI outputs error: \"Source node 'Non-existent Node' not found. Valid paths under 'Invoke Bot': (empty)\"\nAnd CLI does not modify Story Graph",
                          "test": {
                            "method": "test_move_nonexistent_source_outputs_error",
                            "file": "invoke_bot/edit_story_map/test_edit_story_nodes.py",
                            "line": 1904
                          }
                        },
                        {
                          "name": "User enters non-existent target path and CLI outputs error",
                          "sequential_order": 4.0,
                          "type": "error_case",
                          "background": [],
                          "test_method": "test_move_to_nonexistent_target_outputs_error",
                          "steps": "And Story Graph has Epic \"Invoke Bot\" with SubEpic \"Manage Bot\"\nAnd Story Graph does not have Epic \"Non-existent Epic\"\nWhen User executes CLI command: story_graph.\"Invoke Bot\".\"Manage Bot\".move_to target:\"Non-existent Epic\"\nThen CLI parses dot notation to source node \"Manage Bot\"\nAnd CLI resolves source node \"Manage Bot\" successfully\nAnd CLI parses dot notation to target parent \"Non-existent Epic\"\nAnd CLI attempts to resolve target parent\nAnd CLI identifies target parent does not exist\nAnd CLI outputs error: \"Target parent 'Non-existent Epic' not found. Valid paths: 'Invoke Bot'\"\nAnd CLI does not modify Story Graph",
                          "test": {
                            "method": "test_move_to_nonexistent_target_outputs_error",
                            "file": "invoke_bot/edit_story_map/test_edit_story_nodes.py",
                            "line": 1929
                          }
                        },
                        {
                          "name": "User moves incompatible type and CLI outputs error",
                          "sequential_order": 5.0,
                          "type": "error_case",
                          "background": [],
                          "test_method": "test_move_incompatible_type_outputs_error",
                          "steps": "And Story Graph has SubEpic \"Authentication\" with Story \"Login Form\"\nAnd Story Graph has SubEpic \"Authorization\" with SubEpic \"Roles\"\nWhen User executes CLI command: story_graph.\"Authorization\".\"Roles\".move_to target:\"Authentication\"\nThen CLI parses notation to source \"Roles\" and target \"Authentication\"\nAnd CLI resolves both nodes successfully\nAnd CLI validates type compatibility\nAnd CLI identifies SubEpic \"Authentication\" already contains Stories\nAnd CLI identifies SubEpic \"Roles\" is incompatible with SubEpic containing Stories\nAnd CLI outputs error: \"Cannot move SubEpic 'Roles' to SubEpic 'Authentication' that contains Stories. Allowed child types: Story\"\nAnd CLI does not modify Story Graph",
                          "test": {
                            "method": "test_move_incompatible_type_outputs_error",
                            "file": "invoke_bot/edit_story_map/test_edit_story_nodes.py",
                            "line": 1953
                          }
                        },
                        {
                          "name": "User moves to create circular reference and CLI outputs error",
                          "sequential_order": 6.0,
                          "type": "error_case",
                          "background": [],
                          "test_method": "test_move_circular_reference_outputs_error",
                          "steps": "And Story Graph has Epic \"User Management\" with SubEpic \"Authentication\"\nAnd SubEpic \"Authentication\" has SubEpic \"Login Flow\"\nWhen User executes CLI command: story_graph.\"User Management\".move_to target:\"Authentication\"\nThen CLI parses notation to source \"User Management\" and target \"Authentication\"\nAnd CLI resolves both nodes successfully\nAnd CLI detects target \"Authentication\" is descendant of source \"User Management\"\nAnd CLI identifies circular reference would occur\nAnd CLI outputs error: \"Cannot move 'User Management' to 'Authentication': target is a descendant of source (circular reference)\"\nAnd CLI does not modify Story Graph",
                          "test": {
                            "method": "test_move_circular_reference_outputs_error",
                            "file": "invoke_bot/edit_story_map/test_edit_story_nodes.py",
                            "line": 1979
                          }
                        }
                      ],
                      "acceptance_criteria": [
                        {
                          "name": "WHEN User moves node with dot notation\nEXAMPLE: cli.story_graph.\"Invoke Bot\".\"Manage Bot\".move_to target:\"Other Epic\" at_position:2\nTHEN CLI parses notation to source and target\nAND resolves and validates both exist\nAND validates type compatibility\nAND adjusts position if exceeds children count\nAND removes node from source\nAND inserts node at target position\nAND resequences both locations\nAND outputs success message",
                          "text": "WHEN User moves node with dot notation\nEXAMPLE: cli.story_graph.\"Invoke Bot\".\"Manage Bot\".move_to target:\"Other Epic\" at_position:2\nTHEN CLI parses notation to source and target\nAND resolves and validates both exist\nAND validates type compatibility\nAND adjusts position if exceeds children count\nAND removes node from source\nAND inserts node at target position\nAND resequences both locations\nAND outputs success message",
                          "sequential_order": 1.0
                        },
                        {
                          "name": "WHEN User moves node to same parent different position\nEXAMPLE: cli.story_graph.\"Invoke Bot\".\"Manage Bot\".move_to_position position:3\nTHEN CLI parses notation and position [ - see previous acceptance criteria]\nAND removes node from current position\nAND inserts at new position",
                          "text": "WHEN User moves node to same parent different position\nEXAMPLE: cli.story_graph.\"Invoke Bot\".\"Manage Bot\".move_to_position position:3\nTHEN CLI parses notation and position [ - see previous acceptance criteria]\nAND removes node from current position\nAND inserts at new position",
                          "sequential_order": 2.0
                        },
                        {
                          "name": "WHEN User enters non-existent source path\nTHEN CLI identifies source does not exist [ - see previous acceptance criteria]\nAND outputs error",
                          "text": "WHEN User enters non-existent source path\nTHEN CLI identifies source does not exist [ - see previous acceptance criteria]\nAND outputs error",
                          "sequential_order": 3.0
                        },
                        {
                          "name": "WHEN User enters non-existent target path\nTHEN CLI identifies target does not exist [ - see previous acceptance criteria]\nAND outputs error",
                          "text": "WHEN User enters non-existent target path\nTHEN CLI identifies target does not exist [ - see previous acceptance criteria]\nAND outputs error",
                          "sequential_order": 4.0
                        },
                        {
                          "name": "WHEN User moves incompatible type\nTHEN CLI identifies type incompatibility [ - see previous acceptance criteria]\nAND outputs error with allowed types",
                          "text": "WHEN User moves incompatible type\nTHEN CLI identifies type incompatibility [ - see previous acceptance criteria]\nAND outputs error with allowed types",
                          "sequential_order": 5.0
                        },
                        {
                          "name": "WHEN User moves to create circular reference\nTHEN CLI identifies circular reference\nAND outputs error",
                          "text": "WHEN User moves to create circular reference\nTHEN CLI identifies circular reference\nAND outputs error",
                          "sequential_order": 6.0
                        }
                      ],
                      "behavior": null
                    },
                    {
                      "name": "Move Story Node Panel",
                      "sequential_order": 13.0,
                      "connector": "or",
                      "story_type": "user",
                      "users": [
                        "User"
                      ],
                      "test_class": "TestMoveStoryNode",
                      "scenarios": [
                        {
                          "name": "User drags node and Panel shows drag cursor",
                          "sequential_order": 1.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_drag_node_shows_drag_cursor",
                          "steps": "And Story Graph has SubEpic \"Authentication\"\nAnd SubEpic \"Authentication\" is selected\nWhen User starts dragging node \"Authentication\"\nThen Panel shows drag cursor\nAnd Panel shows node icon next to cursor\nAnd Panel indicates node is being moved"
                        },
                        {
                          "name": "User drags over compatible parent and Panel highlights as valid target",
                          "sequential_order": 2.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_drag_over_compatible_highlights_target",
                          "steps": "And Story Graph has Epic \"User Management\" and Epic \"System Admin\"\nAnd Epic \"User Management\" has SubEpic \"Authentication\"\nAnd User is dragging SubEpic \"Authentication\"\nWhen User drags over Epic \"System Admin\"\nThen Panel validates Epic \"System Admin\" can accept SubEpic children\nAnd Panel highlights Epic \"System Admin\" as valid drop target\nAnd Panel shows drop indicator at target position"
                        },
                        {
                          "name": "User drags over incompatible parent and Panel shows no-drop cursor",
                          "sequential_order": 3.0,
                          "type": "error_case",
                          "background": [],
                          "test_method": "test_drag_over_incompatible_shows_no_drop",
                          "steps": "And Story Graph has SubEpic \"Authentication\" with Story \"Login Form\"\nAnd Story Graph has SubEpic \"Authorization\" with SubEpic \"Roles\"\nAnd User is dragging SubEpic \"Roles\"\nWhen User drags over SubEpic \"Authentication\" that contains Stories\nThen Panel validates SubEpic \"Authentication\" cannot accept SubEpic children\nAnd Panel shows no-drop cursor\nAnd Panel does not highlight \"Authentication\" as target"
                        },
                        {
                          "name": "User drags over descendant and Panel shows no-drop cursor",
                          "sequential_order": 4.0,
                          "type": "error_case",
                          "background": [],
                          "test_method": "test_drag_over_descendant_shows_no_drop",
                          "steps": "And Story Graph has Epic \"User Management\" with SubEpic \"Authentication\"\nAnd SubEpic \"Authentication\" has SubEpic \"Login Flow\"\nAnd User is dragging Epic \"User Management\"\nWhen User drags over SubEpic \"Authentication\" which is descendant\nThen Panel detects circular reference would occur\nAnd Panel shows no-drop cursor\nAnd Panel does not highlight \"Authentication\" as target"
                        },
                        {
                          "name": "User drops on compatible parent and Panel moves node",
                          "sequential_order": 5.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_drop_on_compatible_moves_node",
                          "steps": "And Story Graph has Epic \"User Management\" with SubEpics: \"SubEpic A\", \"Authentication\", \"SubEpic B\"\nAnd Story Graph has Epic \"System Admin\" with SubEpic \"SubEpic C\"\nAnd User is dragging SubEpic \"Authentication\"\nAnd User has dragged over Epic \"System Admin\"\nAnd Panel shows \"System Admin\" as valid drop target\nWhen User drops node on Epic \"System Admin\" at position 1\nThen Panel removes \"Authentication\" from Epic \"User Management\"\nAnd Panel inserts \"Authentication\" under Epic \"System Admin\" at position 1\nAnd Panel resequences children in \"User Management\" to show: \"SubEpic A\", \"SubEpic B\"\nAnd Panel resequences children in \"System Admin\" to show: \"SubEpic C\", \"Authentication\"\nAnd Panel refreshes Story Tree"
                        },
                        {
                          "name": "User drops on incompatible parent and Panel ignores drop",
                          "sequential_order": 6.0,
                          "type": "error_case",
                          "background": [],
                          "test_method": "test_drop_on_incompatible_ignores_drop",
                          "steps": "And Story Graph has SubEpic \"Authentication\" with Story \"Login Form\"\nAnd Story Graph has SubEpic \"Authorization\" with SubEpic \"Roles\"\nAnd User is dragging SubEpic \"Roles\"\nWhen User drops on SubEpic \"Authentication\" that contains Stories\nThen Panel ignores drop operation\nAnd SubEpic \"Roles\" returns to original position under \"Authorization\"\nAnd Panel does not modify Story Graph structure"
                        }
                      ],
                      "acceptance_criteria": [
                        {
                          "name": "WHEN User drags node\nTHEN Panel shows drag cursor with node icon",
                          "text": "WHEN User drags node\nTHEN Panel shows drag cursor with node icon",
                          "sequential_order": 1.0
                        },
                        {
                          "name": "WHEN User drags over compatible parent\nTHEN Panel highlights parent as valid drop target",
                          "text": "WHEN User drags over compatible parent\nTHEN Panel highlights parent as valid drop target",
                          "sequential_order": 2.0
                        },
                        {
                          "name": "WHEN User drags over incompatible parent or descendant\nTHEN Panel shows no-drop cursor",
                          "text": "WHEN User drags over incompatible parent or descendant\nTHEN Panel shows no-drop cursor",
                          "sequential_order": 3.0
                        },
                        {
                          "name": "WHEN User drops on compatible parent\nTHEN Panel removes node from source\nAND inserts node under target at position\nAND resequences nodes in both locations\nAND refreshes Story Tree",
                          "text": "WHEN User drops on compatible parent\nTHEN Panel removes node from source\nAND inserts node under target at position\nAND resequences nodes in both locations\nAND refreshes Story Tree",
                          "sequential_order": 4.0
                        },
                        {
                          "name": "WHEN User drops on incompatible parent\nTHEN Panel ignores drop\nAND node returns to original position",
                          "text": "WHEN User drops on incompatible parent\nTHEN Panel ignores drop\nAND node returns to original position",
                          "sequential_order": 5.0
                        }
                      ],
                      "behavior": null
                    },
                    {
                      "name": "Update Story Node name  CLI",
                      "sequential_order": 14.0,
                      "connector": "or",
                      "story_type": "user",
                      "users": [
                        "User"
                      ],
                      "test_class": "TestUpdateStoryNodename",
                      "scenarios": [
                        {
                          "name": "User renames node with valid name using dot notation",
                          "sequential_order": 1.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_rename_node_with_valid_name",
                          "steps": "And Story Graph has Epic \"Invoke Bot\" with SubEpic \"Old Name\"\nWhen User executes CLI command: story_graph.\"Invoke Bot\".\"Old Name\".rename name:\"New Name\"\nThen CLI parses dot notation to node \"Old Name\"\nAnd CLI resolves node \"Old Name\" successfully\nAnd CLI validates node exists\nAnd CLI validates name \"New Name\" is not empty\nAnd CLI validates name \"New Name\" is unique among siblings\nAnd CLI updates node name to \"New Name\"\nAnd CLI outputs success message: \"Renamed SubEpic 'Old Name' to 'New Name'\"\nAnd Story Graph shows SubEpic \"New Name\" under Epic \"Invoke Bot\"",
                          "test": {
                            "method": "test_rename_node_with_valid_name",
                            "file": "invoke_bot/edit_story_map/test_edit_story_nodes.py",
                            "line": 1712
                          }
                        },
                        {
                          "name": "User enters non-existent node path and CLI outputs error",
                          "sequential_order": 2.0,
                          "type": "error_case",
                          "background": [],
                          "test_method": "test_rename_nonexistent_node_outputs_error",
                          "steps": "And Story Graph has Epic \"Invoke Bot\" with SubEpic \"Manage Bot\"\nAnd Story Graph does not have SubEpic \"Non-existent Node\"\nWhen User executes CLI command: story_graph.\"Invoke Bot\".\"Non-existent Node\".rename name:\"New Name\"\nThen CLI parses dot notation to node \"Non-existent Node\"\nAnd CLI attempts to resolve node \"Non-existent Node\"\nAnd CLI identifies node does not exist\nAnd CLI outputs error: \"Node 'Non-existent Node' not found. Valid paths under 'Invoke Bot': 'Manage Bot'\"\nAnd CLI does not modify Story Graph",
                          "test": {
                            "method": "test_rename_nonexistent_node_outputs_error",
                            "file": "invoke_bot/edit_story_map/test_edit_story_nodes.py",
                            "line": 1739
                          }
                        },
                        {
                          "name": "User enters empty name and CLI outputs error",
                          "sequential_order": 3.0,
                          "type": "error_case",
                          "background": [],
                          "test_method": "test_rename_with_empty_name_outputs_error",
                          "steps": "And Story Graph has SubEpic \"Manage Bot\"\nWhen User executes CLI command: story_graph.\"Invoke Bot\".\"Manage Bot\".rename name:\"\"\nThen CLI parses dot notation to node \"Manage Bot\"\nAnd CLI resolves node \"Manage Bot\" successfully\nAnd CLI validates new name\nAnd CLI identifies name is empty\nAnd CLI outputs error: \"Name cannot be empty\"\nAnd CLI does not update node name",
                          "test": {
                            "method": "test_rename_with_empty_name_outputs_error",
                            "file": "invoke_bot/edit_story_map/test_edit_story_nodes.py",
                            "line": 1763
                          }
                        },
                        {
                          "name": "User enters duplicate name and CLI outputs error",
                          "sequential_order": 4.0,
                          "type": "error_case",
                          "background": [],
                          "test_method": "test_rename_with_duplicate_name_outputs_error",
                          "steps": "And Story Graph has Epic \"Invoke Bot\" with SubEpics: \"Manage Bot\", \"Other SubEpic\"\nWhen User executes CLI command: story_graph.\"Invoke Bot\".\"Other SubEpic\".rename name:\"Manage Bot\"\nThen CLI parses dot notation to node \"Other SubEpic\"\nAnd CLI resolves node \"Other SubEpic\" successfully\nAnd CLI validates name \"Manage Bot\" against siblings\nAnd CLI identifies duplicate name\nAnd CLI outputs error: \"Child with name 'Manage Bot' already exists under parent 'Invoke Bot'\"\nAnd CLI does not update node name",
                          "test": {
                            "method": "test_rename_with_duplicate_name_outputs_error",
                            "file": "invoke_bot/edit_story_map/test_edit_story_nodes.py",
                            "line": 1786
                          }
                        },
                        {
                          "name": "User enters invalid characters and CLI outputs error",
                          "sequential_order": 5.0,
                          "type": "error_case",
                          "background": [],
                          "test_method": "test_rename_with_invalid_characters_outputs_error",
                          "steps": "And Story Graph has SubEpic \"Manage Bot\"\nWhen User executes CLI command: story_graph.\"Invoke Bot\".\"Manage Bot\".rename name:\"Name<>|*\"\nThen CLI parses dot notation to node \"Manage Bot\"\nAnd CLI resolves node \"Manage Bot\" successfully\nAnd CLI validates characters in name \"Name<>|*\"\nAnd CLI identifies invalid characters: <, >, |, *\nAnd CLI outputs error: \"Name contains invalid characters: < > | *\"\nAnd CLI does not update node name",
                          "test": {
                            "method": "test_rename_with_invalid_characters_outputs_error",
                            "file": "invoke_bot/edit_story_map/test_edit_story_nodes.py",
                            "line": 1811
                          }
                        }
                      ],
                      "acceptance_criteria": [
                        {
                          "name": "WHEN User renames node with dot notation\nEXAMPLE: cli.story_graph.\"Invoke Bot\".\"Old Name\".rename name:\"New Name\"\nTHEN CLI parses notation to node\nAND resolves and validates node exists\nAND validates name not empty and unique among siblings\nAND updates node name\nAND outputs success message",
                          "text": "WHEN User renames node with dot notation\nEXAMPLE: cli.story_graph.\"Invoke Bot\".\"Old Name\".rename name:\"New Name\"\nTHEN CLI parses notation to node\nAND resolves and validates node exists\nAND validates name not empty and unique among siblings\nAND updates node name\nAND outputs success message",
                          "sequential_order": 1.0
                        },
                        {
                          "name": "WHEN User enters non-existent node path\nTHEN CLI identifies node does not exist [ - see previous acceptance criteria]\nAND outputs error with valid paths",
                          "text": "WHEN User enters non-existent node path\nTHEN CLI identifies node does not exist [ - see previous acceptance criteria]\nAND outputs error with valid paths",
                          "sequential_order": 2.0
                        },
                        {
                          "name": "WHEN User enters empty name\nTHEN CLI outputs error",
                          "text": "WHEN User enters empty name\nTHEN CLI outputs error",
                          "sequential_order": 3.0
                        },
                        {
                          "name": "WHEN User enters duplicate name\nTHEN CLI identifies duplicate\nAND outputs error",
                          "text": "WHEN User enters duplicate name\nTHEN CLI identifies duplicate\nAND outputs error",
                          "sequential_order": 4.0
                        },
                        {
                          "name": "WHEN User enters invalid characters\nTHEN CLI identifies invalid characters\nAND outputs error",
                          "text": "WHEN User enters invalid characters\nTHEN CLI identifies invalid characters\nAND outputs error",
                          "sequential_order": 5.0
                        }
                      ],
                      "behavior": null
                    },
                    {
                      "name": "Update Story Node name Panel",
                      "sequential_order": 15.0,
                      "connector": "or",
                      "story_type": "user",
                      "users": [
                        "User"
                      ],
                      "test_class": "TestUpdateStoryNodename",
                      "scenarios": [
                        {
                          "name": "User clicks node name and Panel enables inline editing",
                          "sequential_order": 1.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_click_name_enables_inline_editing",
                          "steps": "And Story Graph has SubEpic \"Authentication\"\nAnd SubEpic \"Authentication\" is selected\nWhen User clicks node name \"Authentication\"\nThen Panel enables inline editing mode\nAnd Panel shows text input field with current name\nAnd Panel selects all text in name field"
                        },
                        {
                          "name": "User types valid name and saves by pressing Tab",
                          "sequential_order": 2.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_save_valid_name_with_tab",
                          "steps": "And Story Graph has SubEpic \"Authentication\"\nAnd User has clicked node name \"Authentication\" to edit\nAnd Panel is in inline editing mode\nWhen User types \"User Authentication\"\nAnd User presses Tab\nThen Panel validates name in real-time\nAnd Panel updates node name to \"User Authentication\"\nAnd Panel exits editing mode\nAnd Panel refreshes Story Tree\nAnd Story Tree shows \"User Authentication\""
                        },
                        {
                          "name": "User types valid name and saves by pressing Enter",
                          "sequential_order": 3.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_save_valid_name_with_enter",
                          "steps": "And Story Graph has Story \"Login Form\"\nAnd User has clicked node name \"Login Form\" to edit\nAnd Panel is in inline editing mode\nWhen User types \"User Login Interface\"\nAnd User presses Enter\nThen Panel validates name in real-time\nAnd Panel updates node name to \"User Login Interface\"\nAnd Panel exits editing mode\nAnd Panel refreshes Story Tree"
                        },
                        {
                          "name": "User types empty name and Panel shows required message",
                          "sequential_order": 4.0,
                          "type": "error_case",
                          "background": [],
                          "test_method": "test_empty_name_shows_required_message",
                          "steps": "And Story Graph has SubEpic \"Authentication\"\nAnd User has clicked node name to edit\nAnd Panel is in inline editing mode\nWhen User clears all text from name field\nAnd User presses Tab\nThen Panel validates name in real-time\nAnd Panel shows error message \"Name required\"\nAnd Panel remains in editing mode\nAnd Panel does not save empty name"
                        },
                        {
                          "name": "User types duplicate name and Panel shows exists message",
                          "sequential_order": 5.0,
                          "type": "error_case",
                          "background": [],
                          "test_method": "test_duplicate_name_shows_exists_message",
                          "steps": "And Story Graph has Epic \"User Management\" with SubEpics: \"Authentication\", \"Authorization\"\nAnd User has clicked node name \"Authorization\" to edit\nAnd Panel is in inline editing mode\nWhen User types \"Authentication\"\nAnd User presses Tab\nThen Panel validates name against siblings\nAnd Panel shows error message \"Name already exists\"\nAnd Panel remains in editing mode\nAnd Panel does not save duplicate name"
                        },
                        {
                          "name": "User types invalid characters and Panel shows invalid message",
                          "sequential_order": 6.0,
                          "type": "error_case",
                          "background": [],
                          "test_method": "test_invalid_characters_shows_message",
                          "steps": "And Story Graph has SubEpic \"Authentication\"\nAnd User has clicked node name to edit\nAnd Panel is in inline editing mode\nWhen User types \"Auth<>|*\"\nAnd User presses Tab\nThen Panel validates characters in name\nAnd Panel shows error message \"Invalid characters\"\nAnd Panel remains in editing mode\nAnd Panel does not save name with invalid characters"
                        },
                        {
                          "name": "User cancels editing by pressing Escape and Panel retains original name",
                          "sequential_order": 7.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_escape_cancels_editing_retains_name",
                          "steps": "And Story Graph has SubEpic \"Authentication\"\nAnd User has clicked node name to edit\nAnd Panel is in inline editing mode\nWhen User types \"New Name\"\nAnd User presses Escape\nThen Panel exits editing mode\nAnd Panel retains original name \"Authentication\"\nAnd Panel does not save name change\nAnd Story Tree still shows \"Authentication\""
                        }
                      ],
                      "acceptance_criteria": [
                        {
                          "name": "WHEN User clicks node name\nTHEN Panel enables inline editing",
                          "text": "WHEN User clicks node name\nTHEN Panel enables inline editing",
                          "sequential_order": 1.0
                        },
                        {
                          "name": "WHEN User types in name field\nAND User presses Tab or Enter clicks away from the name field.\nTHEN Panel validates name in real-time\nAND saves Name change",
                          "text": "WHEN User types in name field\nAND User presses Tab or Enter clicks away from the name field.\nTHEN Panel validates name in real-time\nAND saves Name change",
                          "sequential_order": 2.0
                        },
                        {
                          "name": "WHEN User types empty name\nTHEN Panel shows \"Name required\" message",
                          "text": "WHEN User types empty name\nTHEN Panel shows \"Name required\" message",
                          "sequential_order": 3.0
                        },
                        {
                          "name": "WHEN User types duplicate name\nTHEN Panel shows \"Name already exists\" message",
                          "text": "WHEN User types duplicate name\nTHEN Panel shows \"Name already exists\" message",
                          "sequential_order": 4.0
                        },
                        {
                          "name": "WHEN User types invalid characters\nTHEN Panel shows \"Invalid characters\" message",
                          "text": "WHEN User types invalid characters\nTHEN Panel shows \"Invalid characters\" message",
                          "sequential_order": 5.0
                        },
                        {
                          "name": "WHEN User saves valid name\nTHEN Panel updates node name\nAND exits editing mode\nAND refreshes Story Tree",
                          "text": "WHEN User saves valid name\nTHEN Panel updates node name\nAND exits editing mode\nAND refreshes Story Tree",
                          "sequential_order": 6.0
                        },
                        {
                          "name": "WHEN User cancels By pressing Escape\nTHEN Panel retains previous name\nAND exits editing mode",
                          "text": "WHEN User cancels By pressing Escape\nTHEN Panel retains previous name\nAND exits editing mode",
                          "sequential_order": 7.0
                        }
                      ],
                      "behavior": null
                    },
                    {
                      "name": "Update Story Node Name",
                      "sequential_order": 16.0,
                      "connector": "or",
                      "story_type": "user",
                      "users": [
                        "Bot Behavior"
                      ],
                      "test_class": "TestUpdateStoryNodeName",
                      "scenarios": [
                        {
                          "name": "Rename node with valid name across hierarchy levels",
                          "sequential_order": 1.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_rename_node_with_valid_name_across_hierarchy_levels",
                          "steps": "GIVEN: Node exists with old name\nWHEN: Node is renamed to new valid name\nTHEN: Node name is updated and accessible by new name",
                          "test": {
                            "method": "test_rename_node_with_valid_name_across_hierarchy_levels",
                            "file": "invoke_bot/edit_story_map/test_edit_story_nodes.py",
                            "line": 888
                          }
                        },
                        {
                          "name": "Rename node with empty or whitespace name returns error",
                          "sequential_order": 2.0,
                          "type": "error",
                          "background": [],
                          "test_method": "test_rename_node_with_empty_or_whitespace_name_returns_error",
                          "steps": "GIVEN: Node exists with current name\nWHEN: Attempting to rename to empty or whitespace name\nTHEN: System identifies invalid name and returns error",
                          "test": {
                            "method": "test_rename_node_with_empty_or_whitespace_name_returns_error",
                            "file": "invoke_bot/edit_story_map/test_edit_story_nodes.py",
                            "line": 919
                          }
                        },
                        {
                          "name": "Rename node with duplicate sibling name returns error",
                          "sequential_order": 3.0,
                          "type": "error",
                          "background": [],
                          "test_method": "test_rename_node_with_duplicate_sibling_name_returns_error",
                          "steps": "GIVEN: Parent has multiple children including target node\nWHEN: Attempting to rename node to existing sibling name\nTHEN: System identifies duplicate and returns error",
                          "test": {
                            "method": "test_rename_node_with_duplicate_sibling_name_returns_error",
                            "file": "invoke_bot/edit_story_map/test_edit_story_nodes.py",
                            "line": 949
                          }
                        },
                        {
                          "name": "Rename node with valid special characters",
                          "sequential_order": 4.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_rename_node_with_valid_special_characters",
                          "steps": "GIVEN: Node exists with old name\nWHEN: Renaming to name with valid special characters\nTHEN: Name is updated and special characters are preserved",
                          "test": {
                            "method": "test_rename_node_with_valid_special_characters",
                            "file": "invoke_bot/edit_story_map/test_edit_story_nodes.py",
                            "line": 982
                          }
                        },
                        {
                          "name": "Rename node with invalid special characters returns error",
                          "sequential_order": 5.0,
                          "type": "error",
                          "background": [],
                          "test_method": "test_rename_node_with_invalid_special_characters_returns_error",
                          "steps": "GIVEN: Node exists with current name\nWHEN: Attempting to rename with invalid special characters\nTHEN: System identifies invalid characters and returns error",
                          "test": {
                            "method": "test_rename_node_with_invalid_special_characters_returns_error",
                            "file": "invoke_bot/edit_story_map/test_edit_story_nodes.py",
                            "line": 1014
                          }
                        }
                      ],
                      "acceptance_criteria": [],
                      "behavior": null
                    },
                    {
                      "name": "Save Story Map Changes Asynchronously",
                      "sequential_order": 17.0,
                      "connector": "and",
                      "story_type": "user",
                      "users": [
                        "User"
                      ],
                      "test_class": "TestSaveStoryMapChangesAsynchronously",
                      "scenarios": [
                        {
                          "name": "User moves node and sees optimistic update with async save",
                          "sequential_order": 1.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_user_moves_node_optimistic_update_subepic",
                          "steps": "Given Story Map contains <parent_node_type> named <parent_node_name>\nAnd <parent_node_type> contains <node_type> named <node_name> at position <original_position>\nAnd Panel is displaying story map\nWhen User drags <node_type> <node_name> to new position <target_position>\nThen Panel moves <node_type> <node_name> to position <target_position> in DOM immediately\nAnd Panel displays <status_indicator> in header\nAnd Panel shows operation count <operation_count>\nWhen Panel waits <debounce_time> after last change\nThen Panel executes move command to Backend\nAnd Backend moves <node_type> <node_name> from position <original_position> to <target_position>\nAnd Backend writes changes to story-graph.json\nWhen Backend completes save successfully\nThen Panel shows <success_indicator>\nAnd Panel shows <success_message>\nAnd Panel auto-hides status after <auto_hide_time>\nWhen User reloads Panel\nThen Panel loads story-graph.json\nAnd Panel displays <node_type> <node_name> at position <target_position>",
                          "examples": [
                            {
                              "columns": [
                                "parent_node_type",
                                "parent_node_name",
                                "node_type",
                                "node_name",
                                "original_position",
                                "target_position",
                                "status_indicator",
                                "operation_count",
                                "debounce_time",
                                "success_indicator",
                                "success_message",
                                "auto_hide_time"
                              ],
                              "rows": [
                                [
                                  "Epic",
                                  "Invoke Bot",
                                  "SubEpic",
                                  "Edit Story Map",
                                  1,
                                  3,
                                  "spinner icon",
                                  "1 operation",
                                  "500ms",
                                  "green checkmark",
                                  "Saved",
                                  "2 seconds"
                                ],
                                [
                                  "SubEpic",
                                  "Edit Story Map",
                                  "Story",
                                  "Save Story Map Changes Asynchronously",
                                  0,
                                  5,
                                  "spinner icon",
                                  "1 operation",
                                  "500ms",
                                  "green checkmark",
                                  "Saved",
                                  "2 seconds"
                                ],
                                [
                                  "Story",
                                  "Save Story Map Changes Asynchronously",
                                  "Scenario",
                                  "User moves node and sees optimistic update",
                                  0,
                                  2,
                                  "spinner icon",
                                  "1 operation",
                                  "500ms",
                                  "green checkmark",
                                  "Saved",
                                  "2 seconds"
                                ]
                              ]
                            }
                          ]
                        },
                        {
                          "name": "User renames node and sees optimistic update with async save",
                          "sequential_order": 2.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_user_renames_node_optimistic_update_subepic",
                          "steps": "Given Story Map contains <parent_node_type> named <parent_node_name>\nAnd <parent_node_type> contains <node_type> named <original_name>\nAnd Panel is displaying story map\nWhen User renames <node_type> from <original_name> to <new_name>\nThen Panel updates <node_type> name to <new_name> in DOM immediately\nAnd Panel displays <status_indicator> in header\nAnd Panel shows operation count <operation_count>\nWhen Panel waits <debounce_time> after last change\nThen Panel executes rename command to Backend\nAnd Backend renames <node_type> from <original_name> to <new_name>\nAnd Backend writes changes to story-graph.json\nWhen Backend completes save successfully\nThen Panel shows <success_indicator>\nAnd Panel shows <success_message>\nAnd Panel auto-hides status after <auto_hide_time>\nWhen User reloads Panel\nThen Panel loads story-graph.json\nAnd Panel displays <node_type> named <new_name>",
                          "examples": [
                            {
                              "columns": [
                                "parent_node_type",
                                "parent_node_name",
                                "node_type",
                                "original_name",
                                "new_name",
                                "status_indicator",
                                "operation_count",
                                "debounce_time",
                                "success_indicator",
                                "success_message",
                                "auto_hide_time"
                              ],
                              "rows": [
                                [
                                  "Epic",
                                  "Invoke Bot",
                                  "SubEpic",
                                  "Edit Story Map",
                                  "Modify Story Map",
                                  "spinner icon",
                                  "1 operation",
                                  "500ms",
                                  "green checkmark",
                                  "Saved",
                                  "2 seconds"
                                ],
                                [
                                  "SubEpic",
                                  "Edit Story Map",
                                  "Story",
                                  "Save Story Map Changes Asynchronously",
                                  "Persist Story Map Changes Async",
                                  "spinner icon",
                                  "1 operation",
                                  "500ms",
                                  "green checkmark",
                                  "Saved",
                                  "2 seconds"
                                ],
                                [
                                  "Story",
                                  "Save Story Map Changes Asynchronously",
                                  "Scenario",
                                  "User moves node",
                                  "User drags and drops node to reorder",
                                  "spinner icon",
                                  "1 operation",
                                  "500ms",
                                  "green checkmark",
                                  "Saved",
                                  "2 seconds"
                                ]
                              ]
                            }
                          ]
                        },
                        {
                          "name": "User deletes node and sees optimistic update with async save",
                          "sequential_order": 3.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_user_deletes_node_optimistic_update_story",
                          "steps": "Given Story Map contains <parent_node_type> named <parent_node_name>\nAnd <parent_node_type> contains <node_type> named <node_name> at position <node_position>\nAnd Panel is displaying story map\nWhen User clicks delete on <node_type> <node_name>\nThen Panel removes <node_type> <node_name> from DOM immediately\nAnd Panel displays <status_indicator> in header\nAnd Panel shows operation count <operation_count>\nWhen Panel waits <debounce_time> after last change\nThen Panel executes delete command to Backend\nAnd Backend deletes <node_type> <node_name> from <parent_node_type>\nAnd Backend writes changes to story-graph.json\nWhen Backend completes save successfully\nThen Panel shows <success_indicator>\nAnd Panel shows <success_message>\nAnd Panel auto-hides status after <auto_hide_time>\nWhen User reloads Panel\nThen Panel loads story-graph.json\nAnd Panel confirms <node_type> <node_name> no longer exists",
                          "examples": [
                            {
                              "columns": [
                                "parent_node_type",
                                "parent_node_name",
                                "node_type",
                                "node_name",
                                "node_position",
                                "status_indicator",
                                "operation_count",
                                "debounce_time",
                                "success_indicator",
                                "success_message",
                                "auto_hide_time"
                              ],
                              "rows": [
                                [
                                  "SubEpic",
                                  "Edit Story Map",
                                  "Story",
                                  "Deprecated Story Example",
                                  8,
                                  "spinner icon",
                                  "1 operation",
                                  "500ms",
                                  "green checkmark",
                                  "Saved",
                                  "2 seconds"
                                ],
                                [
                                  "Story",
                                  "Save Story Map Changes Asynchronously",
                                  "Scenario",
                                  "Obsolete test scenario",
                                  5,
                                  "spinner icon",
                                  "1 operation",
                                  "500ms",
                                  "green checkmark",
                                  "Saved",
                                  "2 seconds"
                                ],
                                [
                                  "Story",
                                  "Save Story Map Changes Asynchronously",
                                  "Acceptance Criterion",
                                  "Outdated AC for feature",
                                  15,
                                  "spinner icon",
                                  "1 operation",
                                  "500ms",
                                  "green checkmark",
                                  "Saved",
                                  "2 seconds"
                                ]
                              ]
                            }
                          ]
                        },
                        {
                          "name": "User creates node and sees optimistic update with async save",
                          "sequential_order": 4.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_user_creates_node_optimistic_update_subepic",
                          "steps": "Given Story Map contains <parent_node_type> named <parent_node_name>\nAnd Panel is displaying story map\nWhen User clicks create new <node_type> under <parent_node_type>\nAnd User enters <node_type> name <new_node_name>\nThen Panel adds <node_type> <new_node_name> to DOM immediately\nAnd Panel displays <status_indicator> in header\nAnd Panel shows operation count <operation_count>\nWhen Panel waits <debounce_time> after last change\nThen Panel executes create command to Backend\nAnd Backend creates <node_type> <new_node_name> under <parent_node_type>\nAnd Backend writes changes to story-graph.json\nWhen Backend completes save successfully\nThen Panel shows <success_indicator>\nAnd Panel shows <success_message>\nAnd Panel auto-hides status after <auto_hide_time>\nWhen User reloads Panel\nThen Panel loads story-graph.json\nAnd Panel displays <node_type> <new_node_name> under <parent_node_type>",
                          "examples": [
                            {
                              "columns": [
                                "parent_node_type",
                                "parent_node_name",
                                "node_type",
                                "new_node_name",
                                "status_indicator",
                                "operation_count",
                                "debounce_time",
                                "success_indicator",
                                "success_message",
                                "auto_hide_time"
                              ],
                              "rows": [
                                [
                                  "Epic",
                                  "Invoke Bot",
                                  "SubEpic",
                                  "Export Story Map",
                                  "spinner icon",
                                  "1 operation",
                                  "500ms",
                                  "green checkmark",
                                  "Saved",
                                  "2 seconds"
                                ],
                                [
                                  "SubEpic",
                                  "Edit Story Map",
                                  "Story",
                                  "Undo Story Map Changes",
                                  "spinner icon",
                                  "1 operation",
                                  "500ms",
                                  "green checkmark",
                                  "Saved",
                                  "2 seconds"
                                ],
                                [
                                  "Story",
                                  "Save Story Map Changes Asynchronously",
                                  "Scenario",
                                  "User creates SubEpic and saves",
                                  "spinner icon",
                                  "1 operation",
                                  "500ms",
                                  "green checkmark",
                                  "Saved",
                                  "2 seconds"
                                ]
                              ]
                            }
                          ]
                        },
                        {
                          "name": "User makes multiple rapid changes and sees batched async save",
                          "sequential_order": 5.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_user_makes_multiple_rapid_changes_batched_async_save",
                          "steps": "Given Story Map contains Epic <epic_name> with SubEpic <sub_epic_name>\nAnd SubEpic contains Story <story_name_a> at position <pos_a>\nAnd SubEpic contains Story <story_name_b> at position <pos_b>\nAnd SubEpic contains Story <story_name_c> at position <pos_c>\nAnd Panel is displaying story map\nWhen User moves <story_name_a> to position <new_pos_a>\nAnd User renames <story_name_b> to <new_name_b> within <batch_window>\nAnd User deletes <story_name_c> within <batch_window>\nThen Panel updates all changes in DOM immediately\nAnd Panel displays <status_indicator> in header\nAnd Panel shows <batch_message>\nWhen Panel waits <debounce_time> after last change\nThen Panel executes <operation_count> commands sequentially to Backend\nAnd Backend processes all operations\nAnd Backend writes changes to story-graph.json\nWhen Backend completes all saves successfully\nThen Panel shows <success_indicator>\nAnd Panel shows <success_message>\nWhen User reloads Panel\nThen Panel loads story-graph.json\nAnd Panel displays <story_name_a> at position <new_pos_a>\nAnd Panel displays Story named <new_name_b>\nAnd Panel confirms <story_name_c> no longer exists",
                          "examples": [
                            {
                              "columns": [
                                "epic_name",
                                "sub_epic_name",
                                "story_name_a",
                                "pos_a",
                                "new_pos_a",
                                "story_name_b",
                                "new_name_b",
                                "pos_b",
                                "story_name_c",
                                "pos_c",
                                "batch_window",
                                "status_indicator",
                                "batch_message",
                                "debounce_time",
                                "operation_count",
                                "success_indicator",
                                "success_message"
                              ],
                              "rows": [
                                [
                                  "Invoke Bot",
                                  "Edit Story Map",
                                  "Save Story Map Changes Asynchronously",
                                  0,
                                  2,
                                  "Filter Scope",
                                  "Apply Scope Filter",
                                  1,
                                  "Deprecated Feature X",
                                  3,
                                  "500ms",
                                  "spinner icon",
                                  "Saving 3 changes...",
                                  "500ms",
                                  "3",
                                  "green checkmark",
                                  "Saved"
                                ],
                                [
                                  "Invoke Bot",
                                  "Navigate Behavior Actions",
                                  "Display Current Behavior State",
                                  0,
                                  1,
                                  "Navigate to Next Action",
                                  "Advance to Next Action",
                                  1,
                                  "Old Navigation Test",
                                  2,
                                  "500ms",
                                  "spinner icon",
                                  "Saving 3 changes...",
                                  "500ms",
                                  "3",
                                  "green checkmark",
                                  "Saved"
                                ]
                              ]
                            }
                          ]
                        },
                        {
                          "name": "User sees error handling when async save fails",
                          "sequential_order": 6.0,
                          "type": "error_case",
                          "background": [],
                          "test_method": "test_user_sees_error_handling_validation_error_story",
                          "steps": "Given Story Map contains <parent_node_type> named <parent_node_name>\nAnd <parent_node_type> contains <node_type> named <original_name>\nAnd Panel is displaying story map\nWhen User renames <node_type> to <invalid_name>\nThen Panel updates <node_type> name to <invalid_name> in DOM immediately\nAnd Panel displays <status_indicator> in header\nWhen Panel waits <debounce_time> after last change\nThen Panel executes rename command to Backend\nWhen Backend returns <error_type> error with message <error_message>\nThen Panel shows <error_indicator>\nAnd Panel shows <error_display_message>\nAnd Panel makes error indicator clickable\nAnd Panel does not auto-hide error\nAnd Panel restores original name <original_name> in DOM\nWhen User clicks error indicator\nThen Panel displays error dialog\nAnd Panel shows error details: <error_details>",
                          "examples": [
                            {
                              "columns": [
                                "parent_node_type",
                                "parent_node_name",
                                "node_type",
                                "original_name",
                                "invalid_name",
                                "status_indicator",
                                "debounce_time",
                                "error_type",
                                "error_message",
                                "error_indicator",
                                "error_display_message",
                                "error_details"
                              ],
                              "rows": [
                                [
                                  "SubEpic",
                                  "Edit Story Map",
                                  "Story",
                                  "Save Story Map Changes Asynchronously",
                                  "",
                                  "spinner icon",
                                  "500ms",
                                  "validation",
                                  "Story name cannot be empty",
                                  "red X icon",
                                  "Save failed - click for details",
                                  "ValidationError: Story name is required and cannot be empty string"
                                ],
                                [
                                  "Story",
                                  "Save Story Map Changes Asynchronously",
                                  "Scenario",
                                  "User moves node",
                                  "User moves node (contains ðŸŽ¯ invalid emoji)",
                                  "spinner icon",
                                  "500ms",
                                  "validation",
                                  "Scenario name contains invalid characters",
                                  "red X icon",
                                  "Save failed - click for details",
                                  "ValidationError: Scenario name cannot contain emoji or special unicode characters"
                                ],
                                [
                                  "SubEpic",
                                  "Edit Story Map",
                                  "Story",
                                  "Filter Scope",
                                  "Navigate Behavior Actions",
                                  "spinner icon",
                                  "500ms",
                                  "hierarchy",
                                  "Duplicate story name in parent SubEpic",
                                  "red X icon",
                                  "Save failed - click for details",
                                  "HierarchyError: Story 'Navigate Behavior Actions' already exists in SubEpic 'Edit Story Map'"
                                ]
                              ]
                            }
                          ]
                        }
                      ],
                      "acceptance_criteria": [
                        {
                          "name": "WHEN User moves node in Panel\nTHEN Panel moves node in DOM immediately AND Panel displays spinner",
                          "text": "WHEN User moves node in Panel\nTHEN Panel moves node in DOM immediately AND Panel displays spinner",
                          "sequential_order": 1.0
                        },
                        {
                          "name": "WHEN User renames node in Panel\nTHEN Panel updates name in DOM immediately AND Panel displays spinner",
                          "text": "WHEN User renames node in Panel\nTHEN Panel updates name in DOM immediately AND Panel displays spinner",
                          "sequential_order": 2.0
                        },
                        {
                          "name": "WHEN User deletes node in Panel\nTHEN Panel removes node from DOM immediately AND Panel displays spinner",
                          "text": "WHEN User deletes node in Panel\nTHEN Panel removes node from DOM immediately AND Panel displays spinner",
                          "sequential_order": 3.0
                        },
                        {
                          "name": "WHEN User creates node in Panel\nTHEN Panel adds node to DOM immediately AND Panel displays spinner",
                          "text": "WHEN User creates node in Panel\nTHEN Panel adds node to DOM immediately AND Panel displays spinner",
                          "sequential_order": 4.0
                        },
                        {
                          "name": "WHEN Panel updates DOM\nTHEN Panel keeps UI responsive BUT does not refresh entire panel",
                          "text": "WHEN Panel updates DOM\nTHEN Panel keeps UI responsive BUT does not refresh entire panel",
                          "sequential_order": 5.0
                        },
                        {
                          "name": "WHEN User makes change\nTHEN Panel enqueues save operation AND Panel debounces for 500ms",
                          "text": "WHEN User makes change\nTHEN Panel enqueues save operation AND Panel debounces for 500ms",
                          "sequential_order": 6.0
                        },
                        {
                          "name": "WHEN User makes multiple rapid changes\nTHEN Panel batches all operations in queue AND Panel displays operation count",
                          "text": "WHEN User makes multiple rapid changes\nTHEN Panel batches all operations in queue AND Panel displays operation count",
                          "sequential_order": 7.0
                        },
                        {
                          "name": "WHEN 500ms elapses after last change\nTHEN Panel processes entire queue sequentially AND Panel executes each command",
                          "text": "WHEN 500ms elapses after last change\nTHEN Panel processes entire queue sequentially AND Panel executes each command",
                          "sequential_order": 8.0
                        },
                        {
                          "name": "WHEN Panel processes queue\nTHEN Panel spawns Python process for each command BUT does not block UI",
                          "text": "WHEN Panel processes queue\nTHEN Panel spawns Python process for each command BUT does not block UI",
                          "sequential_order": 9.0
                        },
                        {
                          "name": "WHEN Panel executes command\nTHEN Panel marks operation as optimistic AND Panel skips panel refresh",
                          "text": "WHEN Panel executes command\nTHEN Panel marks operation as optimistic AND Panel skips panel refresh",
                          "sequential_order": 10.0
                        },
                        {
                          "name": "WHEN Panel enqueues operation\nTHEN Panel displays status indicator in header AND Panel shows spinner icon AND Panel shows operation count",
                          "text": "WHEN Panel enqueues operation\nTHEN Panel displays status indicator in header AND Panel shows spinner icon AND Panel shows operation count",
                          "sequential_order": 11.0
                        },
                        {
                          "name": "WHEN Backend completes save successfully\nTHEN Panel shows green checkmark AND Panel shows 'Saved' message AND Panel auto-hides after 2 seconds",
                          "text": "WHEN Backend completes save successfully\nTHEN Panel shows green checkmark AND Panel shows 'Saved' message AND Panel auto-hides after 2 seconds",
                          "sequential_order": 12.0
                        },
                        {
                          "name": "WHEN Backend returns error\nTHEN Panel shows red X icon AND Panel shows 'Save failed' message AND Panel makes indicator clickable BUT does not auto-hide",
                          "text": "WHEN Backend returns error\nTHEN Panel shows red X icon AND Panel shows 'Save failed' message AND Panel makes indicator clickable BUT does not auto-hide",
                          "sequential_order": 13.0
                        },
                        {
                          "name": "WHEN User clicks error indicator\nTHEN Panel displays error dialog AND Panel shows error message AND Panel shows stack trace",
                          "text": "WHEN User clicks error indicator\nTHEN Panel displays error dialog AND Panel shows error message AND Panel shows stack trace",
                          "sequential_order": 14.0
                        },
                        {
                          "name": "WHEN Backend returns validation error\nTHEN Panel restores original DOM state AND Panel displays error indicator",
                          "text": "WHEN Backend returns validation error\nTHEN Panel restores original DOM state AND Panel displays error indicator",
                          "sequential_order": 15.0
                        },
                        {
                          "name": "WHEN Backend returns hierarchy error\nTHEN Panel restores original node position AND Panel displays error indicator",
                          "text": "WHEN Backend returns hierarchy error\nTHEN Panel restores original node position AND Panel displays error indicator",
                          "sequential_order": 16.0
                        },
                        {
                          "name": "WHEN Backend fails operation in batch\nTHEN Panel rolls back only failed operation AND Panel keeps successful operations BUT does not roll back entire batch",
                          "text": "WHEN Backend fails operation in batch\nTHEN Panel rolls back only failed operation AND Panel keeps successful operations BUT does not roll back entire batch",
                          "sequential_order": 17.0
                        },
                        {
                          "name": "WHEN Panel rolls back operation\nTHEN Panel executes rollback function AND Panel restores captured state AND Panel updates DOM to match original",
                          "text": "WHEN Panel rolls back operation\nTHEN Panel executes rollback function AND Panel restores captured state AND Panel updates DOM to match original",
                          "sequential_order": 18.0
                        },
                        {
                          "name": "WHEN User initiates move\nTHEN Panel captures original parent AND Panel captures original position AND Panel captures node reference",
                          "text": "WHEN User initiates move\nTHEN Panel captures original parent AND Panel captures original position AND Panel captures node reference",
                          "sequential_order": 19.0
                        },
                        {
                          "name": "WHEN User initiates rename\nTHEN Panel captures original name AND Panel captures name element reference",
                          "text": "WHEN User initiates rename\nTHEN Panel captures original name AND Panel captures name element reference",
                          "sequential_order": 20.0
                        },
                        {
                          "name": "WHEN User initiates delete\nTHEN Panel captures entire node HTML AND Panel captures parent element AND Panel captures position index",
                          "text": "WHEN User initiates delete\nTHEN Panel captures entire node HTML AND Panel captures parent element AND Panel captures position index",
                          "sequential_order": 21.0
                        },
                        {
                          "name": "WHEN Backend completes save successfully\nTHEN Backend writes changes to story-graph.json AND Backend persists all node changes",
                          "text": "WHEN Backend completes save successfully\nTHEN Backend writes changes to story-graph.json AND Backend persists all node changes",
                          "sequential_order": 22.0
                        },
                        {
                          "name": "WHEN User reloads Panel after successful save\nTHEN Panel loads story-graph.json AND Panel displays all saved changes",
                          "text": "WHEN User reloads Panel after successful save\nTHEN Panel loads story-graph.json AND Panel displays all saved changes",
                          "sequential_order": 23.0
                        }
                      ],
                      "behavior": null,
                      "file_link": "C:\\dev\\agile_bots\\docs\\story\\map\\Invoke Bot\\Edit Story Map\\Edit Story Nodes\\ðŸ“„ Save Story Map Changes Asynchronously.md"
                    },
                    {
                      "name": "Automatically Refresh Story Graph Changes Panel",
                      "sequential_order": 18.0,
                      "connector": "or",
                      "story_type": "user",
                      "users": [
                        "User"
                      ],
                      "test_class": "TestAutomaticallyRefreshStoryGraphChanges",
                      "scenarios": [
                        {
                          "name": "Panel detects file modification and refreshes with valid structure",
                          "sequential_order": 1.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_file_modification_refreshes_tree",
                          "steps": "And Story Graph has Epic \"Invoke Bot\" selected\nAnd Panel is displaying Epic \"Invoke Bot\" details\nAnd file monitor is watching story-graph.json\nWhen external process modifies story-graph.json by adding SubEpic \"New Feature\"\nAnd Panel detects file modification\nThen Panel reads updated story-graph.json\nAnd Panel validates graph structure\nAnd Panel refreshes Story Graph Tree\nAnd Panel preserves navigation state showing Epic \"Invoke Bot\"\nAnd Story Tree displays new SubEpic \"New Feature\""
                        },
                        {
                          "name": "Panel detects invalid structure and displays error retaining previous state",
                          "sequential_order": 2.0,
                          "type": "error_case",
                          "background": [],
                          "test_method": "test_invalid_structure_shows_error_retains_state",
                          "steps": "And Story Graph has Epic \"Invoke Bot\" with SubEpic \"Manage Bot\"\nAnd Panel is displaying valid Story Graph Tree\nAnd file monitor is watching story-graph.json\nWhen external process modifies story-graph.json with invalid JSON syntax\nAnd Panel detects file modification\nAnd Panel reads updated story-graph.json\nThen Panel validates graph structure\nAnd System identifies JSON parsing violations\nAnd Panel displays error notification \"Story graph file contains invalid structure\"\nAnd Panel retains previous valid Story Graph state\nAnd Story Tree still shows Epic \"Invoke Bot\" with SubEpic \"Manage Bot\""
                        }
                      ],
                      "acceptance_criteria": [
                        {
                          "name": "WHEN Panel detects file modification\nTHEN Panel reads updated graph\nAND validates structure\nAND Panel refreshes StoryGraph Tree\nAND Panel preserves navigation state if possible",
                          "text": "WHEN Panel detects file modification\nTHEN Panel reads updated graph\nAND validates structure\nAND Panel refreshes StoryGraph Tree\nAND Panel preserves navigation state if possible",
                          "sequential_order": 1.0
                        },
                        {
                          "name": "WHEN System detects invalid structure\nTHEN System identifies violations\nAND displays error notification\nAND retains previous valid state",
                          "text": "WHEN System detects invalid structure\nTHEN System identifies violations\nAND displays error notification\nAND retains previous valid state",
                          "sequential_order": 2.0
                        }
                      ],
                      "behavior": null,
                      "file_link": "C:\\dev\\agile_bots\\docs\\story\\map\\Invoke Bot\\Edit Story Map\\Edit Story Nodes\\ðŸ“„ Automatically Refresh Story Graph Changes Panel.md"
                    },
                    {
                      "name": "Automatically Refresh Story Graph Changes  CLI",
                      "sequential_order": 19.0,
                      "connector": "or",
                      "story_type": "user",
                      "users": [
                        "User"
                      ],
                      "test_class": "TestAutomaticallyRefreshStoryGraphChanges",
                      "scenarios": [
                        {
                          "name": "CLI detects file modification before command and refreshes with valid structure",
                          "sequential_order": 1.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_cli_detects_modification_refreshes_executes",
                          "steps": "And Story Graph has Epic \"Invoke Bot\" with SubEpic \"Manage Bot\"\nAnd file monitor is watching story-graph.json\nAnd external process modifies story-graph.json by adding SubEpic \"New Feature\"\nAnd CLI detects file modification before next command\nWhen User executes CLI command: story_graph.\"Invoke Bot\".list\nThen CLI reads updated story-graph.json\nAnd CLI validates graph structure\nAnd CLI displays notification: \"Story graph updated from external source\"\nAnd CLI executes command with updated graph\nAnd CLI outputs list showing: \"Manage Bot\", \"New Feature\""
                        },
                        {
                          "name": "CLI detects invalid structure and displays error retaining previous state",
                          "sequential_order": 2.0,
                          "type": "error_case",
                          "background": [],
                          "test_method": "test_cli_invalid_structure_shows_error_retains_state",
                          "steps": "And Story Graph has Epic \"Invoke Bot\" with SubEpic \"Manage Bot\"\nAnd CLI has valid graph state loaded\nAnd file monitor is watching story-graph.json\nAnd external process modifies story-graph.json with invalid JSON syntax\nAnd CLI detects file modification before next command\nWhen User executes CLI command: story_graph.\"Invoke Bot\".list\nThen CLI reads updated story-graph.json\nAnd CLI validates graph structure\nAnd System identifies JSON parsing violations\nAnd CLI displays error notification: \"Story graph file contains invalid structure. Using previous valid state.\"\nAnd CLI retains previous valid Story Graph state\nAnd CLI executes command with previous valid graph\nAnd CLI outputs list showing: \"Manage Bot\""
                        }
                      ],
                      "acceptance_criteria": [
                        {
                          "name": "WHEN CLI detects file modification before next command\nTHEN CLI reads updated graph\nAND validates structure\nAND CLI displays \"Story graph updated from external source\"\nAND CLI executes command with updated graph",
                          "text": "WHEN CLI detects file modification before next command\nTHEN CLI reads updated graph\nAND validates structure\nAND CLI displays \"Story graph updated from external source\"\nAND CLI executes command with updated graph",
                          "sequential_order": 1.0
                        },
                        {
                          "name": "WHEN System detects invalid structure\nTHEN System identifies violations\nAND displays error notification\nAND retains previous valid state",
                          "text": "WHEN System detects invalid structure\nTHEN System identifies violations\nAND displays error notification\nAND retains previous valid state",
                          "sequential_order": 2.0
                        }
                      ],
                      "behavior": null,
                      "file_link": "C:\\dev\\agile_bots\\docs\\story\\map\\Invoke Bot\\Edit Story Map\\Edit Story Nodes\\ðŸ“„ Automatically Refresh Story Graph Changes  CLI.md"
                    }
                  ]
                }
              ]
            },
            {
              "name": "Edit Increments",
              "sequential_order": 2.0,
              "behavior": null,
              "domain_concepts": [],
              "test_file": "test/invoke_bot/edit_story_map/test_edit_increments.py",
              "sub_epics": [],
              "story_groups": [
                {
                  "name": "",
                  "sequential_order": 0.0,
                  "type": "and",
                  "connector": null,
                  "behavior": null,
                  "stories": [
                    {
                      "name": "Add Increment",
                      "sequential_order": 1.0,
                      "connector": null,
                      "story_type": "user",
                      "users": [],
                      "test_class": "TestAddIncrement",
                      "scenarios": [
                        {
                          "name": "Add increment after selected increment",
                          "sequential_order": 1.0,
                          "type": "happy_path",
                          "background": [
                            "Given Story Graph has increments MVP (priority 1) and Phase 2 (priority 2)"
                          ],
                          "test_method": "test_add_increment_after_selected",
                          "steps": "When User selects increment MVP AND adds increment with name Phase 1.5\nThen Story Graph inserts new increment between MVP and Phase 2\nAnd New increment has priority 2 (selected plus one)\nAnd Phase 2 and all later increments have priority increased by 1\nAnd Story Graph persists changes"
                        },
                        {
                          "name": "Add increment when nothing selected appends to back",
                          "sequential_order": 2.0,
                          "type": "happy_path",
                          "background": [
                            "Given Story Graph has increments MVP (priority 1) and Phase 2 (priority 2)"
                          ],
                          "test_method": "test_add_increment_when_nothing_selected_appends_to_back",
                          "steps": "When User adds increment with name Phase 3 (no increment selected)\nThen Story Graph appends increment to end of list\nAnd New increment has highest priority number (lowest delivery priority)\nAnd Story Graph persists changes"
                        },
                        {
                          "name": "Add increment with duplicate name returns error",
                          "sequential_order": 3.0,
                          "type": "edge_case",
                          "background": [],
                          "test_method": "test_add_increment_duplicate_name_returns_error",
                          "steps": "Given Story Graph has increment named MVP\nWhen User adds increment with same name MVP\nThen System identifies duplicate and returns error\nAnd Story Graph remains unchanged"
                        },
                        {
                          "name": "CLI adds increment after MVP with bumped priorities",
                          "sequential_order": 4.0,
                          "type": "happy_path",
                          "background": [
                            "Given Story Graph has increments MVP (priority 1) and Phase 2 (priority 2)"
                          ],
                          "test_method": "test_cli_add_increment_after_mvp",
                          "steps": "When User executes increments.add name:\"Phase 1.5\" after:\"MVP\"\nThen CLI inserts increment after MVP with bumped priorities\nAnd CLI displays confirmation"
                        },
                        {
                          "name": "CLI appends increment to end when no after specified",
                          "sequential_order": 5.0,
                          "type": "happy_path",
                          "background": [
                            "Given Story Graph has increments MVP (priority 1) and Phase 2 (priority 2)"
                          ],
                          "test_method": "test_cli_add_increment_append",
                          "steps": "When User executes increments.add name:\"Phase 3\"\nThen CLI appends increment to end with highest priority number\nAnd CLI displays confirmation"
                        },
                        {
                          "name": "Panel Add button with selection inserts after selected and refreshes",
                          "sequential_order": 6.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_panel_add_increment_after_selected",
                          "steps": "Given User has increment MVP selected in Panel increment view\nWhen User clicks Add button AND enters name Phase 1.5 AND submits\nThen Panel shows name input\nAnd Panel inserts new increment after MVP\nAnd Panel refreshes increment list"
                        }
                      ],
                      "acceptance_criteria": [
                        {
                          "name": "WHEN User selects existing increment AND adds increment with name\nTHEN Story Graph inserts new increment after selected AND assigns new increment priority equal to selected priority plus one AND increments priority of all increments with priority greater than or equal to selected plus one by one AND initializes empty stories array AND persists to story-graph.json",
                          "text": "WHEN User selects existing increment AND adds increment with name\nTHEN Story Graph inserts new increment after selected AND assigns new increment priority equal to selected priority plus one AND increments priority of all increments with priority greater than or equal to selected plus one by one AND initializes empty stories array AND persists to story-graph.json",
                          "sequential_order": 1.0
                        },
                        {
                          "name": "WHEN User adds increment with no increment selected\nTHEN Story Graph appends increment to end of list AND assigns highest priority number (lowest delivery priority) AND initializes empty stories array AND persists to story-graph.json",
                          "text": "WHEN User adds increment with no increment selected\nTHEN Story Graph appends increment to end of list AND assigns highest priority number (lowest delivery priority) AND initializes empty stories array AND persists to story-graph.json",
                          "sequential_order": 2.0
                        },
                        {
                          "name": "WHEN User adds increment with duplicate name\nTHEN System returns validation error AND does not add increment",
                          "text": "WHEN User adds increment with duplicate name\nTHEN System returns validation error AND does not add increment",
                          "sequential_order": 3.0
                        },
                        {
                          "name": "WHEN User adds increment via CLI increments.add name:\"Increment Name\" after:\"MVP\"\nTHEN CLI inserts increment after MVP with bumped priorities AND displays confirmation",
                          "text": "WHEN User adds increment via CLI increments.add name:\"Increment Name\" after:\"MVP\"\nTHEN CLI inserts increment after MVP with bumped priorities AND displays confirmation",
                          "sequential_order": 4.0
                        },
                        {
                          "name": "WHEN User adds increment via CLI increments.add name:\"Increment Name\"\nTHEN CLI appends increment to end with highest priority number AND displays confirmation",
                          "text": "WHEN User adds increment via CLI increments.add name:\"Increment Name\"\nTHEN CLI appends increment to end with highest priority number AND displays confirmation",
                          "sequential_order": 5.0
                        },
                        {
                          "name": "WHEN User selects increment AND adds via Panel increment Add button\nTHEN Panel shows name input AND User submits AND Panel inserts new increment after selected AND Panel refreshes increment list",
                          "text": "WHEN User selects increment AND adds via Panel increment Add button\nTHEN Panel shows name input AND User submits AND Panel inserts new increment after selected AND Panel refreshes increment list",
                          "sequential_order": 6.0
                        },
                        {
                          "name": "WHEN User adds via Panel increment Add button with no increment selected\nTHEN Panel shows name input AND User submits AND Panel appends increment to end of list AND Panel refreshes increment list",
                          "text": "WHEN User adds via Panel increment Add button with no increment selected\nTHEN Panel shows name input AND User submits AND Panel appends increment to end of list AND Panel refreshes increment list",
                          "sequential_order": 7.0
                        }
                      ],
                      "behavior": null
                    },
                    {
                      "name": "Remove Increment",
                      "sequential_order": 2.0,
                      "connector": null,
                      "story_type": "user",
                      "users": [],
                      "test_class": "TestRemoveIncrement",
                      "scenarios": [
                        {
                          "name": "Remove increment by name",
                          "sequential_order": 1.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_remove_increment_by_name",
                          "steps": "Given Story Graph has increment named MVP\nWhen User removes increment MVP\nThen Story Graph removes increment from list\nAnd Story Graph persists changes"
                        },
                        {
                          "name": "Remove non-existent increment returns error",
                          "sequential_order": 2.0,
                          "type": "edge_case",
                          "background": [],
                          "test_method": "test_remove_nonexistent_increment_returns_error",
                          "steps": "Given Story Graph has no increment named Missing\nWhen User removes increment Missing\nThen System returns error\nAnd Story Graph remains unchanged"
                        },
                        {
                          "name": "CLI removes increment and displays confirmation",
                          "sequential_order": 3.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_cli_remove_increment",
                          "steps": "Given Story Graph has increment named MVP\nWhen User executes increments.remove name:\"MVP\"\nThen CLI removes increment\nAnd CLI displays confirmation"
                        },
                        {
                          "name": "Panel Delete button prompts confirmation and refreshes list",
                          "sequential_order": 4.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_panel_remove_increment_delete_button",
                          "steps": "Given User has increment MVP selected in Panel increment view\nWhen User clicks Delete button AND confirms\nThen Panel prompts confirmation\nAnd Panel refreshes increment list"
                        },
                        {
                          "name": "Remove increment that contains stories leaves hierarchy unchanged",
                          "sequential_order": 5.0,
                          "type": "edge_case",
                          "background": [],
                          "test_method": "test_remove_increment_with_stories_leaves_hierarchy_unchanged",
                          "steps": "Given increment MVP contains story Validate Order\nWhen User removes increment MVP\nThen Story Graph removes increment from list\nAnd Story Validate Order remains in epics/sub-epics hierarchy\nAnd Story Graph persists changes"
                        }
                      ],
                      "acceptance_criteria": [
                        {
                          "name": "WHEN User removes increment by name\nTHEN Story Graph removes increment from increments list AND persists to story-graph.json",
                          "text": "WHEN User removes increment by name\nTHEN Story Graph removes increment from increments list AND persists to story-graph.json",
                          "sequential_order": 1.0
                        },
                        {
                          "name": "WHEN User removes increment that contains stories\nTHEN Story Graph removes increment from increments list AND stories within hierarchy are unaffected (only increment assignment list is removed)",
                          "text": "WHEN User removes increment that contains stories\nTHEN Story Graph removes increment from increments list AND stories within hierarchy are unaffected (only increment assignment list is removed)",
                          "sequential_order": 2.0
                        },
                        {
                          "name": "WHEN User removes non-existent increment\nTHEN System returns error AND does not modify story graph",
                          "text": "WHEN User removes non-existent increment\nTHEN System returns error AND does not modify story graph",
                          "sequential_order": 3.0
                        },
                        {
                          "name": "WHEN User removes increment via CLI increments.remove name:\"MVP\"\nTHEN CLI removes increment AND displays confirmation",
                          "text": "WHEN User removes increment via CLI increments.remove name:\"MVP\"\nTHEN CLI removes increment AND displays confirmation",
                          "sequential_order": 4.0
                        },
                        {
                          "name": "WHEN User selects increment in Panel AND clicks Delete button\nTHEN Panel prompts confirmation AND User confirms AND Panel refreshes increment list",
                          "text": "WHEN User selects increment in Panel AND clicks Delete button\nTHEN Panel prompts confirmation AND User confirms AND Panel refreshes increment list",
                          "sequential_order": 5.0
                        }
                      ],
                      "behavior": null
                    },
                    {
                      "name": "Rename Increment",
                      "sequential_order": 3.0,
                      "connector": null,
                      "story_type": "user",
                      "users": [],
                      "test_class": "TestRenameIncrement",
                      "scenarios": [
                        {
                          "name": "Rename increment to new name",
                          "sequential_order": 1.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_rename_increment_to_new_name",
                          "steps": "Given Story Graph has increment named MVP\nWhen User renames increment MVP to Phase 1\nThen Story Graph updates increment name\nAnd Story references in increment remain unchanged\nAnd Story Graph persists changes"
                        },
                        {
                          "name": "CLI renames increment and displays confirmation",
                          "sequential_order": 2.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_cli_rename_increment",
                          "steps": "Given Story Graph has increment named MVP\nWhen User executes increments.rename from:\"MVP\" to:\"Phase 1\"\nThen CLI updates increment\nAnd CLI displays confirmation"
                        },
                        {
                          "name": "Panel inline edit updates increment name on blur or Enter",
                          "sequential_order": 3.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_panel_rename_increment_inline_edit",
                          "steps": "Given User views increment MVP in Panel increment view\nWhen User edits increment name inline to Phase 1 AND blurs or presses Enter\nThen Panel updates name\nAnd Panel refreshes display"
                        },
                        {
                          "name": "Rename increment to duplicate existing name returns error",
                          "sequential_order": 4.0,
                          "type": "edge_case",
                          "background": [],
                          "test_method": "test_rename_increment_duplicate_name_returns_error",
                          "steps": "Given Story Graph has increments MVP and Phase 1\nWhen User renames increment MVP to Phase 1\nThen System returns validation error\nAnd Story Graph remains unchanged"
                        }
                      ],
                      "acceptance_criteria": [
                        {
                          "name": "WHEN User renames increment from old name to new name\nTHEN Story Graph updates increment name in increments list AND persists to story-graph.json",
                          "text": "WHEN User renames increment from old name to new name\nTHEN Story Graph updates increment name in increments list AND persists to story-graph.json",
                          "sequential_order": 1.0
                        },
                        {
                          "name": "WHEN User renames increment to duplicate existing name\nTHEN System returns validation error AND does not rename",
                          "text": "WHEN User renames increment to duplicate existing name\nTHEN System returns validation error AND does not rename",
                          "sequential_order": 2.0
                        },
                        {
                          "name": "WHEN User renames increment\nTHEN Story names in increment stories array remain unchanged (stories referenced by name)",
                          "text": "WHEN User renames increment\nTHEN Story names in increment stories array remain unchanged (stories referenced by name)",
                          "sequential_order": 3.0
                        },
                        {
                          "name": "WHEN User renames increment via CLI increments.rename from:\"MVP\" to:\"Phase 1\"\nTHEN CLI updates increment AND displays confirmation",
                          "text": "WHEN User renames increment via CLI increments.rename from:\"MVP\" to:\"Phase 1\"\nTHEN CLI updates increment AND displays confirmation",
                          "sequential_order": 4.0
                        },
                        {
                          "name": "WHEN User renames increment via Panel inline edit on increment name\nTHEN Panel updates name on blur or Enter AND refreshes display",
                          "text": "WHEN User renames increment via Panel inline edit on increment name\nTHEN Panel updates name on blur or Enter AND refreshes display",
                          "sequential_order": 5.0
                        }
                      ],
                      "behavior": null
                    },
                    {
                      "name": "Add Story to Increment",
                      "sequential_order": 4.0,
                      "connector": null,
                      "story_type": "user",
                      "users": [],
                      "test_class": "TestAddStoryToIncrement",
                      "scenarios": [
                        {
                          "name": "Add story to increment by story name",
                          "sequential_order": 1.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_add_story_to_increment_by_name",
                          "steps": "Given Story Graph has increment MVP and story Validate Order\nWhen User adds story Validate Order to increment MVP\nThen Story Graph appends story name to increment stories array\nAnd Story Graph persists changes"
                        },
                        {
                          "name": "Add non-existent story to increment returns error",
                          "sequential_order": 2.0,
                          "type": "edge_case",
                          "background": [],
                          "test_method": "test_add_nonexistent_story_returns_error",
                          "steps": "Given Story Graph has no story named Missing Story\nWhen User adds story Missing Story to increment MVP\nThen System returns error\nAnd Increment stories array remains unchanged"
                        },
                        {
                          "name": "CLI adds story to increment and displays confirmation",
                          "sequential_order": 3.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_cli_add_story_to_increment",
                          "steps": "Given Story Graph has increment MVP and story Validate Order\nWhen User executes increments.\"MVP\".add_story story:\"Validate Order\"\nThen CLI adds story to increment\nAnd CLI displays confirmation"
                        },
                        {
                          "name": "Panel drag from unallocated onto increment row adds story and refreshes",
                          "sequential_order": 4.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_panel_drag_story_to_increment",
                          "steps": "Given Panel shows unallocated area with story Validate Order AND increment row MVP\nWhen User drags story Validate Order from unallocated area onto increment MVP row\nThen Panel adds story to increment\nAnd Panel refreshes increment display"
                        },
                        {
                          "name": "Add story already in increment returns error",
                          "sequential_order": 5.0,
                          "type": "edge_case",
                          "background": [],
                          "test_method": "test_add_story_already_in_increment_returns_error",
                          "steps": "Given increment MVP contains story Validate Order\nWhen User adds story Validate Order to increment MVP\nThen System returns validation error\nAnd Increment stories array remains unchanged"
                        }
                      ],
                      "acceptance_criteria": [
                        {
                          "name": "WHEN User adds story to increment\nTHEN Story Graph appends story name to increment stories array AND persists to story-graph.json",
                          "text": "WHEN User adds story to increment\nTHEN Story Graph appends story name to increment stories array AND persists to story-graph.json",
                          "sequential_order": 1.0
                        },
                        {
                          "name": "WHEN User adds story that exists in graph\nTHEN Story Graph validates story name exists in epics/sub-epics/stories AND adds to increment",
                          "text": "WHEN User adds story that exists in graph\nTHEN Story Graph validates story name exists in epics/sub-epics/stories AND adds to increment",
                          "sequential_order": 2.0
                        },
                        {
                          "name": "WHEN User adds story already in increment\nTHEN System returns validation error AND does not add duplicate",
                          "text": "WHEN User adds story already in increment\nTHEN System returns validation error AND does not add duplicate",
                          "sequential_order": 3.0
                        },
                        {
                          "name": "WHEN User adds story to increment via CLI increments.\"MVP\".add_story story:\"Validate Order\"\nTHEN CLI adds story AND displays confirmation",
                          "text": "WHEN User adds story to increment via CLI increments.\"MVP\".add_story story:\"Validate Order\"\nTHEN CLI adds story AND displays confirmation",
                          "sequential_order": 4.0
                        },
                        {
                          "name": "WHEN User views increments in Panel\nTHEN Panel shows unallocated increment area to the very left AND displays all stories not in any increment in that area",
                          "text": "WHEN User views increments in Panel\nTHEN Panel shows unallocated increment area to the very left AND displays all stories not in any increment in that area",
                          "sequential_order": 5.0
                        },
                        {
                          "name": "WHEN User drags story from unallocated area onto increment row in Panel\nTHEN Panel adds story to increment AND refreshes increment display",
                          "text": "WHEN User drags story from unallocated area onto increment row in Panel\nTHEN Panel adds story to increment AND refreshes increment display",
                          "sequential_order": 6.0
                        },
                        {
                          "name": "WHEN User drags story from one increment row to another increment row in Panel\nTHEN Panel adds story to target increment AND removes story from source increment AND refreshes increment display",
                          "text": "WHEN User drags story from one increment row to another increment row in Panel\nTHEN Panel adds story to target increment AND removes story from source increment AND refreshes increment display",
                          "sequential_order": 7.0
                        }
                      ],
                      "behavior": null
                    },
                    {
                      "name": "Remove Story from Increment",
                      "sequential_order": 5.0,
                      "connector": null,
                      "story_type": "user",
                      "users": [],
                      "test_class": "TestRemoveStoryFromIncrement",
                      "scenarios": [
                        {
                          "name": "Remove story from increment",
                          "sequential_order": 1.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_remove_story_from_increment",
                          "steps": "Given increment MVP contains story Validate Order\nWhen User removes story Validate Order from increment MVP\nThen Story Graph removes story name from increment stories array\nAnd Story node remains in graph\nAnd Story Graph persists changes"
                        },
                        {
                          "name": "CLI removes story from increment and displays confirmation",
                          "sequential_order": 2.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_cli_remove_story_from_increment",
                          "steps": "Given increment MVP contains story Validate Order\nWhen User executes increments.\"MVP\".remove_story story:\"Validate Order\"\nThen CLI removes story from increment\nAnd CLI displays confirmation"
                        },
                        {
                          "name": "Panel Remove button moves story to unallocated area",
                          "sequential_order": 3.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_panel_remove_story_from_increment",
                          "steps": "Given User views story Validate Order in increment MVP row in Panel\nWhen User selects story AND clicks Remove in Panel increment view\nThen Panel removes story from increment\nAnd Story appears in unallocated area to the left\nAnd Panel refreshes display"
                        },
                        {
                          "name": "Remove story not in increment returns error",
                          "sequential_order": 4.0,
                          "type": "edge_case",
                          "background": [],
                          "test_method": "test_remove_story_not_in_increment_returns_error",
                          "steps": "Given increment MVP does not contain story Validate Order\nWhen User removes story Validate Order from increment MVP\nThen System returns error\nAnd Increment stories array remains unchanged"
                        }
                      ],
                      "acceptance_criteria": [
                        {
                          "name": "WHEN User removes story from increment\nTHEN Story Graph removes story name from increment stories array AND persists to story-graph.json",
                          "text": "WHEN User removes story from increment\nTHEN Story Graph removes story name from increment stories array AND persists to story-graph.json",
                          "sequential_order": 1.0
                        },
                        {
                          "name": "WHEN User removes story from increment\nTHEN Story node remains in epics/sub-epics hierarchy (only increment assignment changes)",
                          "text": "WHEN User removes story from increment\nTHEN Story node remains in epics/sub-epics hierarchy (only increment assignment changes)",
                          "sequential_order": 2.0
                        },
                        {
                          "name": "WHEN User removes story not in increment\nTHEN System returns error AND does not modify increment",
                          "text": "WHEN User removes story not in increment\nTHEN System returns error AND does not modify increment",
                          "sequential_order": 3.0
                        },
                        {
                          "name": "WHEN User removes story from increment via CLI increments.\"MVP\".remove_story story:\"Validate Order\"\nTHEN CLI removes story from increment AND displays confirmation",
                          "text": "WHEN User removes story from increment via CLI increments.\"MVP\".remove_story story:\"Validate Order\"\nTHEN CLI removes story from increment AND displays confirmation",
                          "sequential_order": 4.0
                        },
                        {
                          "name": "WHEN User selects story in increment row AND clicks Remove in Panel increment view\nTHEN Panel removes story from increment AND story appears in unallocated area to the left AND Panel refreshes display (no delete option in increment view)",
                          "text": "WHEN User selects story in increment row AND clicks Remove in Panel increment view\nTHEN Panel removes story from increment AND story appears in unallocated area to the left AND Panel refreshes display (no delete option in increment view)",
                          "sequential_order": 5.0
                        }
                      ],
                      "behavior": null
                    },
                    {
                      "name": "Rename Story in Increment",
                      "sequential_order": 6.0,
                      "connector": null,
                      "story_type": "user",
                      "users": [],
                      "test_class": "TestRenameStoryInIncrement",
                      "scenarios": [
                        {
                          "name": "Rename story node updates all increment references",
                          "sequential_order": 1.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_rename_story_updates_increment_references",
                          "steps": "Given story Validate Order exists in increment MVP\nWhen User renames story node Validate Order to Validate Order Items\nThen Story Graph updates story name in epics hierarchy\nAnd Story Graph updates story name in all increments that reference it\nAnd Story Graph persists changes"
                        },
                        {
                          "name": "CLI renames story and updates increment references",
                          "sequential_order": 2.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_cli_rename_story_updates_increments",
                          "steps": "Given story Validate Order exists in increment MVP\nWhen User executes story_map.\"Epic\".\"SubEpic\".\"Validate Order\".rename name:\"Validate Order Items\"\nThen CLI updates story in graph\nAnd CLI updates increment references\nAnd CLI displays confirmation"
                        },
                        {
                          "name": "Panel inline edit updates story name in hierarchy and increment view",
                          "sequential_order": 3.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_panel_rename_story_updates_both_views",
                          "steps": "Given story Validate Order is displayed in hierarchy and in increment MVP row\nWhen User edits story name inline to Validate Order Items AND blurs or presses Enter\nThen Panel updates story name in hierarchy\nAnd Panel updates increment view to show new name\nAnd Both views reflect change"
                        },
                        {
                          "name": "Rename story to duplicate name in same parent returns error",
                          "sequential_order": 4.0,
                          "type": "edge_case",
                          "background": [],
                          "test_method": "test_rename_story_duplicate_name_returns_error",
                          "steps": "Given Story Graph has stories Validate Order and Validate Order Items in same parent\nWhen User renames story Validate Order to Validate Order Items\nThen System returns validation error\nAnd Story Graph remains unchanged"
                        }
                      ],
                      "acceptance_criteria": [
                        {
                          "name": "WHEN User renames story node in graph\nTHEN Story Graph updates story name in epics/sub-epics hierarchy AND updates matching entries in all increment stories arrays",
                          "text": "WHEN User renames story node in graph\nTHEN Story Graph updates story name in epics/sub-epics hierarchy AND updates matching entries in all increment stories arrays",
                          "sequential_order": 1.0
                        },
                        {
                          "name": "WHEN Story is renamed\nTHEN All increments that contained old story name now contain new story name",
                          "text": "WHEN Story is renamed\nTHEN All increments that contained old story name now contain new story name",
                          "sequential_order": 2.0
                        },
                        {
                          "name": "WHEN User renames story to duplicate name in same parent\nTHEN System returns validation error AND does not rename",
                          "text": "WHEN User renames story to duplicate name in same parent\nTHEN System returns validation error AND does not rename",
                          "sequential_order": 3.0
                        },
                        {
                          "name": "WHEN User renames story via CLI story_map.\"Epic\".\"SubEpic\".\"Story\".rename name:\"New Name\"\nTHEN CLI updates story in graph AND updates increment references AND displays confirmation",
                          "text": "WHEN User renames story via CLI story_map.\"Epic\".\"SubEpic\".\"Story\".rename name:\"New Name\"\nTHEN CLI updates story in graph AND updates increment references AND displays confirmation",
                          "sequential_order": 4.0
                        },
                        {
                          "name": "WHEN User renames story via Panel inline edit on story name\nTHEN Panel updates story name in hierarchy AND updates increment view of story to show new name (both story node and increment display reflect change)",
                          "text": "WHEN User renames story via Panel inline edit on story name\nTHEN Panel updates story name in hierarchy AND updates increment view of story to show new name (both story node and increment display reflect change)",
                          "sequential_order": 5.0
                        }
                      ],
                      "behavior": null
                    },
                    {
                      "name": "Story Deleted in Hierarchy Cascades to Increment",
                      "sequential_order": 7.0,
                      "connector": null,
                      "story_type": "user",
                      "users": [],
                      "test_class": "TestStoryDeletedInHierarchyCascadesToIncrement",
                      "scenarios": [
                        {
                          "name": "Delete story in hierarchy removes from all increments",
                          "sequential_order": 1.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_delete_story_in_hierarchy_removes_from_all_increments",
                          "steps": "Given story Validate Order exists in increments MVP and Phase 2\nWhen User deletes story Validate Order from story hierarchy\nThen Story Graph removes story from epics/sub-epics hierarchy\nAnd Story Graph removes story name from all increment stories arrays\nAnd Story Graph persists changes"
                        }
                      ],
                      "acceptance_criteria": [
                        {
                          "name": "WHEN User deletes story in story hierarchy\nTHEN Story Graph removes story from hierarchy AND removes story name from all increment stories arrays that reference it",
                          "text": "WHEN User deletes story in story hierarchy\nTHEN Story Graph removes story from hierarchy AND removes story name from all increment stories arrays that reference it",
                          "sequential_order": 1.0
                        }
                      ],
                      "behavior": null
                    }
                  ]
                }
              ]
            },
            {
              "name": "Act With Selected Node",
              "sequential_order": 3.0,
              "behavior": null,
              "domain_concepts": [],
              "test_file": "invoke_bot/edit_story_map/test_submit_scoped_action.py",
              "sub_epics": [],
              "story_groups": [
                {
                  "name": "",
                  "sequential_order": 0.0,
                  "type": "and",
                  "connector": null,
                  "behavior": null,
                  "stories": [
                    {
                      "name": "Set scope to selected story node",
                      "sequential_order": 0.0,
                      "connector": null,
                      "story_type": "user",
                      "users": [],
                      "test_class": "TestSetScopeToSelectedStoryNode",
                      "scenarios": [
                        {
                          "name": "User sets scope to selected epic",
                          "sequential_order": 1.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_user_sets_scope_to_selected_epic",
                          "steps": "Given User has selected an epic named Invoke Bot in the panel\nWhen User clicks the Scope To button\nThen System sets scope filter to Invoke Bot\nAnd System refreshes the panel view\nAnd Panel displays only story nodes matching Invoke Bot"
                        },
                        {
                          "name": "User sets scope to selected sub-epic",
                          "sequential_order": 2.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_user_sets_scope_to_selected_sub_epic",
                          "steps": "Given User has selected a sub-epic named Edit Story Map in the panel\nWhen User clicks the Scope To button\nThen System sets scope filter to Edit Story Map\nAnd System refreshes the panel view\nAnd Panel displays only story nodes matching Edit Story Map"
                        },
                        {
                          "name": "User sets scope to selected story",
                          "sequential_order": 3.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_user_sets_scope_to_selected_story",
                          "steps": "Given User has selected a story named Display Story Hierarchy Panel in the panel\nWhen User clicks the Scope To button\nThen System sets scope filter to Display Story Hierarchy Panel\nAnd System refreshes the panel view\nAnd Panel displays only story nodes matching Display Story Hierarchy Panel"
                        },
                        {
                          "name": "User attempts to set scope without selecting a node",
                          "sequential_order": 4.0,
                          "type": "edge_case",
                          "background": [],
                          "test_method": "test_user_attempts_to_set_scope_without_selecting_node",
                          "steps": "Given User has not selected any story node in the panel\nWhen User views the toolbar\nThen Scope To button is hidden"
                        }
                      ],
                      "acceptance_criteria": [],
                      "behavior": null,
                      "file_link": "C:\\dev\\agile_bots\\docs\\story\\map\\Invoke Bot\\Edit Story Map\\Act With Selected Node\\ðŸ“„ Set scope to selected story node.md"
                    },
                    {
                      "name": "Submit action for selected story node",
                      "sequential_order": 1.0,
                      "connector": null,
                      "story_type": "user",
                      "users": [],
                      "test_class": "TestSetScopeToSelectedStoryNodeAndSubmit",
                      "scenarios": [
                        {
                          "name": "Determine Behavior For Story And Get Instructions",
                          "sequential_order": 1.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_determine_behavior_for_story_and_get_instructions",
                          "steps": "Given Bot has story map loaded with epic <epic_name>\nAnd Epic contains story <story_name>\nAnd Story has acceptance criteria <acceptance_criteria>\nAnd Story has scenarios <scenarios>\nAnd Story has test class <test_class>\nAnd Story has test methods <test_methods>\nWhen Bot determines behavior for the story\nThen Bot returns behavior <expected_behavior>\nWhen User calls story.get_required_behavior_instructions with action <action>\nThen Bot is set to behavior <expected_behavior>\nAnd Bot is set to action <action>\nAnd Instructions for <expected_behavior> behavior and <action> action are returned\nAnd Instructions contain required sections for <expected_behavior> behavior",
                          "examples": [
                            {
                              "columns": [
                                "epic_name",
                                "story_name",
                                "test_class",
                                "acceptance_criteria",
                                "expected_behavior",
                                "action",
                                "expected_instructions_contain",
                                "scenario",
                                "test_method"
                              ],
                              "rows": [
                                [
                                  "File Management",
                                  "Upload File",
                                  "test_file_upload.py",
                                  "File size validated; File type checked; Upload progress tracked",
                                  "code",
                                  "build",
                                  "code behavior; build action; file upload functionality; implement production code",
                                  "User uploads valid file and sees success confirmation",
                                  "test_user_uploads_valid_file_and_sees_success_confirmation"
                                ],
                                [
                                  "File Management",
                                  "Upload File",
                                  "test_file_upload.py",
                                  "File size validated; File type checked; Upload progress tracked",
                                  "code",
                                  "build",
                                  "code behavior; build action; file upload functionality; implement production code",
                                  "User uploads oversized file and sees size limit error",
                                  "test_user_uploads_oversized_file_and_sees_size_limit_error"
                                ],
                                [
                                  "File Management",
                                  "Upload File",
                                  "test_file_upload.py",
                                  "File size validated; File type checked; Upload progress tracked",
                                  "code",
                                  "build",
                                  "code behavior; build action; file upload functionality; implement production code",
                                  "User uploads invalid file type and sees type error",
                                  "test_user_uploads_invalid_file_type_and_sees_type_error"
                                ],
                                [
                                  "File Management",
                                  "Upload File",
                                  "test_file_upload.py",
                                  "File size validated; File type checked; Upload progress tracked",
                                  "code",
                                  "build",
                                  "code behavior; build action; file upload functionality; implement production code",
                                  "User cancels upload mid-transfer and sees cancellation confirmation",
                                  "test_user_cancels_upload_mid_transfer_and_sees_cancellation_confirmation"
                                ],
                                [
                                  "File Management",
                                  "Upload File",
                                  "test_file_upload.py",
                                  "File size validated; File type checked; Upload progress tracked",
                                  "code",
                                  "build",
                                  "code behavior; build action; file upload functionality; implement production code",
                                  "Upload fails with network error and user sees retry option",
                                  "test_upload_fails_with_network_error_and_user_sees_retry_option"
                                ],
                                [
                                  "File Management",
                                  "Download File",
                                  "test_file_download.py",
                                  "Download initiated; Progress displayed",
                                  "test",
                                  "build",
                                  "test behavior; build action; file download test coverage; implement test methods for scenarios",
                                  "User downloads file successfully and sees progress",
                                  "test_user_downloads_file_successfully_and_sees_progress"
                                ],
                                [
                                  "File Management",
                                  "Download File",
                                  "test_file_download.py",
                                  "Download initiated; Progress displayed",
                                  "test",
                                  "build",
                                  "test behavior; build action; file download test coverage; implement test methods for scenarios",
                                  "User cancels download mid-transfer",
                                  "test_user_cancels_download_mid_transfer"
                                ],
                                [
                                  "File Management",
                                  "Download File",
                                  "test_file_download.py",
                                  "Download initiated; Progress displayed",
                                  "test",
                                  "build",
                                  "test behavior; build action; file download test coverage; implement test methods for scenarios",
                                  "Download fails due to network error and user sees error message",
                                  ""
                                ],
                                [
                                  "File Management",
                                  "Delete File",
                                  "test_file_delete.py",
                                  "Confirmation required; File removed from storage",
                                  "test",
                                  "validate",
                                  "test behavior; validate action; file deletion test coverage; verify test implementation",
                                  "User confirms delete and file is removed from system",
                                  ""
                                ],
                                [
                                  "File Management",
                                  "Delete File",
                                  "test_file_delete.py",
                                  "Confirmation required; File removed from storage",
                                  "test",
                                  "validate",
                                  "test behavior; validate action; file deletion test coverage; verify test implementation",
                                  "User cancels delete and file remains",
                                  ""
                                ],
                                [
                                  "File Management",
                                  "Delete File",
                                  "test_file_delete.py",
                                  "Confirmation required; File removed from storage",
                                  "test",
                                  "validate",
                                  "test behavior; validate action; file deletion test coverage; verify test implementation",
                                  "Delete operation fails due to permissions and user sees error",
                                  ""
                                ],
                                [
                                  "User Management",
                                  "Create User",
                                  "",
                                  "Email validated; Password meets requirements",
                                  "scenario",
                                  "build",
                                  "scenario behavior; build action; user creation domain language; write detailed Given/When/Then scenarios",
                                  "",
                                  ""
                                ],
                                [
                                  "Reporting",
                                  "View Report",
                                  "",
                                  "",
                                  "explore",
                                  "clarify",
                                  "explore behavior; clarify action; report viewing concepts; add acceptance criteria and domain understanding",
                                  "",
                                  ""
                                ],
                                [
                                  "Authentication",
                                  "Reset Password",
                                  "test_reset_password.py",
                                  "",
                                  "code",
                                  "validate",
                                  "code behavior; validate action; password reset functionality; verify implementation meets requirements",
                                  "User requests password reset and receives reset email",
                                  "test_user_requests_password_reset_and_receives_reset_email"
                                ],
                                [
                                  "Authentication",
                                  "Reset Password",
                                  "test_reset_password.py",
                                  "",
                                  "code",
                                  "validate",
                                  "code behavior; validate action; password reset functionality; verify implementation meets requirements",
                                  "User submits new password meeting requirements and password is updated",
                                  "test_user_submits_new_password_meeting_requirements_and_password_is_updated"
                                ],
                                [
                                  "Authentication",
                                  "Reset Password",
                                  "test_reset_password.py",
                                  "",
                                  "code",
                                  "validate",
                                  "code behavior; validate action; password reset functionality; verify implementation meets requirements",
                                  "User submits invalid password not meeting requirements and sees validation error",
                                  "test_user_submits_invalid_password_not_meeting_requirements_and_sees_validation_error"
                                ],
                                [
                                  "Data Export",
                                  "Export CSV",
                                  "test_export_csv.py",
                                  "",
                                  "test",
                                  "clarify",
                                  "test behavior; clarify action; CSV export test requirements; clarify test expectations",
                                  "User exports data to CSV and file downloads successfully",
                                  "test_user_exports_data_to_csv_and_file_downloads_successfully"
                                ],
                                [
                                  "Data Export",
                                  "Export CSV",
                                  "test_export_csv.py",
                                  "",
                                  "test",
                                  "clarify",
                                  "test behavior; clarify action; CSV export test requirements; clarify test expectations",
                                  "Export handles empty data set and generates valid empty CSV",
                                  "test_export_handles_empty_data_set_and_generates_valid_empty_csv"
                                ],
                                [
                                  "Data Export",
                                  "Export CSV",
                                  "test_export_csv.py",
                                  "",
                                  "test",
                                  "clarify",
                                  "test behavior; clarify action; CSV export test requirements; clarify test expectations",
                                  "Export handles large dataset and shows progress indicator",
                                  ""
                                ],
                                [
                                  "Data Export",
                                  "Export CSV",
                                  "test_export_csv.py",
                                  "",
                                  "test",
                                  "clarify",
                                  "test behavior; clarify action; CSV export test requirements; clarify test expectations",
                                  "Export with special characters in data and properly escapes them in CSV",
                                  ""
                                ],
                                [
                                  "Payment",
                                  "Process Payment",
                                  "test_process_payment.py",
                                  "",
                                  "test",
                                  "build",
                                  "test behavior; build action; payment processing test coverage; implement test methods",
                                  "Payment processed with valid card and transaction completes successfully",
                                  ""
                                ],
                                [
                                  "Payment",
                                  "Process Payment",
                                  "test_process_payment.py",
                                  "",
                                  "test",
                                  "build",
                                  "test behavior; build action; payment processing test coverage; implement test methods",
                                  "Payment attempted with expired card and user sees card expired error",
                                  ""
                                ]
                              ]
                            }
                          ],
                          "test": {
                            "method": "test_determine_behavior_for_story_and_get_instructions",
                            "file": "invoke_bot/edit_story_map/test_submit_scoped_action.py",
                            "line": 173
                          }
                        },
                        {
                          "name": "Determine Behavior For Sub Epic",
                          "sequential_order": 2.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_determine_behavior_for_sub_epic_and_get_instructions",
                          "steps": "Given Bot has story map loaded with sub-epic <sub_epic_name>\nAnd Sub-epic contains stories shown in table\nWhen Bot determines behavior for the sub-epic\nThen Bot returns behavior <expected_behavior>",
                          "examples": [
                            {
                              "example_name": "Example 1: All stories have tests - code behavior",
                              "sub_epic": {
                                "columns": [
                                  "sub_epic_name",
                                  "expected_behavior",
                                  "action",
                                  "expected_instructions_contain"
                                ],
                                "row": [
                                  "User Authentication",
                                  "code",
                                  "build",
                                  "code behavior; build action; authentication functionality; implement production code for feature"
                                ]
                              },
                              "stories": [
                                {
                                  "story": {
                                    "columns": [
                                      "story_name",
                                      "test_class",
                                      "acceptance_criteria",
                                      "expected_behavior"
                                    ],
                                    "row": [
                                      "Login User",
                                      "test_login_user.py",
                                      "Valid credentials accepted; Invalid credentials rejected; Account locked after 3 failures",
                                      "code"
                                    ]
                                  },
                                  "scenarios": {
                                    "columns": [
                                      "scenario",
                                      "test_method"
                                    ],
                                    "rows": [
                                      [
                                        "User enters valid username and password and sees dashboard",
                                        "test_user_enters_valid_username_and_password_and_sees_dashboard"
                                      ],
                                      [
                                        "User enters invalid password and sees error message",
                                        "test_user_enters_invalid_password_and_sees_error_message"
                                      ],
                                      [
                                        "User fails login 3 times and account is locked",
                                        "test_user_fails_login_3_times_and_account_is_locked"
                                      ]
                                    ]
                                  }
                                },
                                {
                                  "story": {
                                    "columns": [
                                      "story_name",
                                      "test_class",
                                      "acceptance_criteria",
                                      "expected_behavior"
                                    ],
                                    "row": [
                                      "Logout User",
                                      "test_logout_user.py",
                                      "Session terminated on logout; User redirected to login page; Auth token invalidated",
                                      "code"
                                    ]
                                  },
                                  "scenarios": {
                                    "columns": [
                                      "scenario",
                                      "test_method"
                                    ],
                                    "rows": [
                                      [
                                        "User clicks logout button and session ends",
                                        "test_user_clicks_logout_button_and_session_ends"
                                      ],
                                      [
                                        "User clicks logout and is redirected to login",
                                        "test_user_clicks_logout_and_is_redirected_to_login"
                                      ],
                                      [
                                        "Logged out user cannot access protected pages",
                                        "test_logged_out_user_cannot_access_protected_pages"
                                      ]
                                    ]
                                  }
                                },
                                {
                                  "story": {
                                    "columns": [
                                      "story_name",
                                      "test_class",
                                      "acceptance_criteria",
                                      "expected_behavior"
                                    ],
                                    "row": [
                                      "Refresh Token",
                                      "test_refresh_token.py",
                                      "Token refreshed before expiry; Expired token triggers re-login; Refresh token rotated after use",
                                      "code"
                                    ]
                                  },
                                  "scenarios": {
                                    "columns": [
                                      "scenario",
                                      "test_method"
                                    ],
                                    "rows": [
                                      [
                                        "User with expiring token gets new token automatically",
                                        "test_user_with_expiring_token_gets_new_token_automatically"
                                      ],
                                      [
                                        "User with expired token is prompted to login",
                                        "test_user_with_expired_token_is_prompted_to_login"
                                      ],
                                      [
                                        "Used refresh token becomes invalid",
                                        "test_used_refresh_token_becomes_invalid"
                                      ]
                                    ]
                                  }
                                }
                              ]
                            },
                            {
                              "example_name": "Example 2: One story needs scenario, sub-epic follows lowest - scenario behavior",
                              "sub_epic": {
                                "columns": [
                                  "sub_epic_name",
                                  "expected_behavior",
                                  "action",
                                  "expected_instructions_contain"
                                ],
                                "row": [
                                  "Payment Processing",
                                  "scenario",
                                  "validate",
                                  "scenario behavior; validate action; payment processing domain language; verify scenarios are complete"
                                ]
                              },
                              "stories": [
                                {
                                  "story": {
                                    "columns": [
                                      "story_name",
                                      "test_class",
                                      "acceptance_criteria",
                                      "expected_behavior"
                                    ],
                                    "row": [
                                      "Process Payment",
                                      "test_process_payment.py",
                                      "Card details validated; Payment amount verified; Transaction receipt generated",
                                      "test"
                                    ]
                                  },
                                  "scenarios": {
                                    "columns": [
                                      "scenario",
                                      "test_method"
                                    ],
                                    "rows": [
                                      [
                                        "User enters valid card and payment succeeds",
                                        ""
                                      ],
                                      [
                                        "User enters invalid card number and sees validation error",
                                        ""
                                      ],
                                      [
                                        "Payment succeeds and receipt is emailed to user",
                                        ""
                                      ]
                                    ]
                                  }
                                },
                                {
                                  "story": {
                                    "columns": [
                                      "story_name",
                                      "test_class",
                                      "acceptance_criteria",
                                      "expected_behavior"
                                    ],
                                    "row": [
                                      "Refund Payment",
                                      "",
                                      "Original payment verified; Refund amount calculated; Customer notified of refund",
                                      "scenario"
                                    ]
                                  },
                                  "scenarios": {
                                    "columns": [
                                      "scenario",
                                      "test_method"
                                    ],
                                    "rows": []
                                  }
                                }
                              ]
                            },
                            {
                              "example_name": "Example 3: One story at explore level makes entire sub-epic explore - explore behavior",
                              "sub_epic": {
                                "columns": [
                                  "sub_epic_name",
                                  "expected_behavior",
                                  "action",
                                  "expected_instructions_contain"
                                ],
                                "row": [
                                  "Data Management",
                                  "explore",
                                  "build",
                                  "explore behavior; build action; data management domain concepts; add stories with acceptance criteria"
                                ]
                              },
                              "stories": [
                                {
                                  "story": {
                                    "columns": [
                                      "story_name",
                                      "test_class",
                                      "acceptance_criteria",
                                      "expected_behavior"
                                    ],
                                    "row": [
                                      "Import Data",
                                      "test_import_data.py",
                                      "CSV file format validated; Data schema verified; Import progress tracked",
                                      "test"
                                    ]
                                  },
                                  "scenarios": {
                                    "columns": [
                                      "scenario",
                                      "test_method"
                                    ],
                                    "rows": [
                                      [
                                        "User uploads valid CSV and data is imported",
                                        ""
                                      ],
                                      [
                                        "User uploads invalid CSV and sees format error",
                                        ""
                                      ],
                                      [
                                        "User sees progress bar during import",
                                        ""
                                      ]
                                    ]
                                  }
                                },
                                {
                                  "story": {
                                    "columns": [
                                      "story_name",
                                      "test_class",
                                      "acceptance_criteria",
                                      "expected_behavior"
                                    ],
                                    "row": [
                                      "Export Data",
                                      "",
                                      "Export format selected; Data filtered before export; Download link generated",
                                      "scenario"
                                    ]
                                  },
                                  "scenarios": {
                                    "columns": [
                                      "scenario",
                                      "test_method"
                                    ],
                                    "rows": []
                                  }
                                },
                                {
                                  "story": {
                                    "columns": [
                                      "story_name",
                                      "test_class",
                                      "acceptance_criteria",
                                      "expected_behavior"
                                    ],
                                    "row": [
                                      "Validate Data",
                                      "",
                                      "Data types checked; Required fields verified; Business rules applied",
                                      "scenario"
                                    ]
                                  },
                                  "scenarios": {
                                    "columns": [
                                      "scenario",
                                      "test_method"
                                    ],
                                    "rows": []
                                  }
                                },
                                {
                                  "story": {
                                    "columns": [
                                      "story_name",
                                      "test_class",
                                      "acceptance_criteria",
                                      "expected_behavior"
                                    ],
                                    "row": [
                                      "Archive Data",
                                      "",
                                      "",
                                      "explore"
                                    ]
                                  },
                                  "scenarios": {
                                    "columns": [
                                      "scenario",
                                      "test_method"
                                    ],
                                    "rows": []
                                  }
                                }
                              ]
                            },
                            {
                              "example_name": "Example 4: Two stories need tests, sub-epic follows lowest - test behavior",
                              "sub_epic": {
                                "columns": [
                                  "sub_epic_name",
                                  "expected_behavior",
                                  "action",
                                  "expected_instructions_contain"
                                ],
                                "row": [
                                  "File Operations",
                                  "test",
                                  "clarify",
                                  "test behavior; clarify action; file operations test requirements; clarify test coverage expectations"
                                ]
                              },
                              "stories": [
                                {
                                  "story": {
                                    "columns": [
                                      "story_name",
                                      "test_class",
                                      "acceptance_criteria",
                                      "expected_behavior"
                                    ],
                                    "row": [
                                      "Upload File",
                                      "test_file_upload.py",
                                      "File size validated; File type checked; Upload progress tracked",
                                      "code"
                                    ]
                                  },
                                  "scenarios": {
                                    "columns": [
                                      "scenario",
                                      "test_method"
                                    ],
                                    "rows": [
                                      [
                                        "User uploads valid file and sees success confirmation",
                                        "test_user_uploads_valid_file_and_sees_success_confirmation"
                                      ],
                                      [
                                        "User uploads oversized file and sees size limit error",
                                        "test_user_uploads_oversized_file_and_sees_size_limit_error"
                                      ],
                                      [
                                        "User uploads invalid file type and sees type error",
                                        "test_user_uploads_invalid_file_type_and_sees_type_error"
                                      ],
                                      [
                                        "User cancels upload mid-transfer and sees cancellation confirmation",
                                        "test_user_cancels_upload_mid_transfer_and_sees_cancellation_confirmation"
                                      ],
                                      [
                                        "Upload fails with network error and user sees retry option",
                                        "test_upload_fails_with_network_error_and_user_sees_retry_option"
                                      ]
                                    ]
                                  }
                                },
                                {
                                  "story": {
                                    "columns": [
                                      "story_name",
                                      "test_class",
                                      "acceptance_criteria",
                                      "expected_behavior"
                                    ],
                                    "row": [
                                      "Download File",
                                      "test_file_download.py",
                                      "Download initiated; Progress displayed",
                                      "test"
                                    ]
                                  },
                                  "scenarios": {
                                    "columns": [
                                      "scenario",
                                      "test_method"
                                    ],
                                    "rows": [
                                      [
                                        "User clicks download and file transfer starts",
                                        ""
                                      ],
                                      [
                                        "User sees download progress bar",
                                        ""
                                      ],
                                      [
                                        "Download completes and file appears in downloads folder",
                                        ""
                                      ]
                                    ]
                                  }
                                },
                                {
                                  "story": {
                                    "columns": [
                                      "story_name",
                                      "test_class",
                                      "acceptance_criteria",
                                      "expected_behavior"
                                    ],
                                    "row": [
                                      "Delete File",
                                      "test_file_delete.py",
                                      "Confirmation required; File removed from storage",
                                      "test"
                                    ]
                                  },
                                  "scenarios": {
                                    "columns": [
                                      "scenario",
                                      "test_method"
                                    ],
                                    "rows": [
                                      [
                                        "User clicks delete and sees confirmation dialog",
                                        ""
                                      ],
                                      [
                                        "User confirms deletion and file is removed",
                                        ""
                                      ],
                                      [
                                        "User sees success message after deletion",
                                        ""
                                      ]
                                    ]
                                  }
                                }
                              ]
                            },
                            {
                              "example_name": "Example 5: Single story at scenario level - scenario behavior",
                              "sub_epic": {
                                "columns": [
                                  "sub_epic_name",
                                  "expected_behavior",
                                  "action",
                                  "expected_instructions_contain"
                                ],
                                "row": [
                                  "Search",
                                  "scenario",
                                  "build",
                                  "scenario behavior; build action; search domain language; write detailed scenarios"
                                ]
                              },
                              "stories": [
                                {
                                  "story": {
                                    "columns": [
                                      "story_name",
                                      "test_class",
                                      "acceptance_criteria",
                                      "expected_behavior"
                                    ],
                                    "row": [
                                      "Basic Search",
                                      "",
                                      "Search term entered; Results displayed; No results message shown when empty",
                                      "scenario"
                                    ]
                                  },
                                  "scenarios": {
                                    "columns": [
                                      "scenario",
                                      "test_method"
                                    ],
                                    "rows": []
                                  }
                                }
                              ]
                            }
                          ],
                          "test": {
                            "method": "test_determine_behavior_for_sub_epic_and_get_instructions",
                            "file": "invoke_bot/edit_story_map/test_submit_scoped_action.py",
                            "line": 448
                          }
                        },
                        {
                          "name": "Determine Behavior For Epic And Get Instructions",
                          "sequential_order": 3.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_determine_behavior_for_epic_and_get_instructions",
                          "steps": "Given Bot has story map loaded with epic <epic_name>\nAnd Epic contains sub-epics shown in table\nWhen Bot determines behavior for the epic\nThen Bot returns behavior <expected_behavior>\nWhen User calls epic.get_required_behavior_instructions with action <action>\nThen Bot is set to behavior <expected_behavior>\nAnd Bot is set to action <action>\nAnd Instructions for <expected_behavior> behavior and <action> action are returned\nAnd Instructions contain required sections for <expected_behavior> behavior",
                          "examples": [
                            {
                              "example_name": "Example 1: All sub-epics at code level - code behavior",
                              "parent": {
                                "columns": [
                                  "epic_name",
                                  "expected_behavior",
                                  "action",
                                  "expected_instructions_contain"
                                ],
                                "row": [
                                  "File Management",
                                  "code",
                                  "validate",
                                  "code behavior; validate action; file management functionality; verify implementation is complete"
                                ]
                              },
                              "children": {
                                "columns": [
                                  "sub_epic_name",
                                  "sub_epic_expected_behavior"
                                ],
                                "rows": [
                                  [
                                    "File Operations",
                                    "code"
                                  ],
                                  [
                                    "File Search",
                                    "code"
                                  ]
                                ]
                              }
                            },
                            {
                              "example_name": "Example 2: One sub-epic at explore level makes entire epic explore - explore behavior",
                              "parent": {
                                "columns": [
                                  "epic_name",
                                  "expected_behavior",
                                  "action",
                                  "expected_instructions_contain"
                                ],
                                "row": [
                                  "Reporting",
                                  "explore",
                                  "clarify",
                                  "explore behavior; clarify action; reporting domain concepts; clarify feature requirements"
                                ]
                              },
                              "children": {
                                "columns": [
                                  "sub_epic_name",
                                  "sub_epic_expected_behavior"
                                ],
                                "rows": [
                                  [
                                    "Report Generation",
                                    "test"
                                  ],
                                  [
                                    "Report Scheduling",
                                    "scenario"
                                  ],
                                  [
                                    "Report Export",
                                    "explore"
                                  ]
                                ]
                              }
                            },
                            {
                              "example_name": "Example 3: One sub-epic at scenario level with others at code - scenario behavior",
                              "parent": {
                                "columns": [
                                  "epic_name",
                                  "expected_behavior",
                                  "action",
                                  "expected_instructions_contain"
                                ],
                                "row": [
                                  "User Management",
                                  "scenario",
                                  "build",
                                  "scenario behavior; build action; user management domain language; write detailed scenarios"
                                ]
                              },
                              "children": {
                                "columns": [
                                  "sub_epic_name",
                                  "sub_epic_expected_behavior"
                                ],
                                "rows": [
                                  [
                                    "Authentication",
                                    "code"
                                  ],
                                  [
                                    "User Profile",
                                    "scenario"
                                  ]
                                ]
                              }
                            },
                            {
                              "example_name": "Example 4: Multiple sub-epics at test level - test behavior",
                              "parent": {
                                "columns": [
                                  "epic_name",
                                  "expected_behavior",
                                  "action",
                                  "expected_instructions_contain"
                                ],
                                "row": [
                                  "Payment Processing",
                                  "test",
                                  "build",
                                  "test behavior; build action; payment processing test coverage; implement test methods"
                                ]
                              },
                              "children": {
                                "columns": [
                                  "sub_epic_name",
                                  "sub_epic_expected_behavior"
                                ],
                                "rows": [
                                  [
                                    "Process Payment",
                                    "test"
                                  ],
                                  [
                                    "Refund Payment",
                                    "test"
                                  ]
                                ]
                              }
                            },
                            {
                              "example_name": "Example 5: Empty epic with no sub-epics - shape behavior",
                              "parent": {
                                "columns": [
                                  "epic_name",
                                  "expected_behavior",
                                  "action",
                                  "expected_instructions_contain"
                                ],
                                "row": [
                                  "Product Catalog",
                                  "shape",
                                  "build",
                                  "shape behavior; build action; product catalog domain concepts; add sub-epics and stories"
                                ]
                              },
                              "children": {
                                "columns": [
                                  "sub_epic_name",
                                  "sub_epic_expected_behavior"
                                ],
                                "rows": []
                              }
                            },
                            {
                              "example_name": "Example 6: Epic with nested sub-epics - scenario behavior",
                              "parent": {
                                "columns": [
                                  "epic_name",
                                  "expected_behavior",
                                  "action",
                                  "expected_instructions_contain"
                                ],
                                "row": [
                                  "Product Management",
                                  "scenario",
                                  "validate",
                                  "scenario behavior; validate action; product management domain language; verify scenarios are complete"
                                ]
                              },
                              "children": {
                                "columns": [
                                  "sub_epic_name",
                                  "sub_epic_expected_behavior"
                                ],
                                "rows": [
                                  [
                                    "Product Catalog (nested)",
                                    "scenario"
                                  ],
                                  [
                                    "Inventory Management",
                                    "code"
                                  ]
                                ]
                              }
                            },
                            {
                              "example_name": "Example 7: Parent sub-epic with nested sub-epics at explore - explore behavior",
                              "parent": {
                                "columns": [
                                  "epic_name",
                                  "expected_behavior",
                                  "action",
                                  "expected_instructions_contain"
                                ],
                                "row": [
                                  "Data Management Epic",
                                  "explore",
                                  "clarify",
                                  "explore behavior; clarify action; data management domain concepts; clarify feature requirements"
                                ]
                              },
                              "children": {
                                "columns": [
                                  "sub_epic_name",
                                  "sub_epic_expected_behavior"
                                ],
                                "rows": [
                                  [
                                    "Data Management (nested)",
                                    "explore"
                                  ]
                                ]
                              }
                            }
                          ],
                          "test": {
                            "method": "test_determine_behavior_for_epic_and_get_instructions",
                            "file": "invoke_bot/edit_story_map/test_submit_scoped_action.py",
                            "line": 891
                          }
                        },
                        {
                          "name": "Display behavior needed via CLI with JSON format",
                          "sequential_order": 4.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_display_behavior_needed_via_cli_and_get_instructions",
                          "steps": "Given CLI has story map loaded with <node_type> <epic_name>\nWhen User requests behavior for <epic_name> using JSON format\nThen CLI returns JSON with behavior <expected_behavior>",
                          "examples": [
                            {
                              "columns": [
                                "node_type",
                                "epic_name",
                                "expected_behavior",
                                "action",
                                "expected_instructions_contain"
                              ],
                              "rows": [
                                [
                                  "epic",
                                  "Product Catalog",
                                  "shape",
                                  "build",
                                  "shape behavior; build action; product catalog domain concepts; add sub-epics and stories"
                                ]
                              ]
                            }
                          ],
                          "test": {
                            "method": "test_display_behavior_needed_via_cli_and_get_instructions",
                            "file": "invoke_bot/edit_story_map/test_submit_scoped_action.py",
                            "line": 947
                          }
                        },
                        {
                          "name": "Panel submit button displays behavior-specific icon and submits instructions",
                          "sequential_order": 4.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_submit_button_icon_changes_based_on_behavior_needed",
                          "steps": "Given User has selected a <node_type> <node_name> in the panel\nAnd Node has behavior <behavior> needed\nWhen Panel renders the submit button\nThen Submit button displays <icon_file> icon indicating <behavior> behavior\nWhen User hovers over the submit button\nThen Submit button shows tooltip <tooltip_text>\nWhen User clicks the submit button\nThen Panel submits node with action \"build\"\nAnd Node calls get_required_behavior_instructions with action \"build\"\nAnd Bot is set to behavior <behavior>\nAnd Bot is set to action \"build\"\nAnd Instructions for <behavior> behavior and \"build\" action are returned",
                          "examples": [
                            {
                              "columns": [
                                "node_type",
                                "node_name",
                                "behavior",
                                "icon_file",
                                "tooltip_text"
                              ],
                              "rows": [
                                [
                                  "epic",
                                  "Product Catalog",
                                  "shape",
                                  "submit_subepic.png",
                                  "Submit shape instructions for epic"
                                ],
                                [
                                  "sub-epic",
                                  "Report Export",
                                  "exploration",
                                  "submit_story.png",
                                  "Submit exploration instructions for sub-epic"
                                ],
                                [
                                  "story",
                                  "Create User",
                                  "scenario",
                                  "submit_ac.png",
                                  "Submit scenario instructions for story"
                                ],
                                [
                                  "story",
                                  "Delete File",
                                  "test",
                                  "submit_tests.png",
                                  "Submit test instructions for story"
                                ],
                                [
                                  "story",
                                  "Upload File",
                                  "code",
                                  "submit_code.png",
                                  "Submit code instructions for story"
                                ]
                              ]
                            }
                          ]
                        }
                      ],
                      "acceptance_criteria": [
                        {
                          "name": "Child1",
                          "text": "Child1",
                          "sequential_order": 1.0
                        }
                      ],
                      "behavior": null,
                      "file_link": "C:\\dev\\agile_bots\\docs\\story\\map\\Invoke Bot\\Work With Story Map\\Act With Selected Node\\ðŸ“„ Submit action for selected story node.md"
                    },
                    {
                      "name": "Submit Current Behavior Action For Selected Node",
                      "sequential_order": 2.0,
                      "connector": null,
                      "story_type": "user",
                      "users": [],
                      "test_class": "TestSubmitCurrentBehaviorActionForSelectedNode",
                      "scenarios": [
                        {
                          "name": "Submit Current Behavior Action For Selected Node",
                          "sequential_order": 1.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_submit_current_behavior_action_for_selected_node",
                          "steps": "Given Bot has story map loaded with node <node_name>\nAnd Bot has current behavior <behavior>\nAnd Bot has current action <action>\nWhen User calls bot.story_graph.\"<node_path>\".submit_current_instructions\nThen Bot submits instructions using current behavior <behavior> and action <action>\nAnd Scope is set to node <node_name>",
                          "examples": [
                            {
                              "columns": [
                                "node_name",
                                "node_path",
                                "behavior",
                                "action"
                              ],
                              "rows": [
                                [
                                  "Upload File",
                                  "File Management.Upload File",
                                  "code",
                                  "build"
                                ]
                              ]
                            }
                          ],
                          "test": {
                            "method": "test_submit_current_behavior_action_for_selected_node",
                            "file": "invoke_bot/edit_story_map/test_submit_scoped_action.py",
                            "line": 1090
                          }
                        },
                        {
                          "name": "Panel submit button uses current behavior action and submits instructions",
                          "sequential_order": 2.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_panel_submit_button_uses_current_behavior_action_and_submits_instructions",
                          "steps": "Given User has selected a <node_type> <node_name> in the panel\nAnd Bot has current behavior <behavior>\nAnd Bot has current action <action>\nAnd Panel displays behavior <behavior> and action <action> for selected node\nWhen Panel renders the submit button\nThen Submit button displays <icon_file> icon indicating <behavior> behavior\nWhen User hovers over the submit button\nThen Submit button shows tooltip <tooltip_text>\nWhen User clicks the submit button\nThen Panel calls node.get_required_behavior_instructions with action <action>\nAnd Instructions for <behavior> behavior and <action> action are returned\nAnd Panel sets scope to selected <node_type> <node_name>\nAnd Scope is set to <node_type> <node_name>",
                          "examples": [
                            {
                              "columns": [
                                "node_type",
                                "node_name",
                                "behavior",
                                "action",
                                "icon_file",
                                "tooltip_text",
                                "node_path"
                              ],
                              "rows": [
                                [
                                  "epic",
                                  "Product Catalog",
                                  "shape",
                                  "build",
                                  "submit_subepic.png",
                                  "Submit shape instructions for epic",
                                  "Product Catalog"
                                ],
                                [
                                  "sub-epic",
                                  "Report Export",
                                  "explore",
                                  "build",
                                  "submit_story.png",
                                  "Submit exploration instructions for sub-epic",
                                  "Test Epic.Report Export"
                                ],
                                [
                                  "story",
                                  "Create User",
                                  "scenario",
                                  "build",
                                  "submit_ac.png",
                                  "Submit scenario instructions for story",
                                  "Test Epic.Test SubEpic.Create User"
                                ],
                                [
                                  "story",
                                  "Delete File",
                                  "test",
                                  "validate",
                                  "submit_tests.png",
                                  "Submit test instructions for story",
                                  "Test Epic.Test SubEpic.Delete File"
                                ],
                                [
                                  "story",
                                  "Upload File",
                                  "code",
                                  "build",
                                  "submit_code.png",
                                  "Submit code instructions for story",
                                  "Test Epic.Test SubEpic.Upload File"
                                ]
                              ]
                            }
                          ]
                        },
                        {
                          "name": "Submit Current Instructions Via CLI JSON Format",
                          "sequential_order": 3.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_submit_current_instructions_via_cli_json_format",
                          "steps": "Given CLI has story map loaded with node <node_name>\nAnd Bot has current behavior <behavior>\nAnd Bot has current action <action>\nWhen User executes CLI command story_graph.\"<node_path>\".submit_current_instructions\nThen CLI returns JSON with submit result\nAnd Bot submits instructions using current behavior <behavior> and action <action>\nAnd Scope is set to node <node_name>",
                          "examples": [
                            {
                              "columns": [
                                "node_name",
                                "node_path",
                                "behavior",
                                "action"
                              ],
                              "rows": [
                                [
                                  "Upload File",
                                  "File Management.Upload File",
                                  "code",
                                  "build"
                                ]
                              ]
                            }
                          ],
                          "test": {
                            "method": "test_submit_current_instructions_via_cli_json_format",
                            "file": "invoke_bot/edit_story_map/test_submit_scoped_action.py",
                            "line": 1143
                          }
                        }
                      ],
                      "acceptance_criteria": [
                        {
                          "name": "WHEN action executes\nTHEN action completes successfully",
                          "text": "WHEN action executes\nTHEN action completes successfully",
                          "sequential_order": 1.0
                        }
                      ],
                      "behavior": null,
                      "file_link": "C:\\dev\\agile_bots\\docs\\story\\map\\Invoke Bot\\Work With Story Map\\Act With Selected Node\\ðŸ“„ Submit Current Behavior Action For Selected Node.md"
                    },
                    {
                      "name": "Set scope to selected Increment",
                      "sequential_order": 3.0,
                      "connector": null,
                      "story_type": "user",
                      "users": [],
                      "test_class": null,
                      "scenarios": [],
                      "acceptance_criteria": [],
                      "behavior": null,
                      "file_link": "C:\\dev\\agile_bots\\docs\\story\\map\\Invoke Bot\\Edit Story Map\\Act With Selected Node\\ðŸ“„ Set scope to selected Increment.md"
                    },
                    {
                      "name": "Copy Story Node To Clipboard",
                      "sequential_order": 4.0,
                      "connector": null,
                      "story_type": "user",
                      "users": [],
                      "test_class": "TestCopyStoryNodeToClipboard",
                      "scenarios": [
                        {
                          "name": "StoryNode copy_name returns node name for clipboard",
                          "sequential_order": 1.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_copy_name_returns_node_name",
                          "steps": "GIVEN: StoryMap is loaded with at least one Epic containing a SubEpic\nAND: Bot has that StoryMap loaded\nWHEN: copy_name is invoked on that SubEpic StoryNode\nTHEN: StoryNode.copy_name returns status success\nAND: result is the node name\nAND: the result can be written to system clipboard by the panel",
                          "test": {
                            "method": "test_copy_name_returns_node_name",
                            "file": "invoke_bot/edit_story_map/test_submit_scoped_action.py",
                            "line": 1213
                          }
                        },
                        {
                          "name": "StoryNode copy_json returns node as story-graph JSON",
                          "sequential_order": 2.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_copy_json_returns_node_as_story_graph_json",
                          "steps": "GIVEN: StoryMap is loaded with an Epic and a SubEpic with known structure\nAND: Bot has that StoryMap loaded\nWHEN: copy_json is invoked on that SubEpic StoryNode\nTHEN: StoryNode.copy_json returns status success\nAND: result is a dict with the same shape as the node in story-graph.json\nAND: the result can be serialized to JSON and written to system clipboard by the panel",
                          "test": {
                            "method": "test_copy_json_returns_node_as_story_graph_json",
                            "file": "invoke_bot/edit_story_map/test_submit_scoped_action.py",
                            "line": 1283
                          }
                        },
                        {
                          "name": "CLI resolves story_graph path and copy_name returns node name",
                          "sequential_order": 3.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_cli_copy_name_returns_node_name",
                          "steps": "GIVEN: StoryMap is loaded with Epic \"Invoke Bot\" and SubEpic \"Manage Bot\"\nAND: Bot has that StoryMap loaded\nWHEN: User executes CLI command story_graph.\"Invoke Bot\".\"Manage Bot\".copy_name\nTHEN: CLI returns success\nAND: response result is the SubEpic node name \"Manage Bot\""
                        },
                        {
                          "name": "CLI resolves story_graph path and copy_json returns node dict",
                          "sequential_order": 4.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_cli_copy_json_returns_node_dict",
                          "steps": "GIVEN: StoryMap is loaded with Epic \"Invoke Bot\" and SubEpic \"Manage Bot\"\nAND: Bot has that StoryMap loaded\nWHEN: User executes CLI command story_graph.\"Invoke Bot\".\"Manage Bot\".copy_json\nTHEN: CLI returns success\nAND: response result is a dict with name \"Manage Bot\" and story-graph shape for that node"
                        },
                        {
                          "name": "CLI copy_name on non-existent node path returns error",
                          "sequential_order": 5.0,
                          "type": "error_case",
                          "background": [],
                          "test_method": "test_cli_copy_name_nonexistent_node_outputs_error",
                          "steps": "GIVEN: StoryMap is loaded with Epic \"Invoke Bot\" and SubEpic \"Manage Bot\"\nAND: Bot has that StoryMap loaded\nWHEN: User executes CLI command story_graph.\"Invoke Bot\".\"Non-existent Node\".copy_name\nTHEN: CLI returns error\nAND: output indicates node not found or path invalid\nAND: no result is written to clipboard"
                        }
                      ],
                      "acceptance_criteria": [
                        {
                          "name": "Right-click on a story node shows context menu with Copy node name and Copy full JSON",
                          "text": "Right-click on a story node shows context menu with Copy node name and Copy full JSON",
                          "sequential_order": 1.0
                        },
                        {
                          "name": "Copy node name writes node name to system clipboard via event -> CLI -> bot.copy_name",
                          "text": "Copy node name writes node name to system clipboard via event -> CLI -> bot.copy_name",
                          "sequential_order": 2.0
                        },
                        {
                          "name": "Copy full JSON writes node JSON (story-graph shape) to system clipboard via event -> CLI -> bot.copy_json",
                          "text": "Copy full JSON writes node JSON (story-graph shape) to system clipboard via event -> CLI -> bot.copy_json",
                          "sequential_order": 3.0
                        }
                      ],
                      "behavior": null,
                      "file_link": "C:\\dev\\agile_bots\\docs\\story\\scenarios\\Invoke Bot\\Work With Story Map\\Act With Selected Node\\ðŸ“„ Copy Story Node To Clipboard.md"
                    },
                    {
                      "name": "Render Diagram Selected Node",
                      "sequential_order": 5.0,
                      "connector": null,
                      "story_type": "user",
                      "users": [],
                      "test_class": null,
                      "scenarios": [],
                      "acceptance_criteria": [
                        {
                          "name": "WHEN User selects story node in Panel story tree\nTHEN Panel action bar shows [Render diagram] [Save layout] [Clear layout] [Update graph] buttons",
                          "text": "WHEN User selects story node in Panel story tree\nTHEN Panel action bar shows [Render diagram] [Save layout] [Clear layout] [Update graph] buttons",
                          "sequential_order": 1.0
                        },
                        {
                          "name": "WHEN User clicks [Render diagram] in Panel\nTHEN Panel renders diagram for selected node scope",
                          "text": "WHEN User clicks [Render diagram] in Panel\nTHEN Panel renders diagram for selected node scope",
                          "sequential_order": 2.0
                        },
                        {
                          "name": "WHEN User clicks [Save layout] in Panel\nTHEN Panel persists layout to DrawIO file",
                          "text": "WHEN User clicks [Save layout] in Panel\nTHEN Panel persists layout to DrawIO file",
                          "sequential_order": 3.0
                        },
                        {
                          "name": "WHEN User clicks [Update graph] in Panel\nTHEN Panel generates update report AND Panel applies changes to story-graph.json",
                          "text": "WHEN User clicks [Update graph] in Panel\nTHEN Panel generates update report AND Panel applies changes to story-graph.json",
                          "sequential_order": 4.0
                        },
                        {
                          "name": "WHEN User runs cli.story_graph.\"Invoke Bot\".\"Act With Selected Node\".render_diagram\nTHEN CLI renders diagram for current scope AND CLI reports completion",
                          "text": "WHEN User runs cli.story_graph.\"Invoke Bot\".\"Act With Selected Node\".render_diagram\nTHEN CLI renders diagram for current scope AND CLI reports completion",
                          "sequential_order": 5.0
                        }
                      ],
                      "behavior": null
                    },
                    {
                      "name": "Update Queie based on selectged Node",
                      "sequential_order": 6.0,
                      "connector": null,
                      "story_type": "user",
                      "users": [],
                      "test_class": null,
                      "scenarios": [],
                      "acceptance_criteria": [],
                      "behavior": null
                    },
                    {
                      "name": "Execute Scope \"Runs\"",
                      "sequential_order": 20.0,
                      "connector": null,
                      "story_type": "user",
                      "users": [],
                      "test_class": null,
                      "scenarios": [],
                      "acceptance_criteria": [],
                      "behavior": null
                    }
                  ]
                }
              ]
            },
            {
              "name": "Open Story Related Files",
              "sequential_order": 4.0,
              "behavior": null,
              "domain_concepts": [],
              "test_file": "invoke_bot/edit_story_map/test_open_story_related_files.py",
              "sub_epics": [],
              "story_groups": [
                {
                  "name": "",
                  "sequential_order": 0.0,
                  "type": "and",
                  "connector": null,
                  "behavior": null,
                  "stories": [
                    {
                      "name": "Open All Related Files",
                      "sequential_order": 0.0,
                      "connector": null,
                      "story_type": "user",
                      "users": [],
                      "test_class": "TestOpenAllRelatedFiles",
                      "scenarios": [
                        {
                          "name": "Graph button opens story graph with selected node expanded",
                          "sequential_order": 8.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_graph_button_opens_story_graph_with_selected_node_expanded",
                          "steps": "GIVEN: User has selected a story graph node\nWHEN: User clicks Graph button\nTHEN: System opens story-graph.json file\nAND: System collapses all nodes in story graph view\nAND: System expands nodes representing selected node path in tree\nAND: System positions edit cursor at line of beginning of expanded section representing selected node",
                          "test": {
                            "method": "test_graph_button_opens_story_graph_with_selected_node_expanded",
                            "file": "invoke_bot/edit_story_map/test_open_story_related_files.py",
                            "line": 263
                          }
                        },
                        {
                          "name": "Stories button opens story markdown files",
                          "sequential_order": 9.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_stories_button_opens_story_markdown_files",
                          "steps": "GIVEN: User has selected a story graph node (story, sub-epic, or epic)\nWHEN: User clicks Stories button\nTHEN: System opens story markdown file for single story if story selected\nOR: System opens all story markdown files for stories under selected node if sub-epic or epic selected",
                          "test": {
                            "method": "test_stories_button_opens_story_markdown_files",
                            "file": "invoke_bot/edit_story_map/test_open_story_related_files.py",
                            "line": 314
                          }
                        },
                        {
                          "name": "Code button infers and opens code files",
                          "sequential_order": 10.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_code_button_infers_and_opens_code_files",
                          "steps": "GIVEN: User has selected a story graph node with test files\nWHEN: User clicks Code button\nTHEN: System infers code files from test file paths (replace test/ with src/ or remove test_ prefix)\nAND: System opens inferred code files\nAND: System expands classes/methods referenced in tests\nAND: System collapses other code"
                        },
                        {
                          "name": "All button opens files in split editors",
                          "sequential_order": 11.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_all_button_opens_files_in_split_editors",
                          "steps": "GIVEN: User has selected a story graph node\nWHEN: User clicks All button\nTHEN: System opens story-graph.json in editor\nAND: System opens exploration file for sub-epic or epic if it exists\nAND: System opens story markdown files for all stories under selected node\nAND: System opens test files for all stories under selected node\nAND: System opens all code files related to opened test files\nAND: System activates story-graph.json tab as the last step",
                          "test": {
                            "method": "test_all_button_opens_files_in_split_editors",
                            "file": "invoke_bot/edit_story_map/test_open_story_related_files.py",
                            "line": 688
                          }
                        },
                        {
                          "name": "CLI openStoryFile opens story markdown files",
                          "sequential_order": 12.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_cli_open_story_file_opens_story_markdown_files",
                          "steps": "GIVEN: User executes CLI command bot.story_graph.\"Epic Name\".openStoryFile()\nWHEN: Command executes on epic or sub-epic node\nTHEN: System opens story markdown files for all stories under node\nAND: System recursively opens story files for all nested children (sub-epics and stories)\nWHEN: Command executes on story node\nTHEN: System opens single story markdown file for that story"
                        },
                        {
                          "name": "CLI openTest opens test files recursively",
                          "sequential_order": 13.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_cli_open_test_opens_test_files_recursively",
                          "steps": "GIVEN: User executes CLI command bot.story_graph.\"Epic Name\".\"SubEpic Name\".openTest()\nWHEN: Command executes on epic or sub-epic node\nTHEN: System opens test files for all stories under node\nAND: System recursively opens test files for all nested children\nAND: System expands test methods/classes in scope for each test file\nAND: System collapses other methods/classes\nWHEN: Command executes on story node\nTHEN: System opens test file for that story\nAND: System expands test methods/classes in scope (test_class or test_method)\nAND: System collapses other methods/classes"
                        },
                        {
                          "name": "CLI openStoryGraph opens with node expanded",
                          "sequential_order": 14.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_cli_open_story_graph_opens_with_node_expanded",
                          "steps": "GIVEN: User executes CLI command bot.story_graph.\"Epic Name\".openStoryGraph()\nWHEN: Command executes on any story graph node\nTHEN: System opens story-graph.json file\nAND: System collapses all nodes in story graph view\nAND: System expands nodes representing node path in tree\nAND: System positions edit cursor at line of beginning of expanded section representing selected node\nAND: System highlights selected node in story graph view"
                        }
                      ],
                      "acceptance_criteria": [
                        {
                          "name": "WHEN user clicks Graph button\nTHEN system opens story-graph.json AND system collapses all nodes AND system expands nodes representing selected node in tree AND system positions edit cursor at line of beginning of expanded section representing selected node",
                          "text": "WHEN user clicks Graph button\nTHEN system opens story-graph.json AND system collapses all nodes AND system expands nodes representing selected node in tree AND system positions edit cursor at line of beginning of expanded section representing selected node",
                          "sequential_order": 1.0
                        },
                        {
                          "name": "WHEN user clicks Stories button\nTHEN system opens story markdown files for single story or all stories under selected node",
                          "text": "WHEN user clicks Stories button\nTHEN system opens story markdown files for single story or all stories under selected node",
                          "sequential_order": 2.0
                        },
                        {
                          "name": "WHEN user clicks Test button\nTHEN system opens test files with methods/classes in scope AND system collapses other methods/classes",
                          "text": "WHEN user clicks Test button\nTHEN system opens test files with methods/classes in scope AND system collapses other methods/classes",
                          "sequential_order": 3.0
                        },
                        {
                          "name": "WHEN user clicks Code button\nTHEN system infers code files associated with tests AND system opens code files (not in story map, must be inferred)",
                          "text": "WHEN user clicks Code button\nTHEN system infers code files associated with tests AND system opens code files (not in story map, must be inferred)",
                          "sequential_order": 4.0
                        },
                        {
                          "name": "WHEN user clicks All button\nTHEN system opens story-graph.json in editor AND system opens exploration file for sub-epic or epic if it exists AND system opens story markdown files for all stories under selected node AND system opens test files for all stories under selected node AND system opens all code files related to opened test files AND system activates story-graph.json tab as last step",
                          "text": "WHEN user clicks All button\nTHEN system opens story-graph.json in editor AND system opens exploration file for sub-epic or epic if it exists AND system opens story markdown files for all stories under selected node AND system opens test files for all stories under selected node AND system opens all code files related to opened test files AND system activates story-graph.json tab as last step",
                          "sequential_order": 5.0
                        },
                        {
                          "name": "WHEN user executes CLI command bot.<story hierarchy>.openStoryFile()\nTHEN system opens story markdown files for node AND system opens all story files recursively for children if epic or sub-epic",
                          "text": "WHEN user executes CLI command bot.<story hierarchy>.openStoryFile()\nTHEN system opens story markdown files for node AND system opens all story files recursively for children if epic or sub-epic",
                          "sequential_order": 6.0
                        },
                        {
                          "name": "WHEN user executes CLI command bot.<story hierarchy>.openTest()\nTHEN system opens test files for node AND system opens all test files recursively for children if epic or sub-epic",
                          "text": "WHEN user executes CLI command bot.<story hierarchy>.openTest()\nTHEN system opens test files for node AND system opens all test files recursively for children if epic or sub-epic",
                          "sequential_order": 7.0
                        },
                        {
                          "name": "WHEN user executes CLI command bot.<story hierarchy>.openStoryGraph()\nTHEN system opens story-graph.json AND system collapses all nodes AND system expands nodes representing node path in tree",
                          "text": "WHEN user executes CLI command bot.<story hierarchy>.openStoryGraph()\nTHEN system opens story-graph.json AND system collapses all nodes AND system expands nodes representing node path in tree",
                          "sequential_order": 8.0
                        }
                      ],
                      "behavior": null,
                      "file_link": "C:\\dev\\agile_bots\\docs\\story\\map\\Invoke Bot\\Work With Story Map\\Open Story Related Files\\ðŸ“„ Open All Related Files.md"
                    },
                    {
                      "name": "Enrich Scope With Links",
                      "sequential_order": 1.0,
                      "connector": "or",
                      "story_type": "user",
                      "users": [
                        "Bot Behavior"
                      ],
                      "test_class": "TestEnrichScopeWithLinks",
                      "scenarios": [
                        {
                          "name": "Story with test_file and test_class gets test tube icon link",
                          "sequential_order": 0.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_story_with_test_file_and_class_gets_test_link",
                          "steps": "GIVEN: Story graph with story having test_file and test_class\nAND: Test file exists on disk\nWHEN: Scope is enriched with links\nTHEN: Story has test_tube icon link pointing to test file",
                          "test": {
                            "method": "test_story_with_test_file_and_class_gets_test_link",
                            "file": "invoke_bot/edit_story_map/test_open_story_related_files.py",
                            "line": 1141
                          }
                        },
                        {
                          "name": "Scenario",
                          "sequential_order": 1.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_scenario",
                          "steps": ""
                        },
                        {
                          "name": "Story with test_class but no test_file gets no test icon",
                          "sequential_order": 2.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_story_without_test_file_gets_no_test_link",
                          "steps": "GIVEN: Story graph with story having test_class but no test_file\nWHEN: Scope is enriched with links\nTHEN: Story has no test_tube icon link",
                          "test": {
                            "method": "test_story_without_test_file_gets_no_test_link",
                            "file": "invoke_bot/edit_story_map/test_open_story_related_files.py",
                            "line": 1204
                          }
                        },
                        {
                          "name": "Sub-epic with test_file gets test tube icon link",
                          "sequential_order": 3.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_sub_epic_with_test_file_gets_test_link",
                          "steps": "GIVEN: Story graph with sub-epic having test_file\nAND: Test file exists on disk\nWHEN: Scope is enriched with links\nTHEN: Sub-epic has test_tube icon link pointing to test file",
                          "test": {
                            "method": "test_sub_epic_with_test_file_gets_test_link",
                            "file": "invoke_bot/edit_story_map/test_open_story_related_files.py",
                            "line": 1248
                          }
                        },
                        {
                          "name": "Story inherits test_file from parent sub-epic",
                          "sequential_order": 4.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_story_inherits_test_file_from_sub_epic",
                          "steps": "GIVEN: Sub-epic with test_file and story with test_class but no test_file\nAND: Test file exists on disk\nWHEN: Scope is enriched with links\nTHEN: Story gets test_tube icon link using parent's test_file",
                          "test": {
                            "method": "test_story_inherits_test_file_from_sub_epic",
                            "file": "invoke_bot/edit_story_map/test_open_story_related_files.py",
                            "line": 1301
                          }
                        },
                        {
                          "name": "Epic with docs folder gets document icon link",
                          "sequential_order": 5.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_epic_with_docs_folder_gets_document_link",
                          "steps": "GIVEN: Epic and corresponding docs/map folder exists\nWHEN: Scope is enriched with links\nTHEN: Epic has document icon link pointing to docs folder",
                          "test": {
                            "method": "test_epic_with_docs_folder_gets_document_link",
                            "file": "invoke_bot/edit_story_map/test_open_story_related_files.py",
                            "line": 1363
                          }
                        },
                        {
                          "name": "Story test link appears based on sub-epic test_file and story test_class",
                          "sequential_order": 6.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_story_test_link_combinations",
                          "steps": "GIVEN: Sub-epic with/without test_file and story with/without test_class\nWHEN: Scope is enriched with links\nTHEN: Test link appears only when sub-epic has test_file AND story has test_class",
                          "test": {
                            "method": "test_story_test_link_combinations",
                            "file": "invoke_bot/edit_story_map/test_open_story_related_files.py",
                            "line": 1417
                          }
                        },
                        {
                          "name": "Scenario with test_method gets test link",
                          "sequential_order": 7.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_scenario_with_test_method_gets_test_link",
                          "steps": "GIVEN: Story with scenario having test_method\nAND: Test file exists with that method\nWHEN: Scope is enriched with links\nTHEN: Scenario has test link with line number",
                          "test": {
                            "method": "test_scenario_with_test_method_gets_test_link",
                            "file": "invoke_bot/edit_story_map/test_open_story_related_files.py",
                            "line": 1561
                          }
                        },
                        {
                          "name": "Scenario test link appears based on test_method and sub-epic test_file",
                          "sequential_order": 8.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_scenario_test_link_combinations",
                          "steps": "GIVEN: Scenario with/without test_method and sub-epic with/without test_file\nWHEN: Scope is enriched with links\nTHEN: Test link appears only when scenario has test_method and sub-epic has test_file",
                          "test": {
                            "method": "test_scenario_test_link_combinations",
                            "file": "invoke_bot/edit_story_map/test_open_story_related_files.py",
                            "line": 1640
                          }
                        },
                        {
                          "name": "Scenario",
                          "sequential_order": 9.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_scenario",
                          "steps": ""
                        }
                      ],
                      "acceptance_criteria": [],
                      "behavior": null,
                      "file_link": "C:\\dev\\agile_bots\\docs\\story\\map\\Invoke Bot\\Work With Story Map\\Open Story Related Files\\ðŸ“„ Enrich Scope With Links.md"
                    }
                  ]
                }
              ]
            },
            {
              "name": "Trace Story Graph",
              "sequential_order": 5.0,
              "behavior": null,
              "domain_concepts": [],
              "sub_epics": [
                {
                  "name": "Trace Story",
                  "sequential_order": 1.0,
                  "behavior": null,
                  "domain_concepts": [],
                  "sub_epics": [],
                  "story_groups": [
                    {
                      "name": "",
                      "sequential_order": 0.0,
                      "type": "and",
                      "connector": "and",
                      "behavior": null,
                      "stories": [
                        {
                          "name": "Display Stories",
                          "sequential_order": 1.0,
                          "connector": "and",
                          "story_type": "user",
                          "users": [
                            "Developer"
                          ],
                          "test_class": null,
                          "scenarios": [
                            {
                              "name": "Story with scenarios and acceptance criteria displays all properties",
                              "sequential_order": 1.0,
                              "type": "happy_path",
                              "background": [],
                              "test_method": null,
                              "steps": "Given Story \"{story_name}\" exists with users \"{users}\" and acceptance criteria count {ac_count}\nAnd Story \"{story_name}\" has scenarios including \"{scenario_name}\" of type \"{scenario_type}\"\nWhen Developer opens the trace file in the trace editor\nThen Trace Editor displays story header with \"{story_name}\"\nAnd Trace Editor displays users section showing \"{users}\"\nAnd Trace Editor displays {ac_count} acceptance criteria items\nAnd Trace Editor displays scenario \"{scenario_name}\" as expandable item",
                              "examples": [
                                {
                                  "name": "Story Table",
                                  "columns": [
                                    "Story Name",
                                    "Users",
                                    "AC Count"
                                  ],
                                  "rows": [
                                    [
                                      "Approve Wealth Transfer",
                                      "Developer",
                                      "3"
                                    ],
                                    [
                                      "Reject Wealth Transfer",
                                      "Developer, Compliance Officer",
                                      "2"
                                    ]
                                  ]
                                },
                                {
                                  "name": "Scenario Table",
                                  "columns": [
                                    "Story Name",
                                    "Scenario Name",
                                    "Scenario Type"
                                  ],
                                  "rows": [
                                    [
                                      "Approve Wealth Transfer",
                                      "Transfer within limit approved",
                                      "happy_path"
                                    ],
                                    [
                                      "Approve Wealth Transfer",
                                      "Transfer at boundary amount",
                                      "edge_case"
                                    ],
                                    [
                                      "Reject Wealth Transfer",
                                      "Transfer exceeds limit rejected",
                                      "error_case"
                                    ]
                                  ]
                                }
                              ]
                            },
                            {
                              "name": "Story with no acceptance criteria displays empty AC section",
                              "sequential_order": 2.0,
                              "type": "edge_case",
                              "background": [],
                              "test_method": null,
                              "steps": "Given Story \"{story_name}\" exists with users \"{users}\" and acceptance criteria count {ac_count}\nWhen Developer opens the trace file in the trace editor\nThen Trace Editor displays story header with \"{story_name}\"\nAnd Trace Editor displays empty acceptance criteria section with message \"{empty_message}\"",
                              "examples": [
                                {
                                  "name": "Story Table",
                                  "columns": [
                                    "Story Name",
                                    "Users",
                                    "AC Count",
                                    "Empty Message"
                                  ],
                                  "rows": [
                                    [
                                      "Draft Transfer Policy",
                                      "Developer",
                                      "0",
                                      "No acceptance criteria defined"
                                    ]
                                  ]
                                }
                              ]
                            },
                            {
                              "name": "Malformed trace file shows parse error",
                              "sequential_order": 3.0,
                              "type": "error_case",
                              "background": [],
                              "test_method": null,
                              "steps": "Given trace file \"{trace_file}\" has parse state \"{parse_state}\"\nWhen Developer opens the trace file in the trace editor\nThen Trace Editor shows error message \"{error_message}\"\nAnd Trace Editor displays no story data",
                              "examples": [
                                {
                                  "name": "Trace File Table",
                                  "columns": [
                                    "Trace File",
                                    "Parse State",
                                    "Error Message"
                                  ],
                                  "rows": [
                                    [
                                      "broken-transfer.strace",
                                      "invalid JSON at line 42",
                                      "Unable to parse trace file: invalid JSON at line 42"
                                    ],
                                    [
                                      "truncated-transfer.strace",
                                      "unexpected end of file",
                                      "Unable to parse trace file: unexpected end of file"
                                    ]
                                  ]
                                }
                              ]
                            }
                          ],
                          "acceptance_criteria": [
                            {
                              "name": "**WHEN** Developer selects story in Panel scope section\n**AND** Developer clicks Trace Story button\n**THEN** Trace Editor opens\n**AND** Trace Editor displays story name in header\n**AND** Trace Editor displays users section with actor list\n**AND** Trace Editor displays acceptance criteria section",
                              "text": "**WHEN** Developer selects story in Panel scope section\n**AND** Developer clicks Trace Story button\n**THEN** Trace Editor opens\n**AND** Trace Editor displays story name in header\n**AND** Trace Editor displays users section with actor list\n**AND** Trace Editor displays acceptance criteria section",
                              "sequential_order": 1.0
                            },
                            {
                              "name": "**WHEN** story has no acceptance criteria\n**THEN** Trace Editor displays empty acceptance criteria section",
                              "text": "**WHEN** story has no acceptance criteria\n**THEN** Trace Editor displays empty acceptance criteria section",
                              "sequential_order": 2.0
                            },
                            {
                              "name": "**WHEN** Developer clicks Open button on story header\n**THEN** Trace Editor opens story source file\n**AND** Editor navigates to story name line",
                              "text": "**WHEN** Developer clicks Open button on story header\n**THEN** Trace Editor opens story source file\n**AND** Editor navigates to story name line",
                              "sequential_order": 3.0
                            },
                            {
                              "name": "**WHEN** story source file not found\n**THEN** Trace Editor shows file not found error\n**BUT** does not crash",
                              "text": "**WHEN** story source file not found\n**THEN** Trace Editor shows file not found error\n**BUT** does not crash",
                              "sequential_order": 4.0
                            },
                            {
                              "name": "**WHEN** Developer clicks Open while file already open\n**THEN** Editor focuses existing tab\n**AND** Editor navigates to story line",
                              "text": "**WHEN** Developer clicks Open while file already open\n**THEN** Editor focuses existing tab\n**AND** Editor navigates to story line",
                              "sequential_order": 5.0
                            }
                          ],
                          "behavior": null
                        },
                        {
                          "name": "Edit Stories in Trace Editor",
                          "sequential_order": 2.0,
                          "connector": "and",
                          "story_type": "user",
                          "users": [
                            "Developer"
                          ],
                          "test_class": null,
                          "scenarios": [
                            {
                              "name": "Story name edit saves on blur",
                              "sequential_order": 1.0,
                              "type": "happy_path",
                              "background": [],
                              "test_method": null,
                              "steps": "Given Story \"{original_name}\" is displayed in trace editor\nWhen Developer changes story name to \"{updated_name}\" and triggers save via {save_trigger}\nThen story-graph.json contains Story with name \"{updated_name}\"\nAnd Trace Editor shows save confirmation indicator",
                              "examples": [
                                {
                                  "name": "Story Edit Table",
                                  "columns": [
                                    "Original Name",
                                    "Updated Name",
                                    "Save Trigger"
                                  ],
                                  "rows": [
                                    [
                                      "Approve Wealth Transfer",
                                      "Approve Wire Transfer",
                                      "blur"
                                    ],
                                    [
                                      "Reject Wealth Transfer",
                                      "Reject Suspicious Transfer",
                                      "Ctrl+S"
                                    ]
                                  ]
                                }
                              ]
                            },
                            {
                              "name": "Unchanged story field skips save",
                              "sequential_order": 2.0,
                              "type": "edge_case",
                              "background": [],
                              "test_method": null,
                              "steps": "Given Story \"{story_name}\" is displayed in trace editor\nAnd field \"{field_name}\" has value \"{current_value}\"\nWhen Developer focuses field \"{field_name}\" and leaves without changes\nThen story-graph.json modification timestamp is unchanged\nAnd Trace Editor shows no save indicator",
                              "examples": [
                                {
                                  "name": "Story Field Table",
                                  "columns": [
                                    "Story Name",
                                    "Field Name",
                                    "Current Value"
                                  ],
                                  "rows": [
                                    [
                                      "Approve Wealth Transfer",
                                      "name",
                                      "Approve Wealth Transfer"
                                    ],
                                    [
                                      "Approve Wealth Transfer",
                                      "users",
                                      "Developer, Compliance Officer"
                                    ]
                                  ]
                                }
                              ]
                            },
                            {
                              "name": "Read-only file shows save error and preserves edits",
                              "sequential_order": 3.0,
                              "type": "error_case",
                              "background": [],
                              "test_method": null,
                              "steps": "Given story-graph.json has file state \"{file_state}\"\nAnd Story \"{story_name}\" is displayed in trace editor\nWhen Developer changes story name to \"{updated_name}\" and triggers save via {save_trigger}\nThen Trace Editor shows error message \"{error_message}\"\nAnd story-graph.json still contains Story with name \"{story_name}\"\nAnd Trace Editor preserves \"{updated_name}\" in the editor field",
                              "examples": [
                                {
                                  "name": "Error Case Table",
                                  "columns": [
                                    "File State",
                                    "Story Name",
                                    "Updated Name",
                                    "Save Trigger",
                                    "Error Message"
                                  ],
                                  "rows": [
                                    [
                                      "read-only",
                                      "Approve Wealth Transfer",
                                      "Approve Wire Transfer",
                                      "Ctrl+S",
                                      "Cannot save: story-graph.json is read-only"
                                    ],
                                    [
                                      "locked by another process",
                                      "Reject Wealth Transfer",
                                      "Reject Transfer",
                                      "blur",
                                      "Cannot save: file is locked"
                                    ]
                                  ]
                                }
                              ]
                            }
                          ],
                          "acceptance_criteria": [
                            {
                              "name": "**WHEN** Developer modifies story name field\n**AND** Developer triggers save (blur or Ctrl+S)\n**THEN** Trace Editor saves changes to story data\n**AND** Trace Editor preserves story structure\n**AND** Trace Editor shows save confirmation indicator",
                              "text": "**WHEN** Developer modifies story name field\n**AND** Developer triggers save (blur or Ctrl+S)\n**THEN** Trace Editor saves changes to story data\n**AND** Trace Editor preserves story structure\n**AND** Trace Editor shows save confirmation indicator",
                              "sequential_order": 1.0
                            },
                            {
                              "name": "**WHEN** Developer modifies acceptance criteria text\n**THEN** Trace Editor saves changes on blur",
                              "text": "**WHEN** Developer modifies acceptance criteria text\n**THEN** Trace Editor saves changes on blur",
                              "sequential_order": 2.0
                            },
                            {
                              "name": "**WHEN** Developer adds user to users list\n**THEN** Trace Editor inserts new user entry\n**AND** Trace Editor saves changes to story data",
                              "text": "**WHEN** Developer adds user to users list\n**THEN** Trace Editor inserts new user entry\n**AND** Trace Editor saves changes to story data",
                              "sequential_order": 3.0
                            },
                            {
                              "name": "**WHEN** Developer removes user from users list\n**THEN** Trace Editor removes user entry\n**AND** Trace Editor saves changes to story data",
                              "text": "**WHEN** Developer removes user from users list\n**THEN** Trace Editor removes user entry\n**AND** Trace Editor saves changes to story data",
                              "sequential_order": 4.0
                            },
                            {
                              "name": "**WHEN** Developer modifies user name\n**THEN** Trace Editor updates user entry on blur",
                              "text": "**WHEN** Developer modifies user name\n**THEN** Trace Editor updates user entry on blur",
                              "sequential_order": 5.0
                            },
                            {
                              "name": "**WHEN** Developer enters duplicate user name\n**THEN** Trace Editor shows validation warning\n**BUT** allows save (duplicates permitted)",
                              "text": "**WHEN** Developer enters duplicate user name\n**THEN** Trace Editor shows validation warning\n**BUT** allows save (duplicates permitted)",
                              "sequential_order": 6.0
                            },
                            {
                              "name": "**WHEN** Developer enters invalid data\n**THEN** Trace Editor shows validation error\n**BUT** does not save invalid data",
                              "text": "**WHEN** Developer enters invalid data\n**THEN** Trace Editor shows validation error\n**BUT** does not save invalid data",
                              "sequential_order": 7.0
                            },
                            {
                              "name": "**WHEN** save operation fails\n**THEN** Trace Editor shows error indicator\n**AND** Trace Editor preserves user edits in editor",
                              "text": "**WHEN** save operation fails\n**THEN** Trace Editor shows error indicator\n**AND** Trace Editor preserves user edits in editor",
                              "sequential_order": 8.0
                            }
                          ],
                          "behavior": null
                        },
                        {
                          "name": "Open Story Files",
                          "sequential_order": 2.0,
                          "connector": "and",
                          "story_type": "user",
                          "users": [
                            "User"
                          ],
                          "test_class": "TestOpenStoryFiles",
                          "scenarios": [
                            {
                              "name": "User opens story graph JSON file",
                              "sequential_order": 1.0,
                              "type": "happy_path",
                              "background": [],
                              "test_method": "test_user_opens_story_graph_json_file",
                              "steps": "Given Panel displays scope section with graph link\nWhen User clicks Graph link\nThen VS Code opens story-graph.json in editor\nAnd File is displayed with JSON syntax highlighting"
                            },
                            {
                              "name": "User opens story map diagram",
                              "sequential_order": 2.0,
                              "type": "happy_path",
                              "background": [],
                              "test_method": "test_user_opens_story_map_diagram",
                              "steps": "Given Panel displays scope section with map link\nWhen User clicks map link\nThen VS Code opens story-map.drawio in diagram viewer\nAnd Diagram is displayed with Draw.io extension"
                            },
                            {
                              "name": "User clicks link to non-existent file shows error",
                              "sequential_order": 3.0,
                              "type": "error_case",
                              "background": [],
                              "test_method": "test_user_clicks_link_to_nonexistent_file_shows_error",
                              "steps": "Given Panel displays link to non-existent file\nWhen User clicks link\nThen Panel displays error message\nAnd Error message indicates file not found"
                            },
                            {
                              "name": "Story graph and map links always visible in scope header",
                              "sequential_order": 4.0,
                              "type": "happy_path",
                              "background": [],
                              "test_method": "test_story_graph_and_story_map_links_always_visible",
                              "steps": "Given Panel displays scope section\nAnd Scope may be filtered or showing all stories\nWhen User views scope header\nThen story-graph.json link is always visible\nAnd story-map.md link is always visible\nAnd Links persist regardless of filter state\nAnd Links are positioned consistently in header"
                            }
                          ],
                          "acceptance_criteria": [
                            {
                              "name": "WHEN User clicks graph link\nTHEN System opens story-graph.json in editor",
                              "text": "WHEN User clicks graph link\nTHEN System opens story-graph.json in editor",
                              "sequential_order": 1.0
                            },
                            {
                              "name": "WHEN User clicks map link\nTHEN System opens story-map.drawio in diagram viewer",
                              "text": "WHEN User clicks map link\nTHEN System opens story-map.drawio in diagram viewer",
                              "sequential_order": 2.0
                            },
                            {
                              "name": "WHEN System cannot open file\nTHEN System displays error message",
                              "text": "WHEN System cannot open file\nTHEN System displays error message",
                              "sequential_order": 3.0
                            }
                          ],
                          "behavior": null,
                          "file_link": "C:\\dev\\agile_bots\\docs\\story\\map\\Invoke Bot\\Work With Story Map\\Open Story Related Files\\ðŸ“„ Open Story Files.md"
                        }
                      ]
                    }
                  ]
                },
                {
                  "name": "Trace Scenario",
                  "sequential_order": 2.0,
                  "behavior": null,
                  "domain_concepts": [],
                  "sub_epics": [],
                  "story_groups": [
                    {
                      "name": "",
                      "sequential_order": 0.0,
                      "type": "and",
                      "connector": "and",
                      "behavior": null,
                      "stories": [
                        {
                          "name": "Display Scenario Steps",
                          "sequential_order": 0.0,
                          "connector": "and",
                          "story_type": "user",
                          "users": [
                            "Developer"
                          ],
                          "test_class": null,
                          "scenarios": [
                            {
                              "name": "Scenario steps display in given when then format",
                              "sequential_order": 1.0,
                              "type": "happy_path",
                              "background": [],
                              "test_method": null,
                              "steps": "Given Story \"{story_name}\" is loaded with Scenario \"{scenario_name}\" and steps \"{scenario_steps}\"\nWhen Developer selects Scenario \"{scenario_name}\" in the trace editor\nThen the steps display in \"{expected_format}\" format",
                              "examples": [
                                {
                                  "columns": [
                                    "Story Name",
                                    "Scenario Name",
                                    "Scenario Steps",
                                    "Expected Format"
                                  ],
                                  "rows": [
                                    [
                                      "Wealth Transfer Overview",
                                      "Approve Transfer",
                                      "Given account is verified; When transfer is submitted; Then approval is recorded",
                                      "given/when/then"
                                    ]
                                  ]
                                }
                              ]
                            },
                            {
                              "name": "Scenario with no steps shows empty state",
                              "sequential_order": 2.0,
                              "type": "edge_case",
                              "background": [],
                              "test_method": null,
                              "steps": "Given Story \"{story_name}\" is loaded with Scenario \"{scenario_name}\" and steps \"{scenario_steps}\"\nWhen Developer selects Scenario \"{scenario_name}\" in the trace editor\nThen the trace editor shows \"{empty_state_message}\"",
                              "examples": [
                                {
                                  "columns": [
                                    "Story Name",
                                    "Scenario Name",
                                    "Scenario Steps",
                                    "Empty State Message"
                                  ],
                                  "rows": [
                                    [
                                      "Wealth Transfer Overview",
                                      "Pending Review",
                                      "none",
                                      "No steps available"
                                    ]
                                  ]
                                }
                              ]
                            },
                            {
                              "name": "Unreadable story graph shows error",
                              "sequential_order": 3.0,
                              "type": "error_case",
                              "background": [],
                              "test_method": null,
                              "steps": "Given story-graph.json has state \"{story_graph_state}\"\nWhen Developer selects Scenario \"{scenario_name}\" in the trace editor\nThen the trace editor shows error \"{error_message}\"",
                              "examples": [
                                {
                                  "columns": [
                                    "Story Graph State",
                                    "Scenario Name",
                                    "Error Message"
                                  ],
                                  "rows": [
                                    [
                                      "invalid_json",
                                      "Approve Transfer",
                                      "Unable to load story-graph.json"
                                    ]
                                  ]
                                }
                              ]
                            }
                          ],
                          "acceptance_criteria": [
                            {
                              "name": "**WHEN** story is displayed in Trace Editor\n**AND** story has scenarios\n**THEN** Trace Editor displays scenarios section with scenario items\n**AND** Trace Editor displays nested scenarios as expandable items",
                              "text": "**WHEN** story is displayed in Trace Editor\n**AND** story has scenarios\n**THEN** Trace Editor displays scenarios section with scenario items\n**AND** Trace Editor displays nested scenarios as expandable items",
                              "sequential_order": 1.0
                            },
                            {
                              "name": "**WHEN** story has no scenarios\n**THEN** Trace Editor displays empty scenarios section\n**BUT** does not show error",
                              "text": "**WHEN** story has no scenarios\n**THEN** Trace Editor displays empty scenarios section\n**BUT** does not show error",
                              "sequential_order": 2.0
                            },
                            {
                              "name": "**WHEN** Developer clicks expand on scenario item\n**THEN** Trace Editor displays scenario details inline",
                              "text": "**WHEN** Developer clicks expand on scenario item\n**THEN** Trace Editor displays scenario details inline",
                              "sequential_order": 3.0
                            },
                            {
                              "name": "**WHEN** Developer views scenario in trace editor\n**THEN** Trace Editor displays Given steps section\n**AND** Trace Editor displays When steps section\n**AND** Trace Editor displays Then steps section",
                              "text": "**WHEN** Developer views scenario in trace editor\n**THEN** Trace Editor displays Given steps section\n**AND** Trace Editor displays When steps section\n**AND** Trace Editor displays Then steps section",
                              "sequential_order": 4.0
                            },
                            {
                              "name": "**WHEN** scenario has no Given steps\n**THEN** Trace Editor omits Given section\n**BUT** displays When and Then sections",
                              "text": "**WHEN** scenario has no Given steps\n**THEN** Trace Editor omits Given section\n**BUT** displays When and Then sections",
                              "sequential_order": 5.0
                            },
                            {
                              "name": "**WHEN** scenario step contains multiple lines\n**THEN** Trace Editor displays step with preserved formatting",
                              "text": "**WHEN** scenario step contains multiple lines\n**THEN** Trace Editor displays step with preserved formatting",
                              "sequential_order": 6.0
                            }
                          ],
                          "behavior": null
                        },
                        {
                          "name": "Edit Scenarios in Trace Editor",
                          "sequential_order": 1.0,
                          "connector": "and",
                          "story_type": "user",
                          "users": [
                            "Developer"
                          ],
                          "test_class": null,
                          "scenarios": [
                            {
                              "name": "Scenario step edits save on blur",
                              "sequential_order": 1.0,
                              "type": "happy_path",
                              "background": [],
                              "test_method": null,
                              "steps": "Given Scenario \"{scenario_name}\" is displayed with steps \"{original_steps}\"\nWhen Developer edits the steps to \"{updated_steps}\" and triggers save via {save_trigger}\nThen story-graph.json is updated with the new steps",
                              "examples": [
                                {
                                  "columns": [
                                    "Scenario Name",
                                    "Original Steps",
                                    "Updated Steps",
                                    "Save Trigger"
                                  ],
                                  "rows": [
                                    [
                                      "Approve Transfer",
                                      "Given account is verified; When transfer is submitted; Then approval is recorded",
                                      "Given account is verified and funded; When transfer is submitted; Then approval is recorded",
                                      "blur"
                                    ]
                                  ]
                                }
                              ]
                            },
                            {
                              "name": "Scenario step edits save on Ctrl+S",
                              "sequential_order": 2.0,
                              "type": "edge_case",
                              "background": [],
                              "test_method": null,
                              "steps": "Given Scenario \"{scenario_name}\" is displayed with steps \"{original_steps}\"\nWhen Developer edits the steps to \"{updated_steps}\" and triggers save via {save_trigger}\nThen story-graph.json is updated with the new steps",
                              "examples": [
                                {
                                  "columns": [
                                    "Scenario Name",
                                    "Original Steps",
                                    "Updated Steps",
                                    "Save Trigger"
                                  ],
                                  "rows": [
                                    [
                                      "Approve Transfer",
                                      "Given account is verified; When transfer is submitted; Then approval is recorded",
                                      "Given account is verified; When transfer is submitted; Then approval is recorded and logged",
                                      "Ctrl+S"
                                    ]
                                  ]
                                }
                              ]
                            },
                            {
                              "name": "Read-only story graph shows save error for scenario steps",
                              "sequential_order": 3.0,
                              "type": "error_case",
                              "background": [],
                              "test_method": null,
                              "steps": "Given story-graph.json has state \"{story_graph_state}\" and Scenario \"{scenario_name}\" is displayed\nWhen Developer edits the steps and triggers save via {save_trigger}\nThen the trace editor shows error \"{error_message}\" and the file remains unchanged",
                              "examples": [
                                {
                                  "columns": [
                                    "Scenario Name",
                                    "Story Graph State",
                                    "Save Trigger",
                                    "Error Message"
                                  ],
                                  "rows": [
                                    [
                                      "Approve Transfer",
                                      "read_only",
                                      "Ctrl+S",
                                      "Unable to save story-graph.json"
                                    ]
                                  ]
                                }
                              ]
                            }
                          ],
                          "acceptance_criteria": [
                            {
                              "name": "**WHEN** Developer modifies scenario step text\n**AND** Developer triggers save (blur or Ctrl+S)\n**THEN** Trace Editor saves changes to story data\n**AND** Trace Editor preserves scenario structure",
                              "text": "**WHEN** Developer modifies scenario step text\n**AND** Developer triggers save (blur or Ctrl+S)\n**THEN** Trace Editor saves changes to story data\n**AND** Trace Editor preserves scenario structure",
                              "sequential_order": 1.0
                            },
                            {
                              "name": "**WHEN** Developer adds new step to scenario\n**THEN** Trace Editor inserts step in appropriate section",
                              "text": "**WHEN** Developer adds new step to scenario\n**THEN** Trace Editor inserts step in appropriate section",
                              "sequential_order": 2.0
                            },
                            {
                              "name": "**WHEN** Developer clears step text\n**THEN** Trace Editor removes empty step on save",
                              "text": "**WHEN** Developer clears step text\n**THEN** Trace Editor removes empty step on save",
                              "sequential_order": 3.0
                            },
                            {
                              "name": "**WHEN** save fails\n**THEN** Trace Editor shows error indicator\n**BUT** preserves user edits",
                              "text": "**WHEN** save fails\n**THEN** Trace Editor shows error indicator\n**BUT** preserves user edits",
                              "sequential_order": 4.0
                            }
                          ],
                          "behavior": null
                        },
                        {
                          "name": "Open Scenario Source",
                          "sequential_order": 2.0,
                          "connector": "and",
                          "story_type": "user",
                          "users": [
                            "Developer"
                          ],
                          "test_class": null,
                          "scenarios": [
                            {
                              "name": "Open scenario source from trace editor",
                              "sequential_order": 1.0,
                              "type": "happy_path",
                              "background": [],
                              "test_method": null,
                              "steps": "Given the trace editor shows Scenario \"{scenario_name}\"\nWhen Developer clicks Open on the scenario\nThen \"{story_graph_file}\" opens at \"{expected_location}\"",
                              "examples": [
                                {
                                  "columns": [
                                    "Scenario Name",
                                    "Story Graph File",
                                    "Expected Location"
                                  ],
                                  "rows": [
                                    [
                                      "Approve Transfer",
                                      "story-graph.json",
                                      "scenario line 10503"
                                    ]
                                  ]
                                }
                              ]
                            },
                            {
                              "name": "Scenario names with punctuation still open correctly",
                              "sequential_order": 2.0,
                              "type": "edge_case",
                              "background": [],
                              "test_method": null,
                              "steps": "Given the trace editor shows Scenario \"{scenario_name}\"\nWhen Developer clicks Open on the scenario\nThen \"{story_graph_file}\" opens at \"{expected_location}\"",
                              "examples": [
                                {
                                  "columns": [
                                    "Scenario Name",
                                    "Story Graph File",
                                    "Expected Location"
                                  ],
                                  "rows": [
                                    [
                                      "Approve Transfer: Level-2?",
                                      "story-graph.json",
                                      "scenario line with special characters"
                                    ]
                                  ]
                                }
                              ]
                            },
                            {
                              "name": "Missing story graph shows error on scenario open",
                              "sequential_order": 3.0,
                              "type": "error_case",
                              "background": [],
                              "test_method": null,
                              "steps": "Given story-graph.json has state \"{story_graph_state}\" and the trace editor shows Scenario \"{scenario_name}\"\nWhen Developer clicks Open on the scenario\nThen the trace editor shows error \"{error_message}\"",
                              "examples": [
                                {
                                  "columns": [
                                    "Scenario Name",
                                    "Story Graph State",
                                    "Error Message"
                                  ],
                                  "rows": [
                                    [
                                      "Approve Transfer",
                                      "missing",
                                      "story-graph.json not found"
                                    ]
                                  ]
                                }
                              ]
                            }
                          ],
                          "acceptance_criteria": [
                            {
                              "name": "**WHEN** Developer clicks Open button on scenario\n**THEN** Trace Editor opens story source file\n**AND** Editor navigates to scenario line",
                              "text": "**WHEN** Developer clicks Open button on scenario\n**THEN** Trace Editor opens story source file\n**AND** Editor navigates to scenario line",
                              "sequential_order": 1.0
                            },
                            {
                              "name": "**WHEN** scenario line not found in file\n**THEN** Trace Editor opens file at story location\n**AND** Trace Editor shows line not found warning",
                              "text": "**WHEN** scenario line not found in file\n**THEN** Trace Editor opens file at story location\n**AND** Trace Editor shows line not found warning",
                              "sequential_order": 2.0
                            },
                            {
                              "name": "**WHEN** Developer clicks Open while file already open\n**THEN** Editor focuses existing tab\n**AND** Editor navigates to scenario line",
                              "text": "**WHEN** Developer clicks Open while file already open\n**THEN** Editor focuses existing tab\n**AND** Editor navigates to scenario line",
                              "sequential_order": 3.0
                            }
                          ],
                          "behavior": null
                        },
                        {
                          "name": "Display Examples Table",
                          "sequential_order": 3.0,
                          "connector": "and",
                          "story_type": "user",
                          "users": [
                            "Developer"
                          ],
                          "test_class": null,
                          "scenarios": [
                            {
                              "name": "Examples table displays with headers and rows",
                              "sequential_order": 1.0,
                              "type": "happy_path",
                              "background": [],
                              "test_method": null,
                              "steps": "Given Scenario \"{scenario_name}\" includes an examples table with columns \"{example_columns}\" and row \"{example_row}\"\nWhen Developer views the scenario in the trace editor\nThen the examples table displays with \"{expected_display}\"",
                              "examples": [
                                {
                                  "columns": [
                                    "Scenario Name",
                                    "Example Columns",
                                    "Example Row",
                                    "Expected Display"
                                  ],
                                  "rows": [
                                    [
                                      "Approve Transfer",
                                      "Transfer Type, Amount, Expected Outcome",
                                      "Wire, 25000, Approved",
                                      "table with headers and row values"
                                    ]
                                  ]
                                }
                              ]
                            },
                            {
                              "name": "Scenario without examples shows empty section",
                              "sequential_order": 2.0,
                              "type": "edge_case",
                              "background": [],
                              "test_method": null,
                              "steps": "Given Scenario \"{scenario_name}\" has examples state \"{examples_state}\"\nWhen Developer views the scenario in the trace editor\nThen the trace editor shows \"{empty_section_ui}\"",
                              "examples": [
                                {
                                  "columns": [
                                    "Scenario Name",
                                    "Examples State",
                                    "Empty Section UI"
                                  ],
                                  "rows": [
                                    [
                                      "Pending Review",
                                      "none",
                                      "Add Example button visible"
                                    ]
                                  ]
                                }
                              ]
                            },
                            {
                              "name": "Examples table with many rows is scrollable",
                              "sequential_order": 3.0,
                              "type": "edge_case",
                              "background": [],
                              "test_method": null,
                              "steps": "Given Scenario \"{scenario_name}\" includes an examples table with {row_count} rows\nWhen Developer views the examples table\nThen the table displays with \"{expected_behavior}\"",
                              "examples": [
                                {
                                  "columns": [
                                    "Scenario Name",
                                    "Row Count",
                                    "Expected Behavior"
                                  ],
                                  "rows": [
                                    [
                                      "Bulk Transfers",
                                      "50",
                                      "scrollable table with sticky headers"
                                    ]
                                  ]
                                }
                              ]
                            }
                          ],
                          "acceptance_criteria": [
                            {
                              "name": "**WHEN** Developer views scenario with examples\n**THEN** Trace Editor displays examples as editable table\n**AND** Trace Editor displays column headers from example data\n**AND** Trace Editor displays rows with example values",
                              "text": "**WHEN** Developer views scenario with examples\n**THEN** Trace Editor displays examples as editable table\n**AND** Trace Editor displays column headers from example data\n**AND** Trace Editor displays rows with example values",
                              "sequential_order": 1.0
                            },
                            {
                              "name": "**WHEN** scenario has no examples\n**THEN** Trace Editor shows empty examples section with Add Example button\n**BUT** does not show table headers",
                              "text": "**WHEN** scenario has no examples\n**THEN** Trace Editor shows empty examples section with Add Example button\n**BUT** does not show table headers",
                              "sequential_order": 2.0
                            },
                            {
                              "name": "**WHEN** example table has many rows\n**THEN** Trace Editor displays scrollable table\n**AND** Trace Editor keeps headers visible while scrolling",
                              "text": "**WHEN** example table has many rows\n**THEN** Trace Editor displays scrollable table\n**AND** Trace Editor keeps headers visible while scrolling",
                              "sequential_order": 3.0
                            }
                          ],
                          "behavior": "shape"
                        },
                        {
                          "name": "Add / Remove Examples",
                          "sequential_order": 4.0,
                          "connector": "and",
                          "story_type": "user",
                          "users": [
                            "Developer"
                          ],
                          "test_class": null,
                          "scenarios": [
                            {
                              "name": "Add examples creates new table",
                              "sequential_order": 1.0,
                              "type": "happy_path",
                              "background": [],
                              "test_method": null,
                              "steps": "Given Scenario \"{scenario_name}\" has examples state \"{examples_state}\"\nWhen Developer clicks Add Examples\nThen \"{expected_result}\"",
                              "examples": [
                                {
                                  "columns": [
                                    "Scenario Name",
                                    "Examples State",
                                    "Expected Result"
                                  ],
                                  "rows": [
                                    [
                                      "Approve Transfer",
                                      "none",
                                      "new examples table with focus on first cell"
                                    ]
                                  ]
                                }
                              ]
                            },
                            {
                              "name": "Remove examples table updates story data",
                              "sequential_order": 2.0,
                              "type": "edge_case",
                              "background": [],
                              "test_method": null,
                              "steps": "Given Scenario \"{scenario_name}\" has {table_count} examples tables\nWhen Developer removes one examples table\nThen \"{expected_result}\"",
                              "examples": [
                                {
                                  "columns": [
                                    "Scenario Name",
                                    "Table Count",
                                    "Expected Result"
                                  ],
                                  "rows": [
                                    [
                                      "Approve Transfer",
                                      "2",
                                      "one table removed and changes saved"
                                    ]
                                  ]
                                }
                              ]
                            },
                            {
                              "name": "Removing last examples table shows empty section",
                              "sequential_order": 3.0,
                              "type": "edge_case",
                              "background": [],
                              "test_method": null,
                              "steps": "Given Scenario \"{scenario_name}\" has {table_count} examples table\nWhen Developer removes the last examples table\nThen \"{expected_result}\"",
                              "examples": [
                                {
                                  "columns": [
                                    "Scenario Name",
                                    "Table Count",
                                    "Expected Result"
                                  ],
                                  "rows": [
                                    [
                                      "Approve Transfer",
                                      "1",
                                      "empty examples section with container"
                                    ]
                                  ]
                                }
                              ]
                            },
                            {
                              "name": "Save failure during add examples shows error",
                              "sequential_order": 4.0,
                              "type": "error_case",
                              "background": [],
                              "test_method": null,
                              "steps": "Given story-graph.json has state \"{story_graph_state}\" and Scenario \"{scenario_name}\" is displayed\nWhen Developer clicks Add Examples\nThen the trace editor shows error \"{error_message}\" and no examples table is created",
                              "examples": [
                                {
                                  "columns": [
                                    "Story Graph State",
                                    "Scenario Name",
                                    "Error Message"
                                  ],
                                  "rows": [
                                    [
                                      "read_only",
                                      "Approve Transfer",
                                      "Unable to save story-graph.json"
                                    ]
                                  ]
                                }
                              ]
                            }
                          ],
                          "acceptance_criteria": [
                            {
                              "name": "**WHEN** Developer clicks Add Examples\n**THEN** Trace Editor creates a new examples table\n**AND** Trace Editor inserts the table into the examples collection\n**AND** Trace Editor focuses the first cell of the new table",
                              "text": "**WHEN** Developer clicks Add Examples\n**THEN** Trace Editor creates a new examples table\n**AND** Trace Editor inserts the table into the examples collection\n**AND** Trace Editor focuses the first cell of the new table",
                              "sequential_order": 1.0
                            },
                            {
                              "name": "**WHEN** Developer removes an examples table\n**THEN** Trace Editor removes the selected table from the collection\n**AND** Trace Editor saves changes to story data",
                              "text": "**WHEN** Developer removes an examples table\n**THEN** Trace Editor removes the selected table from the collection\n**AND** Trace Editor saves changes to story data",
                              "sequential_order": 2.0
                            },
                            {
                              "name": "**WHEN** Developer removes the last examples table\n**THEN** Trace Editor shows an empty examples section\n**BUT** does not remove the examples collection container",
                              "text": "**WHEN** Developer removes the last examples table\n**THEN** Trace Editor shows an empty examples section\n**BUT** does not remove the examples collection container",
                              "sequential_order": 3.0
                            },
                            {
                              "name": "**WHEN** save operation fails during add or remove\n**THEN** Trace Editor shows error indicator\n**BUT** preserves current state",
                              "text": "**WHEN** save operation fails during add or remove\n**THEN** Trace Editor shows error indicator\n**BUT** preserves current state",
                              "sequential_order": 4.0
                            }
                          ],
                          "behavior": "shape"
                        },
                        {
                          "name": "Design Example",
                          "sequential_order": 5.0,
                          "connector": null,
                          "story_type": "user",
                          "users": [],
                          "test_class": null,
                          "scenarios": [
                            {
                              "name": "Duplicate column name shows validation error",
                              "sequential_order": 0.0,
                              "type": "error_case",
                              "background": [],
                              "test_method": null,
                              "steps": "Given Scenario \"{scenario_name}\" has columns \"{existing_columns}\"\nWhen Developer adds a column named \"{new_column_name}\"\nThen the trace editor shows error \"{error_message}\" and does not add the column",
                              "examples": [
                                {
                                  "columns": [
                                    "Scenario Name",
                                    "Existing Columns",
                                    "New Column Name",
                                    "Error Message"
                                  ],
                                  "rows": [
                                    [
                                      "Approve Transfer",
                                      "Transfer Type, Amount",
                                      "Amount",
                                      "Column name already exists"
                                    ]
                                  ]
                                }
                              ]
                            }
                          ],
                          "acceptance_criteria": [
                            {
                              "name": "**WHEN** Developer cancels column dialog\n**THEN** Trace Editor closes dialog\n**BUT** does not modify table",
                              "text": "**WHEN** Developer cancels column dialog\n**THEN** Trace Editor closes dialog\n**BUT** does not modify table",
                              "sequential_order": 1.0
                            },
                            {
                              "name": "**WHEN** Developer cancels deletion\n**THEN** Trace Editor preserves column and data",
                              "text": "**WHEN** Developer cancels deletion\n**THEN** Trace Editor preserves column and data",
                              "sequential_order": 2.0
                            },
                            {
                              "name": "**WHEN** Developer clicks Add Column button\n**THEN** Trace Editor displays column name input dialog",
                              "text": "**WHEN** Developer clicks Add Column button\n**THEN** Trace Editor displays column name input dialog",
                              "sequential_order": 3.0
                            },
                            {
                              "name": "**WHEN** Developer clicks Delete on column header\n**THEN** Trace Editor shows confirmation dialog\n**AND** Dialog warns that column data will be lost",
                              "text": "**WHEN** Developer clicks Delete on column header\n**THEN** Trace Editor shows confirmation dialog\n**AND** Dialog warns that column data will be lost",
                              "sequential_order": 4.0
                            },
                            {
                              "name": "**WHEN** Developer confirms column deletion\n**THEN** Trace Editor removes column from table\n**AND** Trace Editor removes column data from all rows\n**AND** Trace Editor saves changes to story data",
                              "text": "**WHEN** Developer confirms column deletion\n**THEN** Trace Editor removes column from table\n**AND** Trace Editor removes column data from all rows\n**AND** Trace Editor saves changes to story data",
                              "sequential_order": 5.0
                            },
                            {
                              "name": "**WHEN** Developer enters column name and confirms\n**THEN** Trace Editor adds new column to table\n**AND** Trace Editor adds empty cell to each existing row\n**AND** Trace Editor saves changes to story data",
                              "text": "**WHEN** Developer enters column name and confirms\n**THEN** Trace Editor adds new column to table\n**AND** Trace Editor adds empty cell to each existing row\n**AND** Trace Editor saves changes to story data",
                              "sequential_order": 6.0
                            },
                            {
                              "name": "**WHEN** Developer enters duplicate column name\n**THEN** Trace Editor shows validation error\n**BUT** does not add duplicate column",
                              "text": "**WHEN** Developer enters duplicate column name\n**THEN** Trace Editor shows validation error\n**BUT** does not add duplicate column",
                              "sequential_order": 7.0
                            }
                          ],
                          "behavior": null,
                          "file_link": "C:\\dev\\agile_bots\\docs\\story\\scenarios\\Invoke Bot\\Work With Story Map\\Trace Story Graph\\Trace Scenario\\ðŸ“„ Design Example.md"
                        },
                        {
                          "name": "Edit Example",
                          "sequential_order": 6.0,
                          "connector": "and",
                          "story_type": "user",
                          "users": [
                            "Developer"
                          ],
                          "test_class": null,
                          "scenarios": [
                            {
                              "name": "Add example row appends empty cells",
                              "sequential_order": 1.0,
                              "type": "happy_path",
                              "background": [],
                              "test_method": null,
                              "steps": "Given Scenario \"{scenario_name}\" has an examples table with columns \"{columns}\" and row \"{existing_row}\"\nWhen Developer clicks Add Row\nThen a new empty row is added and focus moves to the first cell",
                              "examples": [
                                {
                                  "columns": [
                                    "Scenario Name",
                                    "Columns",
                                    "Existing Row",
                                    "Expected Result"
                                  ],
                                  "rows": [
                                    [
                                      "Approve Transfer",
                                      "Transfer Type, Amount",
                                      "Wire, 25000",
                                      "row added with empty cells and focus on first cell"
                                    ]
                                  ]
                                }
                              ]
                            },
                            {
                              "name": "Deleting last row leaves headers intact",
                              "sequential_order": 2.0,
                              "type": "edge_case",
                              "background": [],
                              "test_method": null,
                              "steps": "Given Scenario \"{scenario_name}\" has an examples table with columns \"{columns}\" and {row_count} row\nWhen Developer deletes the last row\nThen the table remains with headers and no rows",
                              "examples": [
                                {
                                  "columns": [
                                    "Scenario Name",
                                    "Columns",
                                    "Row Count",
                                    "Expected Result"
                                  ],
                                  "rows": [
                                    [
                                      "Approve Transfer",
                                      "Transfer Type, Amount",
                                      "1",
                                      "headers remain with zero rows"
                                    ]
                                  ]
                                }
                              ]
                            }
                          ],
                          "acceptance_criteria": [
                            {
                              "name": "**WHEN** Developer clicks Add Row button on examples table\n**THEN** Trace Editor inserts new row at end of table\n**AND** Trace Editor populates row with empty cells matching columns\n**AND** Trace Editor focuses first cell in new row",
                              "text": "**WHEN** Developer clicks Add Row button on examples table\n**THEN** Trace Editor inserts new row at end of table\n**AND** Trace Editor populates row with empty cells matching columns\n**AND** Trace Editor focuses first cell in new row",
                              "sequential_order": 1.0
                            },
                            {
                              "name": "**WHEN** Developer presses Enter on last row\n**THEN** Trace Editor inserts new row below current row",
                              "text": "**WHEN** Developer presses Enter on last row\n**THEN** Trace Editor inserts new row below current row",
                              "sequential_order": 2.0
                            },
                            {
                              "name": "**WHEN** table has no columns yet\n**THEN** Trace Editor prompts Developer to add column first\n**BUT** does not insert empty row",
                              "text": "**WHEN** table has no columns yet\n**THEN** Trace Editor prompts Developer to add column first\n**BUT** does not insert empty row",
                              "sequential_order": 3.0
                            },
                            {
                              "name": "**WHEN** Developer clicks Delete button on example row\n**THEN** Trace Editor removes row from table\n**AND** Trace Editor saves changes to story data",
                              "text": "**WHEN** Developer clicks Delete button on example row\n**THEN** Trace Editor removes row from table\n**AND** Trace Editor saves changes to story data",
                              "sequential_order": 4.0
                            },
                            {
                              "name": "**WHEN** Developer removes last row\n**THEN** Trace Editor displays empty table with headers\n**BUT** does not remove column structure",
                              "text": "**WHEN** Developer removes last row\n**THEN** Trace Editor displays empty table with headers\n**BUT** does not remove column structure",
                              "sequential_order": 5.0
                            },
                            {
                              "name": "**WHEN** Developer confirms row deletion\n**THEN** Trace Editor removes row immediately\n**BUT** does not prompt for single row deletion",
                              "text": "**WHEN** Developer confirms row deletion\n**THEN** Trace Editor removes row immediately\n**BUT** does not prompt for single row deletion",
                              "sequential_order": 6.0
                            },
                            {
                              "name": "**WHEN** Developer double-clicks column header\n**THEN** Trace Editor displays inline text editor on header",
                              "text": "**WHEN** Developer double-clicks column header\n**THEN** Trace Editor displays inline text editor on header",
                              "sequential_order": 15.0
                            },
                            {
                              "name": "**WHEN** Developer modifies header text and saves\n**THEN** Trace Editor updates column name\n**AND** Trace Editor saves changes to story data",
                              "text": "**WHEN** Developer modifies header text and saves\n**THEN** Trace Editor updates column name\n**AND** Trace Editor saves changes to story data",
                              "sequential_order": 16.0
                            },
                            {
                              "name": "**WHEN** Developer clears header text\n**THEN** Trace Editor shows validation error\n**BUT** does not allow empty column name",
                              "text": "**WHEN** Developer clears header text\n**THEN** Trace Editor shows validation error\n**BUT** does not allow empty column name",
                              "sequential_order": 18.0
                            }
                          ],
                          "behavior": "shape"
                        },
                        {
                          "name": "Edit Example Cell Data",
                          "sequential_order": 7.0,
                          "connector": "and",
                          "story_type": "user",
                          "users": [
                            "Developer"
                          ],
                          "test_class": null,
                          "scenarios": [
                            {
                              "name": "Edit cell saves updated value",
                              "sequential_order": 1.0,
                              "type": "happy_path",
                              "background": [],
                              "test_method": null,
                              "steps": "Given examples table for Scenario \"{scenario_name}\" has cell value \"{original_value}\" in column \"{column}\"\nWhen Developer edits the cell to \"{updated_value}\" and saves\nThen the cell value updates to \"{updated_value}\" and the story data is saved",
                              "examples": [
                                {
                                  "columns": [
                                    "Scenario Name",
                                    "Column",
                                    "Original Value",
                                    "Updated Value"
                                  ],
                                  "rows": [
                                    [
                                      "Approve Transfer",
                                      "Transfer Type",
                                      "Wire",
                                      "ACH"
                                    ],
                                    [
                                      "Approve Transfer",
                                      "Amount",
                                      "25000",
                                      "30000"
                                    ]
                                  ]
                                }
                              ]
                            },
                            {
                              "name": "Escape reverts cell value",
                              "sequential_order": 2.0,
                              "type": "edge_case",
                              "background": [],
                              "test_method": null,
                              "steps": "Given examples table for Scenario \"{scenario_name}\" has cell value \"{original_value}\" in column \"{column}\"\nWhen Developer edits the cell to \"{edited_value}\" and presses Escape\nThen the cell reverts to \"{original_value}\" and no changes are saved",
                              "examples": [
                                {
                                  "columns": [
                                    "Scenario Name",
                                    "Column",
                                    "Original Value",
                                    "Edited Value"
                                  ],
                                  "rows": [
                                    [
                                      "Approve Transfer",
                                      "Transfer Type",
                                      "Wire",
                                      "ACH"
                                    ]
                                  ]
                                }
                              ]
                            },
                            {
                              "name": "Long cell content expands size",
                              "sequential_order": 3.0,
                              "type": "edge_case",
                              "background": [],
                              "test_method": null,
                              "steps": "Given examples table for Scenario \"{scenario_name}\" has column \"{column}\"\nWhen Developer enters a long note \"{cell_content}\"\nThen the cell expands in width and height to fit the content",
                              "examples": [
                                {
                                  "columns": [
                                    "Scenario Name",
                                    "Column",
                                    "Cell Content",
                                    "Expected Behavior"
                                  ],
                                  "rows": [
                                    [
                                      "Approve Transfer",
                                      "Notes",
                                      "Transfer requires secondary approval and compliance review",
                                      "cell expands to fit content"
                                    ]
                                  ]
                                }
                              ]
                            }
                          ],
                          "acceptance_criteria": [
                            {
                              "name": "**WHEN** Developer clicks on example cell\n**THEN** Trace Editor activates inline editor on cell\n**AND** Trace Editor selects existing cell content",
                              "text": "**WHEN** Developer clicks on example cell\n**THEN** Trace Editor activates inline editor on cell\n**AND** Trace Editor selects existing cell content",
                              "sequential_order": 1.0
                            },
                            {
                              "name": "**WHEN** Developer modifies cell content and triggers save\n**THEN** Trace Editor updates cell value\n**AND** Trace Editor saves changes to story data",
                              "text": "**WHEN** Developer modifies cell content and triggers save\n**THEN** Trace Editor updates cell value\n**AND** Trace Editor saves changes to story data",
                              "sequential_order": 2.0
                            },
                            {
                              "name": "**WHEN** Developer enters longer cell content\n**THEN** Trace Editor expands cell width to fit roughly 7-12 words\n**AND** Trace Editor grows cell height for content beyond that",
                              "text": "**WHEN** Developer enters longer cell content\n**THEN** Trace Editor expands cell width to fit roughly 7-12 words\n**AND** Trace Editor grows cell height for content beyond that",
                              "sequential_order": 3.0
                            },
                            {
                              "name": "**WHEN** Developer presses Tab in cell\n**THEN** Trace Editor saves current cell\n**AND** Trace Editor moves focus to next cell in row",
                              "text": "**WHEN** Developer presses Tab in cell\n**THEN** Trace Editor saves current cell\n**AND** Trace Editor moves focus to next cell in row",
                              "sequential_order": 4.0
                            },
                            {
                              "name": "**WHEN** Developer presses Enter in cell\n**THEN** Trace Editor saves current cell\n**AND** Trace Editor moves focus to cell below",
                              "text": "**WHEN** Developer presses Enter in cell\n**THEN** Trace Editor saves current cell\n**AND** Trace Editor moves focus to cell below",
                              "sequential_order": 5.0
                            },
                            {
                              "name": "**WHEN** Developer presses Escape in cell\n**THEN** Trace Editor reverts cell to previous value\n**BUT** does not save changes",
                              "text": "**WHEN** Developer presses Escape in cell\n**THEN** Trace Editor reverts cell to previous value\n**BUT** does not save changes",
                              "sequential_order": 6.0
                            }
                          ],
                          "behavior": "shape"
                        }
                      ]
                    }
                  ]
                },
                {
                  "name": "Trace Code",
                  "sequential_order": 3.0,
                  "behavior": null,
                  "domain_concepts": [],
                  "sub_epics": [],
                  "story_groups": [
                    {
                      "name": "",
                      "sequential_order": 0.0,
                      "type": "and",
                      "connector": "and",
                      "behavior": null,
                      "stories": [
                        {
                          "name": "Display Code Trace",
                          "sequential_order": 1.0,
                          "connector": "and",
                          "story_type": "user",
                          "users": [
                            "Developer"
                          ],
                          "test_class": null,
                          "scenarios": [
                            {
                              "name": "Code trace builds three-level hierarchy",
                              "sequential_order": 1.0,
                              "type": "happy_path",
                              "background": [],
                              "test_method": null,
                              "steps": "Given Scenario \"{scenario_name}\" is linked to test method \"{test_method}\" with call chain \"{call_chain}\"\nWhen Developer views the scenario in the trace editor\nThen Trace Editor displays the test method as root and expands the call hierarchy to {expected_depth} levels",
                              "examples": [
                                {
                                  "columns": [
                                    "Scenario Name",
                                    "Test Method",
                                    "Call Chain",
                                    "Expected Depth"
                                  ],
                                  "rows": [
                                    [
                                      "Approve Transfer",
                                      "test_transfer_approval",
                                      "test_transfer_approval -> build_transfer_view -> parse_transfer_ledger -> map_transfer_rows",
                                      "3"
                                    ]
                                  ]
                                }
                              ]
                            },
                            {
                              "name": "Scenario without test shows no test linked indicator",
                              "sequential_order": 2.0,
                              "type": "edge_case",
                              "background": [],
                              "test_method": null,
                              "steps": "Given Scenario \"{scenario_name}\" has test link state \"{test_link_state}\"\nWhen Developer views the scenario in the trace editor\nThen Trace Editor shows indicator \"{expected_indicator}\"",
                              "examples": [
                                {
                                  "columns": [
                                    "Scenario Name",
                                    "Test Link State",
                                    "Expected Indicator"
                                  ],
                                  "rows": [
                                    [
                                      "Pending Review",
                                      "none",
                                      "No test linked"
                                    ]
                                  ]
                                }
                              ]
                            },
                            {
                              "name": "Missing test file shows warning",
                              "sequential_order": 3.0,
                              "type": "error_case",
                              "background": [],
                              "test_method": null,
                              "steps": "Given Scenario \"{scenario_name}\" links to test file \"{test_file}\" with file state \"{file_state}\"\nWhen Developer views the scenario in the trace editor\nThen Trace Editor shows warning \"{expected_message}\" and still renders the trace UI structure",
                              "examples": [
                                {
                                  "columns": [
                                    "Scenario Name",
                                    "Test File",
                                    "File State",
                                    "Expected Message"
                                  ],
                                  "rows": [
                                    [
                                      "Approve Transfer",
                                      "test/transfers/test_transfer_approval.py",
                                      "missing",
                                      "test reference warning"
                                    ]
                                  ]
                                }
                              ]
                            }
                          ],
                          "acceptance_criteria": [
                            {
                              "name": "**WHEN** Developer views scenario with linked test\n**THEN** Trace Editor parses test method for function/method calls\n**AND** Trace Editor follows each call to find implementation in workspace\n**AND** Trace Editor builds call hierarchy from test to implementation code",
                              "text": "**WHEN** Developer views scenario with linked test\n**THEN** Trace Editor parses test method for function/method calls\n**AND** Trace Editor follows each call to find implementation in workspace\n**AND** Trace Editor builds call hierarchy from test to implementation code",
                              "sequential_order": 1.0
                            },
                            {
                              "name": "**WHEN** Trace Editor builds hierarchy\n**THEN** Trace Editor displays test method as root node\n**AND** Trace Editor displays called functions/methods as child nodes\n**AND** Trace Editor recursively traces calls within each implementation\n**AND** Trace Editor expands hierarchy to 3 levels by default",
                              "text": "**WHEN** Trace Editor builds hierarchy\n**THEN** Trace Editor displays test method as root node\n**AND** Trace Editor displays called functions/methods as child nodes\n**AND** Trace Editor recursively traces calls within each implementation\n**AND** Trace Editor expands hierarchy to 3 levels by default",
                              "sequential_order": 2.0
                            },
                            {
                              "name": "**WHEN** Trace Editor displays code box for node\n**THEN** code box shows symbol name (class.method or function name)\n**AND** code box shows file path and line number\n**AND** code box shows source code with syntax highlighting\n**AND** code box shows line numbers beside code",
                              "text": "**WHEN** Trace Editor displays code box for node\n**THEN** code box shows symbol name (class.method or function name)\n**AND** code box shows file path and line number\n**AND** code box shows source code with syntax highlighting\n**AND** code box shows line numbers beside code",
                              "sequential_order": 3.0
                            },
                            {
                              "name": "**WHEN** hierarchy exceeds 3 levels\n**THEN** Trace Editor shows collapsed nodes beyond level 3\n**AND** Trace Editor lazy-loads deeper levels on expand",
                              "text": "**WHEN** hierarchy exceeds 3 levels\n**THEN** Trace Editor shows collapsed nodes beyond level 3\n**AND** Trace Editor lazy-loads deeper levels on expand",
                              "sequential_order": 4.0
                            },
                            {
                              "name": "**WHEN** call target not found in workspace\n**THEN** Trace Editor skips external/library calls\n**BUT** continues tracing other calls",
                              "text": "**WHEN** call target not found in workspace\n**THEN** Trace Editor skips external/library calls\n**BUT** continues tracing other calls",
                              "sequential_order": 5.0
                            },
                            {
                              "name": "**WHEN** scenario has no linked test\n**THEN** Trace Editor shows \"No test linked\" indicator\n**BUT** does not show error",
                              "text": "**WHEN** scenario has no linked test\n**THEN** Trace Editor shows \"No test linked\" indicator\n**BUT** does not show error",
                              "sequential_order": 6.0
                            },
                            {
                              "name": "**WHEN** linked test file not found\n**THEN** Trace Editor shows test reference with warning indicator\n**BUT** still renders trace UI structure",
                              "text": "**WHEN** linked test file not found\n**THEN** Trace Editor shows test reference with warning indicator\n**BUT** still renders trace UI structure",
                              "sequential_order": 7.0
                            },
                            {
                              "name": "**WHEN** test method has no calls\n**THEN** Trace Editor displays empty code trace section",
                              "text": "**WHEN** test method has no calls\n**THEN** Trace Editor displays empty code trace section",
                              "sequential_order": 8.0
                            },
                            {
                              "name": "**WHEN** call tree exceeds depth limit\n**THEN** Trace Editor truncates at maximum depth\n**AND** Trace Editor shows truncation indicator",
                              "text": "**WHEN** call tree exceeds depth limit\n**THEN** Trace Editor truncates at maximum depth\n**AND** Trace Editor shows truncation indicator",
                              "sequential_order": 9.0
                            }
                          ],
                          "behavior": "shape"
                        },
                        {
                          "name": "Edit Code Step",
                          "sequential_order": 2.0,
                          "connector": "and",
                          "story_type": "user",
                          "users": [
                            "Developer"
                          ],
                          "test_class": null,
                          "scenarios": [
                            {
                              "name": "Edit implementation code saves to source file",
                              "sequential_order": 1.0,
                              "type": "happy_path",
                              "background": [],
                              "test_method": null,
                              "steps": "Given code node \"{code_node}\" is displayed with source file \"{source_file}\"\nWhen Developer edits the code and triggers save via {save_trigger}\nThen the source file is updated and a save confirmation indicator is shown",
                              "examples": [
                                {
                                  "columns": [
                                    "Code Node",
                                    "Source File",
                                    "Save Trigger",
                                    "Expected Result"
                                  ],
                                  "rows": [
                                    [
                                      "build_transfer_view",
                                      "src/transfers/transfer_view.py",
                                      "blur",
                                      "source file saved"
                                    ]
                                  ]
                                }
                              ]
                            },
                            {
                              "name": "Edit test code saves to test file",
                              "sequential_order": 2.0,
                              "type": "edge_case",
                              "background": [],
                              "test_method": null,
                              "steps": "Given test node \"{test_node}\" is displayed with test file \"{test_file}\"\nWhen Developer edits the test code and triggers save via {save_trigger}\nThen the test file is updated",
                              "examples": [
                                {
                                  "columns": [
                                    "Test Node",
                                    "Test File",
                                    "Save Trigger",
                                    "Expected Result"
                                  ],
                                  "rows": [
                                    [
                                      "test_transfer_approval",
                                      "test/transfers/test_transfer_approval.py",
                                      "Ctrl+S",
                                      "test file saved"
                                    ]
                                  ]
                                }
                              ]
                            },
                            {
                              "name": "Save failure preserves edits",
                              "sequential_order": 3.0,
                              "type": "error_case",
                              "background": [],
                              "test_method": null,
                              "steps": "Given code node \"{code_node}\" is displayed and the source file has state \"{file_state}\"\nWhen Developer edits the code and triggers save\nThen a save error indicator is shown with message \"{error_message}\" and the edits remain in the editor",
                              "examples": [
                                {
                                  "columns": [
                                    "Code Node",
                                    "File State",
                                    "Error Message"
                                  ],
                                  "rows": [
                                    [
                                      "build_transfer_view",
                                      "read_only",
                                      "Unable to save source file"
                                    ]
                                  ]
                                }
                              ]
                            }
                          ],
                          "acceptance_criteria": [
                            {
                              "name": "**WHEN** Trace Editor displays code trace\n**THEN** Trace Editor expands hierarchy by default\n**AND** Trace Editor displays code snippet in editable box for each node\n**AND** Trace Editor shows line numbers beside code",
                              "text": "**WHEN** Trace Editor displays code trace\n**THEN** Trace Editor expands hierarchy by default\n**AND** Trace Editor displays code snippet in editable box for each node\n**AND** Trace Editor shows line numbers beside code",
                              "sequential_order": 1.0
                            },
                            {
                              "name": "**WHEN** Developer modifies code in edit box\n**AND** Developer triggers save (blur or Ctrl+S)\n**THEN** Trace Editor saves changes to source file\n**AND** Trace Editor shows save confirmation indicator",
                              "text": "**WHEN** Developer modifies code in edit box\n**AND** Developer triggers save (blur or Ctrl+S)\n**THEN** Trace Editor saves changes to source file\n**AND** Trace Editor shows save confirmation indicator",
                              "sequential_order": 2.0
                            },
                            {
                              "name": "**WHEN** Developer modifies test code\n**THEN** Trace Editor saves changes to test file",
                              "text": "**WHEN** Developer modifies test code\n**THEN** Trace Editor saves changes to test file",
                              "sequential_order": 3.0
                            },
                            {
                              "name": "**WHEN** Developer modifies implementation code\n**THEN** Trace Editor saves changes to code file",
                              "text": "**WHEN** Developer modifies implementation code\n**THEN** Trace Editor saves changes to code file",
                              "sequential_order": 4.0
                            },
                            {
                              "name": "**WHEN** save operation fails\n**THEN** Trace Editor shows error indicator\n**BUT** preserves user edits in edit box",
                              "text": "**WHEN** save operation fails\n**THEN** Trace Editor shows error indicator\n**BUT** preserves user edits in edit box",
                              "sequential_order": 5.0
                            },
                            {
                              "name": "**WHEN** Developer presses Escape in edit box\n**THEN** Trace Editor reverts to previous value\n**BUT** does not save changes",
                              "text": "**WHEN** Developer presses Escape in edit box\n**THEN** Trace Editor reverts to previous value\n**BUT** does not save changes",
                              "sequential_order": 6.0
                            },
                            {
                              "name": "**WHEN** Developer clicks Collapse All button\n**THEN** Trace Editor collapses entire hierarchy",
                              "text": "**WHEN** Developer clicks Collapse All button\n**THEN** Trace Editor collapses entire hierarchy",
                              "sequential_order": 8.0
                            },
                            {
                              "name": "**WHEN** Developer clicks Expand All button\n**THEN** Trace Editor expands entire hierarchy\n**BUT** does not auto-load code snippets",
                              "text": "**WHEN** Developer clicks Expand All button\n**THEN** Trace Editor expands entire hierarchy\n**BUT** does not auto-load code snippets",
                              "sequential_order": 7.0
                            },
                            {
                              "name": "**WHEN** Developer clicks Toggle Code button\n**THEN** Trace Editor shows/hides code for all expanded nodes",
                              "text": "**WHEN** Developer clicks Toggle Code button\n**THEN** Trace Editor shows/hides code for all expanded nodes",
                              "sequential_order": 9.0
                            }
                          ],
                          "behavior": "shape"
                        },
                        {
                          "name": "Open Source File",
                          "sequential_order": 3.0,
                          "connector": "and",
                          "story_type": "user",
                          "users": [
                            "Developer"
                          ],
                          "test_class": null,
                          "scenarios": [
                            {
                              "name": "Open code node source file",
                              "sequential_order": 1.0,
                              "type": "happy_path",
                              "background": [],
                              "test_method": null,
                              "steps": "Given code node \"{code_node}\" has source file \"{source_file}\" at line {line_number}\nWhen Developer clicks Open on the code node\nThen the editor opens the file and navigates to line {line_number}",
                              "examples": [
                                {
                                  "columns": [
                                    "Code Node",
                                    "Source File",
                                    "Line Number",
                                    "Expected Result"
                                  ],
                                  "rows": [
                                    [
                                      "approve_transfer",
                                      "src/transfers/transfer_service.py",
                                      "42",
                                      "file opens at line 42"
                                    ]
                                  ]
                                }
                              ]
                            },
                            {
                              "name": "Open test node in existing tab with out-of-range line",
                              "sequential_order": 2.0,
                              "type": "edge_case",
                              "background": [],
                              "test_method": null,
                              "steps": "Given test node \"{test_node}\" is already open in the editor\nAnd the test node points to line {line_number} in \"{test_file}\"\nWhen Developer clicks Open on the test node\nThen the editor focuses the existing tab, opens the file at the end, and shows a line not found warning",
                              "examples": [
                                {
                                  "columns": [
                                    "Test Node",
                                    "Test File",
                                    "Line Number",
                                    "Expected Result"
                                  ],
                                  "rows": [
                                    [
                                      "test_approve_transfer",
                                      "test/transfers/test_trace_story.py",
                                      "900",
                                      "focus existing tab, open at end, show warning"
                                    ]
                                  ]
                                }
                              ]
                            },
                            {
                              "name": "Missing source file shows error",
                              "sequential_order": 3.0,
                              "type": "error_case",
                              "background": [],
                              "test_method": null,
                              "steps": "Given code node \"{code_node}\" has source file \"{source_file}\" with file state \"{file_state}\"\nWhen Developer clicks Open on the code node\nThen the trace editor shows error \"{error_message}\"",
                              "examples": [
                                {
                                  "columns": [
                                    "Code Node",
                                    "Source File",
                                    "File State",
                                    "Error Message"
                                  ],
                                  "rows": [
                                    [
                                      "missing_transfer_file",
                                      "src/transfers/missing.py",
                                      "missing",
                                      "File not found"
                                    ]
                                  ]
                                }
                              ]
                            }
                          ],
                          "acceptance_criteria": [
                            {
                              "name": "**WHEN** Developer clicks Open button on code node\n**THEN** Editor opens source file\n**AND** Editor navigates to specific line number",
                              "text": "**WHEN** Developer clicks Open button on code node\n**THEN** Editor opens source file\n**AND** Editor navigates to specific line number",
                              "sequential_order": 1.0
                            },
                            {
                              "name": "**WHEN** Developer clicks Open on test node\n**THEN** Editor opens test file\n**AND** Editor navigates to test method line",
                              "text": "**WHEN** Developer clicks Open on test node\n**THEN** Editor opens test file\n**AND** Editor navigates to test method line",
                              "sequential_order": 2.0
                            },
                            {
                              "name": "**WHEN** source file not found\n**THEN** Trace Editor shows file not found error\n**BUT** does not crash",
                              "text": "**WHEN** source file not found\n**THEN** Trace Editor shows file not found error\n**BUT** does not crash",
                              "sequential_order": 3.0
                            },
                            {
                              "name": "**WHEN** line number exceeds file length\n**THEN** Editor opens file at end\n**AND** Trace Editor shows line not found warning",
                              "text": "**WHEN** line number exceeds file length\n**THEN** Editor opens file at end\n**AND** Trace Editor shows line not found warning",
                              "sequential_order": 4.0
                            },
                            {
                              "name": "**WHEN** Developer clicks Open while file already open\n**THEN** Editor focuses existing tab\n**AND** Editor navigates to line",
                              "text": "**WHEN** Developer clicks Open while file already open\n**THEN** Editor focuses existing tab\n**AND** Editor navigates to line",
                              "sequential_order": 5.0
                            }
                          ],
                          "behavior": "shape"
                        },
                        {
                          "name": "Navigate Code Trace",
                          "sequential_order": 4.0,
                          "connector": "and",
                          "story_type": "user",
                          "users": [
                            "Developer"
                          ],
                          "test_class": null,
                          "scenarios": [
                            {
                              "name": "Clicking a method call navigates to target node",
                              "sequential_order": 1.0,
                              "type": "happy_path",
                              "background": [],
                              "test_method": null,
                              "steps": "Given the trace shows method call \"{target_node}\" inside code box \"{source_node}\"\nWhen Developer clicks the method call \"{target_node}\"\nThen Trace Editor scrolls to the \"{target_node}\" node and highlights it",
                              "examples": [
                                {
                                  "columns": [
                                    "Source Node",
                                    "Target Node",
                                    "Expected Result"
                                  ],
                                  "rows": [
                                    [
                                      "approve_transfer",
                                      "apply_rules",
                                      "navigate and highlight target node"
                                    ]
                                  ]
                                }
                              ]
                            },
                            {
                              "name": "Nested method call expands parents",
                              "sequential_order": 2.0,
                              "type": "edge_case",
                              "background": [],
                              "test_method": null,
                              "steps": "Given the trace shows collapsed node \"{collapsed_node}\" with nested call \"{target_node}\"\nWhen Developer clicks the nested call \"{target_node}\"\nThen Trace Editor expands parent nodes and navigates to \"{target_node}\"",
                              "examples": [
                                {
                                  "columns": [
                                    "Collapsed Node",
                                    "Target Node",
                                    "Expected Result"
                                  ],
                                  "rows": [
                                    [
                                      "apply_rules",
                                      "write_entry",
                                      "parents expanded and target visible"
                                    ]
                                  ]
                                }
                              ]
                            },
                            {
                              "name": "Not traced method shows indicator",
                              "sequential_order": 3.0,
                              "type": "error_case",
                              "background": [],
                              "test_method": null,
                              "steps": "Given the trace does not include method \"{method_call}\" with trace state \"{trace_state}\"\nWhen Developer clicks the method call \"{method_call}\"\nThen Trace Editor shows indicator \"{expected_indicator}\" and does not navigate",
                              "examples": [
                                {
                                  "columns": [
                                    "Method Call",
                                    "Trace State",
                                    "Expected Indicator"
                                  ],
                                  "rows": [
                                    [
                                      "external_library_call",
                                      "not_traced",
                                      "Not traced"
                                    ]
                                  ]
                                }
                              ]
                            }
                          ],
                          "acceptance_criteria": [
                            {
                              "name": "**WHEN** Developer clicks on method call within code box\n**THEN** Trace Editor navigates to code box for that method\n**AND** Trace Editor scrolls hierarchy to show target node\n**AND** Trace Editor highlights target code box",
                              "text": "**WHEN** Developer clicks on method call within code box\n**THEN** Trace Editor navigates to code box for that method\n**AND** Trace Editor scrolls hierarchy to show target node\n**AND** Trace Editor highlights target code box",
                              "sequential_order": 1.0
                            },
                            {
                              "name": "**WHEN** Developer clicks on nested method/property call\n**THEN** Trace Editor expands parent nodes if collapsed\n**AND** Trace Editor navigates to nested code box",
                              "text": "**WHEN** Developer clicks on nested method/property call\n**THEN** Trace Editor expands parent nodes if collapsed\n**AND** Trace Editor navigates to nested code box",
                              "sequential_order": 3.0
                            },
                            {
                              "name": "**WHEN** Developer clicks on property access within code box\n**THEN** Trace Editor navigates to code box for that property",
                              "text": "**WHEN** Developer clicks on property access within code box\n**THEN** Trace Editor navigates to code box for that property",
                              "sequential_order": 2.0
                            },
                            {
                              "name": "**WHEN** Developer collapses previously expanded node\n**THEN** Trace Editor hides code snippet\n**BUT** preserves loaded content in memory",
                              "text": "**WHEN** Developer collapses previously expanded node\n**THEN** Trace Editor hides code snippet\n**BUT** preserves loaded content in memory",
                              "sequential_order": 6.0
                            },
                            {
                              "name": "**WHEN** Developer expands code node\n**THEN** Trace Editor lazy-loads source code for node\n**AND** Trace Editor displays code with line numbers\n**AND** Trace Editor shows loading indicator during fetch",
                              "text": "**WHEN** Developer expands code node\n**THEN** Trace Editor lazy-loads source code for node\n**AND** Trace Editor displays code with line numbers\n**AND** Trace Editor shows loading indicator during fetch",
                              "sequential_order": 5.0
                            },
                            {
                              "name": "**WHEN** Developer hovers over code node\n**THEN** Trace Editor shows full path tooltip",
                              "text": "**WHEN** Developer hovers over code node\n**THEN** Trace Editor shows full path tooltip",
                              "sequential_order": 10.0
                            },
                            {
                              "name": "**WHEN** clicked method/property not in trace hierarchy\n**THEN** Trace Editor shows \"Not traced\" indicator\n**BUT** does not navigate",
                              "text": "**WHEN** clicked method/property not in trace hierarchy\n**THEN** Trace Editor shows \"Not traced\" indicator\n**BUT** does not navigate",
                              "sequential_order": 4.0
                            },
                            {
                              "name": "**WHEN** source file not found during lazy load\n**THEN** Trace Editor shows file not found message in node\n**BUT** does not collapse node",
                              "text": "**WHEN** source file not found during lazy load\n**THEN** Trace Editor shows file not found message in node\n**BUT** does not collapse node",
                              "sequential_order": 11.0
                            }
                          ],
                          "behavior": "shape"
                        }
                      ]
                    }
                  ]
                }
              ],
              "story_groups": []
            }
          ],
          "story_groups": [
            {
              "name": "",
              "sequential_order": 6.0,
              "type": "and",
              "connector": null,
              "behavior": null,
              "stories": []
            }
          ]
        },
        {
          "name": "Navigate Behavior Actions",
          "sequential_order": 2.0,
          "behavior": null,
          "domain_concepts": [],
          "test_file": "invoke_bot/navigate_behavior_actions/",
          "sub_epics": [
            {
              "name": "Navigate Behavior And Actions",
              "sequential_order": 0.0,
              "behavior": null,
              "domain_concepts": [
                {
                  "name": "NavigationView",
                  "responsibilities": [
                    {
                      "name": "Wraps current action JSON",
                      "collaborators": [
                        "Action JSON"
                      ]
                    },
                    {
                      "name": "Reruns action",
                      "collaborators": [
                        "CLI",
                        "Action"
                      ]
                    },
                    {
                      "name": "Navigates to next action",
                      "collaborators": [
                        "CLI",
                        "Action"
                      ]
                    },
                    {
                      "name": "Navigates to prev action",
                      "collaborators": [
                        "CLI",
                        "Action"
                      ]
                    }
                  ],
                  "module": "behaviors",
                  "inherits_from": "PanelView",
                  "_source_path": "Invoke Bot.Invoke Bot Directly"
                },
                {
                  "name": "NavigationResult",
                  "responsibilities": [
                    {
                      "name": "Get previous action",
                      "collaborators": [
                        "Action"
                      ]
                    },
                    {
                      "name": "Get next action",
                      "collaborators": [
                        "Action"
                      ]
                    },
                    {
                      "name": "Get can navigate back",
                      "collaborators": [
                        "Boolean"
                      ]
                    },
                    {
                      "name": "Get can navigate next",
                      "collaborators": [
                        "Boolean"
                      ]
                    },
                    {
                      "name": "Get navigation path",
                      "collaborators": [
                        "String"
                      ]
                    }
                  ],
                  "module": "navigation",
                  "_source_path": "Invoke Bot.Invoke Bot Directly"
                },
                {
                  "name": "TTYNavigation",
                  "responsibilities": [
                    {
                      "name": "Serialize navigation to TTY",
                      "collaborators": [
                        "NavigationResult",
                        "TTY String"
                      ]
                    },
                    {
                      "name": "Format navigation options",
                      "collaborators": [
                        "Can Back",
                        "Can Next",
                        "TTY String"
                      ]
                    },
                    {
                      "name": "Format navigation path",
                      "collaborators": [
                        "Path String",
                        "TTY String"
                      ]
                    },
                    {
                      "name": "Wraps domain navigation",
                      "collaborators": [
                        "NavigationResult"
                      ]
                    }
                  ],
                  "module": "navigation",
                  "inherits_from": "TTYAdapter",
                  "_source_path": "Invoke Bot.Invoke Bot Directly"
                },
                {
                  "name": "JSONNavigation",
                  "responsibilities": [
                    {
                      "name": "Serialize navigation to JSON",
                      "collaborators": [
                        "NavigationResult",
                        "JSON String"
                      ]
                    },
                    {
                      "name": "Include previous action",
                      "collaborators": [
                        "Action",
                        "JSON"
                      ]
                    },
                    {
                      "name": "Include next action",
                      "collaborators": [
                        "Action",
                        "JSON"
                      ]
                    },
                    {
                      "name": "Include navigation state",
                      "collaborators": [
                        "Can Back",
                        "Can Next",
                        "JSON"
                      ]
                    },
                    {
                      "name": "Wraps domain navigation",
                      "collaborators": [
                        "NavigationResult"
                      ]
                    }
                  ],
                  "module": "navigation",
                  "inherits_from": "JSONAdapter",
                  "_source_path": "Invoke Bot.Invoke Bot Directly"
                },
                {
                  "name": "MarkdownNavigation",
                  "responsibilities": [
                    {
                      "name": "Serialize navigation to Markdown",
                      "collaborators": [
                        "NavigationResult",
                        "Markdown String"
                      ]
                    },
                    {
                      "name": "Format navigation section",
                      "collaborators": [
                        "NavigationResult",
                        "Markdown String"
                      ]
                    },
                    {
                      "name": "Wraps domain navigation",
                      "collaborators": [
                        "NavigationResult"
                      ]
                    }
                  ],
                  "module": "navigation",
                  "inherits_from": "MarkdownAdapter",
                  "_source_path": "Invoke Bot.Invoke Bot Directly"
                },
                {
                  "name": "BotPath",
                  "responsibilities": [
                    {
                      "name": "Get bot directory",
                      "collaborators": [
                        "Path"
                      ]
                    },
                    {
                      "name": "Get workspace directory",
                      "collaborators": [
                        "Path"
                      ]
                    },
                    {
                      "name": "Get behaviors directory",
                      "collaborators": [
                        "Path"
                      ]
                    },
                    {
                      "name": "Get config path",
                      "collaborators": [
                        "Path"
                      ]
                    },
                    {
                      "name": "Get all paths",
                      "collaborators": [
                        "Dict"
                      ]
                    }
                  ],
                  "module": "bot_path",
                  "_source_path": "Invoke Bot.Invoke Bot Directly"
                },
                {
                  "name": "TTYBotPath",
                  "responsibilities": [
                    {
                      "name": "Serialize bot path to TTY",
                      "collaborators": [
                        "BotPath",
                        "TTY String"
                      ]
                    },
                    {
                      "name": "Format path display",
                      "collaborators": [
                        "Path Name",
                        "Path Value",
                        "TTY String"
                      ]
                    },
                    {
                      "name": "Format all paths",
                      "collaborators": [
                        "BotPath",
                        "TTY String"
                      ]
                    },
                    {
                      "name": "Wraps domain bot path",
                      "collaborators": [
                        "BotPath"
                      ]
                    }
                  ],
                  "module": "bot_path",
                  "inherits_from": "TTYAdapter",
                  "_source_path": "Invoke Bot.Invoke Bot Directly"
                },
                {
                  "name": "JSONBotPath",
                  "responsibilities": [
                    {
                      "name": "Serialize bot path to JSON",
                      "collaborators": [
                        "BotPath",
                        "JSON String"
                      ]
                    },
                    {
                      "name": "Include all paths",
                      "collaborators": [
                        "Dict",
                        "JSON"
                      ]
                    },
                    {
                      "name": "Wraps domain bot path",
                      "collaborators": [
                        "BotPath"
                      ]
                    }
                  ],
                  "module": "bot_path",
                  "inherits_from": "JSONAdapter",
                  "_source_path": "Invoke Bot.Invoke Bot Directly"
                },
                {
                  "name": "MarkdownBotPath",
                  "responsibilities": [
                    {
                      "name": "Serialize bot path to Markdown",
                      "collaborators": [
                        "BotPath",
                        "Markdown String"
                      ]
                    },
                    {
                      "name": "Format paths section",
                      "collaborators": [
                        "BotPath",
                        "Markdown String"
                      ]
                    },
                    {
                      "name": "Wraps domain bot path",
                      "collaborators": [
                        "BotPath"
                      ]
                    }
                  ],
                  "module": "bot_path",
                  "inherits_from": "MarkdownAdapter",
                  "_source_path": "Invoke Bot.Invoke Bot Directly"
                }
              ],
              "test_file": "invoke_bot/navigate_behavior_actions/test_navigate_behavior_and_actions.py",
              "sub_epics": [],
              "story_groups": [
                {
                  "name": "",
                  "sequential_order": 0.0,
                  "type": "and",
                  "connector": null,
                  "behavior": null,
                  "stories": [
                    {
                      "name": "Navigate Sequentially",
                      "sequential_order": 0.0,
                      "connector": "or",
                      "story_type": "user",
                      "users": [
                        "Bot Behavior"
                      ],
                      "test_class": "TestNavigateSequentially",
                      "scenarios": [
                        {
                          "name": "bot.next() moves to next action",
                          "sequential_order": 1.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_bot_next_navigates_to_next_action_in_workflow",
                          "steps": "Given Bot is at clarify action\nWhen bot.next() is called\nThen Bot moves to strategy (next action in workflow)",
                          "test": {
                            "method": "test_bot_next_navigates_to_next_action_in_workflow",
                            "file": "invoke_bot/navigate_behavior_actions/test_navigate_behavior_and_actions.py",
                            "line": 357
                          }
                        },
                        {
                          "name": "bot.next() progresses through workflow sequence",
                          "sequential_order": 2.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_bot_next_progresses_through_entire_workflow",
                          "steps": "Given Bot is at first action\nWhen bot.next() is called multiple times\nThen Bot progresses through clarify -> strategy -> build -> validate -> render",
                          "test": {
                            "method": "test_bot_next_progresses_through_entire_workflow",
                            "file": "invoke_bot/navigate_behavior_actions/test_navigate_behavior_and_actions.py",
                            "line": 379
                          }
                        },
                        {
                          "name": "bot.next() at final action advances to next behavior",
                          "sequential_order": 3.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_bot_next_at_final_action_advances_to_next_behavior",
                          "steps": "Given Bot is at render (final action of shape)\nWhen bot.next() is called\nThen Bot advances to next behavior (discovery) first action (clarify)",
                          "test": {
                            "method": "test_bot_next_at_final_action_advances_to_next_behavior",
                            "file": "invoke_bot/navigate_behavior_actions/test_navigate_behavior_and_actions.py",
                            "line": 404
                          }
                        },
                        {
                          "name": "bot.current() returns current action instructions",
                          "sequential_order": 4.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_bot_current_returns_current_action_instructions",
                          "steps": "Given Bot is at a specific action\nWhen bot.current() is called\nThen Current action instructions object is returned",
                          "test": {
                            "method": "test_bot_current_returns_current_action_instructions",
                            "file": "invoke_bot/navigate_behavior_actions/test_navigate_behavior_and_actions.py",
                            "line": 431
                          }
                        },
                        {
                          "name": "bot.next() respects behavior.json workflow sequence",
                          "sequential_order": 5.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_bot_next_respects_workflow_sequence",
                          "steps": "Given Bot is at strategy (second action)\nWhen bot.next() is called\nThen Bot moves to build (third action), following behavior.json order",
                          "test": {
                            "method": "test_bot_next_respects_workflow_sequence",
                            "file": "invoke_bot/navigate_behavior_actions/test_navigate_behavior_and_actions.py",
                            "line": 458
                          }
                        },
                        {
                          "name": "bot.next() with no behavior selected starts workflow",
                          "sequential_order": 6.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_bot_next_with_no_behavior_starts_at_first_behavior",
                          "steps": "Given No behavior is selected\nWhen bot.next() is called\nThen Bot starts at first behavior (shape), first action (clarify)\nThen NOTE: Currently bot.next() returns an error when no behavior is selected.\nThen This test documents the DESIRED behavior - bot should be smart enough\nThen to start at the beginning of the workflow automatically.",
                          "test": {
                            "method": "test_bot_next_with_no_behavior_starts_at_first_behavior",
                            "file": "invoke_bot/navigate_behavior_actions/test_navigate_behavior_and_actions.py",
                            "line": 480
                          }
                        },
                        {
                          "name": "Can navigate to a specific behavior",
                          "sequential_order": 7.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_navigate_to_behavior",
                          "steps": "Given Bot exists with multiple behaviors\nWhen behaviors.navigate_to('discovery') called\nThen Current behavior is set to discovery",
                          "test": {
                            "method": "test_navigate_to_behavior",
                            "file": "invoke_bot/navigate_behavior_actions/test_navigate_behavior_and_actions.py",
                            "line": 505
                          }
                        },
                        {
                          "name": "Next behavior in sequence can be retrieved",
                          "sequential_order": 8.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_next_behavior_in_sequence_can_be_retrieved",
                          "steps": "Given Bot is at scenarios behavior\nWhen behaviors.next() called\nThen Returns next behavior (tests) with complete structure",
                          "test": {
                            "method": "test_next_behavior_in_sequence_can_be_retrieved",
                            "file": "invoke_bot/navigate_behavior_actions/test_navigate_behavior_and_actions.py",
                            "line": 516
                          }
                        },
                        {
                          "name": "Getting next behavior returns None when at last behavior",
                          "sequential_order": 9.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_get_next_behavior_returns_none_at_end",
                          "steps": "Given Bot is at last behavior in list\nWhen behaviors.next() called\nThen Returns None",
                          "test": {
                            "method": "test_get_next_behavior_returns_none_at_end",
                            "file": "invoke_bot/navigate_behavior_actions/test_navigate_behavior_and_actions.py",
                            "line": 538
                          }
                        },
                        {
                          "name": "Can navigate to a specific action",
                          "sequential_order": 10.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_can_navigate_to_a_specific_action",
                          "steps": "Given Bot is at a behavior with multiple actions\nWhen actions.navigate_to('build') called\nThen Current action is set to build",
                          "test": {
                            "method": "test_can_navigate_to_a_specific_action",
                            "file": "invoke_bot/navigate_behavior_actions/test_navigate_behavior_and_actions.py",
                            "line": 552
                          }
                        },
                        {
                          "name": "Next action in sequence can be retrieved",
                          "sequential_order": 11.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_next_action_in_sequence_can_be_retrieved",
                          "steps": "Given Bot is at clarify action (first action)\nWhen actions.next() called\nThen Returns strategy action (second action)",
                          "test": {
                            "method": "test_next_action_in_sequence_can_be_retrieved",
                            "file": "invoke_bot/navigate_behavior_actions/test_navigate_behavior_and_actions.py",
                            "line": 564
                          }
                        },
                        {
                          "name": "Getting next action returns None when at last action",
                          "sequential_order": 12.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_get_next_action_returns_none_at_end",
                          "steps": "Given Bot is at last action in behavior\nWhen actions.next() called\nThen Returns None",
                          "test": {
                            "method": "test_get_next_action_returns_none_at_end",
                            "file": "invoke_bot/navigate_behavior_actions/test_navigate_behavior_and_actions.py",
                            "line": 579
                          }
                        }
                      ],
                      "acceptance_criteria": [],
                      "behavior": null
                    },
                    {
                      "name": "Navigate To First Behavior Action",
                      "sequential_order": 1.0,
                      "connector": null,
                      "story_type": "system",
                      "users": [
                        "System"
                      ],
                      "test_class": null,
                      "scenarios": [
                        {
                          "name": "Navigate sets current behavior and first action",
                          "sequential_order": 1.0,
                          "type": "",
                          "background": [],
                          "test_method": "test_navigate_sets_current_behavior_and_first_action",
                          "steps": "GIVEN: Bot has behaviors configured\nWHEN: bot.behaviors.navigate_to('shape') is called\nTHEN: bot.behaviors.current.name == 'shape'\nAND: bot.behaviors.current.actions.current_action_name == 'clarify'"
                        }
                      ],
                      "acceptance_criteria": [],
                      "behavior": null
                    },
                    {
                      "name": "Navigate Using CLI Dot Notation",
                      "sequential_order": 2.0,
                      "connector": null,
                      "story_type": "user",
                      "users": [
                        "User"
                      ],
                      "test_class": "TestNavigateToBehaviorActionAndExecute",
                      "scenarios": [
                        {
                          "name": "User navigates with behavior only (no dots)",
                          "sequential_order": 1.0,
                          "type": "",
                          "background": [],
                          "test_method": "test_user_navigates_with_behavior_only",
                          "steps": "GIVEN: CLI is at shape.clarify.instructions\nWHEN: user enters 'discovery'\nTHEN: CLI navigates to discovery.clarify (first action)"
                        },
                        {
                          "name": "User navigates with behavior.action (one dot)",
                          "sequential_order": 2.0,
                          "type": "",
                          "background": [],
                          "test_method": "test_user_navigates_with_behavior_dot_action",
                          "steps": "GIVEN: CLI is at shape.clarify.instructions\nWHEN: user enters 'discovery.build'\nTHEN: CLI navigates to discovery.build.instructions"
                        },
                        {
                          "name": "User navigates with behavior.action.operation (two dots)",
                          "sequential_order": 3.0,
                          "type": "",
                          "background": [],
                          "test_method": "test_user_navigates_with_full_dot_notation",
                          "steps": "GIVEN: CLI is at shape.clarify.instructions\nWHEN: user enters 'discovery.build.instructions'\nTHEN: CLI executes discovery.build.instructions"
                        },
                        {
                          "name": "User enters invalid behavior in dot notation",
                          "sequential_order": 4.0,
                          "type": "",
                          "background": [],
                          "test_method": "test_user_enters_invalid_behavior_in_dot_notation",
                          "steps": "GIVEN: CLI is at shape.clarify.instructions\nWHEN: user enters 'invalid_behavior.build.instructions'\nTHEN: CLI displays error message"
                        }
                      ],
                      "acceptance_criteria": [],
                      "behavior": null
                    },
                    {
                      "name": "Navigate Sequentially Using CLI Commands",
                      "sequential_order": 3.0,
                      "connector": "and",
                      "story_type": "user",
                      "users": [
                        "User"
                      ],
                      "test_class": "TestNavigateSequentially",
                      "scenarios": [
                        {
                          "name": "User navigates with next command",
                          "sequential_order": 1.0,
                          "type": "",
                          "background": [],
                          "test_method": "test_user_navigates_with_next_command",
                          "steps": "GIVEN: CLI is at shape.clarify.instructions\nWHEN: user enters 'next'\nTHEN: CLI navigates to shape.strategy"
                        },
                        {
                          "name": "User navigates with back command",
                          "sequential_order": 2.0,
                          "type": "",
                          "background": [],
                          "test_method": "test_user_navigates_with_back_command",
                          "steps": "GIVEN: CLI is at shape.strategy.instructions\nWHEN: user enters 'back'\nTHEN: CLI navigates to shape.clarify"
                        }
                      ],
                      "acceptance_criteria": [],
                      "behavior": null
                    },
                    {
                      "name": "Navigate Behavior Action Panel",
                      "sequential_order": 4.0,
                      "connector": "and",
                      "story_type": "user",
                      "users": [
                        "User"
                      ],
                      "test_class": "TestNavigateBehaviorAction",
                      "scenarios": [
                        {
                          "name": "",
                          "sequential_order": 1.0,
                          "type": "",
                          "background": [],
                          "test_method": null,
                          "steps": "Given Panel displays behavior hierarchy\nAnd Bot is at shape.clarify\nWhen User clicks on discovery.build action link\nThen Bot navigates to discovery.build\nAnd Panel refreshes to show new current position\nAnd discovery.build is highlighted as current action"
                        },
                        {
                          "name": "",
                          "sequential_order": 2.0,
                          "type": "",
                          "background": [],
                          "test_method": null,
                          "steps": "Given Bot is at shape.clarify\nWhen User clicks next button\nThen Bot navigates to shape.strategy\nAnd Panel displays shape.strategy as current\nAnd Panel displays shape.strategy in-progress indicator"
                        },
                        {
                          "name": "",
                          "sequential_order": 3.0,
                          "type": "",
                          "background": [],
                          "test_method": null,
                          "steps": "Given Bot is at shape.strategy\nWhen User clicks back button\nThen Bot navigates to shape.clarify\nAnd Panel displays shape.clarify as current\nAnd Panel displays shape.clarify in-progress indicator"
                        },
                        {
                          "name": "",
                          "sequential_order": 4.0,
                          "type": "",
                          "background": [],
                          "test_method": null,
                          "steps": "Given Bot is at last action of last behavior\nWhen User views next button\nThen Next button is disabled"
                        }
                      ],
                      "acceptance_criteria": [
                        {
                          "name": "WHEN User clicks back button\nTHEN System  sets previous action as current AND System displays previous action in-progress indicator AND System reruns previous action details",
                          "text": "WHEN User clicks back button\nTHEN System  sets previous action as current AND System displays previous action in-progress indicator AND System reruns previous action details",
                          "sequential_order": 1.0
                        },
                        {
                          "name": "WHEN User clicks next button\nTHEN System sets next action as current AND System displays next action in-progress indicator AND System reruns next action details",
                          "text": "WHEN User clicks next button\nTHEN System sets next action as current AND System displays next action in-progress indicator AND System reruns next action details",
                          "sequential_order": 2.0
                        },
                        {
                          "name": "WHEN User clicks current button\nTHEN System reruns current action details",
                          "text": "WHEN User clicks current button\nTHEN System reruns current action details",
                          "sequential_order": 3.0
                        },
                        {
                          "name": "WHEN User is on the last operation of an action\nTHEN System moves to the next action and selects its first operation",
                          "text": "WHEN User is on the last operation of an action\nTHEN System moves to the next action and selects its first operation",
                          "sequential_order": 4.0
                        },
                        {
                          "name": "WHEN User is on the last action of a behavior\nTHEN System moves to the next behavior and selects its first action and first operation",
                          "text": "WHEN User is on the last action of a behavior\nTHEN System moves to the next behavior and selects its first action and first operation",
                          "sequential_order": 5.0
                        },
                        {
                          "name": "WHEN User is on the last behavior of a bot\nTHEN System disables next behavior navigation",
                          "text": "WHEN User is on the last behavior of a bot\nTHEN System disables next behavior navigation",
                          "sequential_order": 6.0
                        }
                      ],
                      "behavior": null
                    },
                    {
                      "name": "Manage Behaviors Using CLI",
                      "sequential_order": 5.0,
                      "connector": null,
                      "story_type": "user",
                      "users": [
                        "User"
                      ],
                      "test_class": "TestManageBehaviorsUsingCLI",
                      "scenarios": [
                        {
                          "name": "Cli current behavior accessible",
                          "sequential_order": 1.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_cli_current_behavior_accessible",
                          "steps": "",
                          "test": {
                            "method": "test_cli_current_behavior_accessible",
                            "file": "invoke_bot/navigate_behavior_actions/test_navigate_behavior_and_actions.py",
                            "line": 609
                          }
                        },
                        {
                          "name": "Cli navigate to behavior via command",
                          "sequential_order": 2.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_cli_navigate_to_behavior_via_command",
                          "steps": "",
                          "test": {
                            "method": "test_cli_navigate_to_behavior_via_command",
                            "file": "invoke_bot/navigate_behavior_actions/test_navigate_behavior_and_actions.py",
                            "line": 623
                          }
                        },
                        {
                          "name": "Cli execute current behavior action",
                          "sequential_order": 3.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_cli_execute_current_behavior_action",
                          "steps": "",
                          "test": {
                            "method": "test_cli_execute_current_behavior_action",
                            "file": "invoke_bot/navigate_behavior_actions/test_navigate_behavior_and_actions.py",
                            "line": 636
                          }
                        },
                        {
                          "name": "Cli find behavior by name",
                          "sequential_order": 4.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_cli_find_behavior_by_name",
                          "steps": "",
                          "test": {
                            "method": "test_cli_find_behavior_by_name",
                            "file": "invoke_bot/navigate_behavior_actions/test_navigate_behavior_and_actions.py",
                            "line": 650
                          }
                        },
                        {
                          "name": "Cli list all behaviors",
                          "sequential_order": 5.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_cli_list_all_behaviors",
                          "steps": "",
                          "test": {
                            "method": "test_cli_list_all_behaviors",
                            "file": "invoke_bot/navigate_behavior_actions/test_navigate_behavior_and_actions.py",
                            "line": 662
                          }
                        },
                        {
                          "name": "Cli find action by name via command",
                          "sequential_order": 6.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_cli_find_action_by_name_via_command",
                          "steps": "",
                          "test": {
                            "method": "test_cli_find_action_by_name_via_command",
                            "file": "invoke_bot/navigate_behavior_actions/test_navigate_behavior_and_actions.py",
                            "line": 676
                          }
                        }
                      ],
                      "acceptance_criteria": [],
                      "behavior": null
                    },
                    {
                      "name": "Navigate To Behavior Action And Execute Using CLI",
                      "sequential_order": 6.0,
                      "connector": null,
                      "story_type": "user",
                      "users": [
                        "User"
                      ],
                      "test_class": "TestNavigateToBehaviorActionAndExecuteUsingCLI",
                      "scenarios": [
                        {
                          "name": "Cli execute behavior with action parameter",
                          "sequential_order": 1.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_cli_execute_behavior_with_action_parameter",
                          "steps": "",
                          "test": {
                            "method": "test_cli_execute_behavior_with_action_parameter",
                            "file": "invoke_bot/navigate_behavior_actions/test_navigate_behavior_and_actions.py",
                            "line": 703
                          }
                        },
                        {
                          "name": "Cli execute behavior without action uses current",
                          "sequential_order": 2.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_cli_execute_behavior_without_action_uses_current",
                          "steps": "",
                          "test": {
                            "method": "test_cli_execute_behavior_without_action_uses_current",
                            "file": "invoke_bot/navigate_behavior_actions/test_navigate_behavior_and_actions.py",
                            "line": 716
                          }
                        },
                        {
                          "name": "Cli execute behavior with no state starts at first",
                          "sequential_order": 3.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_cli_execute_behavior_with_no_state_starts_at_first",
                          "steps": "",
                          "test": {
                            "method": "test_cli_execute_behavior_with_no_state_starts_at_first",
                            "file": "invoke_bot/navigate_behavior_actions/test_navigate_behavior_and_actions.py",
                            "line": 729
                          }
                        },
                        {
                          "name": "Cli workflow order determines next action",
                          "sequential_order": 4.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_cli_workflow_order_determines_next_action",
                          "steps": "",
                          "test": {
                            "method": "test_cli_workflow_order_determines_next_action",
                            "file": "invoke_bot/navigate_behavior_actions/test_navigate_behavior_and_actions.py",
                            "line": 743
                          }
                        },
                        {
                          "name": "Cli starts at first action when no completed",
                          "sequential_order": 5.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_cli_starts_at_first_action_when_no_completed",
                          "steps": "",
                          "test": {
                            "method": "test_cli_starts_at_first_action_when_no_completed",
                            "file": "invoke_bot/navigate_behavior_actions/test_navigate_behavior_and_actions.py",
                            "line": 757
                          }
                        },
                        {
                          "name": "Cli falls back to completed actions list",
                          "sequential_order": 6.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_cli_falls_back_to_completed_actions_list",
                          "steps": "",
                          "test": {
                            "method": "test_cli_falls_back_to_completed_actions_list",
                            "file": "invoke_bot/navigate_behavior_actions/test_navigate_behavior_and_actions.py",
                            "line": 770
                          }
                        },
                        {
                          "name": "Cli different behaviors have different workflows",
                          "sequential_order": 7.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_cli_different_behaviors_have_different_workflows",
                          "steps": "",
                          "test": {
                            "method": "test_cli_different_behaviors_have_different_workflows",
                            "file": "invoke_bot/navigate_behavior_actions/test_navigate_behavior_and_actions.py",
                            "line": 789
                          }
                        }
                      ],
                      "acceptance_criteria": [],
                      "behavior": null
                    },
                    {
                      "name": "Navigate Sequentially Using CLI",
                      "sequential_order": 7.0,
                      "connector": null,
                      "story_type": "user",
                      "users": [
                        "User"
                      ],
                      "test_class": "TestNavigateSequentiallyUsingCLI",
                      "scenarios": [
                        {
                          "name": "Cli next command navigates to next action",
                          "sequential_order": 1.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_cli_next_command_navigates_to_next_action",
                          "steps": "",
                          "test": {
                            "method": "test_cli_next_command_navigates_to_next_action",
                            "file": "invoke_bot/navigate_behavior_actions/test_navigate_behavior_and_actions.py",
                            "line": 823
                          }
                        },
                        {
                          "name": "Cli next progresses through entire workflow",
                          "sequential_order": 2.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_cli_next_progresses_through_entire_workflow",
                          "steps": "",
                          "test": {
                            "method": "test_cli_next_progresses_through_entire_workflow",
                            "file": "invoke_bot/navigate_behavior_actions/test_navigate_behavior_and_actions.py",
                            "line": 838
                          }
                        },
                        {
                          "name": "Cli next at final action advances to next behavior",
                          "sequential_order": 3.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_cli_next_at_final_action_advances_to_next_behavior",
                          "steps": "",
                          "test": {
                            "method": "test_cli_next_at_final_action_advances_to_next_behavior",
                            "file": "invoke_bot/navigate_behavior_actions/test_navigate_behavior_and_actions.py",
                            "line": 857
                          }
                        },
                        {
                          "name": "Cli status shows current position",
                          "sequential_order": 4.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_cli_status_shows_current_position",
                          "steps": "",
                          "test": {
                            "method": "test_cli_status_shows_current_position",
                            "file": "invoke_bot/navigate_behavior_actions/test_navigate_behavior_and_actions.py",
                            "line": 872
                          }
                        },
                        {
                          "name": "Cli next respects behavior json workflow",
                          "sequential_order": 5.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_cli_next_respects_behavior_json_workflow",
                          "steps": "",
                          "test": {
                            "method": "test_cli_next_respects_behavior_json_workflow",
                            "file": "invoke_bot/navigate_behavior_actions/test_navigate_behavior_and_actions.py",
                            "line": 886
                          }
                        },
                        {
                          "name": "Cli navigate to specific behavior via command",
                          "sequential_order": 6.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_cli_navigate_to_specific_behavior_via_command",
                          "steps": "",
                          "test": {
                            "method": "test_cli_navigate_to_specific_behavior_via_command",
                            "file": "invoke_bot/navigate_behavior_actions/test_navigate_behavior_and_actions.py",
                            "line": 900
                          }
                        },
                        {
                          "name": "Cli back command navigates to previous action",
                          "sequential_order": 7.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_cli_back_command_navigates_to_previous_action",
                          "steps": "",
                          "test": {
                            "method": "test_cli_back_command_navigates_to_previous_action",
                            "file": "invoke_bot/navigate_behavior_actions/test_navigate_behavior_and_actions.py",
                            "line": 912
                          }
                        },
                        {
                          "name": "Cli pos command shows current position",
                          "sequential_order": 8.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_cli_pos_command_shows_current_position",
                          "steps": "",
                          "test": {
                            "method": "test_cli_pos_command_shows_current_position",
                            "file": "invoke_bot/navigate_behavior_actions/test_navigate_behavior_and_actions.py",
                            "line": 925
                          }
                        }
                      ],
                      "acceptance_criteria": [],
                      "behavior": null
                    }
                  ]
                }
              ]
            },
            {
              "name": "Perform Behavior Action In Bot Workflow",
              "sequential_order": 1.0,
              "behavior": null,
              "domain_concepts": [
                {
                  "name": "Base Action",
                  "responsibilities": [
                    {
                      "name": "Inject Instructions",
                      "collaborators": [
                        "Behavior"
                      ]
                    },
                    {
                      "name": "Load Relevant Content + Inject Into Instructions",
                      "collaborators": [
                        "Content"
                      ]
                    },
                    {
                      "name": "Save content changes",
                      "collaborators": [
                        "Content"
                      ]
                    },
                    {
                      "name": "Get save file",
                      "collaborators": [
                        "Path"
                      ]
                    },
                    {
                      "name": "Execution gates on save file watch",
                      "collaborators": [
                        "SaveFileWatcher",
                        "Debounce",
                        "Next Action"
                      ]
                    }
                  ],
                  "module": "actions",
                  "_source_path": "Invoke Bot.Invoke Bot Directly"
                },
                {
                  "name": "SaveFileWatcher",
                  "responsibilities": [
                    {
                      "name": "Watch save file for writes",
                      "collaborators": [
                        "Path",
                        "File System"
                      ]
                    },
                    {
                      "name": "Report when file stable past debounce",
                      "collaborators": [
                        "Path",
                        "Debounce",
                        "Boolean"
                      ]
                    }
                  ],
                  "module": "actions",
                  "_source_path": "Invoke Bot.Invoke Bot Directly"
                },
                {
                  "name": "ActionStateManager",
                  "responsibilities": [
                    {
                      "name": "Get state file path",
                      "collaborators": [
                        "Path"
                      ]
                    },
                    {
                      "name": "Load or create state",
                      "collaborators": [
                        "State File",
                        "Dict"
                      ]
                    },
                    {
                      "name": "Save state",
                      "collaborators": [
                        "Action",
                        "State File"
                      ]
                    },
                    {
                      "name": "Load state",
                      "collaborators": [
                        "Actions List",
                        "Current Index"
                      ]
                    },
                    {
                      "name": "Find action index",
                      "collaborators": [
                        "Actions List",
                        "Action Name",
                        "Integer"
                      ]
                    },
                    {
                      "name": "Filter completed actions",
                      "collaborators": [
                        "Completed Actions",
                        "Target Index",
                        "Actions List",
                        "List"
                      ]
                    }
                  ],
                  "module": "actions",
                  "_source_path": "Invoke Bot.Invoke Bot Directly"
                },
                {
                  "name": "TTYAction",
                  "responsibilities": [
                    {
                      "name": "Serialize action to TTY",
                      "collaborators": [
                        "Action",
                        "String"
                      ]
                    },
                    {
                      "name": "Format action line",
                      "collaborators": [
                        "Action Name",
                        "Marker",
                        "Indent"
                      ]
                    },
                    {
                      "name": "Wraps domain action",
                      "collaborators": [
                        "Action"
                      ]
                    }
                  ],
                  "module": "actions",
                  "inherits_from": "TTYProgressAdapter",
                  "_source_path": "Invoke Bot.Invoke Bot Directly"
                },
                {
                  "name": "JSONAction",
                  "responsibilities": [
                    {
                      "name": "Serialize action to JSON dict",
                      "collaborators": [
                        "Action",
                        "Dict"
                      ]
                    },
                    {
                      "name": "Include action metadata",
                      "collaborators": [
                        "Name",
                        "Description",
                        "Status"
                      ]
                    },
                    {
                      "name": "Wraps domain action",
                      "collaborators": [
                        "Action"
                      ]
                    }
                  ],
                  "module": "actions",
                  "inherits_from": "JSONProgressAdapter",
                  "_source_path": "Invoke Bot.Invoke Bot Directly"
                },
                {
                  "name": "MarkdownAction",
                  "responsibilities": [
                    {
                      "name": "Serialize action to Markdown",
                      "collaborators": [
                        "Action",
                        "String"
                      ]
                    },
                    {
                      "name": "Format action documentation",
                      "collaborators": [
                        "Action Name",
                        "Description",
                        "Subsection"
                      ]
                    },
                    {
                      "name": "Wraps domain action",
                      "collaborators": [
                        "Action"
                      ]
                    }
                  ],
                  "module": "actions",
                  "inherits_from": "MarkdownProgressAdapter",
                  "_source_path": "Invoke Bot.Invoke Bot Directly"
                }
              ],
              "test_file": "invoke_bot/navigate_behavior_actions/test_perform_behavior_action_in_bot_workflow.py",
              "sub_epics": [],
              "story_groups": [
                {
                  "name": "",
                  "sequential_order": 0.0,
                  "type": "and",
                  "connector": null,
                  "behavior": null,
                  "stories": [
                    {
                      "name": "Execute Behavior Action",
                      "sequential_order": 0.0,
                      "connector": "or",
                      "story_type": "user",
                      "users": [
                        "Bot Behavior"
                      ],
                      "test_class": "TestNavigateToBehaviorActionAndExecute",
                      "scenarios": [
                        {
                          "name": "Execute Behavior with action parameter",
                          "sequential_order": 1.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_execute_behavior_with_action_parameter",
                          "steps": "Given Bot has behavior 'shape' with action 'clarify'\nWhen Bot.execute_behavior('shape', action='clarify') is called\nThen Action executes and returns BotResult"
                        },
                        {
                          "name": "Execute behavior without action parameter forwards to current action",
                          "sequential_order": 2.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_execute_behavior_without_action_forwards_to_current",
                          "steps": "Given Bot has behavior 'shape' and workflow state shows current_action='strategy'\nWhen Bot.execute_behavior('shape') is called (no action parameter)\nThen Forwards to current action (strategy)"
                        },
                        {
                          "name": "Execute behavior executes directly when no workflow state exists",
                          "sequential_order": 3.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_execute_behavior_handles_entry_workflow_when_no_state",
                          "steps": "Given No behavior_action_state.json exists\nWhen Bot.execute_behavior('shape') is called\nThen Executes directly (entry workflow handling was in removed wrapper)"
                        },
                        {
                          "name": "Behavior action order determines next action from current_action",
                          "sequential_order": 4.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_behavior_action_order_determines_next_action_from_current_action",
                          "steps": ""
                        },
                        {
                          "name": "No completed actions yet",
                          "sequential_order": 5.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_behavior_action_order_starts_at_first_action_when_no_completed_actions",
                          "steps": ""
                        },
                        {
                          "name": "Behavior action order falls back to completed_actions when current_action is missing",
                          "sequential_order": 6.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_behavior_action_order_falls_back_to_completed_actions_when_current_action_missing",
                          "steps": ""
                        },
                        {
                          "name": "No behavior_action_state.json file exists (fresh start)",
                          "sequential_order": 7.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_behavior_action_order_starts_at_first_action_when_no_state_file_exists",
                          "steps": ""
                        },
                        {
                          "name": "Behavior loads workflow order from behaviors/{behavior_name}/behavior.json",
                          "sequential_order": 8.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_behavior_loads_workflow_order_from_behavior_specific_actions_workflow",
                          "steps": ""
                        },
                        {
                          "name": "Different behaviors can have different action orders",
                          "sequential_order": 9.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_different_behaviors_can_have_different_action_orders",
                          "steps": ""
                        },
                        {
                          "name": "Workflow transitions are built correctly from behavior.json",
                          "sequential_order": 10.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_workflow_transitions_built_correctly_from_actions_workflow_json",
                          "steps": ""
                        }
                      ],
                      "acceptance_criteria": [],
                      "behavior": null
                    },
                    {
                      "name": "Execute Behavior Action Panel",
                      "sequential_order": 1.0,
                      "connector": "and",
                      "story_type": "user",
                      "users": [
                        "User"
                      ],
                      "test_class": "TestExecuteBehaviorAction",
                      "scenarios": [
                        {
                          "name": "",
                          "sequential_order": 1.0,
                          "type": "",
                          "background": [],
                          "test_method": null,
                          "steps": "Given Panel displays behavior hierarchy\nAnd Bot is at shape.clarify\nWhen User clicks discovery behavior\nThen Bot navigates to discovery.clarify (first action)\nAnd Panel displays discovery behavior as current\nAnd Panel expands discovery behavior\nAnd Panel displays discovery.clarify as current action\nAnd Bot executes discovery.clarify.instructions operation"
                        },
                        {
                          "name": "",
                          "sequential_order": 2.0,
                          "type": "",
                          "background": [],
                          "test_method": null,
                          "steps": "Given Panel displays expanded shape behavior\nAnd Bot is at shape.clarify\nWhen User clicks shape.strategy action\nThen Bot navigates to shape.strategy\nAnd Panel displays shape.strategy as current action\nAnd Panel expands shape.strategy showing operations\nAnd Bot executes shape.strategy.instructions operation"
                        },
                        {
                          "name": "",
                          "sequential_order": 3.0,
                          "type": "",
                          "background": [],
                          "test_method": null,
                          "steps": "Given Panel displays expanded shape.clarify action\nAnd Operations are visible (instructions, execute, confirm)\nWhen User clicks clarify.confirm operation\nThen Bot executes clarify.confirm operation\nAnd Panel displays confirm operation as current"
                        }
                      ],
                      "acceptance_criteria": [
                        {
                          "name": "WHEN User clicks behavior\nTHEN System displays that behavior as current AND System expands behavior AND System expands first action to display operations AND System sets first action as current AND System sets first operation as current AND System executes first operation of first action of that behavior",
                          "text": "WHEN User clicks behavior\nTHEN System displays that behavior as current AND System expands behavior AND System expands first action to display operations AND System sets first action as current AND System sets first operation as current AND System executes first operation of first action of that behavior",
                          "sequential_order": 1.0
                        },
                        {
                          "name": "WHEN User clicks action\nTHEN System displays that action as current AND System expands action to display operations AND System sets first operation as current AND System executes first operation of that action",
                          "text": "WHEN User clicks action\nTHEN System displays that action as current AND System expands action to display operations AND System sets first operation as current AND System executes first operation of that action",
                          "sequential_order": 2.0
                        }
                      ],
                      "behavior": null
                    },
                    {
                      "name": "Update and Find Current Behavior",
                      "sequential_order": 2.0,
                      "connector": "or",
                      "story_type": "user",
                      "users": [
                        "Bot Behavior"
                      ],
                      "test_class": "TestManageBehaviors",
                      "scenarios": [
                        {
                          "name": "Behaviors current property returns current behavior",
                          "sequential_order": 1.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_behaviors_current_property_returns_current_behavior",
                          "steps": "Given Behaviors collection with current behavior set\nWhen current property accessed\nThen Returns current Behavior object"
                        },
                        {
                          "name": "Behaviors navigate to behavior updates current behavior",
                          "sequential_order": 2.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_behaviors_navigate_to_behavior_updates_current_behavior",
                          "steps": "Given Behaviors collection\nWhen navigate_to('discovery') called\nThen Current behavior updated to 'discovery'"
                        },
                        {
                          "name": "Behaviors close current marks behavior and action complete",
                          "sequential_order": 3.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_behaviors_close_current_marks_behavior_and_action_complete",
                          "steps": "Given Behaviors collection with current behavior and current action\nWhen close_current() called\nThen Current behavior marked complete and current action closed"
                        },
                        {
                          "name": "Behaviors execute current executes current behavior",
                          "sequential_order": 4.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_behaviors_execute_current_executes_current_behavior",
                          "steps": "Given Behaviors collection with current behavior\nWhen execute_current() called\nThen Current behavior's execute() method called"
                        },
                        {
                          "name": "Behavior can be found by name when it exists.",
                          "sequential_order": 5.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_find_behavior_by_name",
                          "steps": ""
                        },
                        {
                          "name": "Finding behavior by name returns None when behavior doesn't exist.",
                          "sequential_order": 6.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_find_behavior_returns_none_when_not_found",
                          "steps": ""
                        },
                        {
                          "name": "All behaviors can be iterated.",
                          "sequential_order": 7.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_iterate_all_behaviors",
                          "steps": ""
                        },
                        {
                          "name": "Can check if a behavior exists.",
                          "sequential_order": 8.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_check_behavior_exists",
                          "steps": ""
                        },
                        {
                          "name": "Action can be found by name when it exists.",
                          "sequential_order": 9.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_action_can_be_found_by_name_when_it_exists",
                          "steps": ""
                        },
                        {
                          "name": "Finding action by name returns None when action doesn't exist.",
                          "sequential_order": 10.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_find_action_returns_none_when_not_found",
                          "steps": ""
                        },
                        {
                          "name": "Action can be found by order when it exists.",
                          "sequential_order": 11.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_find_action_by_order",
                          "steps": ""
                        },
                        {
                          "name": "All actions can be iterated.",
                          "sequential_order": 12.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_all_actions_can_be_iterated",
                          "steps": ""
                        }
                      ],
                      "acceptance_criteria": [],
                      "behavior": null
                    },
                    {
                      "name": "Persist Behavior Action State",
                      "sequential_order": 3.0,
                      "connector": "or",
                      "story_type": "user",
                      "users": [
                        "Bot Behavior"
                      ],
                      "test_class": "TestManageBehaviorActionState",
                      "scenarios": [
                        {
                          "name": "Current behavior state is persisted to behavior_action_state.json.",
                          "sequential_order": 1.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_save_current_behavior_state",
                          "steps": ""
                        },
                        {
                          "name": "Current behavior state is restored from behavior_action_state.json.",
                          "sequential_order": 2.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_load_behavior_state_from_file",
                          "steps": ""
                        },
                        {
                          "name": "Current action state is persisted to behavior_action_state.json.",
                          "sequential_order": 3.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_save_current_action_state",
                          "steps": ""
                        },
                        {
                          "name": "Current action state is restored from behavior_action_state.json.",
                          "sequential_order": 4.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_load_action_state_from_file",
                          "steps": ""
                        },
                        {
                          "name": "Closing current action marks it complete and moves to next.",
                          "sequential_order": 5.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_close_current_action",
                          "steps": ""
                        }
                      ],
                      "acceptance_criteria": [],
                      "behavior": null
                    },
                    {
                      "name": "Track Activity For Workspace",
                      "sequential_order": 4.0,
                      "connector": "or",
                      "story_type": "user",
                      "users": [
                        "Bot Behavior"
                      ],
                      "test_class": "TestTrackActivityForWorkspace",
                      "scenarios": [
                        {
                          "name": "Activity logged to workspace_area not bot area",
                          "sequential_order": 1.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_activity_logged_to_workspace_area_not_bot_area",
                          "steps": "Given WORKING_AREA environment variable specifies workspace_area\nWhen Activity logger creates entry\nThen Activity log file is at: workspace_area/activity_log.json\nThen And action 'gather_context' executes\nThen And Activity log is NOT at: agile_bot/bots/story_bot/activity_log.json\nThen And Activity log location matches workspace_area from WORKING_AREA environment variable",
                          "test": {
                            "method": "test_activity_logged_to_workspace_area_not_bot_area",
                            "file": "invoke_bot/navigate_behavior_actions/test_perform_behavior_action_in_bot_workflow.py",
                            "line": 154
                          }
                        },
                        {
                          "name": "Activity log contains correct entry",
                          "sequential_order": 2.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_activity_log_contains_correct_entry",
                          "steps": "Given action 'gather_context' executes in behavior 'discovery'\nWhen Activity logger creates entry\nThen Activity log entry includes:\nThen - action_state='story_bot.discovery.gather_context'\nThen - timestamp\nThen - Full path includes bot_name.behavior.action",
                          "test": {
                            "method": "test_activity_log_contains_correct_entry",
                            "file": "invoke_bot/navigate_behavior_actions/test_perform_behavior_action_in_bot_workflow.py",
                            "line": 182
                          }
                        }
                      ],
                      "acceptance_criteria": [],
                      "behavior": null
                    },
                    {
                      "name": "Track Action Start",
                      "sequential_order": 5.0,
                      "connector": "and",
                      "story_type": "user",
                      "users": [
                        "Bot Behavior"
                      ],
                      "test_class": "TestTrackActionStart",
                      "scenarios": [
                        {
                          "name": "Activity logging infrastructure exists",
                          "sequential_order": 1.0,
                          "type": "",
                          "background": [],
                          "test_method": "test_activity_log_exists_after_action_execution",
                          "steps": "Given Bot is ready to execute action\nWhen Action starts execution\nThen Activity log file exists or activity is trackable"
                        }
                      ],
                      "acceptance_criteria": [
                        {
                          "name": "WHEN Action starts execution\nTHEN Activity entry is created with timestamp and action state AND Entry appended to activity_log.json",
                          "text": "WHEN Action starts execution\nTHEN Activity entry is created with timestamp and action state AND Entry appended to activity_log.json",
                          "sequential_order": 1.0
                        }
                      ],
                      "behavior": null
                    },
                    {
                      "name": "Track Action Completion",
                      "sequential_order": 6.0,
                      "connector": "and",
                      "story_type": "user",
                      "users": [
                        "Bot Behavior"
                      ],
                      "test_class": "TestTrackActionCompletion",
                      "scenarios": [
                        {
                          "name": "Action completion tracking",
                          "sequential_order": 1.0,
                          "type": "",
                          "background": [],
                          "test_method": "test_action_completion_is_tracked",
                          "steps": "Given Action has executed\nWhen Action completes\nThen Completion is tracked in completed_actions"
                        }
                      ],
                      "acceptance_criteria": [
                        {
                          "name": "WHEN Action completes execution\nTHEN Activity entry is updated with outputs and duration AND Entry appended to activity_log.json",
                          "text": "WHEN Action completes execution\nTHEN Activity entry is updated with outputs and duration AND Entry appended to activity_log.json",
                          "sequential_order": 1.0
                        }
                      ],
                      "behavior": null
                    },
                    {
                      "name": "Proceed across End To End Workflow",
                      "sequential_order": 7.0,
                      "connector": "or",
                      "story_type": "user",
                      "users": [
                        "Bot Behavior"
                      ],
                      "test_class": "TestExecuteEndToEndWorkflow",
                      "scenarios": [
                        {
                          "name": "Complete Workflow Progresses Through Single Behavior",
                          "sequential_order": 1.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_complete_workflow_progresses_through_single_behavior",
                          "steps": "",
                          "test": {
                            "method": "test_complete_workflow_progresses_through_single_behavior",
                            "file": "invoke_bot/navigate_behavior_actions/test_perform_behavior_action_in_bot_workflow.py",
                            "line": 64
                          }
                        },
                        {
                          "name": "Complete Workflow Progresses Across Multiple Behaviors",
                          "sequential_order": 2.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_complete_workflow_progresses_across_multiple_behaviors",
                          "steps": "",
                          "test": {
                            "method": "test_complete_workflow_progresses_across_multiple_behaviors",
                            "file": "invoke_bot/navigate_behavior_actions/test_perform_behavior_action_in_bot_workflow.py",
                            "line": 109
                          }
                        }
                      ],
                      "acceptance_criteria": [],
                      "behavior": null
                    },
                    {
                      "name": "Record Activity Metrics And Paths",
                      "sequential_order": 8.0,
                      "connector": "and",
                      "story_type": "user",
                      "users": [
                        "Bot Behavior"
                      ],
                      "test_class": "TestRecordActivityMetricsAndPaths",
                      "scenarios": [],
                      "acceptance_criteria": [
                        {
                          "name": "WHEN Activity is tracked\nTHEN Metrics include file counts and content types AND Paths include file paths not content AND Activity log captures metrics and paths",
                          "text": "WHEN Activity is tracked\nTHEN Metrics include file counts and content types AND Paths include file paths not content AND Activity log captures metrics and paths",
                          "sequential_order": 1.0
                        }
                      ],
                      "behavior": null
                    },
                    {
                      "name": "Re-execute Current Operation Using CLI",
                      "sequential_order": 9.0,
                      "connector": "and",
                      "story_type": "user",
                      "users": [
                        "User"
                      ],
                      "test_class": "TestReExecuteCurrentOperationUsingCLI",
                      "scenarios": [
                        {
                          "name": "User re-executes current instructions",
                          "sequential_order": 1.0,
                          "type": "",
                          "background": [],
                          "test_method": "test_user_re_executes_current_instructions",
                          "steps": "GIVEN: CLI is at shape.build.instructions\nWHEN: user enters 'current'\nTHEN: CLI re-executes current instructions"
                        }
                      ],
                      "acceptance_criteria": [],
                      "behavior": null
                    },
                    {
                      "name": "Execute End To End Workflow Using CLI",
                      "sequential_order": 10.0,
                      "connector": null,
                      "story_type": "user",
                      "users": [
                        "User"
                      ],
                      "test_class": "TestExecuteEndToEndWorkflowUsingCLI",
                      "scenarios": [
                        {
                          "name": "Cli complete workflow through single behavior",
                          "sequential_order": 1.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_cli_complete_workflow_through_single_behavior",
                          "steps": "",
                          "test": {
                            "method": "test_cli_complete_workflow_through_single_behavior",
                            "file": "invoke_bot/navigate_behavior_actions/test_perform_behavior_action_in_bot_workflow.py",
                            "line": 216
                          }
                        },
                        {
                          "name": "Cli complete workflow across multiple behaviors",
                          "sequential_order": 2.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_cli_complete_workflow_across_multiple_behaviors",
                          "steps": "",
                          "test": {
                            "method": "test_cli_complete_workflow_across_multiple_behaviors",
                            "file": "invoke_bot/navigate_behavior_actions/test_perform_behavior_action_in_bot_workflow.py",
                            "line": 237
                          }
                        }
                      ],
                      "acceptance_criteria": [],
                      "behavior": null
                    },
                    {
                      "name": "Conssolidate and Expand Behavior Aciton Queies",
                      "sequential_order": 11.0,
                      "connector": null,
                      "story_type": "user",
                      "users": [],
                      "test_class": null,
                      "scenarios": [],
                      "acceptance_criteria": [],
                      "behavior": null
                    },
                    {
                      "name": "Configure Action Execution",
                      "sequential_order": 12.0,
                      "connector": null,
                      "story_type": "user",
                      "users": [],
                      "test_class": null,
                      "scenarios": [
                        {
                          "name": "Panel shows actions and execution toggle per action",
                          "sequential_order": 1.0,
                          "type": "happy_path",
                          "background": [],
                          "steps": "Given a Behavior is loaded with at least one Action\nWhen User opens that Behavior in Panel\nThen Panel invokes CLI and CLI invokes Bot and Bot loads Behavior and Actions\nAnd Panel shows the list of Actions for that Behavior and a toggle button group (Auto | Skip | Manual) per Action",
                          "context_source": {"file": "behavior-action-ux-improvements-exploration.md", "section": "Configure Action Execution"}
                        },
                        {
                          "name": "User sets action to Skip via toggle and executes then Panel skips that action",
                          "sequential_order": 2.0,
                          "type": "happy_path",
                          "background": [],
                          "steps": "Given a Behavior with at least two Actions is selected in Panel\nAnd the second Action has execution set to Skip\nWhen User clicks Submit Instructions\nThen Panel invokes CLI and CLI invokes Bot and Bot runs the Behavior and skips that action",
                          "context_source": {"file": "behavior-action-ux-improvements-exploration.md", "section": "Configure Action Execution"}
                        },
                        {
                          "name": "User sets action to Auto via toggle and executes then Panel runs it after previous completes",
                          "sequential_order": 3.0,
                          "type": "happy_path",
                          "background": [],
                          "steps": "Given a Behavior with at least two Actions is selected in Panel\nAnd the second Action has execution set to Auto\nWhen User clicks Submit Instructions\nThen Panel invokes CLI and CLI invokes Bot and Bot runs the Behavior and executes that action as soon as previous action completes",
                          "context_source": {"file": "behavior-action-ux-improvements-exploration.md", "section": "Configure Action Execution"}
                        },
                        {
                          "name": "User sets action to Manual via toggle and executes then Panel requires Execute click",
                          "sequential_order": 4.0,
                          "type": "happy_path",
                          "background": [],
                          "steps": "Given a Behavior with at least two Actions is selected in Panel\nAnd the second Action has execution set to Manual\nWhen User clicks Submit Instructions\nThen Panel invokes CLI and CLI invokes Bot and Bot runs the Behavior and requires User to submit instructions for that action",
                          "context_source": {"file": "behavior-action-ux-improvements-exploration.md", "section": "Configure Action Execution"}
                        },
                        {
                          "name": "User sets action execution from Panel then Panel invokes CLI and CLI persists",
                          "sequential_order": 5.0,
                          "type": "happy_path",
                          "background": [],
                          "steps": "Given a Behavior and action are selected in Panel (e.g. shape.clarify)\nWhen User sets that action execution to auto via Panel toggle\nThen Panel invokes CLI and CLI invokes Bot (e.g. cli.behaviors.shape.clarify.set_execution auto)\nAnd Bot persists the execution setting for that Behavior and Action\nAnd CLI reports completion and Panel watches CLI for status and shows completion or failed",
                          "context_source": {"file": "behavior-action-ux-improvements-exploration.md", "section": "Configure Action Execution"}
                        },
                        {
                          "name": "User runs set_execution from CLI then CLI persists and reports to terminal",
                          "sequential_order": 6.0,
                          "type": "happy_path",
                          "background": [],
                          "steps": "Given User is in CLI (no Panel)\nWhen User runs cli.behaviors.shape.clarify.set_execution auto\nThen CLI invokes Bot and Bot persists that Behavior and Action to auto execution\nAnd CLI reports completion or failed to the terminal so the flow works without Panel",
                          "context_source": {"file": "behavior-action-ux-improvements-exploration.md", "section": "Configure Action Execution"}
                        },
                        {
                          "name": "Persisted execution setting is used when User runs the behavior",
                          "sequential_order": 7.0,
                          "type": "happy_path",
                          "background": [],
                          "steps": "Given User has run cli.behaviors.shape.clarify.set_execution skip\nWhen User runs the clarify action (Panel invokes CLI and CLI invokes Bot, or User runs from CLI)\nThen Bot uses the persisted setting for that Behavior and Action and skips that action",
                          "context_source": {"type": "inferred", "basis": "Persistence of execution setting"}
                        },
                        {
                          "name": "When Clarification is Auto and User executes behavior then it runs automatically",
                          "sequential_order": 8.0,
                          "type": "happy_path",
                          "background": [],
                          "steps": "Given a Behavior has Clarification action\nAnd Clarification has execution set to Auto\nWhen User executes that Behavior\nThen Panel invokes CLI and CLI invokes Bot and Bot runs the Behavior and runs Clarification automatically without User clicking Execute",
                          "context_source": {"type": "inferred", "basis": "Auto execution runs action when behavior is executed"}
                        },
                        {
                          "name": "When Strategy is Auto and User executes behavior then it runs automatically",
                          "sequential_order": 9.0,
                          "type": "happy_path",
                          "background": [],
                          "steps": "Given a Behavior has Strategy action and previous action (e.g. Clarification) has a save_file property (e.g. clarification.json)\nAnd Strategy has execution set to Auto\nWhen User executes that Behavior\nThen Panel invokes CLI and CLI invokes Bot and Bot runs the current action like normal and when that action saves to its save_file CLI debounce-checks then Bot runs next action (Strategy)\nAnd Panel watches CLI for status",
                          "context_source": {"type": "inferred", "basis": "Chained auto: run action, check action save_file (property), debounce, run next"}
                        },
                        {
                          "name": "When last action of behavior is Auto then Auto does nothing",
                          "sequential_order": 10.0,
                          "type": "happy_path",
                          "background": [],
                          "steps": "Given a Behavior whose last action (e.g. render) has execution set to Auto\nWhen User executes that Behavior and Bot reaches that last action\nThen Bot runs that action like normal\nAnd there is no next action so Auto does nothing (no chained run)",
                          "context_source": {"type": "inferred", "basis": "Last action of behavior with Auto does nothing"}
                        },
                        {
                          "name": "Combined instructions deduplicate shared content and include combining text",
                          "sequential_order": 11.0,
                          "type": "happy_path",
                          "background": [],
                          "steps": "Given a Behavior with actions Clarify, Strategy, Build in order\nAnd Clarify and Strategy have execution set to Combine (combine_next)\nAnd User navigates to shape.clarify and submits instructions\nWhen Bot combines instructions for Clarify and Strategy\nThen Bot shows scope in the combined instructions only once\nAnd Bot shows clarification, questions and answers, assumptions, evidence, strategy decisions, and choices only once\nAnd Bot lists context files and instructions only once\nAnd Bot lists the overarching behavior instructions only once at the top\nAnd Bot includes text at the top or between each Action that clearly indicates multiple actions are combined and performed one after another",
                          "context_source": {"file": "Configure Action Execution.md", "section": "Combined instruction formatting"}
                        },
                        {
                          "name": "Build and Validate combined rules described once",
                          "sequential_order": 12.0,
                          "type": "happy_path",
                          "background": [],
                          "steps": "Given a Behavior with Build and Validate actions\nAnd Build and Validate have execution set to Combine (combine_next)\nWhen Bot combines instructions for Build and Validate\nThen Bot mentions rules and describes them only once\nAnd Bot refers to those rules in the other action instead of repeating the full description",
                          "context_source": {"file": "Configure Action Execution.md", "section": "Combined instruction formatting"}
                        }
                      ],
                      "acceptance_criteria": [
                        {"name": "WHEN User selects behavior in Panel and clicks Submit Instructions THEN Panel shows list of actions and toggle (Auto | Skip | Manual) per action with current state toggled on", "text": "WHEN User selects behavior in Panel and clicks Submit Instructions THEN Panel shows list of actions and toggle (Auto | Skip | Manual) per action with current state toggled on", "sequential_order": 1.0},
                        {"name": "WHEN User sets action to Skip via toggle AND User executes that behavior THEN Panel invokes CLI and CLI invokes Bot and Bot runs Behavior and skips that action", "text": "WHEN User sets action to Skip via toggle AND User executes that behavior THEN Panel invokes CLI and CLI invokes Bot and Bot runs Behavior and skips that action", "sequential_order": 2.0},
                        {"name": "WHEN User sets action to Auto via toggle AND User executes that behavior THEN Panel invokes CLI and CLI invokes Bot and Bot runs Behavior and executes that action as soon as previous action completes", "text": "WHEN User sets action to Auto via toggle AND User executes that behavior THEN Panel invokes CLI and CLI invokes Bot and Bot runs Behavior and executes that action as soon as previous action completes", "sequential_order": 3.0},
                        {"name": "WHEN User sets action to Manual via toggle AND User executes that behavior THEN Panel invokes CLI and CLI invokes Bot and Bot runs Behavior and requires User to submit instructions for that action", "text": "WHEN User sets action to Manual via toggle AND User executes that behavior THEN Panel invokes CLI and CLI invokes Bot and Bot runs Behavior and requires User to submit instructions for that action", "sequential_order": 4.0},
                        {"name": "WHEN User sets action execution from Panel THEN Panel invokes CLI and CLI invokes Bot AND Bot persists the setting for that Behavior and Action AND CLI reports completion AND Panel watches CLI for status", "text": "WHEN User sets action execution from Panel THEN Panel invokes CLI and CLI invokes Bot AND Bot persists the setting for that Behavior and Action AND CLI reports completion AND Panel watches CLI for status", "sequential_order": 5.0},
                        {"name": "WHEN User runs set_execution from CLI (no Panel) THEN CLI invokes Bot and Bot persists the action execution setting AND CLI reports completion or failed to the terminal", "text": "WHEN User runs set_execution from CLI (no Panel) THEN CLI invokes Bot and Bot persists the action execution setting AND CLI reports completion or failed to the terminal", "sequential_order": 6.0},
                        {"name": "WHEN an action (e.g. Clarification) is set to Auto AND User executes that behavior THEN Panel invokes CLI and CLI invokes Bot and Bot runs that action automatically without User clicking Execute", "text": "WHEN an action (e.g. Clarification) is set to Auto AND User executes that behavior THEN Panel invokes CLI and CLI invokes Bot and Bot runs that action automatically without User clicking Execute", "sequential_order": 7.0},
                        {"name": "WHEN a following action (e.g. Strategy) is set to Auto AND User executes that behavior THEN Bot runs current action like normal AND each action has a save_file property AND CLI debounce-checks that save_file THEN Bot runs next action AND Panel invokes CLI and CLI invokes Bot and Panel watches status", "text": "WHEN a following action (e.g. Strategy) is set to Auto AND User executes that behavior THEN Bot runs current action like normal AND each action has a save_file property (e.g. clarification.json) AND CLI debounce-checks that save_file THEN Bot runs next action AND Panel invokes CLI and CLI invokes Bot and Panel watches status", "sequential_order": 8.0},
                        {"name": "WHEN the last action of a behavior has execution set to Auto THEN Bot runs that action like normal AND Auto does nothing (no next action to run)", "text": "WHEN the last action of a behavior has execution set to Auto THEN Bot runs that action like normal AND Auto does nothing (no next action to run)", "sequential_order": 9.0},
                        {"name": "WHEN Bot combines Action Instructions because of Combine Next THEN Bot shows scope in the instructions only once", "text": "WHEN Bot combines Action Instructions because of Combine Next THEN Bot shows scope in the instructions only once", "sequential_order": 10.0},
                        {"name": "WHEN Bot combines Action Instructions because of Combine Next THEN Bot shows clarification, questions and answers, assumptions, evidence, strategy decisions, and choices only once", "text": "WHEN Bot combines Action Instructions because of Combine Next THEN Bot shows clarification, questions and answers, assumptions, evidence, strategy decisions, and choices only once", "sequential_order": 11.0},
                        {"name": "WHEN Bot combines Action Instructions because of Combine Next THEN Bot lists context files and instructions only once", "text": "WHEN Bot combines Action Instructions because of Combine Next THEN Bot lists context files and instructions only once", "sequential_order": 12.0},
                        {"name": "WHEN Bot combines Action Instructions because of Combine Next THEN Bot lists the overarching behavior instructions only once at the top", "text": "WHEN Bot combines Action Instructions because of Combine Next THEN Bot lists the overarching behavior instructions only once at the top", "sequential_order": 13.0},
                        {"name": "WHEN Bot combines Action Instructions because of Combine Next THEN Bot includes text at the top or between each Action that clearly indicates multiple actions are combined and performed one after another", "text": "WHEN Bot combines Action Instructions because of Combine Next THEN Bot includes text at the top or between each Action that clearly indicates multiple actions are combined and performed one after another", "sequential_order": 14.0},
                        {"name": "WHEN Bot combines Build and Validate actions (or both appear in a combined block) THEN Bot mentions rules and describes them only once AND Bot refers to those rules in the other action instead of repeating the full description", "text": "WHEN Bot combines Build and Validate actions (or both appear in a combined block) THEN Bot mentions rules and describes them only once AND Bot refers to those rules in the other action instead of repeating the full description", "sequential_order": 15.0}
                      ],
                      "behavior": null
                    },
                    {
                      "name": "Configure Behavior Execute",
                      "sequential_order": 12.5,
                      "connector": null,
                      "story_type": "user",
                      "users": [],
                      "test_class": null,
                      "scenarios": [],
                      "acceptance_criteria": [
                        {"name": "WHEN User sets behavior execute to skip in Panel behavior dropdown AND User executes that behavior THEN Panel skips all actions in that behavior regardless of per-action setting", "text": "WHEN User sets behavior execute to skip in Panel behavior dropdown AND User executes that behavior THEN Panel skips all actions in that behavior regardless of per-action setting", "sequential_order": 1.0},
                        {"name": "WHEN User sets behavior execute to auto in Panel AND User executes that behavior THEN Panel runs auto and manual actions AND Panel skips actions marked skip", "text": "WHEN User sets behavior execute to auto in Panel AND User executes that behavior THEN Panel runs auto and manual actions AND Panel skips actions marked skip", "sequential_order": 2.0},
                        {"name": "WHEN User sets behavior execute to manual in Panel AND User executes that behavior THEN Panel performs each action according to that action's skip/auto/manual setting", "text": "WHEN User sets behavior execute to manual in Panel AND User executes that behavior THEN Panel performs each action according to that action's skip/auto/manual setting", "sequential_order": 3.0},
                        {"name": "WHEN User runs cli.behaviors.shape.set_execute auto THEN CLI sets behavior execute to auto for that behavior", "text": "WHEN User runs cli.behaviors.shape.set_execute auto THEN CLI sets behavior execute to auto for that behavior", "sequential_order": 4.0}
                      ],
                      "behavior": null
                    },
                    {
                      "name": "Add Special Instructions",
                      "sequential_order": 12.6,
                      "connector": null,
                      "story_type": "user",
                      "users": [],
                      "test_class": null,
                      "scenarios": [],
                      "acceptance_criteria": [
                        {"name": "WHEN User enters text in Panel behavior-level Special Instructions text area (beside shape, after toggle group above) THEN Panel stores that text for that behavior", "text": "WHEN User enters text in Panel behavior-level Special Instructions text area (beside shape, after toggle group above) THEN Panel stores that text for that behavior", "sequential_order": 1.0},
                        {"name": "WHEN User enters text in Panel action-level Special Instructions text area (e.g. beside shape.clarify, same row) THEN Panel stores that text for that behavior and action", "text": "WHEN User enters text in Panel action-level Special Instructions text area (e.g. beside shape.clarify, same row) THEN Panel stores that text for that behavior and action", "sequential_order": 2.0},
                        {"name": "WHEN User clicks Submit in Panel THEN Panel injects all special instructions from behavior and action levels into the prompt", "text": "WHEN User clicks Submit in Panel THEN Panel injects all special instructions from behavior and action levels into the prompt", "sequential_order": 3.0},
                        {"name": "WHEN User runs cli.behaviors.shape.clarify.special_instructions \"focus on edge cases\" THEN CLI stores that instruction for shape.clarify AND CLI includes it in next prompt", "text": "WHEN User runs cli.behaviors.shape.clarify.special_instructions \"focus on edge cases\" THEN CLI stores that instruction for shape.clarify AND CLI includes it in next prompt", "sequential_order": 4.0}
                      ],
                      "behavior": null
                    },
                    {
                      "name": "Skip Behavior and Action Queie",
                      "sequential_order": 13.0,
                      "connector": null,
                      "story_type": "user",
                      "users": [],
                      "test_class": null,
                      "scenarios": [],
                      "acceptance_criteria": [],
                      "behavior": null
                    },
                    {
                      "name": "Save  / Load Queue Consolidation",
                      "sequential_order": 14.0,
                      "connector": null,
                      "story_type": "user",
                      "users": [],
                      "test_class": null,
                      "scenarios": [],
                      "acceptance_criteria": [],
                      "behavior": null
                    }
                  ]
                }
              ]
            },
            {
              "name": "Display Behavior Action State",
              "sequential_order": 2.0,
              "behavior": null,
              "domain_concepts": [],
              "test_file": "invoke_bot/navigate_behavior_actions/test_display_behavior_action_state.py",
              "sub_epics": [],
              "story_groups": [
                {
                  "name": "",
                  "sequential_order": 0.0,
                  "type": "and",
                  "connector": null,
                  "behavior": null,
                  "stories": [
                    {
                      "name": "Display Bot Hierarchy Tree with Progress Indicators CLI",
                      "sequential_order": 0.0,
                      "connector": "and",
                      "story_type": "system",
                      "users": [
                        "CLI"
                      ],
                      "test_class": "TestViewBehaviorHierarchy",
                      "scenarios": [
                        {
                          "name": "User views bot hierarchy with status command",
                          "sequential_order": 1.0,
                          "type": "",
                          "background": [],
                          "test_method": "test_user_views_bot_hierarchy_with_status_command",
                          "steps": "GIVEN: CLI is at discovery.build.instructions\nWHEN: user enters 'status'\nTHEN: CLI displays bot hierarchy tree"
                        },
                        {
                          "name": "CLI shows completed actions with [x] indicator",
                          "sequential_order": 2.0,
                          "type": "",
                          "background": [],
                          "test_method": "test_cli_shows_completed_actions_with_x_indicator",
                          "steps": "GIVEN: CLI is at discovery.build.instructions\nWHEN: user views status\nTHEN: CLI displays clarify action with [x] indicator"
                        }
                      ],
                      "acceptance_criteria": [
                        {
                          "name": "WHEN user views status\nTHEN CLI displays bot hierarchy tree with behaviors and actions",
                          "text": "WHEN user views status\nTHEN CLI displays bot hierarchy tree with behaviors and actions",
                          "sequential_order": 1.0
                        },
                        {
                          "name": "WHEN displaying hierarchy\nTHEN CLI shows progress indicators for each action",
                          "text": "WHEN displaying hierarchy\nTHEN CLI shows progress indicators for each action",
                          "sequential_order": 2.0
                        },
                        {
                          "name": "WHEN action is completed\nTHEN CLI displays action with completed marker",
                          "text": "WHEN action is completed\nTHEN CLI displays action with completed marker",
                          "sequential_order": 3.0
                        },
                        {
                          "name": "WHEN action is current\nTHEN CLI displays action with current marker",
                          "text": "WHEN action is current\nTHEN CLI displays action with current marker",
                          "sequential_order": 4.0
                        },
                        {
                          "name": "WHEN action is pending\nTHEN CLI displays action with pending marker",
                          "text": "WHEN action is pending\nTHEN CLI displays action with pending marker",
                          "sequential_order": 5.0
                        }
                      ],
                      "behavior": null
                    },
                    {
                      "name": "Show Remaining Actions After Completion",
                      "sequential_order": 1.0,
                      "connector": "and",
                      "story_type": "system",
                      "users": [
                        "System"
                      ],
                      "test_class": null,
                      "scenarios": [
                        {
                          "name": "Remaining actions respects completion",
                          "sequential_order": 1.0,
                          "type": "",
                          "background": [],
                          "test_method": "test_remaining_actions_respects_completion",
                          "steps": "GIVEN: bot.behaviors.current is at clarify action\nWHEN: actions.close_current() is called\nTHEN: 'clarify' not in actions.remaining_actions\nAND: actions.remaining_actions == ['validate', 'render']"
                        }
                      ],
                      "acceptance_criteria": [],
                      "behavior": null
                    },
                    {
                      "name": "Display Current Position in CLI",
                      "sequential_order": 2.0,
                      "connector": "and",
                      "story_type": "system",
                      "users": [
                        "CLI"
                      ],
                      "test_class": "TestViewCurrentPosition",
                      "scenarios": [
                        {
                          "name": "User views current position in status",
                          "sequential_order": 1.0,
                          "type": "",
                          "background": [],
                          "test_method": "test_user_views_current_position_in_status",
                          "steps": "GIVEN: CLI is at <behavior>.<action>.<operation>\nWHEN: user enters 'status'\nTHEN: CLI displays current position"
                        },
                        {
                          "name": "Current position updates after navigation",
                          "sequential_order": 2.0,
                          "type": "",
                          "background": [],
                          "test_method": "test_current_position_updates_after_navigation",
                          "steps": "GIVEN: CLI is at shape.clarify.instructions\nWHEN: user navigates to discovery behavior\nTHEN: CLI updates current position display to show discovery"
                        }
                      ],
                      "acceptance_criteria": [
                        {
                          "name": "WHEN user views status\nTHEN CLI displays current behavior, action, and operation",
                          "text": "WHEN user views status\nTHEN CLI displays current behavior, action, and operation",
                          "sequential_order": 1.0
                        },
                        {
                          "name": "WHEN user navigates to different action\nTHEN CLI updates current position display",
                          "text": "WHEN user navigates to different action\nTHEN CLI updates current position display",
                          "sequential_order": 2.0
                        },
                        {
                          "name": "WHEN displaying position\nTHEN CLI shows behavior.action.operation format",
                          "text": "WHEN displaying position\nTHEN CLI shows behavior.action.operation format",
                          "sequential_order": 3.0
                        },
                        {
                          "name": "WHEN position is at first action\nTHEN CLI indicates start of workflow",
                          "text": "WHEN position is at first action\nTHEN CLI indicates start of workflow",
                          "sequential_order": 4.0
                        }
                      ],
                      "behavior": null
                    },
                    {
                      "name": "Display CLI Navigation Menu Footer",
                      "sequential_order": 3.0,
                      "connector": "and",
                      "story_type": "system",
                      "users": [
                        "CLI"
                      ],
                      "test_class": "TestViewNavigationCommands",
                      "scenarios": [
                        {
                          "name": "CLI displays commands menu footer",
                          "sequential_order": 1.0,
                          "type": "",
                          "background": [],
                          "test_method": "test_cli_displays_commands_menu_footer",
                          "steps": "Given: CLI displays status\nWhen: CLI renders commands menu footer\nThen: CLI displays Commands section header\nAND: CLI shows command list: status | back | current | next | path [dir] | scope [filter] | headless \"msg\" | help | exit\nAND: CLI shows command usage example with echo syntax\nAND: CLI shows behaviors list: shape | prioritization | discovery | exploration | scenarios | tests | code\nAND: CLI shows actions list: clarify | strategy | build | validate | render\nAND: CLI applies section separator after footer"
                        }
                      ],
                      "acceptance_criteria": [
                        {
                          "name": "WHEN CLI displays status\nTHEN CLI shows footer with available commands",
                          "text": "WHEN CLI displays status\nTHEN CLI shows footer with available commands",
                          "sequential_order": 1.0
                        },
                        {
                          "name": "WHEN displaying footer\nTHEN CLI lists navigation commands AND action commands",
                          "text": "WHEN displaying footer\nTHEN CLI lists navigation commands AND action commands",
                          "sequential_order": 2.0
                        },
                        {
                          "name": "WHEN in terminal mode\nTHEN CLI uses plain text formatting for footer",
                          "text": "WHEN in terminal mode\nTHEN CLI uses plain text formatting for footer",
                          "sequential_order": 3.0
                        },
                        {
                          "name": "WHEN in piped mode\nTHEN CLI uses markdown formatting for footer",
                          "text": "WHEN in piped mode\nTHEN CLI uses markdown formatting for footer",
                          "sequential_order": 4.0
                        }
                      ],
                      "behavior": null
                    },
                    {
                      "name": "Display Hierarchy In Panel",
                      "sequential_order": 4.0,
                      "connector": null,
                      "story_type": "user",
                      "users": [
                        "User"
                      ],
                      "test_class": "TestDisplayHierarchy",
                      "scenarios": [
                        {
                          "name": "",
                          "sequential_order": 1.0,
                          "type": "",
                          "background": [],
                          "test_method": null,
                          "steps": "Given Bot has multiple behaviors with completed and pending actions\nAnd Bot is currently at shape.clarify\nWhen Panel renders hierarchy section\nThen User sees behavior names (shape, discovery)\nAnd User sees action names under behaviors\nAnd Current action (clarify) shows in-progress indicator\nAnd Completed actions show checkmark indicator\nAnd Pending actions show empty indicator"
                        },
                        {
                          "name": "",
                          "sequential_order": 2.0,
                          "type": "",
                          "background": [],
                          "test_method": null,
                          "steps": "Given Panel displays collapsed behavior tree\nWhen User clicks collapsed shape behavior\nThen Shape behavior expands showing actions (clarify, strategy)\nWhen User clicks expanded shape behavior again\nThen Shape behavior collapses hiding actions"
                        },
                        {
                          "name": "",
                          "sequential_order": 3.0,
                          "type": "",
                          "background": [],
                          "test_method": null,
                          "steps": "Given Shape behavior is expanded showing actions\nAnd Clarify action is collapsed\nWhen User clicks collapsed clarify action\nThen Clarify action expands showing operations (instructions, execute, confirm)\nWhen User clicks expanded clarify action again\nThen Clarify action collapses hiding operations"
                        },
                        {
                          "name": "",
                          "sequential_order": 4.0,
                          "type": "",
                          "background": [],
                          "test_method": null,
                          "steps": "Given Panel displays behavior tree\nAnd Bot is currently at shape.clarify\nWhen User clicks collapsed discovery behavior\nThen Discovery behavior expands showing actions\nAnd Discovery actions are visible even though bot is at shape\nWhen User clicks collapsed scenarios behavior\nThen Scenarios behavior expands showing actions\nAnd Scenarios actions are visible even though bot is at shape"
                        },
                        {
                          "name": "",
                          "sequential_order": 5.0,
                          "type": "",
                          "background": [],
                          "test_method": null,
                          "steps": "Given Bot has behaviors with defined sequential order\nWhen Panel renders behavior tree\nThen Behaviors appear in order (shape, prioritization, discovery, exploration, scenarios, tests, code)\nAnd Actions under each behavior appear in their configured order\nAnd Order matches behavior configuration JSON"
                        }
                      ],
                      "acceptance_criteria": [
                        {
                          "name": "WHEN User views panel\nTHEN System displays behavior list with actions",
                          "text": "WHEN User views panel\nTHEN System displays behavior list with actions",
                          "sequential_order": 1.0
                        },
                        {
                          "name": "WHEN Action is current\nTHEN System displays current action in-progress indicator",
                          "text": "WHEN Action is current\nTHEN System displays current action in-progress indicator",
                          "sequential_order": 2.0
                        },
                        {
                          "name": "WHEN Action is completed\nTHEN System displays completed indicator",
                          "text": "WHEN Action is completed\nTHEN System displays completed indicator",
                          "sequential_order": 3.0
                        },
                        {
                          "name": "WHEN Action is pending\nTHEN System displays pending indicator",
                          "text": "WHEN Action is pending\nTHEN System displays pending indicator",
                          "sequential_order": 4.0
                        },
                        {
                          "name": "WHEN User clicks collapsed behavior\nTHEN System expands behavior showing actions",
                          "text": "WHEN User clicks collapsed behavior\nTHEN System expands behavior showing actions",
                          "sequential_order": 5.0
                        },
                        {
                          "name": "WHEN User clicks expanded behavior\nTHEN System collapses behavior hiding actions",
                          "text": "WHEN User clicks expanded behavior\nTHEN System collapses behavior hiding actions",
                          "sequential_order": 6.0
                        },
                        {
                          "name": "WHEN User clicks collapsed action\nTHEN System expands action showing operations",
                          "text": "WHEN User clicks collapsed action\nTHEN System expands action showing operations",
                          "sequential_order": 7.0
                        },
                        {
                          "name": "WHEN User clicks expanded action\nTHEN System collapses action hiding operations",
                          "text": "WHEN User clicks expanded action\nTHEN System collapses action hiding operations",
                          "sequential_order": 8.0
                        },
                        {
                          "name": "WHEN User views behavior list\nTHEN System displays all behaviors expandable regardless of current position",
                          "text": "WHEN User views behavior list\nTHEN System displays all behaviors expandable regardless of current position",
                          "sequential_order": 9.0
                        },
                        {
                          "name": "WHEN User views behavior list\nTHEN System displays behaviors in correct sequential order",
                          "text": "WHEN User views behavior list\nTHEN System displays behaviors in correct sequential order",
                          "sequential_order": 10.0
                        }
                      ],
                      "behavior": null
                    },
                    {
                      "name": "Manage Behavior Action State Using CLI",
                      "sequential_order": 5.0,
                      "connector": null,
                      "story_type": "user",
                      "users": [
                        "User"
                      ],
                      "test_class": "TestManageBehaviorActionStateUsingCLI",
                      "scenarios": [
                        {
                          "name": "Cli state persists after navigation",
                          "sequential_order": 1.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_cli_state_persists_after_navigation",
                          "steps": "",
                          "test": {
                            "method": "test_cli_state_persists_after_navigation",
                            "file": "invoke_bot/navigate_behavior_actions/test_display_behavior_action_state.py",
                            "line": 101
                          }
                        },
                        {
                          "name": "Cli loads existing state on startup",
                          "sequential_order": 2.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_cli_loads_existing_state_on_startup",
                          "steps": "",
                          "test": {
                            "method": "test_cli_loads_existing_state_on_startup",
                            "file": "invoke_bot/navigate_behavior_actions/test_display_behavior_action_state.py",
                            "line": 114
                          }
                        },
                        {
                          "name": "Cli next command closes and advances",
                          "sequential_order": 3.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_cli_next_command_closes_and_advances",
                          "steps": "",
                          "test": {
                            "method": "test_cli_next_command_closes_and_advances",
                            "file": "invoke_bot/navigate_behavior_actions/test_display_behavior_action_state.py",
                            "line": 129
                          }
                        }
                      ],
                      "acceptance_criteria": [],
                      "behavior": null
                    },
                    {
                      "name": "Display Context Using CLI",
                      "sequential_order": 6.0,
                      "connector": null,
                      "story_type": "user",
                      "users": [
                        "User"
                      ],
                      "test_class": "TestDisplayContextUsingCLI",
                      "scenarios": [
                        {
                          "name": "Cli displays clarification when present",
                          "sequential_order": 1.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_cli_displays_clarification_when_present",
                          "steps": "",
                          "test": {
                            "method": "test_cli_displays_clarification_when_present",
                            "file": "invoke_bot/navigate_behavior_actions/test_display_behavior_action_state.py",
                            "line": 161
                          }
                        },
                        {
                          "name": "Cli displays strategy when present",
                          "sequential_order": 2.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_cli_displays_strategy_when_present",
                          "steps": "",
                          "test": {
                            "method": "test_cli_displays_strategy_when_present",
                            "file": "invoke_bot/navigate_behavior_actions/test_display_behavior_action_state.py",
                            "line": 190
                          }
                        },
                        {
                          "name": "Cli displays context files when present",
                          "sequential_order": 3.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_cli_displays_context_files_when_present",
                          "steps": "",
                          "test": {
                            "method": "test_cli_displays_context_files_when_present",
                            "file": "invoke_bot/navigate_behavior_actions/test_display_behavior_action_state.py",
                            "line": 219
                          }
                        }
                      ],
                      "acceptance_criteria": [],
                      "behavior": null
                    },
                    {
                      "name": "Display  Context BAQ",
                      "sequential_order": 7.0,
                      "connector": null,
                      "story_type": "user",
                      "users": [],
                      "test_class": null,
                      "scenarios": [],
                      "acceptance_criteria": [],
                      "behavior": null
                    },
                    {
                      "name": "Drop Context into Queue",
                      "sequential_order": 8.0,
                      "connector": null,
                      "story_type": "user",
                      "users": [],
                      "test_class": null,
                      "scenarios": [],
                      "acceptance_criteria": [],
                      "behavior": null
                    },
                    {
                      "name": "Display  Behavior Action Qs",
                      "sequential_order": 9.0,
                      "connector": null,
                      "story_type": "user",
                      "users": [],
                      "test_class": null,
                      "scenarios": [],
                      "acceptance_criteria": [],
                      "behavior": null
                    },
                    {
                      "name": "Drop Story Node in  Behavor Action Queue",
                      "sequential_order": 10.0,
                      "connector": null,
                      "story_type": "user",
                      "users": [],
                      "test_class": null,
                      "scenarios": [],
                      "acceptance_criteria": [],
                      "behavior": null
                    }
                  ]
                }
              ]
            }
          ],
          "story_groups": []
        },
        {
          "name": "Perform Action",
          "sequential_order": 3.0,
          "behavior": null,
          "domain_concepts": [],
          "test_file": "invoke_bot/perform_action/",
          "sub_epics": [
            {
              "name": "Prepare Common Instructions For Behavior, Action, and Scope",
              "sequential_order": 0.0,
              "behavior": null,
              "domain_concepts": [
                {
                  "name": "ActionDataSubSection",
                  "responsibilities": [
                    {
                      "name": "Wraps action JSON",
                      "collaborators": [
                        "Action JSON"
                      ]
                    },
                    {
                      "name": "Displays action properties",
                      "collaborators": [
                        "Object",
                        "Action JSON"
                      ]
                    }
                  ],
                  "module": "actions",
                  "inherits_from": "SubSectionView",
                  "_source_path": "Invoke Bot.Invoke Bot Directly"
                },
                {
                  "name": "TTYInstructions",
                  "responsibilities": [
                    {
                      "name": "Serialize instructions to TTY",
                      "collaborators": [
                        "Instructions",
                        "String"
                      ]
                    },
                    {
                      "name": "Format instruction sections",
                      "collaborators": [
                        "Sections",
                        "String"
                      ]
                    },
                    {
                      "name": "Wraps domain instructions",
                      "collaborators": [
                        "Instructions"
                      ]
                    }
                  ],
                  "module": "instructions",
                  "inherits_from": "TTYAdapter",
                  "_source_path": "Invoke Bot.Invoke Bot Directly"
                },
                {
                  "name": "JSONInstructions",
                  "responsibilities": [
                    {
                      "name": "Serialize instructions to JSON",
                      "collaborators": [
                        "Instructions",
                        "Dict"
                      ]
                    },
                    {
                      "name": "Include instruction sections",
                      "collaborators": [
                        "Sections",
                        "Array"
                      ]
                    },
                    {
                      "name": "Wraps domain instructions",
                      "collaborators": [
                        "Instructions"
                      ]
                    }
                  ],
                  "module": "instructions",
                  "inherits_from": "JSONAdapter",
                  "_source_path": "Invoke Bot.Invoke Bot Directly"
                },
                {
                  "name": "MarkdownInstructions",
                  "responsibilities": [
                    {
                      "name": "Serialize instructions to Markdown",
                      "collaborators": [
                        "Instructions",
                        "String"
                      ]
                    },
                    {
                      "name": "Format instruction sections",
                      "collaborators": [
                        "Sections",
                        "Markdown"
                      ]
                    },
                    {
                      "name": "Wraps domain instructions",
                      "collaborators": [
                        "Instructions"
                      ]
                    }
                  ],
                  "module": "instructions",
                  "inherits_from": "MarkdownAdapter",
                  "_source_path": "Invoke Bot.Invoke Bot Directly"
                },
                {
                  "name": "InstructionsSection",
                  "responsibilities": [
                    {
                      "name": "Wraps instructions JSON",
                      "collaborators": [
                        "Instructions JSON"
                      ]
                    },
                    {
                      "name": "Wraps action JSON",
                      "collaborators": [
                        "Action JSON"
                      ]
                    },
                    {
                      "name": "Displays base instructions subsection",
                      "collaborators": [
                        "BaseInstructionsSubSection"
                      ]
                    },
                    {
                      "name": "Displays raw format subsection",
                      "collaborators": [
                        "RawFormatSubSection"
                      ]
                    },
                    {
                      "name": "Submits to AI chat",
                      "collaborators": [
                        "CLI",
                        "Instructions JSON"
                      ]
                    }
                  ],
                  "module": "instructions",
                  "inherits_from": "SectionView (Base)",
                  "_source_path": "Invoke Bot.Invoke Bot Directly"
                },
                {
                  "name": "BaseInstructionsSubSection",
                  "responsibilities": [
                    {
                      "name": "Wraps instructions JSON",
                      "collaborators": [
                        "Instructions JSON"
                      ]
                    },
                    {
                      "name": "Displays behavior name",
                      "collaborators": [
                        "String",
                        "Instructions JSON"
                      ]
                    },
                    {
                      "name": "Displays action name",
                      "collaborators": [
                        "String",
                        "Instructions JSON"
                      ]
                    },
                    {
                      "name": "Displays  Instructions",
                      "collaborators": [
                        "Instructions JSON"
                      ]
                    }
                  ],
                  "module": "instructions",
                  "inherits_from": "SubSectionView",
                  "_source_path": "Invoke Bot.Invoke Bot Directly"
                },
                {
                  "name": "RawFormatSubSection",
                  "responsibilities": [
                    {
                      "name": "Wraps instructions JSON",
                      "collaborators": [
                        "Instructions JSON"
                      ]
                    },
                    {
                      "name": "Displays raw instructions",
                      "collaborators": [
                        "String",
                        "Instructions JSON"
                      ]
                    }
                  ],
                  "module": "instructions",
                  "inherits_from": "SubSectionView",
                  "_source_path": "Invoke Bot.Invoke Bot Directly"
                }
              ],
              "test_file": "invoke_bot/perform_action/test_prepare_common_instructions_for_behavior_action_and_scope.py",
              "sub_epics": [],
              "story_groups": [
                {
                  "name": "",
                  "sequential_order": 0.0,
                  "type": "and",
                  "connector": null,
                  "behavior": null,
                  "stories": [
                    {
                      "name": "Inject Context Into Instructions",
                      "sequential_order": 0.0,
                      "connector": "or",
                      "story_type": "user",
                      "users": [
                        "Bot Behavior"
                      ],
                      "test_class": "TestInjectContextIntoInstructions",
                      "scenarios": [
                        {
                          "name": "Action Loads Context Data Into Instructions",
                          "sequential_order": 1.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_action_loads_context_data_into_instructions",
                          "steps": ""
                        },
                        {
                          "name": "Next behavior reminder is NOT injected when action is not final",
                          "sequential_order": 2.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_next_behavior_reminder_not_injected_when_not_final_action",
                          "steps": "Given validate is NOT the final action (render comes after)\nWhen validate action executes\nThen base_instructions do NOT include next behavior reminder\nThen And bot_config.json defines behavior sequence"
                        },
                        {
                          "name": "Next behavior reminder is NOT injected when current behavior is last in sequence",
                          "sequential_order": 3.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_next_behavior_reminder_not_injected_when_no_next_behavior",
                          "steps": "Given discovery is the last behavior in bot_config.json\nWhen render action executes\nThen base_instructions do NOT include next behavior reminder\nThen And render is the final action"
                        }
                      ],
                      "acceptance_criteria": [],
                      "behavior": null
                    },
                    {
                      "name": "Get Action Instructions Through CLI",
                      "sequential_order": 1.0,
                      "connector": null,
                      "story_type": "user",
                      "users": [
                        "User"
                      ],
                      "test_class": "TestGetActionInstructionsThroughCLI",
                      "scenarios": [
                        {
                          "name": "User gets instructions using full path",
                          "sequential_order": 1.0,
                          "type": "",
                          "background": [],
                          "test_method": "test_user_gets_instructions_using_full_path",
                          "steps": "GIVEN: CLI is at shape.build.instructions\nWHEN: user enters 'shape.build.instructions'\nTHEN: CLI displays formatted instructions"
                        },
                        {
                          "name": "User calls action by name shortcut",
                          "sequential_order": 2.0,
                          "type": "",
                          "background": [],
                          "test_method": "test_user_calls_action_by_name_shortcut",
                          "steps": "GIVEN: CLI is at shape.build.instructions\nWHEN: user enters just 'build'\nTHEN: CLI executes instructions operation on current behavior's build action"
                        }
                      ],
                      "acceptance_criteria": [
                        {
                          "name": "WHEN user navigates to behavior.action.instructions\nTHEN CLI displays formatted instructions for that action",
                          "text": "WHEN user navigates to behavior.action.instructions\nTHEN CLI displays formatted instructions for that action",
                          "sequential_order": 1.0
                        },
                        {
                          "name": "WHEN user enters action name only as shortcut\nTHEN CLI executes instructions on current behavior's action",
                          "text": "WHEN user enters action name only as shortcut\nTHEN CLI executes instructions on current behavior's action",
                          "sequential_order": 2.0
                        }
                      ],
                      "behavior": null
                    },
                    {
                      "name": "Submit Instructions Through CLI",
                      "sequential_order": 2.0,
                      "connector": "and",
                      "story_type": "user",
                      "users": [
                        "User"
                      ],
                      "test_class": "TestSubmitInstructionsThroughCLI",
                      "scenarios": [
                        {
                          "name": "User submits current action instructions",
                          "sequential_order": 1.0,
                          "type": "",
                          "background": [],
                          "test_method": "test_user_submits_current_action_instructions",
                          "steps": "GIVEN: CLI is at shape.clarify\nWHEN: user enters 'submit'\nTHEN: CLI tracks instruction submission\nAND: CLI returns success message with behavior and action\nAND: CLI includes timestamp of submission"
                        },
                        {
                          "name": "Submit command fails when no current action",
                          "sequential_order": 2.0,
                          "type": "",
                          "background": [],
                          "test_method": "test_submit_command_fails_when_no_current_action",
                          "steps": "GIVEN: CLI has no current action set\nWHEN: user enters 'submit'\nTHEN: CLI displays error message\nAND: Error indicates no current action"
                        }
                      ],
                      "acceptance_criteria": [
                        {
                          "name": "WHEN User executes submit command\nTHEN System tracks instruction submission AND System returns success status with timestamp",
                          "text": "WHEN User executes submit command\nTHEN System tracks instruction submission AND System returns success status with timestamp",
                          "sequential_order": 1.0
                        }
                      ],
                      "behavior": null
                    },
                    {
                      "name": "Display Base Instructions Panel",
                      "sequential_order": 3.0,
                      "connector": null,
                      "story_type": "user",
                      "users": [
                        "User"
                      ],
                      "test_class": "TestDisplayBaseInstructions",
                      "scenarios": [
                        {
                          "name": "",
                          "sequential_order": 1.0,
                          "type": "",
                          "background": [],
                          "test_method": null,
                          "steps": "Given Bot is at shape.clarify\nWhen Panel displays instructions section\nThen Panel displays base instructions\nAnd Panel displays behavior name (shape)\nAnd Panel displays action name (clarify)\nAnd Instructions are scrollable"
                        },
                        {
                          "name": "",
                          "sequential_order": 2.0,
                          "type": "",
                          "background": [],
                          "test_method": null,
                          "steps": "Given Panel displays base instructions\nWhen User clicks copy button\nThen Instructions are copied to clipboard\nAnd Panel displays confirmation message"
                        }
                      ],
                      "acceptance_criteria": [
                        {
                          "name": "WHEN User views panel\nTHEN System displays base instructions section AND System displays behavior name AND System displays action name",
                          "text": "WHEN User views panel\nTHEN System displays base instructions section AND System displays behavior name AND System displays action name",
                          "sequential_order": 1.0
                        }
                      ],
                      "behavior": null
                    },
                    {
                      "name": "Display Raw Format Instructions In Panel",
                      "sequential_order": 4.0,
                      "connector": "and",
                      "story_type": "user",
                      "users": [
                        "User"
                      ],
                      "test_class": "TestDisplayInstructionsInRawFormat",
                      "scenarios": [
                        {
                          "name": "",
                          "sequential_order": 1.0,
                          "type": "",
                          "background": [],
                          "test_method": null,
                          "steps": "Given Panel displays formatted instructions\nWhen User clicks raw format toggle button\nThen Panel displays instructions in raw text format\nAnd Instructions show exactly as they would be sent to AI\nAnd Raw format is scrollable"
                        },
                        {
                          "name": "",
                          "sequential_order": 2.0,
                          "type": "",
                          "background": [],
                          "test_method": null,
                          "steps": "Given Panel displays instructions in raw format\nWhen User clicks formatted view toggle button\nThen Panel displays instructions in formatted view\nAnd Instructions show with sections and styling"
                        }
                      ],
                      "acceptance_criteria": [
                        {
                          "name": "WHEN User clicks action instruction in Behavior Action Hierarchy\nTHEN System displays entire instructions exactly as it should be sent to the AI chat",
                          "text": "WHEN User clicks action instruction in Behavior Action Hierarchy\nTHEN System displays entire instructions exactly as it should be sent to the AI chat",
                          "sequential_order": 1.0
                        }
                      ],
                      "behavior": null
                    },
                    {
                      "name": "Save Clarification Answers",
                      "sequential_order": 5.0,
                      "connector": "and",
                      "story_type": "user",
                      "users": [
                        "System"
                      ],
                      "test_class": "TestSaveClarificationAnswers",
                      "scenarios": [
                        {
                          "name": "Save new clarification answers",
                          "sequential_order": 1.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_save_new_clarification_answers",
                          "steps": "GIVEN: Bot with no existing clarifications\nWHEN: User saves answers via Bot.save()\nTHEN: Answers saved to clarification.json in test workspace",
                          "test": {
                            "method": "test_save_new_clarification_answers",
                            "file": "invoke_bot/perform_action/test_prepare_common_instructions_for_behavior_action_and_scope.py",
                            "line": 25
                          }
                        },
                        {
                          "name": "Save merges with existing clarification answers",
                          "sequential_order": 2.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_save_merges_with_existing_clarification_answers",
                          "steps": "GIVEN: Bot with existing clarification answers\nWHEN: User saves additional/modified answers\nTHEN: New answers merged with existing, new overrides existing for same question",
                          "test": {
                            "method": "test_save_merges_with_existing_clarification_answers",
                            "file": "invoke_bot/perform_action/test_prepare_common_instructions_for_behavior_action_and_scope.py",
                            "line": 60
                          }
                        }
                      ],
                      "acceptance_criteria": [],
                      "behavior": null
                    },
                    {
                      "name": "Save Clarification Evidence",
                      "sequential_order": 5.1,
                      "connector": "and",
                      "story_type": "user",
                      "users": [
                        "System"
                      ],
                      "test_class": "TestSaveClarificationEvidence",
                      "scenarios": [
                        {
                          "name": "Save evidence provided",
                          "sequential_order": 1.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_save_evidence_provided",
                          "steps": "GIVEN: Bot with clarification requirements\nWHEN: User provides evidence via Bot.save()\nTHEN: Evidence saved to clarification.json",
                          "test": {
                            "method": "test_save_evidence_provided",
                            "file": "invoke_bot/perform_action/test_prepare_common_instructions_for_behavior_action_and_scope.py",
                            "line": 97
                          }
                        }
                      ],
                      "acceptance_criteria": [],
                      "behavior": null
                    },
                    {
                      "name": "Save Strategy Decisions",
                      "sequential_order": 5.2,
                      "connector": "and",
                      "story_type": "user",
                      "users": [
                        "System"
                      ],
                      "test_class": "TestSaveStrategyDecisions",
                      "scenarios": [
                        {
                          "name": "Save strategy decisions",
                          "sequential_order": 1.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_save_strategy_decisions",
                          "steps": "GIVEN: Bot with strategy decision criteria\nWHEN: User makes decisions via Bot.save()\nTHEN: Only chosen decisions saved (not entire criteria template)",
                          "test": {
                            "method": "test_save_strategy_decisions",
                            "file": "invoke_bot/perform_action/test_prepare_common_instructions_for_behavior_action_and_scope.py",
                            "line": 130
                          }
                        },
                        {
                          "name": "Save strategy assumptions",
                          "sequential_order": 2.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_save_strategy_assumptions",
                          "steps": "GIVEN: Bot with strategy context\nWHEN: User saves assumptions via Bot.save()\nTHEN: Assumptions saved to strategy.json",
                          "test": {
                            "method": "test_save_strategy_assumptions",
                            "file": "invoke_bot/perform_action/test_prepare_common_instructions_for_behavior_action_and_scope.py",
                            "line": 161
                          }
                        }
                      ],
                      "acceptance_criteria": [],
                      "behavior": null
                    },
                    {
                      "name": "Save Multiple Guardrails Together",
                      "sequential_order": 5.3,
                      "connector": "and",
                      "story_type": "user",
                      "users": [
                        "System"
                      ],
                      "test_class": "TestSaveMultipleGuardrails",
                      "scenarios": [
                        {
                          "name": "Save all guardrails at once",
                          "sequential_order": 1.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_save_all_guardrails_at_once",
                          "steps": "GIVEN: Bot with current behavior\nWHEN: User saves answers, evidence, decisions, and assumptions together\nTHEN: All data saved to respective files",
                          "test": {
                            "method": "test_save_all_guardrails_at_once",
                            "file": "invoke_bot/perform_action/test_prepare_common_instructions_for_behavior_action_and_scope.py",
                            "line": 195
                          }
                        },
                        {
                          "name": "Save preserves data across behaviors",
                          "sequential_order": 2.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_save_preserves_data_across_behaviors",
                          "steps": "GIVEN: Multiple behaviors with saved guardrails\nWHEN: Switching between behaviors and saving\nTHEN: Each behavior's data is preserved independently",
                          "test": {
                            "method": "test_save_preserves_data_across_behaviors",
                            "file": "invoke_bot/perform_action/test_prepare_common_instructions_for_behavior_action_and_scope.py",
                            "line": 225
                          }
                        }
                      ],
                      "acceptance_criteria": [],
                      "behavior": null
                    },
                    {
                      "name": "Save File Isolation",
                      "sequential_order": 5.4,
                      "connector": "and",
                      "story_type": "user",
                      "users": [
                        "System"
                      ],
                      "test_class": "TestSaveFileIsolation",
                      "scenarios": [
                        {
                          "name": "Save uses test workspace not production",
                          "sequential_order": 1.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_save_uses_test_workspace_not_production",
                          "steps": "GIVEN: Bot initialized with tmp_path workspace\nWHEN: Saving any data\nTHEN: Data saved to tmp_path workspace, NOT production agile_bots/docs/story",
                          "test": {
                            "method": "test_save_uses_test_workspace_not_production",
                            "file": "invoke_bot/perform_action/test_prepare_common_instructions_for_behavior_action_and_scope.py",
                            "line": 266
                          }
                        }
                      ],
                      "acceptance_criteria": [],
                      "behavior": null
                    },
                    {
                      "name": "Save Guardrails Through Panel",
                      "sequential_order": 6.0,
                      "connector": "and",
                      "story_type": "user",
                      "users": [
                        "User"
                      ],
                      "test_class": "TestSaveGuardrailsThroughPanel",
                      "scenarios": [
                        {
                          "name": "",
                          "sequential_order": 1.0,
                          "type": "",
                          "background": [],
                          "test_method": "test_panel_displays_save_button_for_clarify_action",
                          "steps": "Given Bot is at shape.clarify\nWhen Panel renders clarify instructions\nThen Panel displays save button for answers\nAnd Panel displays save button for evidence"
                        },
                        {
                          "name": "",
                          "sequential_order": 2.0,
                          "type": "",
                          "background": [],
                          "test_method": "test_panel_displays_save_button_for_strategy_action",
                          "steps": "Given Bot is at shape.strategy\nWhen Panel renders strategy instructions\nThen Panel displays save button for decisions\nAnd Panel displays save button for assumptions"
                        }
                      ],
                      "acceptance_criteria": [
                        {
                          "name": "WHEN User fills in answers in panel form\nTHEN System validates input format AND System enables submit button",
                          "text": "WHEN User fills in answers in panel form\nTHEN System validates input format AND System enables submit button",
                          "sequential_order": 1.0
                        },
                        {
                          "name": "WHEN User clicks submit for answers\nTHEN System saves answers to clarification.json under current behavior AND System merges with existing answers AND System displays success message",
                          "text": "WHEN User clicks submit for answers\nTHEN System saves answers to clarification.json under current behavior AND System merges with existing answers AND System displays success message",
                          "sequential_order": 2.0
                        }
                      ],
                      "behavior": null
                    },
                    {
                      "name": "Submit Scope Instructions",
                      "sequential_order": 7.0,
                      "connector": "and",
                      "story_type": "user",
                      "users": [
                        "User"
                      ],
                      "test_class": "TestSubmitScopeInstructions",
                      "scenarios": [
                        {
                          "name": "Scope appears in instructions display_content markdown",
                          "sequential_order": 1.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_scope_appears_in_instructions_display_content",
                          "steps": "GIVEN: Build action with story scope set\nWHEN: Instructions are retrieved via action.get_instructions()\nTHEN: instructions.display_content contains \"## Scope\" section\nAND: instructions.display_content contains story_graph markdown from scope.results\nAND: bot.submit_instructions() can use display_content to submit scope instructions",
                          "test": {
                            "method": "test_scope_appears_in_instructions_display_content",
                            "file": "invoke_bot/perform_action/test_prepare_common_instructions_for_behavior_action_and_scope.py",
                            "line": 301
                          }
                        },
                        {
                          "name": "Domain concepts are properly serialized in JSON story graph",
                          "sequential_order": 2.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_domain_concepts_serialized_in_json_story_graph",
                          "steps": "GIVEN: Story graph with domain_concepts at epic and sub-epic levels\nWHEN: Instructions are retrieved with scope\nTHEN: display_content contains JSON with domain_concepts properly serialized\nAND: Domain concepts from both epic and sub-epic levels are included",
                          "test": {
                            "method": "test_domain_concepts_serialized_in_json_story_graph",
                            "file": "invoke_bot/perform_action/test_prepare_common_instructions_for_behavior_action_and_scope.py",
                            "line": 356
                          }
                        }
                      ],
                      "acceptance_criteria": [],
                      "behavior": null
                    },
                    {
                      "name": "Handle Operation Errors and Validation in CLI",
                      "sequential_order": 8.0,
                      "connector": "and",
                      "story_type": "user",
                      "users": [
                        "User"
                      ],
                      "test_class": "TestHandleErrorsUsingCLI",
                      "scenarios": [
                        {
                          "name": "Invalid command shows error",
                          "sequential_order": 1.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_invalid_command_shows_error",
                          "steps": "GIVEN: CLI is at shape.build\nWHEN: user enters 'invalid_command'\nTHEN: CLI displays error message in appropriate channel format",
                          "test": {
                            "method": "test_invalid_command_shows_error",
                            "file": "invoke_bot/perform_action/test_prepare_common_instructions_for_behavior_action_and_scope.py",
                            "line": 726
                          }
                        }
                      ],
                      "acceptance_criteria": [],
                      "behavior": null
                    },
                    {
                      "name": "Save Guardrails Through CLI",
                      "sequential_order": 9.0,
                      "connector": null,
                      "story_type": "user",
                      "users": [
                        "User"
                      ],
                      "test_class": "TestSaveGuardrailsUsingCLI",
                      "scenarios": [
                        {
                          "name": "Save answers via CLI command",
                          "sequential_order": 1.0,
                          "type": "",
                          "background": [],
                          "test_method": "test_save_answers_via_cli_command",
                          "steps": "GIVEN: CLI is at shape.clarify\nWHEN: user runs 'save --answers {\"What is the scope?\": \"Bot system\"}'\nTHEN: CLI shows success message\nAND: clarification.json is updated",
                          "test": {
                            "method": "test_save_answers_via_cli_command",
                            "file": "invoke_bot/perform_action/test_prepare_common_instructions_for_behavior_action_and_scope.py",
                            "line": 654
                          }
                        },
                        {
                          "name": "Save decisions via CLI command",
                          "sequential_order": 2.0,
                          "type": "",
                          "background": [],
                          "test_method": "test_save_decisions_via_cli_command",
                          "steps": "GIVEN: CLI is at shape.strategy\nWHEN: user runs 'save --decisions {\"drill_down\": \"Deep\"}'\nTHEN: CLI shows success message\nAND: strategy.json is updated",
                          "test": {
                            "method": "test_save_decisions_via_cli_command",
                            "file": "invoke_bot/perform_action/test_prepare_common_instructions_for_behavior_action_and_scope.py",
                            "line": 684
                          }
                        }
                      ],
                      "acceptance_criteria": [
                        {
                          "name": "WHEN user runs save command with answers parameter\nTHEN CLI saves answers to clarification.json under current behavior AND CLI merges with existing answers",
                          "text": "WHEN user runs save command with answers parameter\nTHEN CLI saves answers to clarification.json under current behavior AND CLI merges with existing answers",
                          "sequential_order": 1.0
                        },
                        {
                          "name": "WHEN user runs save command with decisions parameter\nTHEN CLI saves decisions to strategy.json under current behavior",
                          "text": "WHEN user runs save command with decisions parameter\nTHEN CLI saves decisions to strategy.json under current behavior",
                          "sequential_order": 2.0
                        }
                      ],
                      "behavior": null
                    },
                    {
                      "name": "Add special instructon",
                      "sequential_order": 10.0,
                      "connector": null,
                      "story_type": "user",
                      "users": [],
                      "test_class": null,
                      "scenarios": [],
                      "acceptance_criteria": [],
                      "behavior": null
                    }
                  ]
                }
              ]
            },
            {
              "name": "Clarify Requirements",
              "sequential_order": 1.0,
              "behavior": null,
              "domain_concepts": [
                {
                  "name": "GatherContextAction",
                  "responsibilities": [
                    {
                      "name": "Inject gather context instructions",
                      "collaborators": [
                        "Behavior",
                        "Guardrails",
                        "Required Clarifications"
                      ]
                    },
                    {
                      "name": "Inject questions and evidence",
                      "collaborators": [
                        "Behavior",
                        "Guardrails",
                        "Key Questions",
                        "Evidence"
                      ]
                    }
                  ],
                  "module": "actions.clarify",
                  "_source_path": "Invoke Bot.Invoke Bot Directly"
                },
                {
                  "name": "TTYGatherContext",
                  "responsibilities": [
                    {
                      "name": "Serialize clarify action to TTY",
                      "collaborators": [
                        "GatherContextAction",
                        "TTY String"
                      ]
                    },
                    {
                      "name": "Format key questions",
                      "collaborators": [
                        "Questions",
                        "Evidence",
                        "TTY String"
                      ]
                    },
                    {
                      "name": "Wraps domain action",
                      "collaborators": [
                        "GatherContextAction"
                      ]
                    }
                  ],
                  "module": "actions.clarify",
                  "inherits_from": "TTYProgressAdapter",
                  "_source_path": "Invoke Bot.Invoke Bot Directly"
                },
                {
                  "name": "JSONGatherContext",
                  "responsibilities": [
                    {
                      "name": "Serialize clarify action to JSON",
                      "collaborators": [
                        "GatherContextAction",
                        "JSON String"
                      ]
                    },
                    {
                      "name": "Include questions and evidence",
                      "collaborators": [
                        "Questions",
                        "Evidence",
                        "JSON"
                      ]
                    },
                    {
                      "name": "Wraps domain action",
                      "collaborators": [
                        "GatherContextAction"
                      ]
                    }
                  ],
                  "module": "actions.clarify",
                  "inherits_from": "JSONProgressAdapter",
                  "_source_path": "Invoke Bot.Invoke Bot Directly"
                },
                {
                  "name": "MarkdownGatherContext",
                  "responsibilities": [
                    {
                      "name": "Serialize clarify action to Markdown",
                      "collaborators": [
                        "GatherContextAction",
                        "Markdown String"
                      ]
                    },
                    {
                      "name": "Format questions list",
                      "collaborators": [
                        "Questions",
                        "Evidence",
                        "Markdown"
                      ]
                    },
                    {
                      "name": "Wraps domain action",
                      "collaborators": [
                        "GatherContextAction"
                      ]
                    }
                  ],
                  "module": "actions.clarify",
                  "inherits_from": "MarkdownProgressAdapter",
                  "_source_path": "Invoke Bot.Invoke Bot Directly"
                },
                {
                  "name": "ClarifyInstructionsSection",
                  "responsibilities": [
                    {
                      "name": "Wraps clarify subsection",
                      "collaborators": [
                        "ClarifyDataSubSection"
                      ]
                    }
                  ],
                  "realization": [
                    {
                      "scope": "Invoke Bot Through Panel.Display Instructions.Display Clarify Instructions",
                      "scenario": "When current action is clarify, panel displays ClarifyInstructionsSection with key questions in editable textareas, user edits answer, system saves via CLI",
                      "walks": [
                        {
                          "covers": "Rendering clarify-specific instructions from JSON",
                          "object_flow": [
                            "InstructionsSection.create(instructionsJSON, actionJSON, cliClient)",
                            "  -> actionType: String = actionJSON.type",
                            "  -> section: InstructionsSection = this.create_section_for_type(actionType, instructionsJSON, actionJSON, cliClient)",
                            "     -> section: ClarifyInstructionsSection = new ClarifyInstructionsSection(instructionsJSON, actionJSON, cliClient)",
                            "        -> this.keyQuestionsJSON = instructionsJSON.clarify.key_questions",
                            "        -> this.cliClient = cliClient",
                            "     return section",
                            "html: String = section.render()",
                            "  -> baseHTML: String = this.renderBase()",
                            "     return `<div>${this.instructionsJSON.behavior_name}.${this.actionJSON.name}</div>`",
                            "  -> questionsHTML: String = this.render_all_questions()",
                            "     return questionsHTML: \"<div class='question'>...</div>...\"",
                            "return `${baseHTML}${questionsHTML}`"
                          ]
                        },
                        {
                          "covers": "User edits answer and saves via CLI",
                          "object_flow": [
                            "ClarifyInstructionsSection.onAnswerChange(questionId, newAnswer)",
                            "  -> question: Object = this.get_question_by_id(questionId)",
                            "  -> result: JSON = this.cliClient.execute(`update_answer \"${question.question}\" \"${newAnswer}\"`)",
                            "     -> cli:  = spawn('python', ['repl_main.py'])",
                            "     -> stdin.write('update_answer ...')",
                            "     -> Bot.update_question_answer(question, newAnswer)",
                            "        -> clarificationFile: Path = behavior.get_clarification_file()",
                            "        -> this.persist_clarification_answer(clarificationFile, question, newAnswer)",
                            "        return {status: 'saved', question: question, answer: newAnswer}",
                            "     return resultJSON",
                            "  -> question.answer = newAnswer",
                            "return"
                          ]
                        }
                      ],
                      "model_updates": []
                    }
                  ],
                  "module": "actions.clarify",
                  "inherits_from": "InstructionsSection",
                  "_source_path": "Invoke Bot.Invoke Bot Directly"
                },
                {
                  "name": "ClarifyDataSubSection",
                  "responsibilities": [
                    {
                      "name": "Wraps key questions JSON",
                      "collaborators": [
                        "KeyQuestions JSON"
                      ]
                    },
                    {
                      "name": "Displays key questions",
                      "collaborators": [
                        "List",
                        "KeyQuestion JSON"
                      ]
                    },
                    {
                      "name": "Updates evidence",
                      "collaborators": [
                        "CLI",
                        "Evidence JSON"
                      ]
                    },
                    {
                      "name": "Edits answer",
                      "collaborators": [
                        "CLI",
                        "KeyQuestion JSON"
                      ]
                    }
                  ],
                  "module": "actions.clarify",
                  "inherits_from": "SubSectionView",
                  "_source_path": "Invoke Bot.Invoke Bot Directly"
                }
              ],
              "test_file": "invoke_bot/perform_action/test_clarify_requirements.py",
              "sub_epics": [],
              "story_groups": [
                {
                  "name": "",
                  "sequential_order": 0.0,
                  "type": "and",
                  "connector": null,
                  "behavior": null,
                  "stories": [
                    {
                      "name": "Clarify Requirements",
                      "sequential_order": 0.0,
                      "connector": "or",
                      "story_type": "user",
                      "users": [
                        "Bot Behavior"
                      ],
                      "test_class": "TestClarifyRequirements",
                      "scenarios": [
                        {
                          "name": "Action injects questions and evidence from production guardrails",
                          "sequential_order": 1.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_action_injects_questions_and_evidence",
                          "steps": "Given Production story_bot with shape behavior (has guardrails)\nWhen Action injects guardrails\nThen Instructions contain questions and evidence from production files",
                          "test": {
                            "method": "test_action_injects_questions_and_evidence",
                            "file": "invoke_bot/perform_action/test_clarify_requirements.py",
                            "line": 30
                          }
                        },
                        {
                          "name": "Save clarification data when parameters are provided",
                          "sequential_order": 2.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_save_clarification_data_when_parameters_provided",
                          "steps": "Given Production story_bot clarify action\nWhen do_execute is called with key_questions_answered and evidence_provided\nThen clarification.json file is created in docs/story/ folder\nThen And file contains behavior section with key_questions and evidence",
                          "test": {
                            "method": "test_save_clarification_data_when_parameters_provided",
                            "file": "invoke_bot/perform_action/test_clarify_requirements.py",
                            "line": 45
                          }
                        },
                        {
                          "name": "Preserve existing clarification data when saving",
                          "sequential_order": 3.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_preserve_existing_clarification_data_when_saving",
                          "steps": "Given clarification.json already exists with data for 'discovery' behavior\nWhen do_execute is called with parameters\nThen clarification.json contains both 'discovery' and 'shape' sections\nThen And Production story_bot clarify action for 'shape' behavior\nThen And existing 'discovery' data is preserved",
                          "test": {
                            "method": "test_preserve_existing_clarification_data_when_saving",
                            "file": "invoke_bot/perform_action/test_clarify_requirements.py",
                            "line": 73
                          }
                        },
                        {
                          "name": "Skip saving when no clarification parameters are provided",
                          "sequential_order": 4.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_skip_saving_when_no_clarification_parameters_provided",
                          "steps": "Given Production story_bot clarify action\nWhen do_execute is called with empty parameters\nThen clarification.json file is not created",
                          "test": {
                            "method": "test_skip_saving_when_no_clarification_parameters_provided",
                            "file": "invoke_bot/perform_action/test_clarify_requirements.py",
                            "line": 121
                          }
                        },
                        {
                          "name": "Guardrails loads required context from workspace",
                          "sequential_order": 5.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_guardrails_loads_required_context_from_workspace",
                          "steps": "Given Workspace with guardrails files (questions and evidence)\nWhen Behavior loads guardrails\nThen Questions and evidence are loaded correctly",
                          "test": {
                            "method": "test_guardrails_loads_required_context_from_workspace",
                            "file": "invoke_bot/perform_action/test_clarify_requirements.py",
                            "line": 140
                          }
                        },
                        {
                          "name": "Guardrails loads strategy assumptions from workspace",
                          "sequential_order": 6.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_guardrails_loads_strategy_assumptions_from_workspace",
                          "steps": "Given Workspace with strategy guardrails files\nWhen Behavior loads guardrails\nThen Strategy assumptions are loaded correctly",
                          "test": {
                            "method": "test_guardrails_loads_strategy_assumptions_from_workspace",
                            "file": "invoke_bot/perform_action/test_clarify_requirements.py",
                            "line": 173
                          }
                        }
                      ],
                      "acceptance_criteria": [],
                      "behavior": null
                    },
                    {
                      "name": "Clarify Requirements Using CLI",
                      "sequential_order": 1.0,
                      "connector": null,
                      "story_type": "user",
                      "users": [
                        "User"
                      ],
                      "test_class": "TestClarifyRequirementsUsingCLI",
                      "scenarios": [
                        {
                          "name": "Clarify action shows questions and evidence in CLI output",
                          "sequential_order": 1.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_clarify_action_shows_questions_and_evidence",
                          "steps": "GIVEN: CLI is at shape.clarify\nWHEN: user navigates to shape.clarify\nTHEN: CLI output contains questions and evidence from guardrails",
                          "test": {
                            "method": "test_clarify_action_shows_questions_and_evidence",
                            "file": "invoke_bot/perform_action/test_clarify_requirements.py",
                            "line": 228
                          }
                        }
                      ],
                      "acceptance_criteria": [],
                      "behavior": null
                    },
                    {
                      "name": "Display Clarification Data Through CLI",
                      "sequential_order": 2.0,
                      "connector": null,
                      "story_type": "user",
                      "users": [
                        "User"
                      ],
                      "test_class": "TestDisplayClarificationDataThroughCLI",
                      "scenarios": [
                        {
                          "name": "Display stored clarification data",
                          "sequential_order": 1.0,
                          "type": "",
                          "background": [],
                          "test_method": "test_display_stored_clarification_data",
                          "steps": "GIVEN: Clarification data exists\nWHEN: user views clarify instructions\nTHEN: CLI displays stored clarification data"
                        }
                      ],
                      "acceptance_criteria": [],
                      "behavior": null
                    },
                    {
                      "name": "Display Clarify Instructions Panel",
                      "sequential_order": 3.0,
                      "connector": "and",
                      "story_type": "user",
                      "users": [
                        "User"
                      ],
                      "test_class": "TestDisplayClarifyInstructions",
                      "scenarios": [
                        {
                          "name": "",
                          "sequential_order": 1.0,
                          "type": "",
                          "background": [],
                          "test_method": null,
                          "steps": "Given Bot is at shape.clarify\nAnd Guardrails define key questions and evidence\nWhen Panel displays instructions section\nThen Panel displays key questions list\nAnd Panel displays evidence requirements\nAnd Each question has editable textarea for answers"
                        },
                        {
                          "name": "",
                          "sequential_order": 2.0,
                          "type": "",
                          "background": [],
                          "test_method": null,
                          "steps": "Given Panel displays clarify instructions with questions\nWhen User types answer in question textarea\nThen System saves answer\nAnd Answer persists across panel refreshes"
                        },
                        {
                          "name": "",
                          "sequential_order": 3.0,
                          "type": "",
                          "background": [],
                          "test_method": null,
                          "steps": "Given User has previously answered clarify questions\nAnd Answers are saved in clarification.json\nWhen Panel displays clarify instructions\nThen Panel displays saved answers in textareas"
                        },
                        {
                          "name": "",
                          "sequential_order": 4.0,
                          "type": "",
                          "background": [],
                          "test_method": "test_user_views_strategy_guardrails_in_clarify_action",
                          "steps": "Given Bot is at shape.clarify\nAnd User has previously made strategy decisions\nWhen Panel displays clarify instructions\nThen Panel displays Strategy section\nAnd Strategy section shows all decision criteria with selected options\nAnd Strategy section shows saved assumptions\nAnd Strategy data is read-only (not editable in clarify action)"
                        }
                      ],
                      "acceptance_criteria": [
                        {
                          "name": "WHEN Current action is clarify\nTHEN System displays key questions with editable answer textareas AND System displays evidence list",
                          "text": "WHEN Current action is clarify\nTHEN System displays key questions with editable answer textareas AND System displays evidence list",
                          "sequential_order": 1.0
                        },
                        {
                          "name": "WHEN User edits answer textarea\nTHEN System updates answer",
                          "text": "WHEN User edits answer textarea\nTHEN System updates answer",
                          "sequential_order": 2.0
                        },
                        {
                          "name": "WHEN saved key questions and answers exists\nTHEN System displays saved key questions and answers",
                          "text": "WHEN saved key questions and answers exists\nTHEN System displays saved key questions and answers",
                          "sequential_order": 3.0
                        },
                        {
                          "name": "WHEN User is on non-clarify actions and has previously made strategy decisions\nTHEN System displays saved strategy decisions and criteria as read-only",
                          "text": "WHEN User is on non-clarify actions and has previously made strategy decisions\nTHEN System displays saved strategy decisions and criteria as read-only",
                          "sequential_order": 4.0
                        }
                      ],
                      "behavior": null
                    },
                    {
                      "name": "Get Clarify Instructions Through CLI",
                      "sequential_order": 4.0,
                      "connector": "and",
                      "story_type": "user",
                      "users": [
                        "User"
                      ],
                      "test_class": "TestGetClarifyInstructionsThroughCLI",
                      "scenarios": [
                        {
                          "name": "Get clarify instructions with questions",
                          "sequential_order": 1.0,
                          "type": "",
                          "background": [],
                          "test_method": "test_get_clarify_instructions_with_questions",
                          "steps": "GIVEN: CLI is at shape.clarify.instructions\nWHEN: user enters 'shape.clarify.instructions'\nTHEN: CLI displays key questions and required evidence"
                        }
                      ],
                      "acceptance_criteria": [],
                      "behavior": null
                    },
                    {
                      "name": "Clarify in Queue",
                      "sequential_order": 5.0,
                      "connector": null,
                      "story_type": "user",
                      "users": [],
                      "test_class": null,
                      "scenarios": [],
                      "acceptance_criteria": [],
                      "behavior": null
                    },
                    {
                      "name": "Display clarification answers in Queue",
                      "sequential_order": 6.0,
                      "connector": null,
                      "story_type": "user",
                      "users": [],
                      "test_class": null,
                      "scenarios": [],
                      "acceptance_criteria": [],
                      "behavior": null
                    },
                    {
                      "name": "Associate Guard rail with scope",
                      "sequential_order": 7.0,
                      "connector": null,
                      "story_type": "user",
                      "users": [],
                      "test_class": null,
                      "scenarios": [],
                      "acceptance_criteria": [],
                      "behavior": null
                    }
                  ]
                }
              ]
            },
            {
              "name": "Decide Strategy",
              "sequential_order": 2.0,
              "behavior": null,
              "domain_concepts": [
                {
                  "name": "StrategyAction",
                  "responsibilities": [
                    {
                      "name": "Inject Strategy instructions",
                      "collaborators": [
                        "Behavior",
                        "Guardrails",
                        "Strategy"
                      ]
                    },
                    {
                      "name": "Inject decision criteria and assumptions",
                      "collaborators": [
                        "Behavior",
                        "Guardrails",
                        "Decision Criteria",
                        "Assumptions",
                        "Recommended Human Activity"
                      ]
                    }
                  ],
                  "module": "actions.strategy",
                  "_source_path": "Invoke Bot.Invoke Bot Directly"
                },
                {
                  "name": "TTYStrategy",
                  "responsibilities": [
                    {
                      "name": "Serialize strategy action to TTY",
                      "collaborators": [
                        "StrategyAction",
                        "TTY String"
                      ]
                    },
                    {
                      "name": "Format decision criteria",
                      "collaborators": [
                        "Criteria",
                        "Assumptions",
                        "TTY String"
                      ]
                    },
                    {
                      "name": "Wraps domain action",
                      "collaborators": [
                        "StrategyAction"
                      ]
                    }
                  ],
                  "module": "actions.strategy",
                  "inherits_from": "TTYProgressAdapter",
                  "_source_path": "Invoke Bot.Invoke Bot Directly"
                },
                {
                  "name": "JSONStrategy",
                  "responsibilities": [
                    {
                      "name": "Serialize strategy action to JSON",
                      "collaborators": [
                        "StrategyAction",
                        "JSON String"
                      ]
                    },
                    {
                      "name": "Include criteria and assumptions",
                      "collaborators": [
                        "Criteria",
                        "Assumptions",
                        "JSON"
                      ]
                    },
                    {
                      "name": "Wraps domain action",
                      "collaborators": [
                        "StrategyAction"
                      ]
                    }
                  ],
                  "module": "actions.strategy",
                  "inherits_from": "JSONProgressAdapter",
                  "_source_path": "Invoke Bot.Invoke Bot Directly"
                },
                {
                  "name": "MarkdownStrategy",
                  "responsibilities": [
                    {
                      "name": "Serialize strategy action to Markdown",
                      "collaborators": [
                        "StrategyAction",
                        "Markdown String"
                      ]
                    },
                    {
                      "name": "Format strategy documentation",
                      "collaborators": [
                        "Criteria",
                        "Assumptions",
                        "Markdown"
                      ]
                    },
                    {
                      "name": "Wraps domain action",
                      "collaborators": [
                        "StrategyAction"
                      ]
                    }
                  ],
                  "module": "actions.strategy",
                  "inherits_from": "MarkdownProgressAdapter",
                  "_source_path": "Invoke Bot.Invoke Bot Directly"
                },
                {
                  "name": "StrategyInstructionsSection",
                  "responsibilities": [
                    {
                      "name": "Wraps strategy subsection",
                      "collaborators": [
                        "StrategyDataSubSection"
                      ]
                    }
                  ],
                  "module": "actions.strategy",
                  "inherits_from": "InstructionsSection",
                  "_source_path": "Invoke Bot.Invoke Bot Directly"
                },
                {
                  "name": "StrategyDataSubSection",
                  "responsibilities": [
                    {
                      "name": "Wraps strategy JSON",
                      "collaborators": [
                        "Strategy JSON"
                      ]
                    },
                    {
                      "name": "Displays decision criteria",
                      "collaborators": [
                        "List",
                        "DecisionCriteria JSON"
                      ]
                    },
                    {
                      "name": "Displays assumptions",
                      "collaborators": [
                        "String",
                        "Assumptions JSON"
                      ]
                    },
                    {
                      "name": "Edits decision criterion",
                      "collaborators": [
                        "CLI",
                        "DecisionCriterion JSON"
                      ]
                    },
                    {
                      "name": "Edits assumption",
                      "collaborators": [
                        "CLI",
                        "Assumption JSON"
                      ]
                    }
                  ],
                  "module": "actions.strategy",
                  "inherits_from": "SubSectionView",
                  "_source_path": "Invoke Bot.Invoke Bot Directly"
                }
              ],
              "test_file": "invoke_bot/perform_action/test_decide_strategy.py",
              "sub_epics": [],
              "story_groups": [
                {
                  "name": "",
                  "sequential_order": 0.0,
                  "type": "and",
                  "connector": null,
                  "behavior": null,
                  "stories": [
                    {
                      "name": "Decide Strategy",
                      "sequential_order": 0.0,
                      "connector": "or",
                      "story_type": "user",
                      "users": [
                        "Bot Behavior"
                      ],
                      "test_class": "TestDecideStrategy",
                      "scenarios": [
                        {
                          "name": "Action Injects Decision Criteria And Assumptions",
                          "sequential_order": 1.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_action_injects_decision_criteria_and_assumptions",
                          "steps": "Given Production story_bot with shape behavior (has guardrails)\nWhen Action injects strategy criteria and assumptions\nThen Instructions contain all required strategy fields",
                          "test": {
                            "method": "test_action_injects_decision_criteria_and_assumptions",
                            "file": "invoke_bot/perform_action/test_decide_strategy.py",
                            "line": 31
                          }
                        },
                        {
                          "name": "Save strategy data when parameters are provided",
                          "sequential_order": 2.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_save_strategy_data_when_parameters_provided",
                          "steps": "Given Production story_bot strategy action\nWhen do_execute is called with decisions_made and assumptions_made\nThen strategy.json file is created in docs/story/ folder\nThen And file contains behavior section with decisions_made and assumptions_made",
                          "test": {
                            "method": "test_save_strategy_data_when_parameters_provided",
                            "file": "invoke_bot/perform_action/test_decide_strategy.py",
                            "line": 46
                          }
                        },
                        {
                          "name": "Preserve existing strategy data when saving",
                          "sequential_order": 3.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_preserve_existing_strategy_data_when_saving",
                          "steps": "Given strategy.json already exists with data for 'discovery' behavior\nWhen do_execute is called with parameters\nThen strategy.json contains both 'discovery' and 'shape' sections\nThen And Production story_bot strategy action for 'shape' behavior\nThen And existing 'discovery' data is preserved",
                          "test": {
                            "method": "test_preserve_existing_strategy_data_when_saving",
                            "file": "invoke_bot/perform_action/test_decide_strategy.py",
                            "line": 82
                          }
                        },
                        {
                          "name": "Skip saving when no strategy parameters are provided",
                          "sequential_order": 4.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_skip_saving_when_no_strategy_parameters_provided",
                          "steps": "Given Production story_bot strategy action\nWhen do_execute is called with empty parameters\nThen strategy.json file is not created",
                          "test": {
                            "method": "test_skip_saving_when_no_strategy_parameters_provided",
                            "file": "invoke_bot/perform_action/test_decide_strategy.py",
                            "line": 130
                          }
                        }
                      ],
                      "acceptance_criteria": [],
                      "behavior": null
                    },
                    {
                      "name": "Decide Strategy Using CLI",
                      "sequential_order": 1.0,
                      "connector": null,
                      "story_type": "user",
                      "users": [
                        "User"
                      ],
                      "test_class": "TestDecideStrategyUsingCLI",
                      "scenarios": [
                        {
                          "name": "Strategy action shows criteria and assumptions in CLI output",
                          "sequential_order": 1.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_strategy_action_shows_criteria_and_assumptions",
                          "steps": "GIVEN: CLI is at shape.strategy\nWHEN: user navigates to shape.strategy\nTHEN: CLI output contains decision criteria and assumptions",
                          "test": {
                            "method": "test_strategy_action_shows_criteria_and_assumptions",
                            "file": "invoke_bot/perform_action/test_decide_strategy.py",
                            "line": 170
                          }
                        }
                      ],
                      "acceptance_criteria": [],
                      "behavior": null
                    },
                    {
                      "name": "Display Strategy Data Through CLI",
                      "sequential_order": 2.0,
                      "connector": null,
                      "story_type": "user",
                      "users": [
                        "User"
                      ],
                      "test_class": "TestDisplayStrategyDataThroughCLI",
                      "scenarios": [
                        {
                          "name": "Display stored strategy data",
                          "sequential_order": 1.0,
                          "type": "",
                          "background": [],
                          "test_method": "test_display_stored_strategy_data",
                          "steps": "GIVEN: Strategy data exists\nWHEN: user views strategy instructions\nTHEN: CLI displays stored strategy decisions and assumptions"
                        }
                      ],
                      "acceptance_criteria": [],
                      "behavior": null
                    },
                    {
                      "name": "Display Strategy Instructions Panel",
                      "sequential_order": 3.0,
                      "connector": "and",
                      "story_type": "user",
                      "users": [
                        "User"
                      ],
                      "test_class": "TestDisplayStrategyInstructions",
                      "scenarios": [
                        {
                          "name": "",
                          "sequential_order": 1.0,
                          "type": "",
                          "background": [],
                          "test_method": null,
                          "steps": "Given Bot is at shape.strategy\nWhen Panel displays instructions section\nThen Panel displays decision criteria with radio options\nAnd Panel displays assumptions textarea\nAnd User can select option for each criterion"
                        },
                        {
                          "name": "",
                          "sequential_order": 2.0,
                          "type": "",
                          "background": [],
                          "test_method": null,
                          "steps": "Given Panel displays strategy instructions\nWhen User selects radio option for decision criterion\nThen System saves selected option\nAnd Selection persists across panel refreshes"
                        },
                        {
                          "name": "",
                          "sequential_order": 3.0,
                          "type": "",
                          "background": [],
                          "test_method": "test_assumptions_textarea_remains_editable_after_being_saved",
                          "steps": "Given Bot is at shape.strategy\nAnd User has previously saved assumptions\nWhen Panel displays strategy instructions\nThen Assumptions textarea is displayed as editable input\nAnd Textarea is pre-filled with saved assumptions\nAnd User can edit and update assumptions"
                        },
                        {
                          "name": "",
                          "sequential_order": 4.0,
                          "type": "",
                          "background": [],
                          "test_method": "test_user_views_clarify_answers_in_strategy_action",
                          "steps": "Given Bot is at shape.strategy\nAnd User has previously answered clarify questions\nWhen Panel displays strategy instructions\nThen Panel displays Clarify section\nAnd Clarify section shows answered questions\nAnd Clarify data is read-only (not editable in strategy action)"
                        }
                      ],
                      "acceptance_criteria": [
                        {
                          "name": "WHEN Current action is strategy\nTHEN System displays decision criteria with radio button options AND System displays assumptions textarea",
                          "text": "WHEN Current action is strategy\nTHEN System displays decision criteria with radio button options AND System displays assumptions textarea",
                          "sequential_order": 1.0
                        },
                        {
                          "name": "WHEN Saved strategy exists\nTHEN System displays selected option for each decision criterion AND Assumptions textarea remains editable AND Textarea is pre-filled with saved assumptions",
                          "text": "WHEN Saved strategy exists\nTHEN System displays selected option for each decision criterion AND Assumptions textarea remains editable AND Textarea is pre-filled with saved assumptions",
                          "sequential_order": 2.0
                        },
                        {
                          "name": "WHEN User edits assumptions textarea\nTHEN System updates assumptions",
                          "text": "WHEN User edits assumptions textarea\nTHEN System updates assumptions",
                          "sequential_order": 3.0
                        },
                        {
                          "name": "WHEN User is on non-strategy actions (clarify, build, validate, render)\nTHEN System displays saved strategy decisions and criteria as read-only",
                          "text": "WHEN User is on non-strategy actions (clarify, build, validate, render)\nTHEN System displays saved strategy decisions and criteria as read-only",
                          "sequential_order": 4.0
                        }
                      ],
                      "behavior": null
                    },
                    {
                      "name": "Submit Instructions To AI Agent Panel",
                      "sequential_order": 4.0,
                      "connector": "and",
                      "story_type": "user",
                      "users": [
                        "User"
                      ],
                      "test_class": "TestSubmitInstructionsToAIAgent",
                      "scenarios": [
                        {
                          "name": "",
                          "sequential_order": 1.0,
                          "type": "",
                          "background": [],
                          "test_method": null,
                          "steps": "Given Panel displays instructions for current action\nWhen User clicks submit button\nThen System sends instructions to Cursor AI chat\nAnd Panel displays success confirmation message\nAnd AI chat receives instructions"
                        },
                        {
                          "name": "",
                          "sequential_order": 2.0,
                          "type": "",
                          "background": [],
                          "test_method": null,
                          "steps": "Given Panel displays instructions\nAnd Cursor AI chat is not available\nWhen User clicks submit button\nThen Panel displays error message\nAnd Error message indicates chat unavailable"
                        },
                        {
                          "name": "",
                          "sequential_order": 3.0,
                          "type": "",
                          "background": [],
                          "test_method": null,
                          "steps": "Given Panel displays instructions\nWhen User clicks copy button\nThen Instructions are copied to clipboard\nWhen User clicks submit button\nThen Instructions are also sent to AI chat"
                        },
                        {
                          "name": "",
                          "sequential_order": 4.0,
                          "type": "",
                          "background": [],
                          "test_method": "test_submitted_instructions_include_complete_scope_with_story_tree",
                          "steps": "Given Bot has scope set to story Open Panel\nAnd Scope.results contains full story graph hierarchy\nWhen User clicks submit in panel\nThen Submitted instructions contain Scope section at top\nAnd Scope section shows Story Scope: Open Panel\nAnd Scope section shows complete epic/sub-epic/story hierarchy"
                        },
                        {
                          "name": "",
                          "sequential_order": 5.0,
                          "type": "",
                          "background": [],
                          "test_method": "test_submitted_instructions_include_all_guardrails",
                          "steps": "Given Bot is at shape.build\nAnd User has answered clarify questions\nAnd User has made strategy decisions\nWhen User clicks submit in panel\nThen Submitted instructions include Clarify section with answers\nAnd Submitted instructions include Strategy section with decisions and assumptions\nAnd All saved guardrails are visible in submitted markdown"
                        }
                      ],
                      "acceptance_criteria": [
                        {
                          "name": "When user has clicked on a Behavior Action's Instructions AND User clicks submit button THEN System sends instructions to AI chat",
                          "text": "When user has clicked on a Behavior Action's Instructions AND User clicks submit button THEN System sends instructions to AI chat",
                          "sequential_order": 1.0
                        },
                        {
                          "name": "WHEN User clicks submit button\nTHEN Submitted instructions include scope section AND Scope section includes scope type (story/files/all) AND Scope section includes scope filter values AND Scope section includes complete story graph tree when scope is story-based",
                          "text": "WHEN User clicks submit button\nTHEN Submitted instructions include scope section AND Scope section includes scope type (story/files/all) AND Scope section includes scope filter values AND Scope section includes complete story graph tree when scope is story-based",
                          "sequential_order": 2.0
                        },
                        {
                          "name": "WHEN User has answered clarify questions or made strategy decisions\nTHEN Submitted instructions include all saved guardrails",
                          "text": "WHEN User has answered clarify questions or made strategy decisions\nTHEN Submitted instructions include all saved guardrails",
                          "sequential_order": 3.0
                        }
                      ],
                      "behavior": null
                    },
                    {
                      "name": "Get Strategy Instructions Through CLI",
                      "sequential_order": 5.0,
                      "connector": "and",
                      "story_type": "user",
                      "users": [
                        "User"
                      ],
                      "test_class": "TestGetStrategyInstructionsThroughCLI",
                      "scenarios": [
                        {
                          "name": "Get strategy instructions with criteria",
                          "sequential_order": 1.0,
                          "type": "",
                          "background": [],
                          "test_method": "test_get_strategy_instructions_with_criteria",
                          "steps": "GIVEN: CLI is at shape.strategy.instructions\nWHEN: user enters 'shape.strategy.instructions'\nTHEN: CLI displays planning criteria and assumptions"
                        }
                      ],
                      "acceptance_criteria": [],
                      "behavior": null
                    },
                    {
                      "name": "MAke Choices in queue",
                      "sequential_order": 6.0,
                      "connector": null,
                      "story_type": "user",
                      "users": [],
                      "test_class": null,
                      "scenarios": [],
                      "acceptance_criteria": [],
                      "behavior": null
                    },
                    {
                      "name": "Display Chopices in Queue",
                      "sequential_order": 7.0,
                      "connector": null,
                      "story_type": "user",
                      "users": [],
                      "test_class": null,
                      "scenarios": [],
                      "acceptance_criteria": [],
                      "behavior": null
                    }
                  ]
                }
              ]
            },
            {
              "name": "Build Story Graph",
              "sequential_order": 3.0,
              "behavior": null,
              "domain_concepts": [
                {
                  "name": "BuildKnowledgeAction",
                  "responsibilities": [
                    {
                      "name": "Inject knowledge graph template",
                      "collaborators": [
                        "Behavior",
                        "Content",
                        "Knowledge Graph Spec",
                        "Knowledge Graph"
                      ]
                    },
                    {
                      "name": "Inject builder instructions",
                      "collaborators": [
                        "Behavior",
                        "Content",
                        "Build Instructions"
                      ]
                    },
                    {
                      "name": "Save Knowledge graph",
                      "collaborators": [
                        "Behavior",
                        "Content",
                        "Knowledge Graph"
                      ]
                    }
                  ],
                  "module": "actions.build",
                  "_source_path": "Invoke Bot.Invoke Bot Directly"
                },
                {
                  "name": "TTYBuildKnowledge",
                  "responsibilities": [
                    {
                      "name": "Serialize build action to TTY",
                      "collaborators": [
                        "BuildKnowledgeAction",
                        "String"
                      ]
                    },
                    {
                      "name": "Format build status",
                      "collaborators": [
                        "Status",
                        "TTY String"
                      ]
                    },
                    {
                      "name": "Wraps domain action",
                      "collaborators": [
                        "BuildKnowledgeAction"
                      ]
                    }
                  ],
                  "module": "actions.build",
                  "inherits_from": "TTYProgressAdapter",
                  "_source_path": "Invoke Bot.Invoke Bot Directly"
                },
                {
                  "name": "JSONBuildKnowledge",
                  "responsibilities": [
                    {
                      "name": "Serialize build action to JSON",
                      "collaborators": [
                        "BuildKnowledgeAction",
                        "JSON String"
                      ]
                    },
                    {
                      "name": "Include build metadata",
                      "collaborators": [
                        "Knowledge Graph Spec",
                        "JSON"
                      ]
                    },
                    {
                      "name": "Wraps domain action",
                      "collaborators": [
                        "BuildKnowledgeAction"
                      ]
                    }
                  ],
                  "module": "actions.build",
                  "inherits_from": "JSONProgressAdapter",
                  "_source_path": "Invoke Bot.Invoke Bot Directly"
                },
                {
                  "name": "MarkdownBuildKnowledge",
                  "responsibilities": [
                    {
                      "name": "Serialize build action to Markdown",
                      "collaborators": [
                        "BuildKnowledgeAction",
                        "Markdown String"
                      ]
                    },
                    {
                      "name": "Format build documentation",
                      "collaborators": [
                        "Knowledge Graph Spec",
                        "Markdown"
                      ]
                    },
                    {
                      "name": "Wraps domain action",
                      "collaborators": [
                        "BuildKnowledgeAction"
                      ]
                    }
                  ],
                  "module": "actions.build",
                  "inherits_from": "MarkdownProgressAdapter",
                  "_source_path": "Invoke Bot.Invoke Bot Directly"
                },
                {
                  "name": "BuildInstructionsSection",
                  "responsibilities": [
                    {
                      "name": "Wraps build subsection",
                      "collaborators": [
                        "BuildDataSubSection"
                      ]
                    }
                  ],
                  "module": "actions.build",
                  "inherits_from": "InstructionsSection",
                  "_source_path": "Invoke Bot.Invoke Bot Directly"
                },
                {
                  "name": "BuildDataSubSection",
                  "responsibilities": [
                    {
                      "name": "Wraps build JSON",
                      "collaborators": [
                        "Build JSON"
                      ]
                    },
                    {
                      "name": "Displays knowledge graph spec",
                      "collaborators": [
                        "Object",
                        "KnowledgeGraphSpec JSON"
                      ]
                    },
                    {
                      "name": "Displays graph structure",
                      "collaborators": [
                        "Object",
                        "KnowledgeGraphSpec JSON"
                      ]
                    },
                    {
                      "name": "Displays builder instructions",
                      "collaborators": [
                        "String",
                        "BuilderInstructions JSON"
                      ]
                    },
                    {
                      "name": "Opens graph file",
                      "collaborators": [
                        "CLI",
                        "Path JSON"
                      ]
                    }
                  ],
                  "module": "actions.build",
                  "inherits_from": "SubSectionView",
                  "_source_path": "Invoke Bot.Invoke Bot Directly"
                }
              ],
              "test_file": "invoke_bot/perform_action/test_build_story_graph.py",
              "sub_epics": [],
              "story_groups": [
                {
                  "name": "",
                  "sequential_order": 0.0,
                  "type": "and",
                  "connector": null,
                  "behavior": null,
                  "stories": [
                    {
                      "name": "Build Story Graph",
                      "sequential_order": 0.0,
                      "connector": "or",
                      "story_type": "user",
                      "users": [
                        "Bot Behavior"
                      ],
                      "test_class": "TestBuildStoryGraph",
                      "scenarios": [
                        {
                          "name": "Action Injects Story Graph Template",
                          "sequential_order": 1.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_action_injects_story_graph_template",
                          "steps": "Given Production story_bot with shape behavior (has story graph templates)\nWhen Action injects story graph template\nThen Instructions contain template_path from existing templates",
                          "test": {
                            "method": "test_action_injects_story_graph_template",
                            "file": "invoke_bot/perform_action/test_build_story_graph.py",
                            "line": 31
                          }
                        },
                        {
                          "name": "Action Loads And Merges Instructions",
                          "sequential_order": 2.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_action_loads_and_merges_instructions",
                          "steps": "Given Production story_bot with shape behavior (has story graph templates)\nWhen Action injects story graph and instructions\nThen Instructions contain all BuildStoryGraphAction-specific fields",
                          "test": {
                            "method": "test_action_loads_and_merges_instructions",
                            "file": "invoke_bot/perform_action/test_build_story_graph.py",
                            "line": 47
                          }
                        },
                        {
                          "name": "All Template Variables Are Replaced In Instructions",
                          "sequential_order": 3.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_all_template_variables_are_replaced_in_instructions",
                          "steps": "Given Production story_bot with shape behavior (has story graph templates)\nWhen Action injects all template variables\nThen Instructions contain all required BuildStoryGraphAction fields",
                          "test": {
                            "method": "test_all_template_variables_are_replaced_in_instructions",
                            "file": "invoke_bot/perform_action/test_build_story_graph.py",
                            "line": 62
                          }
                        },
                        {
                          "name": "Prioritization behavior updates existing story-graph.json",
                          "sequential_order": 4.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_behavior_updates_existing_story_graph_json",
                          "steps": "Given Production prioritization behavior with increments templates\nWhen Action injects story graph template for increments\nThen Instructions use production template (story_graph_increments.json) that updates existing file\nThen And Existing story-graph.json in workspace",
                          "test": {
                            "method": "test_behavior_updates_existing_story_graph_json",
                            "file": "invoke_bot/perform_action/test_build_story_graph.py",
                            "line": 77
                          }
                        }
                      ],
                      "acceptance_criteria": [],
                      "behavior": null
                    },
                    {
                      "name": "Build Story Graph Using CLI",
                      "sequential_order": 1.0,
                      "connector": null,
                      "story_type": "user",
                      "users": [
                        "User"
                      ],
                      "test_class": "TestBuildStoryGraphUsingCLI",
                      "scenarios": [
                        {
                          "name": "Build action shows story graph template in CLI output",
                          "sequential_order": 1.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_build_action_shows_template_in_output",
                          "steps": "GIVEN: CLI is at shape.build\nWHEN: user navigates to shape.build\nTHEN: CLI output contains template_path information",
                          "test": {
                            "method": "test_build_action_shows_template_in_output",
                            "file": "invoke_bot/perform_action/test_build_story_graph.py",
                            "line": 127
                          }
                        },
                        {
                          "name": "Build action shows complete build story graph instructions",
                          "sequential_order": 2.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_build_action_shows_complete_instructions",
                          "steps": "GIVEN: CLI is at shape.build\nWHEN: user navigates to shape.build\nTHEN: CLI output contains all BuildStoryGraphAction fields",
                          "test": {
                            "method": "test_build_action_shows_complete_instructions",
                            "file": "invoke_bot/perform_action/test_build_story_graph.py",
                            "line": 153
                          }
                        },
                        {
                          "name": "Prioritization validate action shows increments validation",
                          "sequential_order": 3.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_prioritization_validate_shows_increments_instructions",
                          "steps": "GIVEN: CLI is at prioritization.validate\nAND: Story graph exists in workspace\nWHEN: user navigates to prioritization.validate\nTHEN: CLI output shows validation instructions for increments",
                          "test": {
                            "method": "test_prioritization_validate_shows_increments_instructions",
                            "file": "invoke_bot/perform_action/test_build_story_graph.py",
                            "line": 178
                          }
                        }
                      ],
                      "acceptance_criteria": [],
                      "behavior": null
                    },
                    {
                      "name": "Get Build Instructions Through CLI",
                      "sequential_order": 2.0,
                      "connector": "and",
                      "story_type": "user",
                      "users": [
                        "User"
                      ],
                      "test_class": "TestGetBuildInstructionsThroughCLI",
                      "scenarios": [
                        {
                          "name": "Get build instructions without scope",
                          "sequential_order": 1.0,
                          "type": "",
                          "background": [],
                          "test_method": "test_get_build_instructions_without_scope",
                          "steps": "GIVEN: CLI is at shape.build.instructions\nWHEN: user enters 'shape.build.instructions'\nTHEN: CLI displays build instructions with full knowledge graph"
                        },
                        {
                          "name": "Get build instructions with scope",
                          "sequential_order": 2.0,
                          "type": "",
                          "background": [],
                          "test_method": "test_get_build_instructions_with_scope",
                          "steps": "GIVEN: CLI is at shape.build.instructions\nWHEN: user enters 'shape.build.instructions scope=\"Story1\"'\nTHEN: CLI displays build instructions filtered to Story1"
                        }
                      ],
                      "acceptance_criteria": [],
                      "behavior": null
                    },
                    {
                      "name": "Build Story Graph Using API",
                      "sequential_order": 3.0,
                      "connector": "or",
                      "story_type": "user",
                      "users": [
                        "Bot Behavior"
                      ],
                      "test_class": "TestBuildStoryGraphUsingAPI",
                      "scenarios": [],
                      "acceptance_criteria": [
                        {
                          "name": "WHEN Bot is called through StoryMap API\nTHEN caller uses create_epic(), create_child(), create_story() for fine-grained construction\nAND caller validates each node during creation\nAND validation errors caught immediately before invalid structure created",
                          "text": "WHEN Bot is called through StoryMap API\nTHEN caller uses create_epic(), create_child(), create_story() for fine-grained construction\nAND caller validates each node during creation\nAND validation errors caught immediately before invalid structure created",
                          "sequential_order": 1.0
                        },
                        {
                          "name": "WHEN Bot is called with large story graph structures\nTHEN caller uses create_epic_from_dict() for batch operations\nAND caller passes dictionary notation with epic/sub-epic/story hierarchy\nAND StoryMap converts dict notation to domain objects\nAND StoryMap validates entire structure before committing",
                          "text": "WHEN Bot is called with large story graph structures\nTHEN caller uses create_epic_from_dict() for batch operations\nAND caller passes dictionary notation with epic/sub-epic/story hierarchy\nAND StoryMap converts dict notation to domain objects\nAND StoryMap validates entire structure before committing",
                          "sequential_order": 2.0
                        },
                        {
                          "name": "WHEN StoryMap uses save() method\nTHEN StoryMap persists story_graph dict to JSON file\nAND file format matches existing story-graph.json structure\nAND all nodes converted to dict representation before saving",
                          "text": "WHEN StoryMap uses save() method\nTHEN StoryMap persists story_graph dict to JSON file\nAND file format matches existing story-graph.json structure\nAND all nodes converted to dict representation before saving",
                          "sequential_order": 3.0
                        },
                        {
                          "name": "WHEN StoryMap uses load() method\nTHEN StoryMap reads JSON file\nAND StoryMap rebuilds domain model from JSON\nAND StoryMap reconstructs all Epic, SubEpic, Story objects with relationships",
                          "text": "WHEN StoryMap uses load() method\nTHEN StoryMap reads JSON file\nAND StoryMap rebuilds domain model from JSON\nAND StoryMap reconstructs all Epic, SubEpic, Story objects with relationships",
                          "sequential_order": 4.0
                        },
                        {
                          "name": "WHEN fine-grained and batch APIs implement same interface\nTHEN both validate hierarchy rules (no mixing sub-epics and stories)\nAND both handle positioning and resequencing\nAND both update story_graph dict representation\nAND interface enables incremental construction or bulk creation",
                          "text": "WHEN fine-grained and batch APIs implement same interface\nTHEN both validate hierarchy rules (no mixing sub-epics and stories)\nAND both handle positioning and resequencing\nAND both update story_graph dict representation\nAND interface enables incremental construction or bulk creation",
                          "sequential_order": 5.0
                        }
                      ],
                      "behavior": null
                    },
                    {
                      "name": "Display Build Instructions Panel",
                      "sequential_order": 4.0,
                      "connector": "and",
                      "story_type": "user",
                      "users": [
                        "User"
                      ],
                      "test_class": "TestDisplayBuildInstructions",
                      "scenarios": [
                        {
                          "name": "",
                          "sequential_order": 1.0,
                          "type": "",
                          "background": [],
                          "test_method": null,
                          "steps": "Given Bot is at shape.build\nWhen Panel displays instructions section\nThen Panel displays knowledge graph template link\nAnd Panel displays knowledge graph output file link\nAnd Panel displays rules list with clickable links"
                        },
                        {
                          "name": "",
                          "sequential_order": 2.0,
                          "type": "",
                          "background": [],
                          "test_method": null,
                          "steps": "Given Panel displays build instructions\nWhen User clicks template path link\nThen VS Code opens knowledge graph template file in editor"
                        }
                      ],
                      "acceptance_criteria": [
                        {
                          "name": "WHEN Current action is build\nTHEN System displays knowledge graph section with template path link AND System displays knowledge graph output file link AND System displays knowledge graph directory path AND System displays rules list with clickable rule file links",
                          "text": "WHEN Current action is build\nTHEN System displays knowledge graph section with template path link AND System displays knowledge graph output file link AND System displays knowledge graph directory path AND System displays rules list with clickable rule file links",
                          "sequential_order": 1.0
                        }
                      ],
                      "behavior": null
                    },
                    {
                      "name": "Build Story Graph Through Queue",
                      "sequential_order": 5.0,
                      "connector": null,
                      "story_type": "user",
                      "users": [],
                      "test_class": null,
                      "scenarios": [],
                      "acceptance_criteria": [],
                      "behavior": null
                    }
                  ]
                }
              ]
            },
            {
              "name": "Render Content",
              "sequential_order": 4.0,
              "behavior": null,
              "domain_concepts": [
                {
                  "name": "RenderOutputAction",
                  "responsibilities": [
                    {
                      "name": "Inject render output instructions",
                      "collaborators": [
                        "Behavior",
                        "Content",
                        "Render Spec",
                        "Renderer"
                      ]
                    },
                    {
                      "name": "Inject templates",
                      "collaborators": [
                        "Behavior",
                        "Content",
                        "Render Spec",
                        "Template"
                      ]
                    },
                    {
                      "name": "Inject transformers",
                      "collaborators": [
                        "Behavior",
                        "Content",
                        "Transformer"
                      ]
                    },
                    {
                      "name": "Load + inject structured content",
                      "collaborators": [
                        "Behavior",
                        "Content",
                        "Knowledge Graph"
                      ]
                    }
                  ],
                  "module": "actions.render",
                  "_source_path": "Invoke Bot.Invoke Bot Directly"
                },
                {
                  "name": "TTYRenderOutput",
                  "responsibilities": [
                    {
                      "name": "Serialize render action to TTY",
                      "collaborators": [
                        "RenderOutputAction",
                        "TTY String"
                      ]
                    },
                    {
                      "name": "Format render status",
                      "collaborators": [
                        "Render Spec",
                        "TTY String"
                      ]
                    },
                    {
                      "name": "Wraps domain action",
                      "collaborators": [
                        "RenderOutputAction"
                      ]
                    }
                  ],
                  "module": "actions.render",
                  "inherits_from": "TTYProgressAdapter",
                  "_source_path": "Invoke Bot.Invoke Bot Directly"
                },
                {
                  "name": "JSONRenderOutput",
                  "responsibilities": [
                    {
                      "name": "Serialize render action to JSON",
                      "collaborators": [
                        "RenderOutputAction",
                        "JSON String"
                      ]
                    },
                    {
                      "name": "Include render spec",
                      "collaborators": [
                        "Render Spec",
                        "Templates",
                        "JSON"
                      ]
                    },
                    {
                      "name": "Wraps domain action",
                      "collaborators": [
                        "RenderOutputAction"
                      ]
                    }
                  ],
                  "module": "actions.render",
                  "inherits_from": "JSONProgressAdapter",
                  "_source_path": "Invoke Bot.Invoke Bot Directly"
                },
                {
                  "name": "MarkdownRenderOutput",
                  "responsibilities": [
                    {
                      "name": "Serialize render action to Markdown",
                      "collaborators": [
                        "RenderOutputAction",
                        "Markdown String"
                      ]
                    },
                    {
                      "name": "Format render documentation",
                      "collaborators": [
                        "Render Spec",
                        "Templates",
                        "Markdown"
                      ]
                    },
                    {
                      "name": "Wraps domain action",
                      "collaborators": [
                        "RenderOutputAction"
                      ]
                    }
                  ],
                  "module": "actions.render",
                  "inherits_from": "MarkdownProgressAdapter",
                  "_source_path": "Invoke Bot.Invoke Bot Directly"
                },
                {
                  "name": "Renderer",
                  "responsibilities": [
                    {
                      "name": "Render complex output",
                      "collaborators": [
                        "Template",
                        "Knowledge Graph",
                        "Transformer"
                      ]
                    },
                    {
                      "name": "Render outputs using components in context",
                      "collaborators": [
                        "AI Chat",
                        "Template",
                        "Content"
                      ]
                    }
                  ],
                  "module": "actions.render",
                  "_source_path": "Invoke Bot.Invoke Bot Directly"
                },
                {
                  "name": "Template",
                  "responsibilities": [
                    {
                      "name": "Define output structure",
                      "collaborators": [
                        "Placeholder"
                      ]
                    },
                    {
                      "name": "Transform content",
                      "collaborators": [
                        "Transformer",
                        "Content"
                      ]
                    },
                    {
                      "name": "Load template",
                      "collaborators": [
                        "Behavior",
                        "Content"
                      ]
                    }
                  ],
                  "module": "actions.render",
                  "_source_path": "Invoke Bot.Invoke Bot Directly"
                },
                {
                  "name": "Content",
                  "responsibilities": [
                    {
                      "name": "Render outputs",
                      "collaborators": [
                        "Template",
                        "Renderer",
                        "Render Spec"
                      ]
                    },
                    {
                      "name": "Synchronize formats",
                      "collaborators": [
                        "Synchronizer",
                        "Extractor",
                        "Synchronizer Spec"
                      ]
                    },
                    {
                      "name": "Save knowledge graph",
                      "collaborators": [
                        "Knowledge Graph"
                      ]
                    },
                    {
                      "name": "Load rendered content",
                      "collaborators": [
                        "na"
                      ]
                    },
                    {
                      "name": "Present rendered content",
                      "collaborators": [
                        "na"
                      ]
                    }
                  ],
                  "module": "actions.render",
                  "_source_path": "Invoke Bot.Invoke Bot Directly"
                },
                {
                  "name": "RenderInstructionsSection",
                  "responsibilities": [
                    {
                      "name": "Wraps render subsection",
                      "collaborators": [
                        "RenderDataSubSection"
                      ]
                    }
                  ],
                  "module": "actions.render",
                  "inherits_from": "InstructionsSection",
                  "_source_path": "Invoke Bot.Invoke Bot Directly"
                },
                {
                  "name": "RenderDataSubSection",
                  "responsibilities": [
                    {
                      "name": "Wraps render JSON",
                      "collaborators": [
                        "Render JSON"
                      ]
                    },
                    {
                      "name": "Displays render spec",
                      "collaborators": [
                        "Object",
                        "RenderSpec JSON"
                      ]
                    },
                    {
                      "name": "Displays templates",
                      "collaborators": [
                        "List",
                        "Template JSON"
                      ]
                    },
                    {
                      "name": "Displays render instructions",
                      "collaborators": [
                        "String",
                        "RenderInstructions JSON"
                      ]
                    },
                    {
                      "name": "Opens template file",
                      "collaborators": [
                        "CLI",
                        "Path JSON"
                      ]
                    }
                  ],
                  "module": "actions.render",
                  "inherits_from": "SubSectionView",
                  "_source_path": "Invoke Bot.Invoke Bot Directly"
                }
              ],
              "test_file": "invoke_bot/perform_action/test_render_content.py",
              "sub_epics": [],
              "story_groups": [
                {
                  "name": "",
                  "sequential_order": 0.0,
                  "type": "and",
                  "connector": null,
                  "behavior": null,
                  "stories": [
                    {
                      "name": "Render Output Usng Story API",
                      "sequential_order": 0.0,
                      "connector": "or",
                      "story_type": "user",
                      "users": [
                        "Bot Behavior"
                      ],
                      "test_class": "TestRenderOutput",
                      "scenarios": [
                        {
                          "name": "Action injects render configs and instructions",
                          "sequential_order": 1.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_action_injects_render_configs_and_instructions",
                          "steps": "Given Production story_bot with shape behavior (has render configs)\nWhen Action injects render data\nThen Instructions contain all required render fields",
                          "test": {
                            "method": "test_action_injects_render_configs_and_instructions",
                            "file": "invoke_bot/perform_action/test_render_content.py",
                            "line": 31
                          }
                        },
                        {
                          "name": "Synchronizers are executed automatically during render action",
                          "sequential_order": 2.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_synchronizers_are_executed_automatically",
                          "steps": "Given Production story_bot with shape behavior (has synchronizers)\nWhen Render output action executes\nThen Synchronizers are executed automatically",
                          "test": {
                            "method": "test_synchronizers_are_executed_automatically",
                            "file": "invoke_bot/perform_action/test_render_content.py",
                            "line": 47
                          }
                        },
                        {
                          "name": "Template configs remain in instructions for AI handling",
                          "sequential_order": 3.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_template_configs_remain_in_instructions",
                          "steps": "Given Production story_bot with shape behavior (has templates)\nWhen Render output action executes\nThen Result includes instructions",
                          "test": {
                            "method": "test_template_configs_remain_in_instructions",
                            "file": "invoke_bot/perform_action/test_render_content.py",
                            "line": 65
                          }
                        },
                        {
                          "name": "Executed synchronizers information is included in AI instructions",
                          "sequential_order": 4.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_executed_synchronizers_info_in_instructions",
                          "steps": "Given Production story_bot with shape behavior (has synchronizers)\nWhen Render output action executes\nThen Instructions include synchronizer execution info",
                          "test": {
                            "method": "test_executed_synchronizers_info_in_instructions",
                            "file": "invoke_bot/perform_action/test_render_content.py",
                            "line": 82
                          }
                        }
                      ],
                      "acceptance_criteria": [],
                      "behavior": null
                    },
                    {
                      "name": "Render Output Using CLI",
                      "sequential_order": 1.0,
                      "connector": null,
                      "story_type": "user",
                      "users": [
                        "User"
                      ],
                      "test_class": "TestRenderOutputUsingCLI",
                      "scenarios": [
                        {
                          "name": "Render action shows render configs in CLI output",
                          "sequential_order": 1.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_render_action_shows_configs_in_output",
                          "steps": "GIVEN: CLI is at shape.render\nWHEN: user navigates to shape.render\nTHEN: CLI output contains render configurations",
                          "test": {
                            "method": "test_render_action_shows_configs_in_output",
                            "file": "invoke_bot/perform_action/test_render_content.py",
                            "line": 121
                          }
                        },
                        {
                          "name": "Render output mentions synchronizers execution",
                          "sequential_order": 2.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_render_output_mentions_synchronizers",
                          "steps": "GIVEN: CLI is at shape.render\nWHEN: user navigates to shape.render\nTHEN: CLI output mentions synchronizers",
                          "test": {
                            "method": "test_render_output_mentions_synchronizers",
                            "file": "invoke_bot/perform_action/test_render_content.py",
                            "line": 149
                          }
                        }
                      ],
                      "acceptance_criteria": [],
                      "behavior": null
                    },
                    {
                      "name": "Display Synchronizer Output Through CLI",
                      "sequential_order": 2.0,
                      "connector": "and",
                      "story_type": "user",
                      "users": [
                        "User"
                      ],
                      "test_class": "TestDisplaySynchronizerOutputThroughCLI",
                      "scenarios": [
                        {
                          "name": "Display rendered output locations",
                          "sequential_order": 1.0,
                          "type": "",
                          "background": [],
                          "test_method": "test_display_rendered_output_locations",
                          "steps": "GIVEN: Synchronizers have run\nWHEN: user views render instructions\nTHEN: CLI displays output file paths"
                        }
                      ],
                      "acceptance_criteria": [],
                      "behavior": null
                    },
                    {
                      "name": "Display Render Configurations Through CLI",
                      "sequential_order": 3.0,
                      "connector": null,
                      "story_type": "user",
                      "users": [
                        "User"
                      ],
                      "test_class": "TestDisplayRenderConfigurationsThroughCLI",
                      "scenarios": [
                        {
                          "name": "Display loaded render configurations",
                          "sequential_order": 1.0,
                          "type": "",
                          "background": [],
                          "test_method": "test_display_loaded_render_configurations",
                          "steps": "GIVEN: Render configurations exist\nWHEN: user views render instructions\nTHEN: CLI displays templates and synchronizers"
                        }
                      ],
                      "acceptance_criteria": [],
                      "behavior": null
                    },
                    {
                      "name": "Get Render Instructions Through CLI",
                      "sequential_order": 4.0,
                      "connector": "and",
                      "story_type": "user",
                      "users": [
                        "User"
                      ],
                      "test_class": "TestGetRenderInstructionsThroughCLI",
                      "scenarios": [
                        {
                          "name": "Get render instructions with templates",
                          "sequential_order": 1.0,
                          "type": "",
                          "background": [],
                          "test_method": "test_get_render_instructions_with_templates",
                          "steps": "GIVEN: CLI is at shape.render.instructions\nWHEN: user enters 'shape.render.instructions'\nTHEN: CLI displays render instructions with templates and synchronizers"
                        }
                      ],
                      "acceptance_criteria": [],
                      "behavior": null
                    },
                    {
                      "name": "Display Render Instructions Panel",
                      "sequential_order": 6.0,
                      "connector": "and",
                      "story_type": "user",
                      "users": [
                        "User"
                      ],
                      "test_class": "TestDisplayRenderInstructions",
                      "scenarios": [
                        {
                          "name": "",
                          "sequential_order": 1.0,
                          "type": "",
                          "background": [],
                          "test_method": null,
                          "steps": "Given Bot is at shape.render\nWhen Panel displays instructions section\nThen Panel displays config file paths as clickable links\nAnd Panel displays template file paths as clickable links\nAnd Panel displays output file paths as clickable links"
                        },
                        {
                          "name": "",
                          "sequential_order": 2.0,
                          "type": "",
                          "background": [],
                          "test_method": null,
                          "steps": "Given Panel displays render instructions\nWhen User clicks config file link\nThen VS Code opens render config file in editor"
                        },
                        {
                          "name": "",
                          "sequential_order": 3.0,
                          "type": "",
                          "background": [],
                          "test_method": null,
                          "steps": "Given Panel displays render instructions\nWhen User clicks template file link\nThen VS Code opens template file in editor"
                        }
                      ],
                      "acceptance_criteria": [
                        {
                          "name": "WHEN Current action is render\nTHEN System displays config file paths as clickable links AND System displays template file paths as clickable links AND System displays output file paths as clickable links",
                          "text": "WHEN Current action is render\nTHEN System displays config file paths as clickable links AND System displays template file paths as clickable links AND System displays output file paths as clickable links",
                          "sequential_order": 1.0
                        },
                        {
                          "name": "WHEN User clicks on any of these links\nTHEN System opens the corresponding file in the editor",
                          "text": "WHEN User clicks on any of these links\nTHEN System opens the corresponding file in the editor",
                          "sequential_order": 2.0
                        }
                      ],
                      "behavior": null
                    },
                    {
                      "name": "Render as Part of Build and Validate Actions",
                      "sequential_order": 7.0,
                      "connector": null,
                      "story_type": "user",
                      "users": [],
                      "test_class": null,
                      "scenarios": [],
                      "acceptance_criteria": [
                        {"name": "WHEN User runs build from Panel THEN Panel invokes CLI AND CLI subscribes and runs build AND CLI reports BuildInProcess AND Panel watches CLI and shows BuildInProcess AND CLI watches story-graph and on save and debounce starts render AND CLI reports RenderInProcess AND Panel shows it AND on success CLI reports completion and Panel shows completion AND on failure CLI reports failed and Panel shows failed AND Panel refreshes images and is passive", "text": "WHEN User runs build from Panel THEN Panel invokes CLI (e.g. cli.behaviors.shape.build) AND CLI subscribes to story-graph with debounce and runs build AND CLI reports BuildInProcess while build is running AND Panel watches CLI for status and shows BuildInProcess indicator AND CLI is watching story-graph; when save is detected and debounce passes CLI starts render AND CLI reports RenderInProcess while render is running AND Panel shows RenderInProcess indicator AND when render finishes successfully CLI reports completion and Panel shows completion indicator (e.g. checkmark) AND when build or render fails CLI reports failed and Panel shows failed indicator AND Panel periodically refreshes images so User sees updated render output AND Panel is passive: it does not own the subscription or render trigger; CLI does", "sequential_order": 1.0},
                        {"name": "WHEN User runs validate from Panel THEN Panel invokes CLI AND CLI runs validate and watches validation status (periodic) AND CLI reports ValidationInProcess AND Panel watches CLI and shows it AND validation report at end; on save and debounce CLI starts render AND CLI reports RenderInProcess AND Panel shows it AND on success or failure CLI reports and Panel shows completion or failed AND Panel refreshes and is passive", "text": "WHEN User runs validate from Panel THEN Panel invokes CLI (e.g. cli.behaviors.shape.validate) AND CLI runs validate and watches validation status (updated periodically) for ValidationInProcess AND CLI reports ValidationInProcess while validate is running AND Panel watches CLI for status and shows ValidationInProcess indicator AND validation report is written only at end; when save of validation report is detected and debounce passes CLI starts render AND CLI reports RenderInProcess while render is running AND Panel shows RenderInProcess indicator AND when render finishes successfully CLI reports completion and Panel shows completion indicator AND when validate or render fails CLI reports failed and Panel shows failed indicator AND Panel periodically refreshes images AND Panel is passive: it does not own the subscription or render trigger; CLI does", "sequential_order": 2.0},
                        {"name": "WHEN User runs build or validate from CLI (no Panel) THEN the same CLI flow runs AND for build CLI subscribes to story-graph AND for validate CLI watches validation status (periodic) and validation report (at end) AND CLI runs the action AND CLI reports BuildInProcess or ValidationInProcess AND when save of output is detected and debounce passes CLI starts render AND CLI reports RenderInProcess AND when done CLI reports completion or failed AND CLI reports to the terminal so the flow works without Panel", "text": "WHEN User runs build or validate from CLI (no Panel) THEN the same CLI flow runs AND for build CLI subscribes to story-graph AND for validate CLI watches validation status (periodic) and validation report (at end) AND CLI runs the action AND CLI reports BuildInProcess or ValidationInProcess AND when save of output is detected and debounce passes CLI starts render AND CLI reports RenderInProcess AND when done CLI reports completion or failed AND CLI reports to the terminal so the flow works without Panel", "sequential_order": 3.0}
                      ],
                      "behavior": null
                    },
                    {
                      "name": "Report and Update InQ",
                      "sequential_order": 8.0,
                      "connector": null,
                      "story_type": "user",
                      "users": [],
                      "test_class": null,
                      "scenarios": [],
                      "acceptance_criteria": [],
                      "behavior": null
                    },
                    {
                      "name": "Display Rules in Queue",
                      "sequential_order": 9.0,
                      "connector": null,
                      "story_type": "user",
                      "users": [],
                      "test_class": null,
                      "scenarios": [],
                      "acceptance_criteria": [],
                      "behavior": null
                    }
                  ]
                }
              ]
            },
            {
              "name": "Render DrawIO Diagrams",
              "sequential_order": 5.0,
              "behavior": null,
              "domain_concepts": [
                {
                  "name": "DrawIOElement (Base)",
                  "responsibilities": [
                    {
                      "name": "Get/Set position and size",
                      "collaborators": [
                        "Position",
                        "Boundary",
                        "DrawIO Cell"
                      ]
                    },
                    {
                      "name": "Read from DrawIO XML",
                      "collaborators": [
                        "File Path",
                        "mxCell Element",
                        "DrawIO Tree"
                      ]
                    },
                    {
                      "name": "Write to DrawIO XML",
                      "collaborators": [
                        "mxCell Element",
                        "DrawIO Tree"
                      ]
                    },
                    {
                      "name": "Cell style (fill, stroke, text)",
                      "collaborators": [
                        "Style String",
                        "DrawIO Cell"
                      ]
                    },
                    {
                      "name": "Identity for matching on re-extract",
                      "collaborators": [
                        "Cell Id",
                        "String"
                      ]
                    }
                  ],
                  "module": "synchronizers.story_io"
                },
                {
                  "name": "DrawIOStoryNode (Base)",
                  "responsibilities": [
                    {
                      "name": "Serializes (DrawIO)",
                      "collaborators": [
                        "DrawIOStoryNodeSerializer",
                        "DrawIO XML"
                      ]
                    },
                    {
                      "name": "Get/Update name",
                      "collaborators": [
                        "String",
                        "DrawIO Cell"
                      ]
                    },
                    {
                      "name": "Get node type",
                      "collaborators": [
                        "String"
                      ]
                    },
                    {
                      "name": "Get node ID",
                      "collaborators": [
                        "String",
                        "StoryNode",
                        "StoryNodeNavigator"
                      ]
                    },
                    {
                      "name": "Get parent",
                      "collaborators": [
                        "StoryNode"
                      ]
                    },
                    {
                      "name": "Get sequential order",
                      "collaborators": [
                        "StoryNodeNavigator",
                        "Float"
                      ]
                    },
                    {
                      "name": "Contains children",
                      "collaborators": [
                        "StoryNodeChildren"
                      ]
                    },
                    {
                      "name": "Delete self",
                      "collaborators": [
                        "DrawIOStoryNodeSerializer"
                      ]
                    },
                    {
                      "name": "Delete with children",
                      "collaborators": [
                        "DrawIOStoryNodeSerializer",
                        "StoryNodeChildren"
                      ]
                    },
                    {
                      "name": "Move, rename (emulate base StoryNode API)",
                      "collaborators": [
                        "New Parent",
                        "Position",
                        "DrawIO Tree"
                      ]
                    },
                    {
                      "name": "Generate own slice of update report",
                      "collaborators": [
                        "Other StoryNode",
                        "UpdateReport"
                      ]
                    },
                    {
                      "name": "Apply update from other node (recursive)",
                      "collaborators": [
                        "Other StoryNode",
                        "UpdateReport"
                      ]
                    },
                    {
                      "name": "Compute container dimensions from children",
                      "collaborators": [
                        "StoryNodeChildren",
                        "Spacing",
                        "Boundary"
                      ]
                    },
                    {
                      "name": "Render child nodes (recursive)",
                      "collaborators": [
                        "StoryNodeChildren",
                        "DrawIOStoryNodeSerializer",
                        "LayoutData"
                      ]
                    }
                  ],
                  "module": "synchronizers.story_io",
                  "inherits_from": "DrawIOElement, StoryNode (Base)"
                },
                {
                  "name": "DrawIOStoryNodeSerializer",
                  "responsibilities": [
                    {
                      "name": "Create node in DrawIO",
                      "collaborators": [
                        "File",
                        "DrawIOStoryNode",
                        "mxCell"
                      ]
                    },
                    {
                      "name": "Load node from DrawIO",
                      "collaborators": [
                        "File",
                        "DrawIOStoryNode",
                        "mxCell"
                      ]
                    },
                    {
                      "name": "Update node in DrawIO",
                      "collaborators": [
                        "File",
                        "DrawIOStoryNode"
                      ]
                    },
                    {
                      "name": "Delete node from DrawIO",
                      "collaborators": [
                        "File",
                        "DrawIOStoryNode"
                      ]
                    },
                    {
                      "name": "From DrawIO XML",
                      "collaborators": [
                        "DrawIO XML",
                        "DrawIOStoryNode"
                      ]
                    },
                    {
                      "name": "To DrawIO XML",
                      "collaborators": [
                        "DrawIOStoryNode",
                        "DrawIO XML"
                      ]
                    }
                  ],
                  "module": "synchronizers.story_io"
                },
                {
                  "name": "DrawIOEpic",
                  "responsibilities": [
                    {
                      "name": "Get all stories (via children)",
                      "collaborators": [
                        "List[DrawIOStory]",
                        "List[SubEpic]"
                      ]
                    },
                    {
                      "name": "Get sub-epics",
                      "collaborators": [
                        "List[DrawIOSubEpic]"
                      ]
                    },
                    {
                      "name": "Generate update report for this epic subtree",
                      "collaborators": [
                        "Other Epic",
                        "StoryMap",
                        "UpdateReport"
                      ]
                    },
                    {
                      "name": "Update from other epic (recursive)",
                      "collaborators": [
                        "Other Epic",
                        "UpdateReport"
                      ]
                    }
                  ],
                  "realization": [
                    {
                      "scope": "Invoke Bot.Perform Action.Synchronized Graph with Rendered Diagram Content.Update graph from story map.UpdateReport lists exact fuzzy new and removed stories",
                      "scenario": "Recursive report generation: DrawIOStoryMap delegates to DrawIOEpic which delegates to DrawIOSubEpic which delegates to DrawIOStory â€” each level matches its children against the original and contributes to the UpdateReport",
                      "walks": [
                        {
                          "covers": "Complete recursive delegation chain (Epic -> SubEpic -> Story report generation)",
                          "object_flow": [
                            "DrawIOEpic",
                            "    report_slice: UpdateReport = drawIOEpic.generate_update_report_for_epic_subtree(originalEpic: Epic('Invoke Bot'), report: report)",
                            "        -> drawIOSubEpics: [DrawIOSubEpic] = drawIOEpic.get_sub_epics()",
                            "            return [DrawIOSubEpic('Initialize Bot'), DrawIOSubEpic('Perform Action')]",
                            "        -> originalSubEpics: [SubEpic] = originalEpic.get_sub_epics()",
                            "            return [SubEpic('Initialize Bot'), SubEpic('Perform Action')]",
                            "        -> // Match sub-epics by name, delegate to each matched pair",
                            "        -> DrawIOSubEpic('Initialize Bot').generate_update_report_for_sub_epic_subtree(original: SubEpic('Initialize Bot'), report: report)",
                            "            -> drawIOStories: [DrawIOStory] = drawIOSubEpic.get_stories()",
                            "                return [DrawIOStory('Load Config'), DrawIOStory('Register Behaviors')]",
                            "            -> originalStories: [Story] = originalSubEpic.get_stories()",
                            "                return [Story('Load Config'), Story('Register Behaviors')]",
                            "            -> // Match each story â€” exact match first, then fuzzy, then new/removed",
                            "            -> DrawIOStory('Load Config').generate_update_report_for_story(original: Story('Load Config'))",
                            "                -> name_compare: exact = ('load config' == 'load config')",
                            "                -> report.add(match_type: 'exact', extracted: 'Load Config', original: 'Load Config', confidence: 1.0)",
                            "            -> DrawIOStory('Register Behaviors').generate_update_report_for_story(original: Story('Register Behaviors'))",
                            "                -> name_compare: exact = ('register behaviors' == 'register behaviors')",
                            "                -> report.add(match_type: 'exact', extracted: 'Register Behaviors', original: 'Register Behaviors', confidence: 1.0)",
                            "            return // all matched for Initialize Bot",
                            "        -> DrawIOSubEpic('Perform Action').generate_update_report_for_sub_epic_subtree(original: SubEpic('Perform Action'), report: report)",
                            "            -> // Same delegation pattern for stories in Perform Action",
                            "            -> DrawIOStory('Execute Action').generate_update_report_for_story(original: Story('Execute Action'))",
                            "                -> report.add(match_type: 'exact', extracted: 'Execute Action', original: 'Execute Action', confidence: 1.0)",
                            "        return report: {exact_matches: ['Load Config', 'Register Behaviors', 'Execute Action'], fuzzy_matches: [], new_stories: [], removed_stories: []}"
                          ]
                        }
                      ],
                      "model_updates": [
                        "Validated: Recursive delegation pattern (DrawIOEpic -> DrawIOSubEpic -> DrawIOStory) is viable for report generation â€” each level matches its direct children and delegates to the next",
                        "Validated: Sub-epic matching uses name comparison (same as story matching) before delegating to story-level",
                        "Note: When sub-epics don't match (e.g., deleted sub-epic), stories under it need reassignment by containment â€” this is handled by DrawIOStoryMap.assign_stories_to_sub_epics_by_containment on load, before report generation"
                      ]
                    }
                  ],
                  "module": "synchronizers.story_io",
                  "inherits_from": "DrawIOStoryNode (Base)"
                },
                {
                  "name": "DrawIOSubEpic",
                  "responsibilities": [
                    {
                      "name": "Get stories",
                      "collaborators": [
                        "List[DrawIOStory]"
                      ]
                    },
                    {
                      "name": "Generate update report for this sub-epic subtree",
                      "collaborators": [
                        "Other SubEpic",
                        "UpdateReport"
                      ]
                    },
                    {
                      "name": "Update from other sub-epic (recursive)",
                      "collaborators": [
                        "Other SubEpic",
                        "UpdateReport"
                      ]
                    }
                  ],
                  "module": "synchronizers.story_io",
                  "inherits_from": "DrawIOStoryNode (Base)"
                },
                {
                  "name": "DrawIOStory",
                  "responsibilities": [
                    {
                      "name": "Get story type (user/system/technical) from style",
                      "collaborators": [
                        "String",
                        "DrawIO Cell"
                      ]
                    },
                    {
                      "name": "Get users",
                      "collaborators": [
                        "List[StoryUser]"
                      ]
                    },
                    {
                      "name": "Get acceptance criteria",
                      "collaborators": [
                        "List[AcceptanceCriteria]",
                        "String"
                      ]
                    },
                    {
                      "name": "Generate update report for this story",
                      "collaborators": [
                        "Other Story",
                        "UpdateReport"
                      ]
                    },
                    {
                      "name": "Update from other story",
                      "collaborators": [
                        "Other Story",
                        "UpdateReport"
                      ]
                    }
                  ],
                  "module": "synchronizers.story_io",
                  "inherits_from": "DrawIOStoryNode (Base)"
                },
                {
                  "name": "DrawIOStoryMap",
                  "responsibilities": [
                    {
                      "name": "Diagram type (outline, increments, acceptance_criteria)",
                      "collaborators": [
                        "DiagramType",
                        "String"
                      ]
                    },
                    {
                      "name": "Load from DrawIO file",
                      "collaborators": [
                        "File Path",
                        "DrawIOStoryMap"
                      ]
                    },
                    {
                      "name": "Save to DrawIO file",
                      "collaborators": [
                        "File Path",
                        "DrawIO XML"
                      ]
                    },
                    {
                      "name": "Walk nodes",
                      "collaborators": [
                        "StoryNode",
                        "Iterator[StoryNode]"
                      ]
                    },
                    {
                      "name": "Get epics / sub-epics / stories",
                      "collaborators": [
                        "List[Epic]",
                        "List[SubEpic]",
                        "List[Story]"
                      ]
                    },
                    {
                      "name": "Find by name, find node by path",
                      "collaborators": [
                        "Name",
                        "Path String",
                        "StoryNode"
                      ]
                    },
                    {
                      "name": "Generate update report",
                      "collaborators": [
                        "StoryMap",
                        "UpdateReport"
                      ]
                    },
                    {
                      "name": "Update from other (with optional report)",
                      "collaborators": [
                        "StoryMap",
                        "UpdateReport"
                      ]
                    },
                    {
                      "name": "Own layout data (positions and sizes for rendered nodes)",
                      "collaborators": [
                        "LayoutData",
                        "DrawIOStoryNode"
                      ]
                    },
                    {
                      "name": "Persist layout data alongside diagram file",
                      "collaborators": [
                        "LayoutData",
                        "File Path"
                      ]
                    },
                    {
                      "name": "Load layout data for re-render",
                      "collaborators": [
                        "File Path",
                        "LayoutData"
                      ]
                    },
                    {
                      "name": "Render from StoryMap (based on diagramType)",
                      "collaborators": [
                        "StoryMap",
                        "DiagramType",
                        "LayoutData",
                        "DrawIO XML"
                      ]
                    },
                    {
                      "name": "Apply layout data (saved positions) during render",
                      "collaborators": [
                        "LayoutData",
                        "DrawIOStoryNode"
                      ]
                    },
                    {
                      "name": "Default layout when no layout data",
                      "collaborators": [
                        "DrawIOStoryNode",
                        "Spacing"
                      ]
                    },
                    {
                      "name": "Assign stories to sub-epics by containment on load",
                      "collaborators": [
                        "Story Center",
                        "SubEpic Boundary"
                      ]
                    },
                    {
                      "name": "Assign sequential order from position on load",
                      "collaborators": [
                        "DrawIOStoryNode",
                        "Float"
                      ]
                    },
                    {
                      "name": "Extract layout (position/size per node) on load",
                      "collaborators": [
                        "DrawIO XML",
                        "LayoutData"
                      ]
                    }
                  ],
                  "realization": [
                    {
                      "scope": "Invoke Bot.Perform Action.Synchronized Graph with Rendered Diagram Content.Render story map.Render outline diagram from StoryMap with default layout",
                      "scenario": "StoryMap with 1 epic, 1 sub-epic, 2 stories rendered to DrawIO outline XML with no prior layout data â€” validates render responsibility chain and default positioning",
                      "walks": [
                        {
                          "covers": "Steps 1-2 (Given: load StoryMap, no LayoutData)",
                          "object_flow": [
                            "StoryMap",
                            "    storyMap: {epics: [{name: 'Invoke Bot', sub_epics: [{name: 'Initialize Bot', stories: [{name: 'Load Config', sequential_order: 1.0, story_type: 'user'}, {name: 'Register Behaviors', sequential_order: 2.0, story_type: 'system'}]}]}]} = StoryMap.load(path: 'docs/story/story-graph.json')",
                            "        -> epics: [Epic('Invoke Bot')] = StoryMap.get_epics()",
                            "        return storyMap",
                            "LayoutData",
                            "    layoutData: None = LayoutData.load(path: 'story-map-layout.json')",
                            "        -> file_exists: False",
                            "        return layoutData: None"
                          ]
                        },
                        {
                          "covers": "Steps 3-9 (When/Then: render outline â€” recursive node creation, position, style)",
                          "object_flow": [
                            "DrawIOStoryMap",
                            "    drawIOStoryMap: DrawIOStoryMap = DrawIOStoryMap(diagramType: 'outline')",
                            "    drawIOStoryMap.render_from_story_map(storyMap: storyMap, layoutData: None)",
                            "        -> epics: [Epic] = storyMap.get_epics()",
                            "        -> for epic in epics:",
                            "            -> drawIOEpic: DrawIOEpic = drawIOStoryMap.render_node(node: Epic('Invoke Bot'))",
                            "",
                            "                DrawIOEpic",
                            "                    drawIOEpic = DrawIOStoryNodeSerializer.create_node(node: Epic('Invoke Bot'))",
                            "                        -> DrawIOElement.set_position(x: 20, y: 120)   // EPIC_Y=120",
                            "                        -> DrawIOElement.cell_style(fill: '#e1d5e7', stroke: '#9673a6', font_color: 'black', shape: 'rounded')",
                            "",
                            "                    -> // Recurse into children: render each sub-epic",
                            "                    -> sub_epics: [SubEpic] = Epic('Invoke Bot').get_sub_epics()",
                            "                    -> for sub_epic in sub_epics:",
                            "                        -> drawIOSubEpic = drawIOEpic.render_child(node: SubEpic('Initialize Bot'))",
                            "",
                            "                            DrawIOSubEpic",
                            "                                drawIOSubEpic = DrawIOStoryNodeSerializer.create_node(node: SubEpic('Initialize Bot'))",
                            "                                    -> DrawIOElement.set_position(x: 30, y: 180)   // epic_x+10, epic_y+60",
                            "                                    -> DrawIOElement.cell_style(fill: '#d5e8d4', stroke: '#82b366', font_color: 'black')",
                            "",
                            "                                -> // Recurse into children: render each story",
                            "                                -> for story in stories (sorted by sequential_order):",
                            "                                    -> drawIOStory1 = drawIOSubEpic.render_child(node: Story('Load Config'))",
                            "",
                            "                                        DrawIOStory",
                            "                                            drawIOStory1 = DrawIOStoryNodeSerializer.create_node(node: Story('Load Config'))",
                            "                                                -> story_type: 'user' = DrawIOStory.get_story_type()",
                            "                                                -> DrawIOElement.cell_style(fill: '#fff2cc', stroke: '#d6b656', font_color: 'black')",
                            "                                                -> DrawIOElement.set_position(x: 35, y: 270)",
                            "                                                -> DrawIOElement.set_size(width: 50, height: 50)",
                            "                                            return drawIOStory1   // leaf in outline; in acceptance_criteria would recurse into AC boxes",
                            "",
                            "                                    -> drawIOStory2 = drawIOSubEpic.render_child(node: Story('Register Behaviors'))",
                            "",
                            "                                        DrawIOStory",
                            "                                            drawIOStory2 = DrawIOStoryNodeSerializer.create_node(node: Story('Register Behaviors'))",
                            "                                                -> story_type: 'system' = DrawIOStory.get_story_type()",
                            "                                                -> DrawIOElement.cell_style(fill: '#1a237e', stroke: '#0d47a1', font_color: 'white')",
                            "                                                -> DrawIOElement.set_position(x: 95, y: 270)",
                            "                                                -> DrawIOElement.set_size(width: 50, height: 50)",
                            "                                            return drawIOStory2   // leaf in outline; in acceptance_criteria would recurse into AC boxes",
                            "",
                            "                                -> // Bottom-up: compute sub-epic width from rendered children",
                            "                                -> sub_epic_width: 120 = drawIOSubEpic.compute_container_dimensions_from_children(children: [drawIOStory1, drawIOStory2], spacing: 10)",
                            "                                -> // Render actor labels above stories",
                            "                                -> DrawIOStoryNodeSerializer.create_node(node: Actor('Bot Behavior'), position: {x: 40, y: 210})",
                            "                            return drawIOSubEpic   // children rendered",
                            "",
                            "                    -> // Bottom-up: compute epic width from rendered sub-epics",
                            "                    -> epic_width: 130 = drawIOEpic.compute_container_dimensions_from_children(children: [drawIOSubEpic])",
                            "                return drawIOEpic   // full subtree rendered"
                          ]
                        },
                        {
                          "covers": "Step 10 (Then: save to file and return summary)",
                          "object_flow": [
                            "DrawIOStoryMap",
                            "    xml: DrawIO XML = DrawIOStoryNodeSerializer.to_drawio_xml(drawIOStoryMap)",
                            "    drawIOStoryMap.save(path: 'docs/story/story-map.drawio')",
                            "        -> File.write(path: 'docs/story/story-map.drawio', content: xml)",
                            "    return {output_path: 'story-map.drawio', summary: {epics: 1, sub_epic_count: 1, diagram_generated: True}}"
                          ]
                        }
                      ],
                      "model_updates": [
                        "Added 'Compute container dimensions from children' responsibility to DrawIOStoryNode (Base) with collaborators [StoryNodeChildren, Spacing, Boundary] â€” needed for epic width = sum(sub-epic widths) and sub-epic width = sum(story widths + spacing)"
                      ]
                    },
                    {
                      "scope": "Invoke Bot.Perform Action.Synchronized Graph with Rendered Diagram Content.Update graph from story map.Story graph updated with renamed added and removed stories from diagram",
                      "scenario": "User renames 'Load Configuration' to 'Load Settings', adds 'Validate Config', removes 'Register Behaviors' in DrawIO â€” validates end-to-end load, report generation, and update flow",
                      "walks": [
                        {
                          "covers": "Background (Load StoryMap and DrawIOStoryMap from edited diagram file)",
                          "object_flow": [
                            "StoryMap",
                            "    storyMap: StoryMap = StoryMap.load(path: 'docs/story/story-graph.json')",
                            "        -> epics: [{name: 'Invoke Bot', sub_epics: [{name: 'Initialize Bot', stories: [{name: 'Load Config', order: 1.0}, {name: 'Load Configuration', order: 2.0}, {name: 'Register Behaviors', order: 3.0}]}]}]",
                            "        return storyMap",
                            "DrawIOStoryMap",
                            "    drawIOStoryMap: DrawIOStoryMap = DrawIOStoryMap.load(path: 'docs/story/story-map.drawio')",
                            "        -> DrawIOStoryMap.assign_stories_to_sub_epics_by_containment()",
                            "            -> 'Load Config' center (40,235) inside 'Initialize Bot' boundary => assigned",
                            "            -> 'Load Settings' center (100,235) inside 'Initialize Bot' boundary => assigned",
                            "            -> 'Validate Config' center (160,235) inside 'Initialize Bot' boundary => assigned",
                            "        -> DrawIOStoryMap.assign_sequential_order_from_position()",
                            "            -> 'Load Config' at x=15 => sequential_order: 1.0",
                            "            -> 'Load Settings' at x=75 => sequential_order: 2.0",
                            "            -> 'Validate Config' at x=135 => sequential_order: 3.0",
                            "        -> DrawIOStoryMap.extract_layout()",
                            "            -> layoutData: {'EPIC|Invoke Bot': {x:10,y:50}, 'SUB_EPIC|Invoke Bot|Initialize Bot': {x:10,y:120}, 'STORY|...|Load Config': {x:15,y:210}, ...}",
                            "        return drawIOStoryMap"
                          ]
                        },
                        {
                          "covers": "Step 1 (When: generateUpdateReport â€” recursive matching with fuzzy via SequenceMatcher)",
                          "object_flow": [
                            "DrawIOStoryMap",
                            "    report: UpdateReport = drawIOStoryMap.generate_update_report(storyMap: storyMap)",
                            "        -> // Delegate to DrawIOEpic for recursive subtree report",
                            "        -> DrawIOEpic('Invoke Bot').generate_update_report_for_epic_subtree(originalEpic: Epic('Invoke Bot'), report: report)",
                            "            -> DrawIOSubEpic('Initialize Bot').generate_update_report_for_sub_epic_subtree(originalSubEpic: SubEpic('Initialize Bot'), report: report)",
                            "                -> DrawIOStory('Load Config').generate_update_report_for_story(original: Story('Load Config'))",
                            "                    -> name_compare: exact = ('load config' == 'load config')",
                            "                    -> report.add(match_type: 'exact', extracted: 'Load Config', original: 'Load Config', confidence: 1.0)",
                            "                -> DrawIOStory('Load Settings').generate_update_report_for_story(originals: [Story('Load Configuration'), Story('Register Behaviors')])",
                            "                    -> exact_match: None",
                            "                    -> fuzzy: 0.85 = SequenceMatcher('load settings', 'load configuration').ratio() + context_bonus(0.2)",
                            "                    -> report.add(match_type: 'fuzzy', extracted: 'Load Settings', original: 'Load Configuration', confidence: 0.85)",
                            "                -> DrawIOStory('Validate Config').generate_update_report_for_story(originals: [])",
                            "                    -> report.add(match_type: 'new', story: 'Validate Config', parent: 'Initialize Bot')",
                            "                -> // Unmatched original: 'Register Behaviors'",
                            "                -> report.add(match_type: 'removed', story: 'Register Behaviors', parent: 'Initialize Bot')",
                            "        -> // Large deletion detection (part of generate_update_report)",
                            "        -> drawIOStoryMap.detect_large_deletions(storyMap: storyMap, report: report)  // all epics/sub-epics present â€” no large_deletions",
                            "        return report: {exact_matches: [{name: 'Load Config', confidence: 1.0}], fuzzy_matches: [{extracted: 'Load Settings', original: 'Load Configuration', confidence: 0.85}], new_stories: ['Validate Config'], removed_stories: ['Register Behaviors']}"
                          ]
                        },
                        {
                          "covers": "Steps 2-5 (Then: StoryMap.update applies exact/fuzzy/new/removed changes)",
                          "object_flow": [
                            "StoryMap",
                            "    storyMap.update(drawIOStoryMap: drawIOStoryMap, report: report)",
                            "        -> // Apply exact matches â€” update sequential_order from diagram position",
                            "        -> Story('Load Config').apply_update_from_other(other: DrawIOStory('Load Config'), report: report)",
                            "            -> Story.sequential_order: 1.0 (unchanged)",
                            "        -> // Apply fuzzy matches â€” rename and update fields",
                            "        -> Story('Load Configuration').apply_update_from_other(other: DrawIOStory('Load Settings'), report: report)",
                            "            -> Story.name: 'Load Settings' (renamed from 'Load Configuration')",
                            "            -> Story.sequential_order: 2.0 (updated from diagram position)",
                            "        -> // Add new stories from diagram",
                            "        -> newStory: Story = Story(name: 'Validate Config', sequential_order: 3.0, story_type: 'user')",
                            "        -> SubEpic('Initialize Bot').add_story(newStory)",
                            "        -> // Flag removed stories (not deleted â€” preserved for safety)",
                            "        -> Story('Register Behaviors').status: 'removed'",
                            "        -> // Persist layout for next render",
                            "        -> drawIOStoryMap.persist_layout_data(path: 'story-map-layout.json')",
                            "            -> LayoutData.save(path: 'story-map-layout.json')",
                            "        return storyMap: {epics: [{name: 'Invoke Bot', sub_epics: [{name: 'Initialize Bot', stories: [{name: 'Load Config', order: 1.0}, {name: 'Load Settings', order: 2.0}, {name: 'Validate Config', order: 3.0}, {name: 'Register Behaviors', status: 'removed'}]}]}]}"
                          ]
                        }
                      ],
                      "model_updates": [
                        "Validated: DrawIOStoryMap.load() correctly chains assign_stories_to_sub_epics_by_containment, assign_sequential_order_from_position, and extract_layout â€” all three are needed on load",
                        "Validated: Recursive report generation (DrawIOStoryMap -> DrawIOEpic -> DrawIOSubEpic -> DrawIOStory) works for mixed match types",
                        "Note: Fuzzy matching uses SequenceMatcher (difflib) with threshold 0.7 and context bonuses for same epic/sub-epic â€” implementation detail inside DrawIOStory.generate_update_report_for_story"
                      ]
                    },
                    {
                      "scope": "Invoke Bot.Perform Action.Synchronized Graph with Rendered Diagram Content.Render story map increments.Render increments diagram with stories assigned to increment lanes",
                      "scenario": "High-level: DrawIOStoryMap branches on diagramType 'increments' to render outline plus increment lanes with stories assigned by membership",
                      "walks": [
                        {
                          "covers": "Steps 1-7 (Complete increments render â€” diagramType branching, outline + lane rendering)",
                          "object_flow": [
                            "DrawIOStoryMap",
                            "    drawIOStoryMap: DrawIOStoryMap = DrawIOStoryMap(diagramType: 'increments')",
                            "    drawIOStoryMap.render_from_story_map(storyMap: storyMap, layoutData: layoutData)",
                            "        -> diagramType: 'increments' = drawIOStoryMap.diagramType",
                            "        -> // Phase 1: Render outline section (same as outline diagramType)",
                            "        -> //   ... DrawIOEpic, DrawIOSubEpic, DrawIOStory nodes created and positioned ...",
                            "        -> // Phase 2: Render increment lanes below outline",
                            "        -> increments: [Increment] = storyGraph.get_increments()  // StoryGraph (extended) â€” increments live on graph, not StoryMap",
                            "        -> for each increment ('MVP' priority: 1, 'Phase 2' priority: 2):",
                            "            -> laneCells: DrawIOElement = DrawIOStoryNodeSerializer.create_node(node: IncrementLane(name: 'MVP'))",
                            "                -> DrawIOElement.cell_style(fill: '#f5f5f5', stroke: '#666666', font: 'bold', font_color: 'black')",
                            "                -> DrawIOElement.set_position(x: -50, y: outline_bottom + lane_height * priority_index)",
                            "            -> // Assign stories to lanes by increment membership",
                            "        -> drawIOStoryMap.save(path: 'story-map-increments.drawio')",
                            "        return {summary: {epics: 1, sub_epic_count: 1, increment_count: 2, diagram_generated: True}}"
                          ]
                        }
                      ],
                      "model_updates": []
                    },
                    {
                      "scope": "Invoke Bot.Perform Action.Synchronized Graph with Rendered Diagram Content.Render story map with acceptance criteria.Render exploration diagram with AC boxes below stories",
                      "scenario": "High-level: DrawIOStoryMap branches on diagramType 'acceptance_criteria' to render outline plus AC boxes below stories that have acceptance criteria",
                      "walks": [
                        {
                          "covers": "Steps 1-6 (Complete AC render â€” outline + AC box creation with When/Then formatting)",
                          "object_flow": [
                            "DrawIOStoryMap",
                            "    drawIOStoryMap: DrawIOStoryMap = DrawIOStoryMap(diagramType: 'acceptance_criteria')",
                            "    drawIOStoryMap.render_from_story_map(storyMap: storyMap, layoutData: layoutData)",
                            "        -> diagramType: 'acceptance_criteria' = drawIOStoryMap.diagramType",
                            "        -> // Phase 1: Render outline section (same as outline diagramType)",
                            "        -> //   ... DrawIOEpic, DrawIOSubEpic, DrawIOStory nodes created and positioned ...",
                            "        -> // Phase 2: Render AC boxes below each story with acceptance_criteria",
                            "        -> for each drawIOStory with story.acceptance_criteria:",
                            "            -> for each ac in acceptance_criteria:",
                            "                -> acBox: DrawIOElement = DrawIOStoryNodeSerializer.create_node(node: ACBox(text: ac.text))",
                            "                    -> DrawIOElement.cell_style(fill: '#fff2cc', stroke: '#d6b656', align: 'left', font_size: 8)",
                            "                    -> DrawIOElement.set_position(x: story.x, y: story.y + story.height + AC_SPACING_Y(70))",
                            "                    -> DrawIOElement.set_size(width: max(250, char_count * 6 + 10), height: 60)   // ACCEPTANCE_CRITERIA_MIN_WIDTH, CHAR_WIDTH, PADDING",
                            "        -> drawIOStoryMap.save(path: 'story-map-ac.drawio')",
                            "        return {summary: {epics: 1, sub_epic_count: 1, diagram_generated: True}}"
                          ]
                        }
                      ],
                      "model_updates": []
                    }
                  ],
                  "module": "synchronizers.story_io",
                  "inherits_from": "StoryMap"
                },
                {
                  "name": "UpdateReport",
                  "responsibilities": [
                    {
                      "name": "Exact matches",
                      "collaborators": [
                        "List[Match Entry]"
                      ]
                    },
                    {
                      "name": "Fuzzy matches",
                      "collaborators": [
                        "List[Match Entry]",
                        "Confidence"
                      ]
                    },
                    {
                      "name": "New stories (in source)",
                      "collaborators": [
                        "List[Story Entry]"
                      ]
                    },
                    {
                      "name": "New sub-epics (in source)",
                      "collaborators": [
                        "List[SubEpic Entry]"
                      ]
                    },
                    {
                      "name": "New epics (in source)",
                      "collaborators": [
                        "List[Epic Entry]"
                      ]
                    },
                    {
                      "name": "Removed stories (in target)",
                      "collaborators": [
                        "List[Story Entry]"
                      ]
                    },
                    {
                      "name": "Removed sub-epics (in target)",
                      "collaborators": [
                        "List[SubEpic Entry]"
                      ]
                    },
                    {
                      "name": "Removed epics (in target)",
                      "collaborators": [
                        "List[Epic Entry]"
                      ]
                    },
                    {
                      "name": "Large deletions",
                      "collaborators": [
                        "Missing Epics",
                        "Missing Sub-Epics"
                      ]
                    },
                    {
                      "name": "Serialize to/from JSON",
                      "collaborators": [
                        "File Path",
                        "Report JSON"
                      ]
                    }
                  ],
                  "module": "synchronizers.story_io"
                },
                {
                  "name": "LayoutData",
                  "responsibilities": [
                    {
                      "name": "Store position and size per node",
                      "collaborators": [
                        "Node Id",
                        "Position",
                        "Boundary"
                      ]
                    },
                    {
                      "name": "Load from file",
                      "collaborators": [
                        "File Path",
                        "LayoutData"
                      ]
                    },
                    {
                      "name": "Save to file",
                      "collaborators": [
                        "File Path"
                      ]
                    },
                    {
                      "name": "Apply to diagram render",
                      "collaborators": [
                        "Renderer",
                        "Diagram"
                      ]
                    },
                    {
                      "name": "Extract from diagram (on sync)",
                      "collaborators": [
                        "DrawIO Tree",
                        "LayoutData"
                      ]
                    }
                  ],
                  "module": "synchronizers.story_io"
                },
                {
                  "name": "StoryMap (extended responsibilities)",
                  "responsibilities": [
                    {
                      "name": "Generate update report",
                      "collaborators": [
                        "StoryMap",
                        "UpdateReport",
                        "root/epics"
                      ]
                    },
                    {
                      "name": "Update from other",
                      "collaborators": [
                        "StoryMap",
                        "UpdateReport",
                        "recursive nodes"
                      ]
                    }
                  ],
                  "module": "story_graph.story_map"
                },
                {
                  "name": "StoryGraph (extended responsibilities)",
                  "responsibilities": [
                    {
                      "name": "Update from diagram map",
                      "collaborators": [
                        "DrawIOStoryMap",
                        "Epic",
                        "recursive update"
                      ]
                    },
                    {
                      "name": "Generate update report for graph",
                      "collaborators": [
                        "StoryMap",
                        "generateUpdateReport"
                      ]
                    },
                    {
                      "name": "Re-render after update",
                      "collaborators": [
                        "LayoutData",
                        "add/remove/change",
                        "warn"
                      ]
                    },
                    {
                      "name": "Get increments",
                      "collaborators": [
                        "List[Increment]",
                        "Priority"
                      ]
                    }
                  ],
                  "module": "story_graph"
                }
              ],
              "test_file": "invoke_bot/perform_action/test_render_drawio_diagrams.py",
              "sub_epics": [
                {
                  "name": "Synchronize Epics and Sub-Epics",
                  "sequential_order": 1.0,
                  "behavior": null,
                  "domain_concepts": [],
                  "test_file": "invoke_bot/perform_action/synchronize_graph_with_rendered_diagram/test_synchronize_epics_and_sub_epics.py",
                  "sub_epics": [],
                  "story_groups": [
                    {
                      "name": "",
                      "sequential_order": 0.0,
                      "type": "and",
                      "connector": null,
                      "behavior": null,
                      "stories": [
                        {
                          "name": "Render epic and sub-epic hierarchy",
                          "sequential_order": 1.0,
                          "connector": "or",
                          "story_type": "user",
                          "users": [
                            "Bot Behavior"
                          ],
                          "test_class": "TestRenderEpicAndSubEpicHierarchy",
                          "scenarios": [
                            {
                              "name": "Render epic and sub-epic hierarchy with default layout positions epics at fixed Y and sub-epics below",
                              "sequential_order": 1.0,
                              "type": "happy_path",
                              "background": [],
                              "test_method": "test_render_epic_and_subepic_hierarchy_with_default_layout_positions_epics_at_fixed_y_and_subepics_below",
                              "steps": "Given no {LayoutData} exists for this diagram\nWhen {DrawIOStoryMap} renders outline from {StoryMap}\nThen {DrawIOStoryMap} contains {DrawIOEpic}\nAnd {DrawIOEpic} contains {DrawIOSubEpic}\nAnd each {DrawIOSubEpic} contains its {DrawIOStory}\nAnd {DrawIOStoryMap.output} is valid DrawIO XML",
                              "examples": [
                                {
                                  "name": "DrawIOStoryMap (render output)",
                                  "columns": [
                                    "output",
                                    "is_valid_xml"
                                  ],
                                  "rows": [
                                    [
                                      "story-map-outline.drawio",
                                      "true"
                                    ]
                                  ]
                                }
                              ]
                            },
                            {
                              "name": "Parent epic spans all child sub-epics horizontally",
                              "sequential_order": 2.0,
                              "type": "happy_path",
                              "background": [],
                              "test_method": "test_parent_epic_spans_all_child_subepics_horizontally",
                              "steps": "Given {DrawIOSubEpic} is rendered with {DrawIOSubEpic.x} and {DrawIOSubEpic.width}\nWhen {DrawIOStoryMap} renders outline from {StoryMap}\nThen {DrawIOEpic.x} is at or before the leftmost {DrawIOSubEpic.x}\nAnd {DrawIOEpic.width} encompasses all {DrawIOSubEpic}",
                              "examples": [
                                {
                                  "name": "DrawIOEpic (expected span)",
                                  "columns": [
                                    "name",
                                    "expected_x",
                                    "expected_min_width"
                                  ],
                                  "rows": [
                                    [
                                      "Payment Processing",
                                      "10",
                                      "640"
                                    ]
                                  ]
                                },
                                {
                                  "name": "DrawIOSubEpic (rendered positions)",
                                  "columns": [
                                    "name",
                                    "x",
                                    "width"
                                  ],
                                  "rows": [
                                    [
                                      "Authorize Payment",
                                      "10",
                                      "200"
                                    ],
                                    [
                                      "Settle Transaction",
                                      "220",
                                      "200"
                                    ],
                                    [
                                      "Issue Refund",
                                      "430",
                                      "200"
                                    ]
                                  ]
                                }
                              ]
                            },
                            {
                              "name": "Sibling sub-epics do not overlap horizontally",
                              "sequential_order": 3.0,
                              "type": "edge_case",
                              "background": [],
                              "test_method": "test_sibling_subepics_do_not_overlap_horizontally",
                              "steps": "Given {DrawIOSubEpic} is rendered with {DrawIOSubEpic.x} and {DrawIOSubEpic.width}\nWhen {DrawIOStoryMap} renders outline from {StoryMap}\nThen for each adjacent pair of {DrawIOSubEpic}: left x + width <= right x",
                              "examples": [
                                {
                                  "name": "DrawIOSubEpic (rendered positions)",
                                  "columns": [
                                    "name",
                                    "x",
                                    "width"
                                  ],
                                  "rows": [
                                    [
                                      "Authorize Payment",
                                      "10",
                                      "200"
                                    ],
                                    [
                                      "Settle Transaction",
                                      "220",
                                      "200"
                                    ],
                                    [
                                      "Issue Refund",
                                      "430",
                                      "200"
                                    ]
                                  ]
                                }
                              ]
                            },
                            {
                              "name": "Re-render with saved layout data preserves epic and sub-epic positions",
                              "sequential_order": 4.0,
                              "type": "happy_path",
                              "background": [],
                              "test_method": "test_rerender_with_saved_layout_data_preserves_epic_and_subepic_positions",
                              "steps": "Given {LayoutData} exists with saved positions for {DrawIOSubEpic}\nWhen {DrawIOStoryMap} renders outline from {StoryMap}\nThen {DrawIOSubEpic} is rendered at {LayoutData.saved_x} {LayoutData.saved_y} with {LayoutData.saved_w}",
                              "examples": [
                                {
                                  "name": "LayoutData (saved positions for DrawIOSubEpic)",
                                  "columns": [
                                    "sub_epic_name",
                                    "saved_x",
                                    "saved_y",
                                    "saved_w"
                                  ],
                                  "rows": [
                                    [
                                      "Authorize Payment",
                                      "50",
                                      "200",
                                      "250"
                                    ],
                                    [
                                      "Settle Transaction",
                                      "310",
                                      "200",
                                      "250"
                                    ],
                                    [
                                      "Issue Refund",
                                      "570",
                                      "200",
                                      "250"
                                    ]
                                  ]
                                }
                              ]
                            },
                            {
                              "name": "Render completes and writes valid DrawIO file for epic hierarchy",
                              "sequential_order": 5.0,
                              "type": "happy_path",
                              "background": [],
                              "test_method": "test_render_completes_and_writes_valid_drawio_file_for_epic_hierarchy",
                              "steps": "Given no {LayoutData} exists for this diagram\nWhen {DrawIOStoryMap} renders outline from {StoryMap}\nThen {DrawIOStoryMap} is written to {DrawIOStoryMap.output_file}\nAnd {DrawIOStoryMap.output} is valid DrawIO XML\nAnd {DrawIOStoryMap.summary} reports correct counts",
                              "examples": [
                                {
                                  "name": "DrawIOStoryMap (render output)",
                                  "columns": [
                                    "output_file"
                                  ],
                                  "rows": [
                                    [
                                      "story-map-outline.drawio"
                                    ]
                                  ]
                                }
                              ]
                            },
                            {
                              "name": "Nested sub-epics render recursively to 4 levels of depth",
                              "sequential_order": 6.0,
                              "type": "edge_case",
                              "background": [],
                              "test_method": "test_nested_subepics_render_recursively_to_4_levels_of_depth",
                              "steps": "Given {StoryMap} has {DrawIOSubEpic} nested 4 levels deep\nAnd each {DrawIOSubEpic} has a parent {DrawIOSubEpic}\nWhen {DrawIOStoryMap} renders outline from {StoryMap}\nThen {DrawIOStoryMap} contains all {DrawIOSubEpic} at every depth\nAnd each {DrawIOSubEpic} is rendered inside its parent",
                              "examples": [
                                {
                                  "name": "DrawIOEpic",
                                  "columns": [
                                    "name"
                                  ],
                                  "rows": [
                                    [
                                      "Wire Transfers"
                                    ]
                                  ]
                                },
                                {
                                  "name": "DrawIOSubEpic (nested hierarchy)",
                                  "columns": [
                                    "name",
                                    "parent",
                                    "depth"
                                  ],
                                  "rows": [
                                    [
                                      "Domestic Wires",
                                      "Wire Transfers",
                                      "1"
                                    ],
                                    [
                                      "Same-Day Settlement",
                                      "Domestic Wires",
                                      "2"
                                    ],
                                    [
                                      "Fedwire Submission",
                                      "Same-Day Settlement",
                                      "3"
                                    ],
                                    [
                                      "Fed Confirmation",
                                      "Fedwire Submission",
                                      "4"
                                    ]
                                  ]
                                }
                              ]
                            },
                            {
                              "name": "Both parent and leaf sub-epics rendered in hierarchy",
                              "sequential_order": 7.0,
                              "type": "happy_path",
                              "background": [],
                              "test_method": "test_both_parent_and_leaf_subepics_rendered_in_hierarchy",
                              "steps": "Given {StoryMap} has {DrawIOSubEpic} with {DrawIOSubEpic.role} of parent and leaf\nAnd leaf {DrawIOSubEpic} contain {DrawIOStory}\nWhen {DrawIOStoryMap} renders outline from {StoryMap}\nThen parent {DrawIOSubEpic} is rendered as a container\nAnd leaf {DrawIOSubEpic} is rendered with its {DrawIOStory} inside",
                              "examples": [
                                {
                                  "name": "DrawIOEpic",
                                  "columns": [
                                    "name"
                                  ],
                                  "rows": [
                                    [
                                      "Pharmacy"
                                    ]
                                  ]
                                },
                                {
                                  "name": "DrawIOSubEpic (hierarchy with roles)",
                                  "columns": [
                                    "name",
                                    "parent",
                                    "role"
                                  ],
                                  "rows": [
                                    [
                                      "Prescription Management",
                                      "Pharmacy",
                                      "parent"
                                    ],
                                    [
                                      "Verify Prescription",
                                      "Prescription Management",
                                      "parent"
                                    ],
                                    [
                                      "Dispense Medication",
                                      "Verify Prescription",
                                      "leaf"
                                    ],
                                    [
                                      "Check Interactions",
                                      "Verify Prescription",
                                      "leaf"
                                    ]
                                  ]
                                },
                                {
                                  "name": "DrawIOStory (children of leaf DrawIOSubEpic)",
                                  "columns": [
                                    "name",
                                    "parent",
                                    "story_type"
                                  ],
                                  "rows": [
                                    [
                                      "Check Dosage",
                                      "Dispense Medication",
                                      "user"
                                    ],
                                    [
                                      "Print Label",
                                      "Dispense Medication",
                                      "system"
                                    ],
                                    [
                                      "Log Dispensed",
                                      "Dispense Medication",
                                      "system"
                                    ],
                                    [
                                      "Lookup Drug DB",
                                      "Check Interactions",
                                      "user"
                                    ],
                                    [
                                      "Flag Conflict",
                                      "Check Interactions",
                                      "system"
                                    ]
                                  ]
                                }
                              ]
                            },
                            {
                              "name": "Nested sub-epic Y positions increase with each depth level",
                              "sequential_order": 8.0,
                              "type": "happy_path",
                              "background": [],
                              "test_method": "test_nested_subepic_y_positions_increase_with_each_depth_level",
                              "steps": "Given {StoryMap} has {DrawIOSubEpic} nested multiple levels deep\nWhen {DrawIOStoryMap} renders outline from {StoryMap}\nThen {DrawIOSubEpic.expected_y} increases with each {DrawIOSubEpic.depth}\nAnd deeper {DrawIOSubEpic} has larger Y than shallower",
                              "examples": [
                                {
                                  "name": "DrawIOEpic",
                                  "columns": [
                                    "name"
                                  ],
                                  "rows": [
                                    [
                                      "Wire Transfers"
                                    ]
                                  ]
                                },
                                {
                                  "name": "DrawIOSubEpic (expected Y by depth)",
                                  "columns": [
                                    "name",
                                    "parent",
                                    "depth",
                                    "expected_y"
                                  ],
                                  "rows": [
                                    [
                                      "Domestic Wires",
                                      "Wire Transfers",
                                      "1",
                                      "180"
                                    ],
                                    [
                                      "Same-Day Settlement",
                                      "Domestic Wires",
                                      "2",
                                      "240"
                                    ],
                                    [
                                      "Fedwire Submission",
                                      "Same-Day Settlement",
                                      "3",
                                      "300"
                                    ]
                                  ]
                                }
                              ]
                            },
                            {
                              "name": "Single-level sub-epic renders at standard Y position",
                              "sequential_order": 9.0,
                              "type": "happy_path",
                              "background": [],
                              "test_method": "test_singlelevel_subepic_renders_at_standard_y_position",
                              "steps": "Given {StoryMap} has {DrawIOEpic} with {DrawIOEpic.y} position\nAnd {DrawIOEpic} has a single {DrawIOSubEpic} with no nesting\nWhen {DrawIOStoryMap} renders outline from {StoryMap}\nThen {DrawIOSubEpic.expected_y} equals {DrawIOEpic.y} plus {DrawIOSubEpic.standard_offset}",
                              "examples": [
                                {
                                  "name": "DrawIOEpic",
                                  "columns": [
                                    "name",
                                    "y"
                                  ],
                                  "rows": [
                                    [
                                      "Wealth Management",
                                      "120"
                                    ]
                                  ]
                                },
                                {
                                  "name": "DrawIOSubEpic (single child)",
                                  "columns": [
                                    "name",
                                    "parent",
                                    "standard_offset",
                                    "expected_y"
                                  ],
                                  "rows": [
                                    [
                                      "Portfolio Rebalancing",
                                      "Wealth Management",
                                      "60",
                                      "180"
                                    ]
                                  ]
                                }
                              ]
                            },
                            {
                              "name": "Nested container spans children at every depth level",
                              "sequential_order": 10.0,
                              "type": "edge_case",
                              "background": [],
                              "test_method": "test_nested_container_spans_children_at_every_depth_level",
                              "steps": "Given {StoryMap} has {DrawIOSubEpic} nested multiple levels deep\nAnd each {DrawIOSubEpic} is rendered with {DrawIOSubEpic.x} and {DrawIOSubEpic.width}\nWhen {DrawIOStoryMap} renders outline from {StoryMap}\nThen for each parent {DrawIOSubEpic}: parent.x <= child.x\nAnd for each parent {DrawIOSubEpic}: child.x + child.width <= parent.x + parent.width",
                              "examples": [
                                {
                                  "name": "DrawIOEpic",
                                  "columns": [
                                    "name"
                                  ],
                                  "rows": [
                                    [
                                      "KYC Processing"
                                    ]
                                  ]
                                },
                                {
                                  "name": "DrawIOSubEpic (containment verification)",
                                  "columns": [
                                    "name",
                                    "parent",
                                    "depth",
                                    "x",
                                    "width"
                                  ],
                                  "rows": [
                                    [
                                      "Customer Onboarding",
                                      "KYC Processing",
                                      "1",
                                      "10",
                                      "500"
                                    ],
                                    [
                                      "Verify Identity",
                                      "Customer Onboarding",
                                      "2",
                                      "20",
                                      "230"
                                    ],
                                    [
                                      "Check Compliance",
                                      "Customer Onboarding",
                                      "2",
                                      "260",
                                      "230"
                                    ],
                                    [
                                      "Run Sanctions Screen",
                                      "Verify Identity",
                                      "3",
                                      "30",
                                      "100"
                                    ]
                                  ]
                                }
                              ]
                            }
                          ],
                          "acceptance_criteria": [
                            {
                              "name": "When story graph has nested sub-epics then system renders each depth level with increasing Y positions and parent width encompasses all children",
                              "text": "When story graph has nested sub-epics then system renders each depth level with increasing Y positions and parent width encompasses all children",
                              "sequential_order": 1.0
                            },
                            {
                              "name": "When epic is rendered then epic horizontal span covers all its sub-epics",
                              "text": "When epic is rendered then epic horizontal span covers all its sub-epics",
                              "sequential_order": 2.0
                            },
                            {
                              "name": "When sibling sub-epics are rendered then no two sub-epics overlap horizontally",
                              "text": "When sibling sub-epics are rendered then no two sub-epics overlap horizontally",
                              "sequential_order": 3.0
                            },
                            {
                              "name": "When epic and sub-epic cells are rendered then all cells have whiteSpace wrap and html enabled and explicit fontSize",
                              "text": "When epic and sub-epic cells are rendered then all cells have whiteSpace wrap and html enabled and explicit fontSize",
                              "sequential_order": 4.0
                            }
                          ],
                          "behavior": null
                        },
                        {
                          "name": "Report epic and sub-epic changes",
                          "sequential_order": 2.0,
                          "connector": "or",
                          "story_type": "user",
                          "users": [
                            "Bot Behavior"
                          ],
                          "test_class": "TestReportEpicAndSubEpicChanges",
                          "scenarios": [
                            {
                              "name": "No changes reported when diagram matches original for epics and sub-epics",
                              "sequential_order": 1.0,
                              "type": "happy_path",
                              "background": [],
                              "test_method": "test_no_changes_reported_when_diagram_matches_original_for_epics_and_subepics",
                              "steps": "Given {DrawIOStoryMap} has same sub-epic structure as {StoryMap}\nWhen {DrawIOStoryMap}.generateUpdateReport({StoryMap}) is executed\nThen {UpdateReport} has {UpdateReport.renames_count} of zero\nAnd {UpdateReport} has {UpdateReport.new_count} of zero\nAnd {UpdateReport} has {UpdateReport.removed_count} of zero"
                            },
                            {
                              "name": "Sub-epic added in diagram detected as new in report",
                              "sequential_order": 2.0,
                              "type": "happy_path",
                              "background": [],
                              "test_method": "test_subepic_added_in_diagram_detected_as_new_in_report",
                              "steps": "Given {DrawIOStoryMap} has {DrawIOSubEpic} not present in {StoryMap}\nWhen {DrawIOStoryMap}.generateUpdateReport({StoryMap}) is executed\nThen {UpdateReport} lists {DrawIOSubEpic} as new",
                              "examples": [
                                {
                                  "name": "DrawIOSubEpic (new in diagram)",
                                  "columns": [
                                    "name",
                                    "parent"
                                  ],
                                  "rows": [
                                    [
                                      "Nostro Reconciliation",
                                      "Wire Transfers"
                                    ]
                                  ]
                                }
                              ]
                            },
                            {
                              "name": "Sub-epic renamed in diagram detected as rename in report",
                              "sequential_order": 3.0,
                              "type": "happy_path",
                              "background": [],
                              "test_method": "test_subepic_renamed_in_diagram_detected_as_rename_in_report",
                              "steps": "Given {DrawIOSubEpic} in {DrawIOStoryMap} has different name than {StoryMap}\nAnd {StoryMap} has the original name\nWhen {DrawIOStoryMap}.generateUpdateReport({StoryMap}) is executed\nThen {UpdateReport} pairs the {DrawIOSubEpic} as a rename match",
                              "examples": [
                                {
                                  "name": "DrawIOSubEpic (renamed in diagram)",
                                  "columns": [
                                    "original_name",
                                    "new_name",
                                    "parent"
                                  ],
                                  "rows": [
                                    [
                                      "Correspondent Banking",
                                      "Nostro Reconciliation",
                                      "Wire Transfers"
                                    ]
                                  ]
                                }
                              ]
                            },
                            {
                              "name": "Report roundtrips through JSON for epic and sub-epic hierarchy structure",
                              "sequential_order": 4.0,
                              "type": "happy_path",
                              "background": [],
                              "test_method": "test_report_roundtrips_through_json_for_epic_and_subepic_hierarchy_structure",
                              "steps": "Given {UpdateReport} has sub-epic changes\nWhen {UpdateReport}.to_dict() serializes to JSON\nAnd {UpdateReport}.from_dict() restores from JSON\nThen all {UpdateReport} fields survive the roundtrip",
                              "examples": [
                                {
                                  "name": "UpdateReport (renames)",
                                  "columns": [
                                    "original_name",
                                    "new_name",
                                    "parent"
                                  ],
                                  "rows": [
                                    [
                                      "Correspondent Banking",
                                      "Nostro Reconciliation",
                                      "Wire Transfers"
                                    ]
                                  ]
                                },
                                {
                                  "name": "UpdateReport (new sub-epics)",
                                  "columns": [
                                    "name",
                                    "parent"
                                  ],
                                  "rows": [
                                    [
                                      "FX Conversion",
                                      "Wire Transfers"
                                    ],
                                    [
                                      "Cross-Border Settlement",
                                      "Wire Transfers"
                                    ]
                                  ]
                                },
                                {
                                  "name": "UpdateReport (removed sub-epics)",
                                  "columns": [
                                    "name",
                                    "parent"
                                  ],
                                  "rows": [
                                    [
                                      "Domestic Wires",
                                      "Wire Transfers"
                                    ]
                                  ]
                                }
                              ]
                            },
                            {
                              "name": "Report lists exact fuzzy new and removed entities for epics",
                              "sequential_order": 5.0,
                              "type": "happy_path",
                              "background": [],
                              "test_method": "test_report_lists_exact_fuzzy_new_and_removed_entities_for_epics",
                              "steps": "Given {DrawIOStoryMap} exists with content extracted from diagram\nAnd {StoryMap} exists with known {DrawIOSubEpic} names\nWhen {DrawIOStoryMap}.generateUpdateReport({StoryMap}) is executed\nThen {UpdateReport} lists exact matches and fuzzy matches and new and removed {DrawIOSubEpic}",
                              "examples": [
                                {
                                  "name": "DrawIOSubEpic (in diagram - includes exact, fuzzy, and new)",
                                  "columns": [
                                    "name",
                                    "parent",
                                    "match_type"
                                  ],
                                  "rows": [
                                    [
                                      "Correspondent Banking",
                                      "Wire Transfers",
                                      "exact"
                                    ],
                                    [
                                      "Nostro Reconciliation",
                                      "Wire Transfers",
                                      "fuzzy"
                                    ],
                                    [
                                      "FX Conversion",
                                      "Wire Transfers",
                                      "new"
                                    ]
                                  ]
                                }
                              ]
                            },
                            {
                              "name": "Only hierarchical cell ID sub-epics participate in rename pairing",
                              "sequential_order": 6.0,
                              "type": "edge_case",
                              "background": [],
                              "test_method": "test_only_hierarchical_cell_id_subepics_participate_in_rename_pairing",
                              "steps": "Given {DrawIOStoryMap} has unmatched {DrawIOSubEpic} with both simple and hierarchical {DrawIOElement.cell_id}\nWhen {DrawIOStoryMap}.generateUpdateReport({StoryMap}) is executed\nThen only {DrawIOSubEpic} with hierarchical {DrawIOElement.cell_id} participate in rename pairing\nAnd {DrawIOSubEpic} with simple {DrawIOElement.cell_id} are treated as new",
                              "examples": [
                                {
                                  "name": "DrawIOSubEpic (unmatched in diagram)",
                                  "columns": [
                                    "name",
                                    "parent"
                                  ],
                                  "rows": [
                                    [
                                      "Nostro Reconciliation",
                                      "Wire Transfers"
                                    ],
                                    [
                                      "FX Conversion",
                                      "Wire Transfers"
                                    ]
                                  ]
                                },
                                {
                                  "name": "DrawIOElement (cell IDs for unmatched DrawIOSubEpic)",
                                  "columns": [
                                    "sub_epic_name",
                                    "cell_id",
                                    "id_type"
                                  ],
                                  "rows": [
                                    [
                                      "Nostro Reconciliation",
                                      "epic-1/sub-epic-2",
                                      "hierarchical"
                                    ],
                                    [
                                      "FX Conversion",
                                      "abc123",
                                      "simple"
                                    ]
                                  ]
                                }
                              ]
                            },
                            {
                              "name": "All simple cell ID sub-epics treated as new when no hierarchical candidates",
                              "sequential_order": 7.0,
                              "type": "edge_case",
                              "background": [],
                              "test_method": "test_all_simple_cell_id_subepics_treated_as_new_when_no_hierarchical_candidates",
                              "steps": "Given {DrawIOStoryMap} has unmatched {DrawIOSubEpic} all with simple {DrawIOElement.cell_id}\nWhen {DrawIOStoryMap}.generateUpdateReport({StoryMap}) is executed\nThen no {DrawIOSubEpic} participate in rename pairing\nAnd all unmatched {DrawIOSubEpic} are listed as new in {UpdateReport}",
                              "examples": [
                                {
                                  "name": "DrawIOSubEpic (unmatched in diagram)",
                                  "columns": [
                                    "name",
                                    "parent"
                                  ],
                                  "rows": [
                                    [
                                      "Nostro Reconciliation",
                                      "Wire Transfers"
                                    ],
                                    [
                                      "FX Conversion",
                                      "Wire Transfers"
                                    ]
                                  ]
                                },
                                {
                                  "name": "DrawIOElement (all simple cell IDs)",
                                  "columns": [
                                    "sub_epic_name",
                                    "cell_id",
                                    "id_type"
                                  ],
                                  "rows": [
                                    [
                                      "Nostro Reconciliation",
                                      "abc123",
                                      "simple"
                                    ],
                                    [
                                      "FX Conversion",
                                      "xyz789",
                                      "simple"
                                    ]
                                  ]
                                }
                              ]
                            },
                            {
                              "name": "Story rename works regardless of cell ID format",
                              "sequential_order": 8.0,
                              "type": "edge_case",
                              "background": [],
                              "test_method": "test_story_rename_works_regardless_of_cell_id_format",
                              "steps": "Given {DrawIOStoryMap} has {DrawIOStory} with name different from {StoryMap} and any {DrawIOElement.cell_id} format\nWhen {DrawIOStoryMap}.generateUpdateReport({StoryMap}) is executed\nThen {UpdateReport} detects {DrawIOStory} rename regardless of {DrawIOElement.cell_id} format\nAnd {DrawIOElement.cell_id} type filtering only applies to {DrawIOSubEpic} and {DrawIOEpic}",
                              "examples": [
                                {
                                  "name": "DrawIOStory (renamed in diagram)",
                                  "columns": [
                                    "original_name",
                                    "new_name",
                                    "parent",
                                    "cell_id"
                                  ],
                                  "rows": [
                                    [
                                      "Validate SWIFT Code",
                                      "Validate BIC Code",
                                      "Correspondent Banking",
                                      "abc123"
                                    ]
                                  ]
                                }
                              ],
                              "test": {
                                "method": "test_story_rename_works_regardless_of_cell_id_format",
                                "file": "invoke_bot/perform_action/synchronize_graph_with_rendered_diagram/test_synchronize_epics_and_sub_epics.py",
                                "line": 323
                              }
                            },
                            {
                              "name": "Removed epics and sub-epics flagged as large deletions in report",
                              "sequential_order": 9.0,
                              "type": "edge_case",
                              "background": [],
                              "test_method": "test_removed_epics_and_subepics_flagged_as_large_deletions_in_report",
                              "steps": "Given {DrawIOStoryMap} has fewer nodes than {StoryMap}\nWhen {DrawIOStoryMap}.generateUpdateReport({StoryMap}) is executed\nThen {UpdateReport} lists deleted nodes as removed\nAnd {UpdateReport.large_deletions} flags entire missing {DrawIOEpic} or {DrawIOSubEpic}",
                              "examples": [
                                {
                                  "name": "DrawIOSubEpic (missing from diagram)",
                                  "columns": [
                                    "name",
                                    "parent",
                                    "present_in_diagram"
                                  ],
                                  "rows": [
                                    [
                                      "Cross-Border Settlement",
                                      "Wire Transfers",
                                      "false"
                                    ]
                                  ]
                                },
                                {
                                  "name": "UpdateReport (large deletions)",
                                  "columns": [
                                    "deletion_type",
                                    "name"
                                  ],
                                  "rows": [
                                    [
                                      "missing_sub_epics",
                                      "Cross-Border Settlement"
                                    ]
                                  ]
                                }
                              ]
                            }
                          ],
                          "acceptance_criteria": [
                            {
                              "name": "When user creates a sub-epic manually in DrawIO with simple cell ID then report treats it as new not rename",
                              "text": "When user creates a sub-epic manually in DrawIO with simple cell ID then report treats it as new not rename",
                              "sequential_order": 1.0
                            },
                            {
                              "name": "When tool-generated sub-epic with hierarchical cell ID is unmatched then report pairs it as rename candidate",
                              "text": "When tool-generated sub-epic with hierarchical cell ID is unmatched then report pairs it as rename candidate",
                              "sequential_order": 2.0
                            },
                            {
                              "name": "When rename report is serialized to JSON and restored then all fields survive roundtrip",
                              "text": "When rename report is serialized to JSON and restored then all fields survive roundtrip",
                              "sequential_order": 3.0
                            }
                          ],
                          "behavior": null
                        },
                        {
                          "name": "Update epics and sub-epics from diagram",
                          "sequential_order": 3.0,
                          "connector": "or",
                          "story_type": "user",
                          "users": [
                            "Bot Behavior"
                          ],
                          "test_class": "TestUpdateEpicsAndSubEpicsFromDiagram",
                          "scenarios": [
                            {
                              "name": "Apply epic and sub-epic changes from report updates story graph",
                              "sequential_order": 1.0,
                              "type": "happy_path",
                              "background": [],
                              "test_method": "test_apply_epic_and_subepic_changes_from_report_updates_story_graph",
                              "steps": "Given {UpdateReport} has sub-epic changes\nWhen {UpdateReport} is applied to {StoryMap}\nThen {StoryMap} reflects the sub-epic additions and removals from {UpdateReport}",
                              "examples": [
                                {
                                  "name": "UpdateReport (new sub-epics)",
                                  "columns": [
                                    "name",
                                    "parent"
                                  ],
                                  "rows": [
                                    [
                                      "Supply Chain Analytics",
                                      "Order Fulfillment"
                                    ]
                                  ]
                                },
                                {
                                  "name": "UpdateReport (removed sub-epics)",
                                  "columns": [
                                    "name",
                                    "parent"
                                  ],
                                  "rows": [
                                    [
                                      "Freight Routing",
                                      "Order Fulfillment"
                                    ]
                                  ]
                                }
                              ]
                            },
                            {
                              "name": "Removed sub-epic reassigns its stories by position",
                              "sequential_order": 2.0,
                              "type": "happy_path",
                              "background": [],
                              "test_method": "test_removed_subepic_reassigns_its_stories_by_position",
                              "steps": "Given {DrawIOSubEpic} has been removed from {DrawIOStoryMap}\nWhen {DrawIOStoryMap} extracts outline from diagram\nThen extracted graph omits that {DrawIOSubEpic}\nAnd {DrawIOStory} under it are reassigned by position (inside another {DrawIOSubEpic} or at {DrawIOEpic} level)\nAnd {UpdateReport.large_deletions} flags the missing {DrawIOSubEpic}",
                              "examples": [
                                {
                                  "name": "DrawIOSubEpic (removed from diagram)",
                                  "columns": [
                                    "name",
                                    "parent",
                                    "present_in_diagram"
                                  ],
                                  "rows": [
                                    [
                                      "Freight Routing",
                                      "Order Fulfillment",
                                      "false"
                                    ]
                                  ]
                                },
                                {
                                  "name": "DrawIOStory (orphaned by removal)",
                                  "columns": [
                                    "name",
                                    "original_parent",
                                    "reassigned_to"
                                  ],
                                  "rows": [
                                    [
                                      "Select Carrier",
                                      "Freight Routing",
                                      "Warehouse Management"
                                    ],
                                    [
                                      "Calculate Shipping",
                                      "Freight Routing",
                                      "Warehouse Management"
                                    ]
                                  ]
                                },
                                {
                                  "name": "UpdateReport (large deletions)",
                                  "columns": [
                                    "deletion_type",
                                    "name"
                                  ],
                                  "rows": [
                                    [
                                      "missing_sub_epics",
                                      "Freight Routing"
                                    ]
                                  ]
                                }
                              ]
                            },
                            {
                              "name": "Removed epic removes all children from story graph",
                              "sequential_order": 3.0,
                              "type": "edge_case",
                              "background": [],
                              "test_method": "test_removed_epic_removes_all_children_from_story_graph",
                              "steps": "Given {DrawIOEpic} has been removed from {DrawIOStoryMap}\nWhen {DrawIOStoryMap} extracts outline from diagram\nThen extracted graph omits that {DrawIOEpic} and all its {DrawIOSubEpic} and {DrawIOStory}\nAnd {UpdateReport} lists those as removed\nAnd {UpdateReport.large_deletions} includes missing_epics",
                              "examples": [
                                {
                                  "name": "DrawIOEpic (removed from diagram)",
                                  "columns": [
                                    "name",
                                    "present_in_diagram"
                                  ],
                                  "rows": [
                                    [
                                      "Order Fulfillment",
                                      "false"
                                    ]
                                  ]
                                },
                                {
                                  "name": "UpdateReport (large deletions)",
                                  "columns": [
                                    "deletion_type",
                                    "name"
                                  ],
                                  "rows": [
                                    [
                                      "missing_epics",
                                      "Order Fulfillment"
                                    ]
                                  ]
                                }
                              ]
                            },
                            {
                              "name": "Renamed sub-epic in diagram updates name in story graph",
                              "sequential_order": 4.0,
                              "type": "happy_path",
                              "background": [],
                              "test_method": "test_renamed_subepic_in_diagram_updates_name_in_story_graph",
                              "steps": "Given {DrawIOSubEpic} in {DrawIOStoryMap} has different name than in {StoryMap}\nWhen {UpdateReport} is applied to {StoryMap}\nThen {StoryMap} updates the sub-epic name to match {DrawIOSubEpic}",
                              "examples": [
                                {
                                  "name": "DrawIOSubEpic (renamed in diagram)",
                                  "columns": [
                                    "original_name",
                                    "new_name",
                                    "parent"
                                  ],
                                  "rows": [
                                    [
                                      "Warehouse Management",
                                      "Inventory Management",
                                      "Order Fulfillment"
                                    ]
                                  ]
                                }
                              ]
                            },
                            {
                              "name": "New sub-epic in diagram creates it in story graph",
                              "sequential_order": 5.0,
                              "type": "happy_path",
                              "background": [],
                              "test_method": "test_new_subepic_in_diagram_creates_it_in_story_graph",
                              "steps": "Given {DrawIOStoryMap} has {DrawIOSubEpic} not present in {StoryMap}\nWhen {UpdateReport} is applied to {StoryMap}\nThen {StoryMap} creates the new {DrawIOSubEpic}",
                              "examples": [
                                {
                                  "name": "DrawIOSubEpic (new in diagram)",
                                  "columns": [
                                    "name",
                                    "parent"
                                  ],
                                  "rows": [
                                    [
                                      "Last-Mile Delivery",
                                      "Order Fulfillment"
                                    ]
                                  ]
                                }
                              ]
                            },
                            {
                              "name": "End-to-end render then report then update for epic hierarchy",
                              "sequential_order": 6.0,
                              "type": "happy_path",
                              "background": [],
                              "test_method": "test_endtoend_render_then_report_then_update_for_epic_hierarchy",
                              "steps": "Given {StoryMap} has {DrawIOSubEpic}\nWhen {DrawIOStoryMap} renders from {StoryMap}\nAnd user modifies {DrawIOSubEpic} in diagram\nAnd {DrawIOStoryMap}.generateUpdateReport({StoryMap}) is executed\nAnd {UpdateReport} is applied to {StoryMap}\nThen {StoryMap} reflects all sub-epic changes from diagram",
                              "examples": [
                                {
                                  "name": "DrawIOSubEpic (after user modifications)",
                                  "columns": [
                                    "name",
                                    "parent",
                                    "change"
                                  ],
                                  "rows": [
                                    [
                                      "Warehouse Management",
                                      "Order Fulfillment",
                                      "unchanged"
                                    ],
                                    [
                                      "Supply Chain Analytics",
                                      "Order Fulfillment",
                                      "added"
                                    ]
                                  ]
                                }
                              ]
                            },
                            {
                              "name": "Extract assigns entities to parent sub-epics by containment and sequential order",
                              "sequential_order": 7.0,
                              "type": "happy_path",
                              "background": [],
                              "test_method": "test_extract_assigns_entities_to_parent_subepics_by_containment_and_sequential_order",
                              "steps": "Given {DrawIOStoryMap} outline file contains {DrawIOEpic} and {DrawIOSubEpic} and {DrawIOStory} cells\nWhen {DrawIOStoryMap} extracts outline from diagram\nThen {DrawIOStoryMap} assigns each {DrawIOStory} to a {DrawIOSubEpic} by containment\nAnd each {DrawIOSubEpic} has one story group with all its {DrawIOStory}\nAnd {DrawIOStory.sequential_order} is assigned from top-to-bottom then left-to-right\nAnd extracted JSON is written to file",
                              "examples": [
                                {
                                  "name": "DrawIOStory (with assigned containment and order)",
                                  "columns": [
                                    "name",
                                    "parent",
                                    "sequential_order"
                                  ],
                                  "rows": [
                                    [
                                      "Receive Inventory",
                                      "Warehouse Management",
                                      "1"
                                    ],
                                    [
                                      "Pick Pack Ship",
                                      "Warehouse Management",
                                      "2"
                                    ],
                                    [
                                      "Select Carrier",
                                      "Freight Routing",
                                      "1"
                                    ],
                                    [
                                      "Calculate Shipping",
                                      "Freight Routing",
                                      "2"
                                    ]
                                  ]
                                }
                              ]
                            },
                            {
                              "name": "Sync persists layout data alongside diagram",
                              "sequential_order": 8.0,
                              "type": "happy_path",
                              "background": [],
                              "test_method": "test_sync_persists_layout_data_alongside_diagram",
                              "steps": "Given {DrawIOStoryMap} exists with content extracted from diagram\nWhen sync completes\nThen {LayoutData} is persisted to JSON file alongside the diagram\nAnd {LayoutData} stores position and size for each {DrawIOEpic} and {DrawIOSubEpic} and {DrawIOStory}\nAnd {LayoutData} is available for next render",
                              "examples": [
                                {
                                  "name": "LayoutData (persisted positions)",
                                  "columns": [
                                    "entity_type",
                                    "name",
                                    "x",
                                    "y",
                                    "width",
                                    "height"
                                  ],
                                  "rows": [
                                    [
                                      "DrawIOEpic",
                                      "Order Fulfillment",
                                      "10",
                                      "100",
                                      "600",
                                      "80"
                                    ],
                                    [
                                      "DrawIOSubEpic",
                                      "Warehouse Management",
                                      "20",
                                      "180",
                                      "280",
                                      "120"
                                    ],
                                    [
                                      "DrawIOSubEpic",
                                      "Freight Routing",
                                      "310",
                                      "180",
                                      "280",
                                      "120"
                                    ],
                                    [
                                      "DrawIOStory",
                                      "Receive Inventory",
                                      "30",
                                      "220",
                                      "120",
                                      "40"
                                    ],
                                    [
                                      "DrawIOStory",
                                      "Pick Pack Ship",
                                      "160",
                                      "220",
                                      "120",
                                      "40"
                                    ]
                                  ]
                                }
                              ],
                              "test": {
                                "method": "test_sync_persists_layout_data_alongside_diagram",
                                "file": "invoke_bot/perform_action/synchronize_graph_with_rendered_diagram/test_synchronize_epics_and_sub_epics.py",
                                "line": 462
                              }
                            },
                            {
                              "name": "Extract from empty or malformed drawio file produces error",
                              "sequential_order": 9.0,
                              "type": "error_case",
                              "background": [],
                              "test_method": "test_extract_from_empty_or_malformed_drawio_file_produces_error",
                              "steps": "Given {DrawIOStoryMap} file contains no valid {DrawIOEpic} or {DrawIOSubEpic} cells\nWhen {DrawIOStoryMap} extracts outline from diagram\nThen {DrawIOStoryMap} reports extraction error with zero nodes found\nAnd no extracted JSON is written",
                              "examples": [
                                {
                                  "name": "DrawIOStoryMap (empty/malformed)",
                                  "columns": [
                                    "diagram_type",
                                    "output_file",
                                    "nodes_found"
                                  ],
                                  "rows": [
                                    [
                                      "outline",
                                      "empty-map.drawio",
                                      "0"
                                    ]
                                  ]
                                }
                              ]
                            }
                          ],
                          "acceptance_criteria": [
                            {
                              "name": "When new sub-epic appears in diagram then story graph adds it",
                              "text": "When new sub-epic appears in diagram then story graph adds it",
                              "sequential_order": 1.0
                            },
                            {
                              "name": "When sub-epic is renamed in diagram then story graph updates name",
                              "text": "When sub-epic is renamed in diagram then story graph updates name",
                              "sequential_order": 2.0
                            },
                            {
                              "name": "When sub-epic is removed from diagram then story graph removes it",
                              "text": "When sub-epic is removed from diagram then story graph removes it",
                              "sequential_order": 3.0
                            },
                            {
                              "name": "When nested sub-epic structure changes in diagram then story graph preserves new structure",
                              "text": "When nested sub-epic structure changes in diagram then story graph preserves new structure",
                              "sequential_order": 4.0
                            }
                          ],
                          "behavior": null
                        }
                      ]
                    }
                  ]
                },
                {
                  "name": "Synchronize Stories and Actors",
                  "sequential_order": 2.0,
                  "behavior": null,
                  "domain_concepts": [],
                  "test_file": "invoke_bot/perform_action/synchronize_graph_with_rendered_diagram/test_synchronize_stories_and_actors.py",
                  "sub_epics": [],
                  "story_groups": [
                    {
                      "name": "",
                      "sequential_order": 0.0,
                      "type": "and",
                      "connector": null,
                      "behavior": null,
                      "stories": [
                        {
                          "name": "Render stories and actors",
                          "sequential_order": 1.0,
                          "connector": "or",
                          "story_type": "user",
                          "users": [
                            "Bot Behavior"
                          ],
                          "test_class": "TestRenderStoriesAndActors",
                          "scenarios": [
                            {
                              "name": "Render stories and actors with default layout positions stories below deepest sub-epic",
                              "sequential_order": 1.0,
                              "type": "happy_path",
                              "background": [],
                              "test_method": "test_render_stories_and_actors_with_default_layout_positions_stories_below_deepest_subepic",
                              "steps": "Given no {LayoutData} exists for this diagram\nWhen {DrawIOStoryMap} renders outline from {StoryMap}\nThen {DrawIOStory} cells are positioned below deepest {DrawIOSubEpic}\nAnd {DrawIOStoryMap.output} is valid DrawIO XML"
                            },
                            {
                              "name": "Parent sub-epic spans all child stories horizontally",
                              "sequential_order": 2.0,
                              "type": "happy_path",
                              "background": [],
                              "test_method": "test_parent_subepic_spans_all_child_stories_horizontally",
                              "steps": "Given {DrawIOStory} is rendered with {DrawIOStory.x} and {DrawIOStory.width}\nWhen {DrawIOStoryMap} renders outline from {StoryMap}\nThen {DrawIOSubEpic} horizontal boundary encompasses all its {DrawIOStory}",
                              "examples": [
                                {
                                  "name": "DrawIOStory (rendered positions)",
                                  "columns": [
                                    "name",
                                    "parent",
                                    "x",
                                    "width"
                                  ],
                                  "rows": [
                                    [
                                      "Search Rooms",
                                      "Check Availability",
                                      "10",
                                      "120"
                                    ],
                                    [
                                      "Check Dates",
                                      "Check Availability",
                                      "140",
                                      "120"
                                    ]
                                  ]
                                },
                                {
                                  "name": "DrawIOSubEpic (expected span)",
                                  "columns": [
                                    "name",
                                    "expected_x",
                                    "expected_min_width"
                                  ],
                                  "rows": [
                                    [
                                      "Check Availability",
                                      "10",
                                      "250"
                                    ]
                                  ]
                                }
                              ]
                            },
                            {
                              "name": "Sibling stories do not overlap horizontally",
                              "sequential_order": 3.0,
                              "type": "edge_case",
                              "background": [],
                              "test_method": "test_sibling_stories_do_not_overlap_horizontally",
                              "steps": "Given {DrawIOStory} is rendered with {DrawIOStory.x} and {DrawIOStory.width}\nWhen {DrawIOStoryMap} renders outline from {StoryMap}\nThen for each adjacent pair of sibling {DrawIOStory}: left x + width <= right x",
                              "examples": [
                                {
                                  "name": "DrawIOStory (sibling positions under same parent)",
                                  "columns": [
                                    "name",
                                    "parent",
                                    "x",
                                    "width"
                                  ],
                                  "rows": [
                                    [
                                      "Search Rooms",
                                      "Check Availability",
                                      "10",
                                      "120"
                                    ],
                                    [
                                      "Check Dates",
                                      "Check Availability",
                                      "140",
                                      "120"
                                    ],
                                    [
                                      "Add Guest",
                                      "Create Booking",
                                      "280",
                                      "120"
                                    ]
                                  ]
                                }
                              ]
                            },
                            {
                              "name": "Re-render with saved layout data preserves story and actor positions",
                              "sequential_order": 4.0,
                              "type": "happy_path",
                              "background": [],
                              "test_method": "test_rerender_with_saved_layout_data_preserves_story_and_actor_positions",
                              "steps": "Given {LayoutData} exists with saved positions for {DrawIOStory}\nWhen {DrawIOStoryMap} renders outline from {StoryMap}\nThen {DrawIOStory} is rendered at {LayoutData.saved_x} {LayoutData.saved_y}",
                              "examples": [
                                {
                                  "name": "LayoutData (saved positions for DrawIOStory)",
                                  "columns": [
                                    "story_name",
                                    "saved_x",
                                    "saved_y"
                                  ],
                                  "rows": [
                                    [
                                      "Search Rooms",
                                      "15",
                                      "300"
                                    ],
                                    [
                                      "Check Dates",
                                      "145",
                                      "300"
                                    ],
                                    [
                                      "Add Guest",
                                      "285",
                                      "300"
                                    ],
                                    [
                                      "Confirm Reservation",
                                      "415",
                                      "300"
                                    ]
                                  ]
                                }
                              ]
                            }
                          ],
                          "acceptance_criteria": [
                            {
                              "name": "When stories are rendered then they are positioned below deepest sub-epic",
                              "text": "When stories are rendered then they are positioned below deepest sub-epic",
                              "sequential_order": 1.0
                            },
                            {
                              "name": "When stories have users then actor elements are rendered in actor row above stories",
                              "text": "When stories have users then actor elements are rendered in actor row above stories",
                              "sequential_order": 2.0
                            },
                            {
                              "name": "When sub-epic contains stories then sub-epic horizontal span covers all its stories",
                              "text": "When sub-epic contains stories then sub-epic horizontal span covers all its stories",
                              "sequential_order": 3.0
                            },
                            {
                              "name": "When sibling stories are rendered then no two stories overlap horizontally",
                              "text": "When sibling stories are rendered then no two stories overlap horizontally",
                              "sequential_order": 4.0
                            }
                          ],
                          "behavior": null
                        },
                        {
                          "name": "Render acceptance criteria",
                          "sequential_order": 2.0,
                          "connector": "or",
                          "story_type": "user",
                          "users": [
                            "Bot Behavior"
                          ],
                          "test_class": "TestRenderAcceptanceCriteria",
                          "scenarios": [
                            {
                              "name": "Render acceptance criteria with default layout positions AC boxes below stories",
                              "sequential_order": 1.0,
                              "type": "happy_path",
                              "background": [],
                              "test_method": "test_render_acceptance_criteria_with_default_layout_positions_ac_boxes_below_stories",
                              "steps": "Given no {LayoutData} exists for this diagram\nWhen {DrawIOStoryMap} renders exploration from {StoryMap}\nThen {DrawIOElement} AC boxes are positioned below each {DrawIOStory}\nAnd {DrawIOStoryMap.output} is valid DrawIO XML"
                            },
                            {
                              "name": "Re-render with saved layout data preserves story and AC box positions",
                              "sequential_order": 2.0,
                              "type": "happy_path",
                              "background": [],
                              "test_method": "test_rerender_with_saved_layout_data_preserves_story_and_ac_box_positions",
                              "steps": "Given {LayoutData} exists with saved positions for {DrawIOStory} and {DrawIOElement}\nWhen {DrawIOStoryMap} renders exploration from {StoryMap}\nThen {DrawIOStory} and {DrawIOElement} AC boxes are rendered at {LayoutData} saved positions",
                              "examples": [
                                {
                                  "name": "LayoutData (saved positions)",
                                  "columns": [
                                    "entity_type",
                                    "name",
                                    "saved_x",
                                    "saved_y"
                                  ],
                                  "rows": [
                                    [
                                      "DrawIOStory",
                                      "Add to Cart",
                                      "10",
                                      "300"
                                    ],
                                    [
                                      "DrawIOElement",
                                      "When product in stock...",
                                      "10",
                                      "360"
                                    ],
                                    [
                                      "DrawIOElement",
                                      "When product out of stock...",
                                      "10",
                                      "400"
                                    ]
                                  ]
                                }
                              ]
                            },
                            {
                              "name": "Render with no acceptance criteria produces story without AC boxes",
                              "sequential_order": 3.0,
                              "type": "edge_case",
                              "background": [],
                              "test_method": "test_render_with_no_acceptance_criteria_produces_story_without_ac_boxes",
                              "steps": "Given {Story} has no {AcceptanceCriteria} defined\nWhen {DrawIOStoryMap} renders exploration from {StoryMap}\nThen {DrawIOStoryMap} renders {DrawIOStory} without {DrawIOElement} AC boxes"
                            },
                            {
                              "name": "Render acceptance criteria boxes below stories in exploration diagram",
                              "sequential_order": 4.0,
                              "type": "happy_path",
                              "background": [],
                              "test_method": "test_render_acceptance_criteria_boxes_below_stories_in_exploration_diagram",
                              "steps": "Given no {LayoutData} exists for this diagram\nWhen {DrawIOStoryMap} renders exploration from {StoryMap}\nThen {DrawIOStoryMap} contains {DrawIOEpic} spanning {DrawIOSubEpic} spanning {DrawIOStory}\nAnd {DrawIOElement} AC boxes are rendered below each {DrawIOStory}\nAnd AC text is formatted as When/Then in {DrawIOElement} boxes\nAnd actor labels are positioned above {DrawIOStory}"
                            },
                            {
                              "name": "AC boxes styled with correct fill stroke and positioned below story",
                              "sequential_order": 5.0,
                              "type": "happy_path",
                              "background": [],
                              "test_method": "test_ac_boxes_styled_with_correct_fill_stroke_and_positioned_below_story",
                              "steps": "Given no {LayoutData} exists for this diagram\nWhen {DrawIOStoryMap} renders exploration from {StoryMap}\nThen {DrawIOElement} AC boxes are wider than {DrawIOStory} cell\nAnd {DrawIOElement} uses {DrawIOElement.fill} of #fff2cc and {DrawIOElement.stroke} of #d6b656\nAnd {DrawIOElement} has left-aligned 8px text",
                              "examples": [
                                {
                                  "name": "DrawIOElement (AC box styling)",
                                  "columns": [
                                    "fill",
                                    "stroke",
                                    "text_align",
                                    "font_size"
                                  ],
                                  "rows": [
                                    [
                                      "#fff2cc",
                                      "#d6b656",
                                      "left",
                                      "8"
                                    ]
                                  ]
                                }
                              ]
                            },
                            {
                              "name": "Rendered output contains story and AC cells with correct containment",
                              "sequential_order": 6.0,
                              "type": "happy_path",
                              "background": [],
                              "test_method": "test_rendered_output_contains_story_and_ac_cells_with_correct_containment",
                              "steps": "Given no {LayoutData} exists for this diagram\nWhen {DrawIOStoryMap} renders exploration from {StoryMap}\nThen output {DrawIOStoryMap} contains both {DrawIOStory} cells and {DrawIOElement} AC cells\nAnd {DrawIOElement} AC cells are contained within their parent {DrawIOStory} sub-tree in DrawIO XML"
                            }
                          ],
                          "acceptance_criteria": [
                            {
                              "name": "When story has acceptance criteria then system renders AC boxes below story in exploration diagram",
                              "text": "When story has acceptance criteria then system renders AC boxes below story in exploration diagram",
                              "sequential_order": 1.0
                            },
                            {
                              "name": "When AC boxes are rendered then they use correct fill stroke and left-aligned text style",
                              "text": "When AC boxes are rendered then they use correct fill stroke and left-aligned text style",
                              "sequential_order": 2.0
                            },
                            {
                              "name": "When layout data exists then system preserves positions of story and AC boxes on re-render",
                              "text": "When layout data exists then system preserves positions of story and AC boxes on re-render",
                              "sequential_order": 3.0
                            },
                            {
                              "name": "When story has no acceptance criteria then no AC boxes rendered below it",
                              "text": "When story has no acceptance criteria then no AC boxes rendered below it",
                              "sequential_order": 4.0
                            }
                          ],
                          "behavior": null
                        },
                        {
                          "name": "Report story moves between parents",
                          "sequential_order": 3.0,
                          "connector": "or",
                          "story_type": "user",
                          "users": [
                            "Bot Behavior"
                          ],
                          "test_class": "TestReportStoryMovesBetweenParents",
                          "scenarios": [
                            {
                              "name": "No changes reported when diagram matches original for story positions",
                              "sequential_order": 1.0,
                              "type": "happy_path",
                              "background": [],
                              "test_method": "test_no_changes_reported_when_diagram_matches_original_for_story_positions",
                              "steps": "Given {DrawIOStoryMap} has same story structure as {StoryMap}\nWhen {DrawIOStoryMap}.generateUpdateReport({StoryMap}) is executed\nThen {UpdateReport} has {UpdateReport.moved_count} of zero\nAnd {UpdateReport} has {UpdateReport.renames_count} of zero"
                            },
                            {
                              "name": "Story moved between sub-epics detected as move not new plus removed",
                              "sequential_order": 2.0,
                              "type": "happy_path",
                              "background": [],
                              "test_method": "test_story_moved_between_subepics_detected_as_move_not_new_plus_removed",
                              "steps": "Given {DrawIOStory} in {DrawIOStoryMap} has different parent than in {StoryMap}\nWhen {DrawIOStoryMap}.generateUpdateReport({StoryMap}) is executed\nThen {UpdateReport} detects the {DrawIOStory} as moved not new plus removed",
                              "examples": [
                                {
                                  "name": "StoryMove (story moved between parents)",
                                  "columns": [
                                    "name",
                                    "from_parent",
                                    "to_parent"
                                  ],
                                  "rows": [
                                    [
                                      "View Plans",
                                      "Select Plan",
                                      "Change Plan"
                                    ]
                                  ]
                                }
                              ]
                            },
                            {
                              "name": "Story moved across epics detected as move not new plus removed",
                              "sequential_order": 3.0,
                              "type": "edge_case",
                              "background": [],
                              "test_method": "test_story_moved_across_epics_detected_as_move_not_new_plus_removed",
                              "steps": "Given {DrawIOStory} in {DrawIOStoryMap} has parent in different {Epic} than in {StoryMap}\nWhen {DrawIOStoryMap}.generateUpdateReport({StoryMap}) is executed\nThen {UpdateReport} detects the {DrawIOStory} as moved not new plus removed",
                              "examples": [
                                {
                                  "name": "Epic (additional for cross-epic move)",
                                  "columns": [
                                    "name"
                                  ],
                                  "rows": [
                                    [
                                      "Manage Mobile Plans"
                                    ],
                                    [
                                      "Billing"
                                    ]
                                  ]
                                },
                                {
                                  "name": "SubEpic (additional for cross-epic move)",
                                  "columns": [
                                    "name",
                                    "parent"
                                  ],
                                  "rows": [
                                    [
                                      "Select Plan",
                                      "Manage Mobile Plans"
                                    ],
                                    [
                                      "View Invoice",
                                      "Billing"
                                    ]
                                  ]
                                },
                                {
                                  "name": "StoryMove (cross-epic move)",
                                  "columns": [
                                    "name",
                                    "from_parent",
                                    "to_parent"
                                  ],
                                  "rows": [
                                    [
                                      "View Plans",
                                      "Select Plan",
                                      "View Invoice"
                                    ]
                                  ]
                                }
                              ]
                            },
                            {
                              "name": "Report roundtrips through JSON for story move changes",
                              "sequential_order": 4.0,
                              "type": "happy_path",
                              "background": [],
                              "test_method": "test_report_roundtrips_through_json_for_story_move_changes",
                              "steps": "Given {UpdateReport} has story move changes\nWhen {UpdateReport}.to_dict() serializes to JSON\nAnd {UpdateReport}.from_dict() restores from JSON\nThen all {UpdateReport} fields survive the roundtrip",
                              "examples": [
                                {
                                  "name": "UpdateReport (new stories)",
                                  "columns": [
                                    "name",
                                    "parent"
                                  ],
                                  "rows": [
                                    [
                                      "View Billing",
                                      "View Invoice"
                                    ]
                                  ]
                                },
                                {
                                  "name": "UpdateReport (removed stories)",
                                  "columns": [
                                    "name",
                                    "parent"
                                  ],
                                  "rows": [
                                    [
                                      "Downgrade Plan",
                                      "Change Plan"
                                    ]
                                  ]
                                },
                                {
                                  "name": "UpdateReport (moved stories)",
                                  "columns": [
                                    "name",
                                    "from_parent",
                                    "to_parent"
                                  ],
                                  "rows": [
                                    [
                                      "Compare Plans",
                                      "Select Plan",
                                      "Change Plan"
                                    ]
                                  ]
                                }
                              ]
                            },
                            {
                              "name": "Stories from removed sub-epic detected as moves to parent",
                              "sequential_order": 5.0,
                              "type": "edge_case",
                              "background": [],
                              "test_method": "test_stories_from_removed_subepic_detected_as_moves_to_parent",
                              "steps": "Given {SubEpic} has been removed from {DrawIOStoryMap}\nAnd {DrawIOStory} previously under that {SubEpic} now sits at {Epic} level\nWhen {DrawIOStoryMap}.generateUpdateReport({StoryMap}) is executed\nThen {UpdateReport} detects the {DrawIOStory} as moved to parent {Epic}",
                              "examples": [
                                {
                                  "name": "StoryMove (story moved to epic when sub-epic removed)",
                                  "columns": [
                                    "name",
                                    "from_parent",
                                    "to_parent"
                                  ],
                                  "rows": [
                                    [
                                      "View Plans",
                                      "Select Plan",
                                      "Manage Mobile Plans"
                                    ]
                                  ]
                                }
                              ]
                            }
                          ],
                          "acceptance_criteria": [
                            {
                              "name": "When story position changes between sub-epics in diagram then report detects it as a move not new plus removed",
                              "text": "When story position changes between sub-epics in diagram then report detects it as a move not new plus removed",
                              "sequential_order": 1.0
                            },
                            {
                              "name": "When story moves across epics in diagram then report detects it as a cross-epic move",
                              "text": "When story moves across epics in diagram then report detects it as a cross-epic move",
                              "sequential_order": 2.0
                            },
                            {
                              "name": "When move report is serialized to JSON and restored then all fields survive roundtrip",
                              "text": "When move report is serialized to JSON and restored then all fields survive roundtrip",
                              "sequential_order": 3.0
                            }
                          ],
                          "behavior": null
                        },
                        {
                          "name": "Report acceptance criteria changes",
                          "sequential_order": 4.0,
                          "connector": "or",
                          "story_type": "user",
                          "users": [
                            "Bot Behavior"
                          ],
                          "test_class": "TestReportAcceptanceCriteriaChanges",
                          "scenarios": [
                            {
                              "name": "No changes reported when diagram matches original for acceptance criteria",
                              "sequential_order": 1.0,
                              "type": "happy_path",
                              "background": [],
                              "test_method": "test_no_changes_reported_when_diagram_matches_original_for_acceptance_criteria",
                              "steps": "Given {DrawIOStoryMap} has same {AcceptanceCriteria} structure as {StoryMap}\nWhen {DrawIOStoryMap}.generateUpdateReport({StoryMap}) is executed\nThen {UpdateReport} has {UpdateReport.ac_added_count} of zero\nAnd {UpdateReport} has {UpdateReport.ac_removed_count} of zero"
                            },
                            {
                              "name": "AC box added in diagram detected as new in report",
                              "sequential_order": 2.0,
                              "type": "happy_path",
                              "background": [],
                              "test_method": "test_ac_box_added_in_diagram_detected_as_new_in_report",
                              "steps": "Given {DrawIOStoryMap} has {DrawIOElement} AC box not present in {StoryMap}\nWhen {DrawIOStoryMap}.generateUpdateReport({StoryMap}) is executed\nThen {UpdateReport} lists the {AcceptanceCriteria} as new",
                              "examples": [
                                {
                                  "name": "ACChange (acceptance criteria added)",
                                  "columns": [
                                    "story_name",
                                    "added"
                                  ],
                                  "rows": [
                                    [
                                      "Create Account",
                                      "When balance checked then fee waived"
                                    ]
                                  ]
                                }
                              ]
                            },
                            {
                              "name": "AC box removed from diagram detected as removed in report",
                              "sequential_order": 3.0,
                              "type": "happy_path",
                              "background": [],
                              "test_method": "test_ac_box_removed_from_diagram_detected_as_removed_in_report",
                              "steps": "Given {DrawIOStoryMap} lacks {DrawIOElement} AC box that {StoryMap} has\nWhen {DrawIOStoryMap}.generateUpdateReport({StoryMap}) is executed\nThen {UpdateReport} lists the {AcceptanceCriteria} as removed",
                              "examples": [
                                {
                                  "name": "ACChange (acceptance criteria removed)",
                                  "columns": [
                                    "story_name",
                                    "removed"
                                  ],
                                  "rows": [
                                    [
                                      "Create Account",
                                      "When duplicate SSN then rejection shown"
                                    ]
                                  ]
                                }
                              ]
                            },
                            {
                              "name": "AC moved between stories detected as move not new plus removed",
                              "sequential_order": 4.0,
                              "type": "happy_path",
                              "background": [],
                              "test_method": "test_ac_moved_between_stories_detected_as_move_not_new_plus_removed",
                              "steps": "Given {DrawIOElement} AC box has moved from one {DrawIOStory} to another\nWhen {DrawIOStoryMap}.generateUpdateReport({StoryMap}) is executed\nThen {UpdateReport} detects the {AcceptanceCriteria} as moved not new plus removed",
                              "examples": [
                                {
                                  "name": "ACChange (acceptance criteria moved between stories)",
                                  "columns": [
                                    "text",
                                    "from_story",
                                    "to_story"
                                  ],
                                  "rows": [
                                    [
                                      "When documents uploaded then verification started",
                                      "Verify Identity",
                                      "Create Account"
                                    ]
                                  ]
                                }
                              ]
                            },
                            {
                              "name": "AC boxes assigned to stories by vertical position below story cells",
                              "sequential_order": 5.0,
                              "type": "happy_path",
                              "background": [],
                              "test_method": "test_ac_boxes_assigned_to_stories_by_vertical_position_below_story_cells",
                              "steps": "Given {DrawIOStoryMap} has AC {DrawIOElement} positioned below {DrawIOStory}\nWhen {DrawIOStoryMap} extracts from diagram\nThen each AC {DrawIOElement} is assigned to its {DrawIOStory} by vertical position"
                            },
                            {
                              "name": "Extract assigns AC boxes to stories by vertical position and containment",
                              "sequential_order": 6.0,
                              "type": "happy_path",
                              "background": [],
                              "test_method": "test_extract_assigns_ac_boxes_to_stories_by_vertical_position_and_containment",
                              "steps": "Given {DrawIOStoryMap} has AC {DrawIOElement} positioned below {DrawIOStory}\nWhen {DrawIOStoryMap} extracts exploration from diagram\nThen {DrawIOStoryMap} assigns AC cells to {DrawIOStory} by vertical position and containment\nAnd AC text mapped back to {AcceptanceCriteria}"
                            },
                            {
                              "name": "Report roundtrips through JSON for acceptance criteria changes",
                              "sequential_order": 7.0,
                              "type": "happy_path",
                              "background": [],
                              "test_method": "test_report_roundtrips_through_json_for_acceptance_criteria_changes",
                              "steps": "Given {UpdateReport} has acceptance criteria changes\nWhen {UpdateReport}.to_dict() serializes to JSON\nAnd {UpdateReport}.from_dict() restores from JSON\nThen all {UpdateReport} fields survive the roundtrip",
                              "examples": [
                                {
                                  "name": "UpdateReport (added AC)",
                                  "columns": [
                                    "story_name",
                                    "text"
                                  ],
                                  "rows": [
                                    [
                                      "Create Account",
                                      "When balance checked then fee waived"
                                    ]
                                  ]
                                },
                                {
                                  "name": "UpdateReport (removed AC)",
                                  "columns": [
                                    "story_name",
                                    "text"
                                  ],
                                  "rows": [
                                    [
                                      "Verify Identity",
                                      "When documents uploaded then verification started"
                                    ]
                                  ]
                                }
                              ]
                            },
                            {
                              "name": "AC box with When/Then format text extracted as step description",
                              "sequential_order": 8.0,
                              "type": "edge_case",
                              "background": [],
                              "test_method": "test_ac_box_with_whenthen_format_text_extracted_as_step_description",
                              "steps": "Given AC {DrawIOElement} has {DrawIOElement.text} with When/Then format\nWhen {DrawIOStoryMap} extracts exploration from diagram\nThen {DrawIOStoryMap} extracts step description from {DrawIOElement.text}\nAnd associates extracted step with the containing {DrawIOStory}",
                              "examples": [
                                {
                                  "name": "DrawIOElement (AC box with When/Then format)",
                                  "columns": [
                                    "parent_story",
                                    "text",
                                    "text_format"
                                  ],
                                  "rows": [
                                    [
                                      "Create Account",
                                      "When valid ID provided then account created",
                                      "when_then"
                                    ]
                                  ]
                                }
                              ]
                            },
                            {
                              "name": "AC box with plain text format treated as acceptance criteria without step extraction",
                              "sequential_order": 9.0,
                              "type": "edge_case",
                              "background": [],
                              "test_method": "test_ac_box_with_plain_text_format_treated_as_acceptance_criteria_without_step_extraction",
                              "steps": "Given AC {DrawIOElement} has {DrawIOElement.text} with plain format\nWhen {DrawIOStoryMap} extracts exploration from diagram\nThen {DrawIOStoryMap} treats {DrawIOElement.text} as plain {AcceptanceCriteria} description\nAnd associates it with the containing {DrawIOStory} without step extraction",
                              "examples": [
                                {
                                  "name": "DrawIOElement (AC box with plain text format)",
                                  "columns": [
                                    "parent_story",
                                    "text",
                                    "text_format"
                                  ],
                                  "rows": [
                                    [
                                      "Create Account",
                                      "User must provide government-issued ID",
                                      "plain"
                                    ]
                                  ]
                                }
                              ]
                            }
                          ],
                          "acceptance_criteria": [
                            {
                              "name": "When AC box is added in diagram then report lists it as new acceptance criteria",
                              "text": "When AC box is added in diagram then report lists it as new acceptance criteria",
                              "sequential_order": 1.0
                            },
                            {
                              "name": "When AC box is removed from diagram then report lists it as removed",
                              "text": "When AC box is removed from diagram then report lists it as removed",
                              "sequential_order": 2.0
                            },
                            {
                              "name": "When AC box moves between stories in diagram then report detects it as a move not new plus removed",
                              "text": "When AC box moves between stories in diagram then report detects it as a move not new plus removed",
                              "sequential_order": 3.0
                            },
                            {
                              "name": "When AC box has When/Then format text then extractor parses it as step description",
                              "text": "When AC box has When/Then format text then extractor parses it as step description",
                              "sequential_order": 4.0
                            }
                          ],
                          "behavior": null
                        },
                        {
                          "name": "Update stories from diagram",
                          "sequential_order": 5.0,
                          "connector": "or",
                          "story_type": "user",
                          "users": [
                            "Bot Behavior"
                          ],
                          "test_class": "TestUpdateStoriesFromDiagram",
                          "scenarios": [
                            {
                              "name": "Apply story move transfers between sub-epics preserving data",
                              "sequential_order": 1.0,
                              "type": "happy_path",
                              "background": [],
                              "test_method": "test_apply_story_move_transfers_between_subepics_preserving_data",
                              "steps": "Given {DrawIOStory} has been moved to a new position in {DrawIOStoryMap}\nWhen {DrawIOStoryMap} extracts and generates {UpdateReport}\nThen {DrawIOStory.sequential_order} is recomputed from new left-to-right position\nAnd {UpdateReport} matches the moved {DrawIOStory} to original",
                              "examples": [
                                {
                                  "name": "StoryMove (describes move)",
                                  "columns": [
                                    "name",
                                    "from_parent",
                                    "to_parent"
                                  ],
                                  "rows": [
                                    [
                                      "List available units",
                                      "List Properties",
                                      "Screen Tenants"
                                    ]
                                  ]
                                }
                              ]
                            },
                            {
                              "name": "Apply story move preserves all story fields",
                              "sequential_order": 2.0,
                              "type": "happy_path",
                              "background": [],
                              "test_method": "test_apply_story_move_preserves_all_story_fields",
                              "steps": "Given {UpdateReport} contains a {StoryMove} for {DrawIOStory}\nWhen {StoryMove} is applied to {StoryMap}\nThen {Story.acceptance_criteria} are preserved after move\nAnd {Story.scenarios} are preserved after move\nAnd {Story.users} and {Story.story_type} are preserved after move",
                              "examples": [
                                {
                                  "name": "StoryMove (for story being moved)",
                                  "columns": [
                                    "name",
                                    "from_parent",
                                    "to_parent"
                                  ],
                                  "rows": [
                                    [
                                      "List available units",
                                      "List Properties",
                                      "Screen Tenants"
                                    ]
                                  ]
                                }
                              ]
                            },
                            {
                              "name": "Apply cross-epic story move preserves acceptance criteria and scenarios",
                              "sequential_order": 3.0,
                              "type": "edge_case",
                              "background": [],
                              "test_method": "test_apply_crossepic_story_move_preserves_acceptance_criteria_and_scenarios",
                              "steps": "Given {DrawIOStory} has been moved from {SubEpic} under one {Epic} to {SubEpic} under a different {Epic}\nWhen cross-epic {StoryMove} is applied to {StoryMap}\nThen {Story.acceptance_criteria} survive the cross-epic move\nAnd {Story.scenarios} survive the cross-epic move",
                              "examples": [
                                {
                                  "name": "Epic (additional for cross-epic move)",
                                  "columns": [
                                    "name"
                                  ],
                                  "rows": [
                                    [
                                      "Property Management"
                                    ],
                                    [
                                      "Tenant Services"
                                    ]
                                  ]
                                },
                                {
                                  "name": "SubEpic (additional for cross-epic move)",
                                  "columns": [
                                    "name",
                                    "parent"
                                  ],
                                  "rows": [
                                    [
                                      "List Properties",
                                      "Property Management"
                                    ],
                                    [
                                      "Screen Tenants",
                                      "Tenant Services"
                                    ]
                                  ]
                                },
                                {
                                  "name": "StoryMove (cross-epic move)",
                                  "columns": [
                                    "name",
                                    "from_parent",
                                    "to_parent"
                                  ],
                                  "rows": [
                                    [
                                      "List available units",
                                      "List Properties",
                                      "Screen Tenants"
                                    ]
                                  ]
                                }
                              ]
                            },
                            {
                              "name": "Removed story keeps original structure and flags if many missing from epic",
                              "sequential_order": 4.0,
                              "type": "edge_case",
                              "background": [],
                              "test_method": "test_removed_story_keeps_original_structure_and_flags_if_many_missing_from_epic",
                              "steps": "Given one {DrawIOStory} cell has been removed from {DrawIOStoryMap}\nWhen {DrawIOStoryMap} extracts from diagram\nThen extracted graph omits that {DrawIOStory}\nAnd {UpdateReport} lists it as removed\nAnd if many {DrawIOStory} from one {Epic} are missing the {UpdateReport} flags that {Epic}",
                              "examples": [
                                {
                                  "name": "DrawIOStory (removed from diagram)",
                                  "columns": [
                                    "name",
                                    "parent"
                                  ],
                                  "rows": [
                                    [
                                      "List available units",
                                      "List Properties"
                                    ]
                                  ]
                                }
                              ]
                            },
                            {
                              "name": "Moved stories preserved when sub-epic removed from diagram",
                              "sequential_order": 5.0,
                              "type": "edge_case",
                              "background": [],
                              "test_method": "test_moved_stories_preserved_when_subepic_removed_from_diagram",
                              "steps": "Given {DrawIOStory} has been moved to another {SubEpic} in {DrawIOStoryMap}\nAnd the original {SubEpic} is being removed\nWhen {UpdateReport} is applied (moves before removes)\nThen moved {Story} survives the {SubEpic} removal",
                              "examples": [
                                {
                                  "name": "StoryMove (describes move before sub-epic removal)",
                                  "columns": [
                                    "name",
                                    "from_parent",
                                    "to_parent"
                                  ],
                                  "rows": [
                                    [
                                      "List available units",
                                      "List Properties",
                                      "Screen Tenants"
                                    ]
                                  ]
                                }
                              ]
                            },
                            {
                              "name": "Unmoved stories removed with sub-epic when sub-epic removed from diagram",
                              "sequential_order": 6.0,
                              "type": "edge_case",
                              "background": [],
                              "test_method": "test_unmoved_stories_removed_with_subepic_when_subepic_removed_from_diagram",
                              "steps": "Given {DrawIOStory} was NOT moved to another {SubEpic}\nAnd the {SubEpic} is being removed\nWhen {UpdateReport} is applied\nThen unmoved {Story} is removed along with its {SubEpic}",
                              "examples": [
                                {
                                  "name": "SubEpic (being removed)",
                                  "columns": [
                                    "name",
                                    "parent"
                                  ],
                                  "rows": [
                                    [
                                      "List Properties",
                                      "Property Management"
                                    ]
                                  ]
                                },
                                {
                                  "name": "Story (unmoved, removed with sub-epic)",
                                  "columns": [
                                    "name",
                                    "parent"
                                  ],
                                  "rows": [
                                    [
                                      "List available units",
                                      "List Properties"
                                    ],
                                    [
                                      "Schedule viewings",
                                      "List Properties"
                                    ]
                                  ]
                                }
                              ]
                            },
                            {
                              "name": "Move to renamed sub-epic updates correctly in story graph",
                              "sequential_order": 7.0,
                              "type": "happy_path",
                              "background": [],
                              "test_method": "test_move_to_renamed_subepic_updates_correctly_in_story_graph",
                              "steps": "Given {DrawIOStory} has been renamed in {DrawIOStoryMap}\nWhen {UpdateReport} is applied to {StoryMap}\nThen {StoryMap} updates the story name to match {DrawIOStory}",
                              "examples": [
                                {
                                  "name": "DrawIOStory (renamed in diagram)",
                                  "columns": [
                                    "original_name",
                                    "new_name",
                                    "parent"
                                  ],
                                  "rows": [
                                    [
                                      "List available units",
                                      "List all units",
                                      "List Properties"
                                    ]
                                  ]
                                }
                              ]
                            },
                            {
                              "name": "Move to new sub-epic creates it and transfers story",
                              "sequential_order": 8.0,
                              "type": "happy_path",
                              "background": [],
                              "test_method": "test_move_to_new_subepic_creates_it_and_transfers_story",
                              "steps": "Given {DrawIOStoryMap} has a new {DrawIOStory} not in original {StoryMap}\nWhen {UpdateReport} is applied to {StoryMap}\nThen {StoryMap} creates the new {Story}",
                              "examples": [
                                {
                                  "name": "DrawIOStory (new in diagram)",
                                  "columns": [
                                    "name",
                                    "parent",
                                    "story_type"
                                  ],
                                  "rows": [
                                    [
                                      "Process applications",
                                      "Screen Tenants",
                                      "user"
                                    ]
                                  ]
                                }
                              ]
                            },
                            {
                              "name": "End-to-end render then report then update for story moves",
                              "sequential_order": 9.0,
                              "type": "happy_path",
                              "background": [],
                              "test_method": "test_endtoend_render_then_report_then_update_for_story_moves",
                              "steps": "Given {StoryMap} has {Story}\nWhen {DrawIOStoryMap} renders from {StoryMap}\nAnd user modifies stories in diagram\nAnd {DrawIOStoryMap}.generateUpdateReport({StoryMap}) is executed\nAnd {UpdateReport} is applied to {StoryMap}\nThen {StoryMap} reflects all story changes from diagram",
                              "examples": [
                                {
                                  "name": "StoryMove (user modification)",
                                  "columns": [
                                    "name",
                                    "from_parent",
                                    "to_parent"
                                  ],
                                  "rows": [
                                    [
                                      "List available units",
                                      "List Properties",
                                      "Screen Tenants"
                                    ]
                                  ]
                                }
                              ]
                            }
                          ],
                          "acceptance_criteria": [
                            {
                              "name": "When story is moved between sub-epics in diagram then story graph transfers it preserving all fields",
                              "text": "When story is moved between sub-epics in diagram then story graph transfers it preserving all fields",
                              "sequential_order": 1.0
                            },
                            {
                              "name": "When story is removed from diagram then story graph removes it and flags if many missing from epic",
                              "text": "When story is removed from diagram then story graph removes it and flags if many missing from epic",
                              "sequential_order": 2.0
                            },
                            {
                              "name": "When sub-epic is removed from diagram then moved stories survive and unmoved stories are removed with it",
                              "text": "When sub-epic is removed from diagram then moved stories survive and unmoved stories are removed with it",
                              "sequential_order": 3.0
                            },
                            {
                              "name": "When new story appears in diagram then story graph creates it",
                              "text": "When new story appears in diagram then story graph creates it",
                              "sequential_order": 4.0
                            }
                          ],
                          "behavior": null
                        },
                        {
                          "name": "Update acceptance criteria from diagram",
                          "sequential_order": 6.0,
                          "connector": "or",
                          "story_type": "user",
                          "users": [
                            "Bot Behavior"
                          ],
                          "test_class": "TestUpdateAcceptanceCriteriaFromDiagram",
                          "scenarios": [
                            {
                              "name": "Apply acceptance criteria changes from report updates story graph",
                              "sequential_order": 1.0,
                              "type": "happy_path",
                              "background": [],
                              "test_method": "test_apply_acceptance_criteria_changes_from_report_updates_story_graph",
                              "steps": "Given {UpdateReport} has acceptance criteria changes\nWhen {UpdateReport} is applied to {StoryMap}\nThen {StoryMap} reflects the {AcceptanceCriteria} additions and removals from {UpdateReport}",
                              "examples": [
                                {
                                  "name": "ACChange (acceptance criteria changes in UpdateReport)",
                                  "columns": [
                                    "story_name",
                                    "criteria_text",
                                    "change_type"
                                  ],
                                  "rows": [
                                    [
                                      "Search catalog",
                                      "When catalog is searched then results display within 2 seconds",
                                      "removed"
                                    ],
                                    [
                                      "Enroll in section",
                                      "When student has prerequisites then enrollment succeeds",
                                      "added"
                                    ]
                                  ]
                                }
                              ]
                            },
                            {
                              "name": "Apply AC move transfers between stories preserving data",
                              "sequential_order": 2.0,
                              "type": "happy_path",
                              "background": [],
                              "test_method": "test_apply_ac_move_transfers_between_stories_preserving_data",
                              "steps": "Given {UpdateReport} contains an {AcceptanceCriteria} move from one {Story} to another\nWhen move is applied to {StoryMap}\nThen {AcceptanceCriteria} is removed from source {Story} and added to target {Story}\nAnd all {AcceptanceCriteria} fields are preserved",
                              "examples": [
                                {
                                  "name": "ACChange (move from one story to another)",
                                  "columns": [
                                    "text",
                                    "from_story",
                                    "to_story"
                                  ],
                                  "rows": [
                                    [
                                      "When catalog is searched then results display within 2 seconds",
                                      "Search catalog",
                                      "Add to cart"
                                    ]
                                  ]
                                }
                              ]
                            },
                            {
                              "name": "Story split distributes AC correctly to new and original stories",
                              "sequential_order": 3.0,
                              "type": "edge_case",
                              "background": [],
                              "test_method": "test_story_split_distributes_ac_correctly_to_new_and_original_stories",
                              "steps": "Given {Story} has been split in diagram with some {AcceptanceCriteria} moved to a new {DrawIOStory}\nWhen {UpdateReport} is applied to {StoryMap}\nThen {AcceptanceCriteria} is distributed correctly between original and new {Story}\nAnd no {AcceptanceCriteria} is lost in the split",
                              "examples": [
                                {
                                  "name": "DrawIOStory (original and new after split)",
                                  "columns": [
                                    "name",
                                    "parent",
                                    "story_type"
                                  ],
                                  "rows": [
                                    [
                                      "Search catalog",
                                      "Browse Courses",
                                      "user"
                                    ],
                                    [
                                      "Filter by department",
                                      "Browse Courses",
                                      "user"
                                    ]
                                  ]
                                },
                                {
                                  "name": "AcceptanceCriteria (distributed between stories)",
                                  "columns": [
                                    "text",
                                    "parent_story",
                                    "sequential_order"
                                  ],
                                  "rows": [
                                    [
                                      "When catalog is searched then results display within 2 seconds",
                                      "Search catalog",
                                      "1.0"
                                    ],
                                    [
                                      "When department filter applied then results narrow",
                                      "Filter by department",
                                      "1.0"
                                    ]
                                  ]
                                }
                              ]
                            },
                            {
                              "name": "Update preserves original acceptance criteria for matched stories",
                              "sequential_order": 4.0,
                              "type": "happy_path",
                              "background": [],
                              "test_method": "test_update_preserves_original_acceptance_criteria_for_matched_stories",
                              "steps": "Given {UpdateReport} has matched {AcceptanceCriteria} between diagram and {StoryMap}\nWhen {UpdateReport} is applied to {StoryMap}\nThen original {AcceptanceCriteria.text} and scenarios are preserved for matched {AcceptanceCriteria}"
                            },
                            {
                              "name": "End-to-end render then report then update for acceptance criteria",
                              "sequential_order": 5.0,
                              "type": "happy_path",
                              "background": [],
                              "test_method": "test_endtoend_render_then_report_then_update_for_acceptance_criteria",
                              "steps": "Given {StoryMap} has {AcceptanceCriteria}\nWhen {DrawIOStoryMap} renders from {StoryMap}\nAnd user modifies acceptance criteria in diagram\nAnd {DrawIOStoryMap}.generateUpdateReport({StoryMap}) is executed\nAnd {UpdateReport} is applied to {StoryMap}\nThen {StoryMap} reflects all acceptance criteria changes from diagram"
                            }
                          ],
                          "acceptance_criteria": [
                            {
                              "name": "When AC changes are applied from report then story graph reflects additions and removals",
                              "text": "When AC changes are applied from report then story graph reflects additions and removals",
                              "sequential_order": 1.0
                            },
                            {
                              "name": "When AC is moved between stories in diagram then it is transferred preserving all fields",
                              "text": "When AC is moved between stories in diagram then it is transferred preserving all fields",
                              "sequential_order": 2.0
                            },
                            {
                              "name": "When story is split with AC distributed then no acceptance criteria is lost",
                              "text": "When story is split with AC distributed then no acceptance criteria is lost",
                              "sequential_order": 3.0
                            },
                            {
                              "name": "When matched AC exists between diagram and story graph then original text and scenarios are preserved",
                              "text": "When matched AC exists between diagram and story graph then original text and scenarios are preserved",
                              "sequential_order": 4.0
                            }
                          ],
                          "behavior": null
                        }
                      ]
                    }
                  ]
                },
                {
                  "name": "Synchronize Increments",
                  "sequential_order": 3.0,
                  "behavior": null,
                  "domain_concepts": [],
                  "test_file": "invoke_bot/perform_action/synchronize_graph_with_rendered_diagram/test_synchronize_increments.py",
                  "sub_epics": [],
                  "story_groups": [
                    {
                      "name": "",
                      "sequential_order": 0.0,
                      "type": "and",
                      "connector": null,
                      "behavior": null,
                      "stories": [
                        {
                          "name": "Render increment lanes",
                          "sequential_order": 1.0,
                          "connector": "or",
                          "story_type": "user",
                          "users": [
                            "Bot Behavior"
                          ],
                          "test_class": "TestRenderIncrementLanes",
                          "scenarios": [
                            {
                              "name": "Render increment lanes with default layout positions lanes below outline by priority",
                              "sequential_order": 1.0,
                              "type": "happy_path",
                              "background": [],
                              "test_method": "test_render_increment_lanes_with_default_layout_positions_lanes_below_outline_by_priority",
                              "steps": "Given no {LayoutData} exists for this diagram\nWhen {DrawIOStoryMap} renders increments from {StoryMap}\nThen {DrawIOStory} cells are positioned within {Increment} lanes\nAnd {DrawIOStoryMap.output} is valid DrawIO XML"
                            },
                            {
                              "name": "Re-render with saved layout data preserves epic and sub-epic positions and recomputes lane positions",
                              "sequential_order": 2.0,
                              "type": "happy_path",
                              "background": [],
                              "test_method": "test_rerender_with_saved_layout_data_preserves_epic_and_subepic_positions_and_recomputes_lane_positions",
                              "steps": "Given {LayoutData} exists with saved positions from previous render\nWhen {DrawIOStoryMap} renders increments from {StoryMap}\nThen {DrawIOStoryMap} applies {LayoutData} saved positions for {DrawIOStory} cells",
                              "examples": [
                                {
                                  "name": "LayoutData (saved positions)",
                                  "columns": [
                                    "entity_type",
                                    "name",
                                    "saved_x",
                                    "saved_y"
                                  ],
                                  "rows": [
                                    [
                                      "DrawIOEpic",
                                      "Fleet Management",
                                      "100",
                                      "50"
                                    ],
                                    [
                                      "DrawIOStory",
                                      "View location",
                                      "200",
                                      "150"
                                    ]
                                  ]
                                }
                              ]
                            },
                            {
                              "name": "Render completes and writes DrawIO file with correct summary for increment lanes",
                              "sequential_order": 3.0,
                              "type": "happy_path",
                              "background": [],
                              "test_method": "test_render_completes_and_writes_drawio_file_with_correct_summary_for_increment_lanes",
                              "steps": "Given no {LayoutData} exists for this diagram\nWhen {DrawIOStoryMap} renders increments from {StoryMap}\nThen {DrawIOStoryMap} is written to {DrawIOStoryMap.output_file}\nAnd {DrawIOStoryMap.output} is valid DrawIO XML\nAnd {DrawIOStoryMap.summary} reports correct counts"
                            },
                            {
                              "name": "All increment lane cells have required styles for extractor detection",
                              "sequential_order": 4.0,
                              "type": "happy_path",
                              "background": [],
                              "test_method": "test_all_increment_lane_cells_have_required_styles_for_extractor_detection",
                              "steps": "Given no {LayoutData} exists for this diagram\nWhen {DrawIOStoryMap} renders increments from {StoryMap}\nThen all increment lane cells have whiteSpace wrap and html enabled and explicit fontSize"
                            },
                            {
                              "name": "Render with no increments defined produces outline-only diagram",
                              "sequential_order": 5.0,
                              "type": "edge_case",
                              "background": [],
                              "test_method": "test_render_with_no_increments_defined_produces_outlineonly_diagram",
                              "steps": "Given {StoryMap} has no {Increment} defined\nWhen {DrawIOStoryMap} renders increments from {StoryMap}\nThen {DrawIOStoryMap} renders without increment lane elements"
                            },
                            {
                              "name": "Increment lanes ordered by priority with Y positions from outline bottom",
                              "sequential_order": 6.0,
                              "type": "happy_path",
                              "background": [],
                              "test_method": "test_increment_lanes_ordered_by_priority_with_y_positions_from_outline_bottom",
                              "steps": "Given {StoryMap} has {Increment} with {Increment.priority} values\nWhen {DrawIOStoryMap} renders increments from {StoryMap}\nThen lane order equals {Increment.priority} order\nAnd lane Y positions derived from outline bottom and lane height",
                              "examples": [
                                {
                                  "name": "Increment (with priority values)",
                                  "columns": [
                                    "name",
                                    "priority"
                                  ],
                                  "rows": [
                                    [
                                      "MVP",
                                      "1"
                                    ],
                                    [
                                      "Phase 2",
                                      "2"
                                    ],
                                    [
                                      "Phase 3",
                                      "3"
                                    ]
                                  ]
                                }
                              ]
                            },
                            {
                              "name": "Actor labels rendered above stories within each increment lane deduplicated per lane",
                              "sequential_order": 7.0,
                              "type": "happy_path",
                              "background": [],
                              "test_method": "test_actor_labels_rendered_above_stories_within_each_increment_lane_deduplicated_per_lane",
                              "steps": "Given {StoryMap} has {Increment} with {Story} that have {StoryUser} assigned\nWhen {DrawIOStoryMap} renders increments from {StoryMap}\nThen actor labels appear above {DrawIOStory} within each increment lane\nAnd actor labels are deduplicated per lane\nAnd each lane has its own deduplication scope",
                              "examples": [
                                {
                                  "name": "StoryUser (assigns user to Story)",
                                  "columns": [
                                    "story_name",
                                    "user_name"
                                  ],
                                  "rows": [
                                    [
                                      "View location",
                                      "Fleet Manager"
                                    ],
                                    [
                                      "Assign driver",
                                      "Fleet Manager"
                                    ],
                                    [
                                      "Assign driver",
                                      "Dispatcher"
                                    ],
                                    [
                                      "Schedule service",
                                      "System"
                                    ]
                                  ]
                                }
                              ]
                            }
                          ],
                          "acceptance_criteria": [
                            {
                              "name": "When increment lanes are rendered then stories are positioned within lanes ordered by priority",
                              "text": "When increment lanes are rendered then stories are positioned within lanes ordered by priority",
                              "sequential_order": 1.0
                            },
                            {
                              "name": "When layout data exists then positions are preserved on re-render",
                              "text": "When layout data exists then positions are preserved on re-render",
                              "sequential_order": 2.0
                            },
                            {
                              "name": "When no increments defined then outline-only diagram is rendered",
                              "text": "When no increments defined then outline-only diagram is rendered",
                              "sequential_order": 3.0
                            },
                            {
                              "name": "When stories have users then actor labels are deduplicated per lane",
                              "text": "When stories have users then actor labels are deduplicated per lane",
                              "sequential_order": 4.0
                            }
                          ],
                          "behavior": null
                        },
                        {
                          "name": "Report increment changes",
                          "sequential_order": 2.0,
                          "connector": "or",
                          "story_type": "user",
                          "users": [
                            "Bot Behavior"
                          ],
                          "test_class": "TestReportIncrementChanges",
                          "scenarios": [
                            {
                              "name": "No changes reported when diagram matches original for increments",
                              "sequential_order": 1.0,
                              "type": "happy_path",
                              "background": [],
                              "test_method": "test_no_changes_reported_when_diagram_matches_original_for_increments",
                              "steps": "Given {DrawIOStoryMap} has same {Increment} structure as {StoryMap}\nWhen {DrawIOStoryMap}.generateUpdateReport({StoryMap}) is executed\nThen {UpdateReport} reports zero increment changes"
                            },
                            {
                              "name": "Increment lane added in diagram detected as new in report",
                              "sequential_order": 2.0,
                              "type": "happy_path",
                              "background": [],
                              "test_method": "test_increment_lane_added_in_diagram_detected_as_new_in_report",
                              "steps": "Given {DrawIOStoryMap} has a new {Increment} lane added by user\nAnd original {StoryMap} does not have this {Increment}\nWhen {DrawIOStoryMap}.generateUpdateReport({StoryMap}) is executed\nThen {UpdateReport} lists the {Increment} as new",
                              "examples": [
                                {
                                  "name": "Increment (new in diagram)",
                                  "columns": [
                                    "name",
                                    "priority"
                                  ],
                                  "rows": [
                                    [
                                      "Launch",
                                      "1"
                                    ],
                                    [
                                      "Phase 2",
                                      "2"
                                    ],
                                    [
                                      "Phase 3",
                                      "3"
                                    ]
                                  ]
                                }
                              ]
                            },
                            {
                              "name": "Story moved between increment lanes detected as move in report",
                              "sequential_order": 3.0,
                              "type": "happy_path",
                              "background": [],
                              "test_method": "test_story_moved_between_increment_lanes_detected_as_move_in_report",
                              "steps": "Given {IncrementStory} has been moved from one {Increment} to another in {DrawIOStoryMap}\nWhen {DrawIOStoryMap}.generateUpdateReport({StoryMap}) is executed\nThen {UpdateReport} detects the {IncrementChange} as moved not new plus removed",
                              "examples": [
                                {
                                  "name": "IncrementChange (story moved between increments)",
                                  "columns": [
                                    "increment_name",
                                    "story_name",
                                    "change_type"
                                  ],
                                  "rows": [
                                    [
                                      "Phase 2",
                                      "Update menu items",
                                      "added"
                                    ],
                                    [
                                      "Launch",
                                      "Update menu items",
                                      "removed"
                                    ]
                                  ]
                                }
                              ]
                            },
                            {
                              "name": "Increment lane renamed in diagram detected as rename in report",
                              "sequential_order": 4.0,
                              "type": "happy_path",
                              "background": [],
                              "test_method": "test_increment_lane_renamed_in_diagram_detected_as_rename_in_report",
                              "steps": "Given {Increment} lane has been renamed in {DrawIOStoryMap}\nAnd original {StoryMap} has the original name\nWhen {DrawIOStoryMap}.generateUpdateReport({StoryMap}) is executed\nThen {UpdateReport} pairs the renamed {Increment} as a rename match",
                              "examples": [
                                {
                                  "name": "Increment (renamed in diagram)",
                                  "columns": [
                                    "original_name",
                                    "new_name"
                                  ],
                                  "rows": [
                                    [
                                      "Phase 2",
                                      "Phase Two"
                                    ]
                                  ]
                                }
                              ]
                            },
                            {
                              "name": "Stories assigned to increment lanes by Y position",
                              "sequential_order": 5.0,
                              "type": "happy_path",
                              "background": [],
                              "test_method": "test_stories_assigned_to_increment_lanes_by_y_position",
                              "steps": "Given {DrawIOStoryMap} has {DrawIOStory} cells positioned below {Increment} lane elements\nWhen {DrawIOStoryMap} extracts from diagram\nThen each {DrawIOStory} is assigned to its {Increment} by vertical position"
                            },
                            {
                              "name": "Extract assigns stories to increment lanes by Y position with priority from order",
                              "sequential_order": 6.0,
                              "type": "happy_path",
                              "background": [],
                              "test_method": "test_extract_assigns_stories_to_increment_lanes_by_y_position_with_priority_from_order",
                              "steps": "Given {DrawIOStoryMap} increments file contains {Increment} lane cells and {DrawIOStory} cells\nWhen {DrawIOStoryMap} extracts increments from diagram\nThen {DrawIOStoryMap} identifies {Increment} lanes from left side of diagram by style sorted top to bottom\nAnd each {DrawIOStory} assigned to nearest lane within 100px by Y position\nAnd each lane gets position-based {Increment.priority} and name from cell label\nAnd extracted JSON written to file"
                            },
                            {
                              "name": "Report roundtrips through JSON for increment changes",
                              "sequential_order": 7.0,
                              "type": "happy_path",
                              "background": [],
                              "test_method": "test_report_roundtrips_through_json_for_increment_changes",
                              "steps": "Given {UpdateReport} has increment changes\nWhen {UpdateReport}.to_dict() serializes to JSON\nAnd {UpdateReport}.from_dict() restores from JSON\nThen all increment change fields survive the roundtrip",
                              "examples": [
                                {
                                  "name": "UpdateReport (renamed increments)",
                                  "columns": [
                                    "original_name",
                                    "new_name"
                                  ],
                                  "rows": [
                                    [
                                      "Phase 2",
                                      "Phase Two"
                                    ]
                                  ]
                                },
                                {
                                  "name": "UpdateReport (new increments)",
                                  "columns": [
                                    "name",
                                    "priority"
                                  ],
                                  "rows": [
                                    [
                                      "Phase 3",
                                      "3"
                                    ]
                                  ]
                                },
                                {
                                  "name": "UpdateReport (removed increments)",
                                  "columns": [
                                    "name",
                                    "priority"
                                  ],
                                  "rows": [
                                    [
                                      "Beta",
                                      "4"
                                    ]
                                  ]
                                },
                                {
                                  "name": "UpdateReport (moved stories)",
                                  "columns": [
                                    "story_name",
                                    "from_increment",
                                    "to_increment"
                                  ],
                                  "rows": [
                                    [
                                      "Update menu items",
                                      "Launch",
                                      "Phase 2"
                                    ]
                                  ]
                                }
                              ]
                            },
                            {
                              "name": "Report lists exact fuzzy new and removed stories for increments view",
                              "sequential_order": 8.0,
                              "type": "happy_path",
                              "background": [],
                              "test_method": "test_report_lists_exact_fuzzy_new_and_removed_stories_for_increments_view",
                              "steps": "Given {DrawIOStoryMap} has been extracted from diagram\nAnd original {StoryMap} exists with known {Increment} names\nWhen {DrawIOStoryMap}.generateUpdateReport({StoryMap}) is executed\nThen {UpdateReport} lists exact matches and fuzzy matches and new and removed increments",
                              "examples": [
                                {
                                  "name": "Increment (in diagram - includes exact, fuzzy, and new)",
                                  "columns": [
                                    "name",
                                    "match_type"
                                  ],
                                  "rows": [
                                    [
                                      "Launch",
                                      "exact"
                                    ],
                                    [
                                      "Phase Two",
                                      "fuzzy"
                                    ],
                                    [
                                      "Phase 3",
                                      "new"
                                    ]
                                  ]
                                },
                                {
                                  "name": "Increment (removed from diagram)",
                                  "columns": [
                                    "name"
                                  ],
                                  "rows": [
                                    [
                                      "Beta"
                                    ]
                                  ]
                                }
                              ]
                            },
                            {
                              "name": "Report includes removed increments and new order",
                              "sequential_order": 9.0,
                              "type": "edge_case",
                              "background": [],
                              "test_method": "test_report_includes_removed_increments_and_new_order",
                              "steps": "Given {DrawIOStoryMap} has fewer {Increment} than original {StoryMap}\nWhen {DrawIOStoryMap}.generateUpdateReport({StoryMap}) is executed\nThen {UpdateReport} includes removed {Increment} and updated order",
                              "examples": [
                                {
                                  "name": "Increment (removed from diagram)",
                                  "columns": [
                                    "name",
                                    "priority"
                                  ],
                                  "rows": [
                                    [
                                      "Phase 2",
                                      "2"
                                    ]
                                  ]
                                }
                              ]
                            },
                            {
                              "name": "User-created lane detected by geometry in diagram",
                              "sequential_order": 10.0,
                              "type": "edge_case",
                              "background": [],
                              "test_method": "test_usercreated_lane_detected_by_geometry_in_diagram",
                              "steps": "Given {DrawIOStoryMap} has a user-created lane with simple {DrawIOElement.cell_id} and large rectangle geometry\nWhen {DrawIOStoryMap} extracts increments from diagram\nThen the user-created lane is detected as a new {Increment} by its geometry",
                              "examples": [
                                {
                                  "name": "DrawIOElement (user-created lane geometry)",
                                  "columns": [
                                    "cell_id",
                                    "geometry_width",
                                    "geometry_height"
                                  ],
                                  "rows": [
                                    [
                                      "lane-user-1",
                                      "800",
                                      "200"
                                    ]
                                  ]
                                }
                              ]
                            },
                            {
                              "name": "Orphan story dragged into lane reported as added to increment",
                              "sequential_order": 11.0,
                              "type": "happy_path",
                              "background": [],
                              "test_method": "test_orphan_story_dragged_into_lane_reported_as_added_to_increment",
                              "steps": "Given {DrawIOStory} is unassigned in {DrawIOStoryMap} increments diagram\nAnd user drags {DrawIOStory} into an {Increment} lane\nWhen {DrawIOStoryMap}.generateUpdateReport({StoryMap}) is executed\nThen {UpdateReport} reports {DrawIOStory} as added to that {Increment}",
                              "examples": [
                                {
                                  "name": "IncrementChange (story added to increment)",
                                  "columns": [
                                    "increment_name",
                                    "story_name",
                                    "change_type"
                                  ],
                                  "rows": [
                                    [
                                      "Launch",
                                      "Check delivery status",
                                      "added"
                                    ]
                                  ]
                                }
                              ]
                            },
                            {
                              "name": "Story in multiple lanes produces no false duplicate reports",
                              "sequential_order": 12.0,
                              "type": "edge_case",
                              "background": [],
                              "test_method": "test_story_in_multiple_lanes_produces_no_false_duplicate_reports",
                              "steps": "Given {DrawIOStory} appears in multiple {Increment} lanes in {DrawIOStoryMap}\nWhen {DrawIOStoryMap}.generateUpdateReport({StoryMap}) is executed\nThen {UpdateReport} does not produce false duplicate or new entries",
                              "examples": [
                                {
                                  "name": "IncrementStory (story in multiple increments)",
                                  "columns": [
                                    "increment_name",
                                    "story_name"
                                  ],
                                  "rows": [
                                    [
                                      "Launch",
                                      "Create order"
                                    ],
                                    [
                                      "Phase 2",
                                      "Create order"
                                    ]
                                  ]
                                }
                              ]
                            },
                            {
                              "name": "Known limitation inserting between existing lanes uses position-based matching",
                              "sequential_order": 13.0,
                              "type": "edge_case",
                              "background": [],
                              "test_method": "test_known_limitation_inserting_between_existing_lanes_uses_positionbased_matching",
                              "steps": "Given original {StoryMap} has {Increment} lanes [A, B, C]\nAnd a new lane has been inserted between A and B in {DrawIOStoryMap}\nWhen {DrawIOStoryMap} extracts increments from diagram\nThen position-based matching maps extracted lane 1 to original A and lane 2 to original B\nAnd the inserted lane may be misinterpreted as a rename of B without stable IDs",
                              "examples": [
                                {
                                  "name": "Increment (original lanes)",
                                  "columns": [
                                    "name",
                                    "priority"
                                  ],
                                  "rows": [
                                    [
                                      "A",
                                      "1"
                                    ],
                                    [
                                      "B",
                                      "2"
                                    ],
                                    [
                                      "C",
                                      "3"
                                    ]
                                  ]
                                }
                              ]
                            },
                            {
                              "name": "Story not within threshold of any lane remains unassigned",
                              "sequential_order": 14.0,
                              "type": "edge_case",
                              "background": [],
                              "test_method": "test_story_not_within_threshold_of_any_lane_remains_unassigned",
                              "steps": "Given {DrawIOStoryMap} has {DrawIOStory} positioned more than 100px from any {Increment} lane\nWhen {DrawIOStoryMap} extracts increments from diagram\nThen that {DrawIOStory} is not assigned to any {Increment} lane"
                            }
                          ],
                          "acceptance_criteria": [
                            {
                              "name": "When increment lane is added in diagram then report lists it as new",
                              "text": "When increment lane is added in diagram then report lists it as new",
                              "sequential_order": 1.0
                            },
                            {
                              "name": "When story moves between increment lanes then report detects it as a move not new plus removed",
                              "text": "When story moves between increment lanes then report detects it as a move not new plus removed",
                              "sequential_order": 2.0
                            },
                            {
                              "name": "When increment lane is renamed in diagram then report pairs it as a rename match",
                              "text": "When increment lane is renamed in diagram then report pairs it as a rename match",
                              "sequential_order": 3.0
                            },
                            {
                              "name": "When user-created lane has simple cell ID and rectangle geometry then it is detected as a new increment",
                              "text": "When user-created lane has simple cell ID and rectangle geometry then it is detected as a new increment",
                              "sequential_order": 4.0
                            }
                          ],
                          "behavior": null
                        },
                        {
                          "name": "Update increments from diagram",
                          "sequential_order": 3.0,
                          "connector": "or",
                          "story_type": "user",
                          "users": [
                            "Bot Behavior"
                          ],
                          "test_class": "TestUpdateIncrementsFromDiagram",
                          "scenarios": [
                            {
                              "name": "Apply increment move transfers story between increments preserving data",
                              "sequential_order": 1.0,
                              "type": "happy_path",
                              "background": [],
                              "test_method": "test_apply_increment_move_transfers_story_between_increments_preserving_data",
                              "steps": "Given {UpdateReport} contains an {IncrementChange} move from one {Increment} to another\nWhen move is applied to {StoryMap}\nThen {IncrementStory} is removed from source {Increment} and added to target {Increment}\nAnd all increment fields are preserved",
                              "examples": [
                                {
                                  "name": "IncrementChange (story moved between increments)",
                                  "columns": [
                                    "increment_name",
                                    "story_name",
                                    "change_type"
                                  ],
                                  "rows": [
                                    [
                                      "MVP",
                                      "Publish event",
                                      "removed"
                                    ],
                                    [
                                      "Phase 2",
                                      "Publish event",
                                      "added"
                                    ]
                                  ]
                                }
                              ]
                            },
                            {
                              "name": "Removed increment deletes entire increment from story graph",
                              "sequential_order": 2.0,
                              "type": "edge_case",
                              "background": [],
                              "test_method": "test_removed_increment_deletes_entire_increment_from_story_graph",
                              "steps": "Given {UpdateReport} contains a removed {Increment}\nWhen removal is applied to {StoryMap}\nThen the entire {Increment} and its {IncrementStory} assignments are deleted from {StoryMap}",
                              "examples": [
                                {
                                  "name": "Increment (removed)",
                                  "columns": [
                                    "name",
                                    "priority"
                                  ],
                                  "rows": [
                                    [
                                      "Phase 2",
                                      "2"
                                    ]
                                  ]
                                },
                                {
                                  "name": "IncrementStory (deleted with increment)",
                                  "columns": [
                                    "increment_name",
                                    "story_name"
                                  ],
                                  "rows": [
                                    [
                                      "Phase 2",
                                      "Register attendee"
                                    ],
                                    [
                                      "Phase 2",
                                      "Reserve venue"
                                    ]
                                  ]
                                }
                              ]
                            },
                            {
                              "name": "Renamed increment lane in diagram updates name in story graph",
                              "sequential_order": 4.0,
                              "type": "happy_path",
                              "background": [],
                              "test_method": "test_renamed_increment_lane_in_diagram_updates_name_in_story_graph",
                              "steps": "Given {Increment} lane has been renamed in {DrawIOStoryMap}\nWhen {UpdateReport} is applied to {StoryMap}\nThen {StoryMap} updates the {Increment.name} to match diagram",
                              "examples": [
                                {
                                  "name": "Increment (renamed in diagram)",
                                  "columns": [
                                    "original_name",
                                    "new_name"
                                  ],
                                  "rows": [
                                    [
                                      "Phase 2",
                                      "Phase Two"
                                    ]
                                  ]
                                }
                              ]
                            },
                            {
                              "name": "New increment lane in diagram creates it in story graph",
                              "sequential_order": 5.0,
                              "type": "happy_path",
                              "background": [],
                              "test_method": "test_new_increment_lane_in_diagram_creates_it_in_story_graph",
                              "steps": "Given {DrawIOStoryMap} has a new {Increment} not in original {StoryMap}\nWhen {UpdateReport} is applied to {StoryMap}\nThen {StoryMap} creates the new {Increment}",
                              "examples": [
                                {
                                  "name": "Increment (new in diagram)",
                                  "columns": [
                                    "name",
                                    "priority"
                                  ],
                                  "rows": [
                                    [
                                      "MVP",
                                      "1"
                                    ],
                                    [
                                      "Phase 2",
                                      "2"
                                    ],
                                    [
                                      "Phase 3",
                                      "3"
                                    ]
                                  ]
                                }
                              ]
                            },
                            {
                              "name": "Update preserves original acceptance criteria for matched increment stories",
                              "sequential_order": 6.0,
                              "type": "happy_path",
                              "background": [],
                              "test_method": "test_update_preserves_original_acceptance_criteria_for_matched_increment_stories",
                              "steps": "Given {UpdateReport} has matched {Increment} between diagram and {StoryMap}\nWhen {UpdateReport} is applied to {StoryMap}\nThen original {AcceptanceCriteria} and scenarios are preserved for matched {IncrementStory}",
                              "examples": [
                                {
                                  "name": "AcceptanceCriteria (preserved for matched IncrementStory)",
                                  "columns": [
                                    "text",
                                    "parent_story"
                                  ],
                                  "rows": [
                                    [
                                      "When event is published then it appears in catalog",
                                      "Publish event"
                                    ]
                                  ]
                                }
                              ]
                            },
                            {
                              "name": "End-to-end render then report then update for increment lanes",
                              "sequential_order": 7.0,
                              "type": "happy_path",
                              "background": [],
                              "test_method": "test_endtoend_render_then_report_then_update_for_increment_lanes",
                              "steps": "Given {StoryMap} has {Increment}\nWhen {DrawIOStoryMap} renders from {StoryMap}\nAnd user modifies increments in diagram\nAnd {DrawIOStoryMap}.generateUpdateReport({StoryMap}) is executed\nAnd {UpdateReport} is applied to {StoryMap}\nThen {StoryMap} reflects all increment changes from diagram",
                              "examples": [
                                {
                                  "name": "Increment (added by user)",
                                  "columns": [
                                    "name",
                                    "priority"
                                  ],
                                  "rows": [
                                    [
                                      "Phase 3",
                                      "3"
                                    ]
                                  ]
                                }
                              ]
                            },
                            {
                              "name": "Removing non-existent increment returns false",
                              "sequential_order": 8.0,
                              "type": "error_case",
                              "background": [],
                              "test_method": "test_removing_nonexistent_increment_returns_false",
                              "steps": "Given {UpdateReport} references an {Increment} that does not exist in {StoryMap}\nWhen removal is applied to {StoryMap}\nThen removal returns false and {StoryMap} is unchanged",
                              "examples": [
                                {
                                  "name": "Increment (referenced but not in graph)",
                                  "columns": [
                                    "name"
                                  ],
                                  "rows": [
                                    [
                                      "Phase 4"
                                    ]
                                  ]
                                }
                              ]
                            },
                            {
                              "name": "Update increment order from diagram updates priorities in story graph",
                              "sequential_order": 9.0,
                              "type": "happy_path",
                              "background": [],
                              "test_method": "test_update_increment_order_from_diagram_updates_priorities_in_story_graph",
                              "steps": "Given {DrawIOStoryMap} has {Increment} lanes in a new order different from {StoryMap}\nWhen {UpdateReport} is applied to {StoryMap}\nThen {Increment.priority} in {StoryMap} are updated to match diagram order",
                              "examples": [
                                {
                                  "name": "Increment (new order in diagram)",
                                  "columns": [
                                    "name",
                                    "priority"
                                  ],
                                  "rows": [
                                    [
                                      "Phase 2",
                                      "1"
                                    ],
                                    [
                                      "MVP",
                                      "2"
                                    ]
                                  ]
                                }
                              ]
                            },
                            {
                              "name": "No changes when increment priorities already match diagram order",
                              "sequential_order": 10.0,
                              "type": "happy_path",
                              "background": [],
                              "test_method": "test_no_changes_when_increment_priorities_already_match_diagram_order",
                              "steps": "Given {Increment.priority} in {StoryMap} already match {DrawIOStoryMap} diagram order\nWhen {UpdateReport} is applied to {StoryMap}\nThen no {Increment.priority} changes are made"
                            },
                            {
                              "name": "Extra lanes appended and fewer lanes leave original increments unchanged",
                              "sequential_order": 11.0,
                              "type": "edge_case",
                              "background": [],
                              "test_method": "test_extra_lanes_appended_and_fewer_lanes_leave_original_increments_unchanged",
                              "steps": "Given original {StoryMap} has fewer {Increment} lanes than {DrawIOStoryMap}\nWhen {UpdateReport} is applied to {StoryMap}\nThen extra {Increment} lanes are appended and original {Increment} unchanged",
                              "examples": [
                                {
                                  "name": "Increment (appended)",
                                  "columns": [
                                    "name",
                                    "priority"
                                  ],
                                  "rows": [
                                    [
                                      "Phase 3",
                                      "3"
                                    ]
                                  ]
                                }
                              ]
                            }
                          ],
                          "acceptance_criteria": [
                            {
                              "name": "When increment move is applied from report then story transfers between increments preserving data",
                              "text": "When increment move is applied from report then story transfers between increments preserving data",
                              "sequential_order": 1.0
                            },
                            {
                              "name": "When increment is removed from diagram then entire increment and assignments are deleted",
                              "text": "When increment is removed from diagram then entire increment and assignments are deleted",
                              "sequential_order": 2.0
                            },
                            {
                              "name": "When increment is renamed in diagram then story graph updates name",
                              "text": "When increment is renamed in diagram then story graph updates name",
                              "sequential_order": 3.0
                            },
                            {
                              "name": "When increment order changes in diagram then priorities are updated to match",
                              "text": "When increment order changes in diagram then priorities are updated to match",
                              "sequential_order": 4.0
                            }
                          ],
                          "behavior": null
                        }
                      ]
                    }
                  ]
                }
              ],
              "story_groups": []
            },
            {
              "name": "Validate With Rules",
              "sequential_order": 7.0,
              "behavior": null,
              "domain_concepts": [
                {
                  "name": "ValidateRulesAction",
                  "responsibilities": [
                    {
                      "name": "Inject common bot rules",
                      "collaborators": [
                        "Base Bot",
                        "Rules",
                        "Common Rules"
                      ]
                    },
                    {
                      "name": "Inject behavior specific rules",
                      "collaborators": [
                        "Behavior",
                        "Rules",
                        "Behavior Rules"
                      ]
                    },
                    {
                      "name": "Load + inject content for validation",
                      "collaborators": [
                        "Behavior",
                        "Content",
                        "Knowledge Graph",
                        "Rendered Outputs"
                      ]
                    }
                  ],
                  "module": "actions.validate",
                  "_source_path": "Invoke Bot.Invoke Bot Directly"
                },
                {
                  "name": "TTYValidateRules",
                  "responsibilities": [
                    {
                      "name": "Serialize validate action to TTY",
                      "collaborators": [
                        "ValidateRulesAction",
                        "TTY String"
                      ]
                    },
                    {
                      "name": "Format validation results",
                      "collaborators": [
                        "Violations",
                        "TTY String"
                      ]
                    },
                    {
                      "name": "Wraps domain action",
                      "collaborators": [
                        "ValidateRulesAction"
                      ]
                    }
                  ],
                  "module": "actions.validate",
                  "inherits_from": "TTYProgressAdapter",
                  "_source_path": "Invoke Bot.Invoke Bot Directly"
                },
                {
                  "name": "JSONValidateRules",
                  "responsibilities": [
                    {
                      "name": "Serialize validate action to JSON",
                      "collaborators": [
                        "ValidateRulesAction",
                        "JSON String"
                      ]
                    },
                    {
                      "name": "Include violations and fixes",
                      "collaborators": [
                        "Violations",
                        "Suggestions",
                        "JSON"
                      ]
                    },
                    {
                      "name": "Wraps domain action",
                      "collaborators": [
                        "ValidateRulesAction"
                      ]
                    }
                  ],
                  "module": "actions.validate",
                  "inherits_from": "JSONProgressAdapter",
                  "_source_path": "Invoke Bot.Invoke Bot Directly"
                },
                {
                  "name": "MarkdownValidateRules",
                  "responsibilities": [
                    {
                      "name": "Serialize validate action to Markdown",
                      "collaborators": [
                        "ValidateRulesAction",
                        "Markdown String"
                      ]
                    },
                    {
                      "name": "Format validation report",
                      "collaborators": [
                        "Violations",
                        "Suggestions",
                        "Markdown"
                      ]
                    },
                    {
                      "name": "Wraps domain action",
                      "collaborators": [
                        "ValidateRulesAction"
                      ]
                    }
                  ],
                  "module": "actions.validate",
                  "inherits_from": "MarkdownProgressAdapter",
                  "_source_path": "Invoke Bot.Invoke Bot Directly"
                },
                {
                  "name": "ValidateInstructionsSection",
                  "responsibilities": [
                    {
                      "name": "Wraps validate subsection",
                      "collaborators": [
                        "ValidateDataSubSection"
                      ]
                    }
                  ],
                  "module": "actions.validate",
                  "inherits_from": "InstructionsSection",
                  "_source_path": "Invoke Bot.Invoke Bot Directly"
                },
                {
                  "name": "ValidateDataSubSection",
                  "responsibilities": [
                    {
                      "name": "Wraps validate JSON",
                      "collaborators": [
                        "Validate JSON"
                      ]
                    },
                    {
                      "name": "Displays rules",
                      "collaborators": [
                        "List",
                        "Rule JSON"
                      ]
                    },
                    {
                      "name": "Displays rule descriptions",
                      "collaborators": [
                        "String",
                        "Rule JSON"
                      ]
                    },
                    {
                      "name": "Displays rule examples",
                      "collaborators": [
                        "List",
                        "Rule JSON"
                      ]
                    },
                    {
                      "name": "Opens rule file",
                      "collaborators": [
                        "CLI",
                        "Path JSON"
                      ]
                    }
                  ],
                  "module": "actions.validate",
                  "inherits_from": "SubSectionView",
                  "_source_path": "Invoke Bot.Invoke Bot Directly"
                }
              ],
              "test_file": "invoke_bot/perform_action/test_validate_with_rules.py",
              "sub_epics": [],
              "story_groups": [
                {
                  "name": "",
                  "sequential_order": 0.0,
                  "type": "and",
                  "connector": null,
                  "behavior": null,
                  "stories": [
                    {
                      "name": "Validate Rules",
                      "sequential_order": 0.0,
                      "connector": "or",
                      "story_type": "user",
                      "users": [
                        "Bot Behavior"
                      ],
                      "test_class": "TestValidateRules",
                      "scenarios": [
                        {
                          "name": "Story graph validation includes rule content in instructions",
                          "sequential_order": 1.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_story_graph_rules_formatted_in_instructions",
                          "steps": "Given Production story_bot with shape behavior (validates story graph)\nWhen Validate action executes\nThen Instructions contain rule descriptions, DO/DON'T sections, and priorities from rule files\nThen And Story graph file exists",
                          "test": {
                            "method": "test_story_graph_rules_formatted_in_instructions",
                            "file": "invoke_bot/perform_action/test_validate_with_rules.py",
                            "line": 32
                          }
                        },
                        {
                          "name": "File validation includes rule content in instructions",
                          "sequential_order": 2.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_file_rules_formatted_in_instructions",
                          "steps": "Given Production story_bot with code behavior (validates files)\nWhen Validate action executes\nThen Instructions contain rule descriptions, DO/DON'T sections, and priorities from rule files\nThen And Story graph file exists",
                          "test": {
                            "method": "test_file_rules_formatted_in_instructions",
                            "file": "invoke_bot/perform_action/test_validate_with_rules.py",
                            "line": 60
                          }
                        },
                        {
                          "name": "Story graph scanners receive scoped story_graph data",
                          "sequential_order": 3.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_story_graph_scanner_receives_story_graph_data",
                          "steps": "Given Story graph with multiple epics (\"Build Knowledge\", \"Epic B\")\nWhen Validate action executes with scope\nThen Scanner receives filtered story graph (only \"Build Knowledge\" epic)\nThen And Scope filtered to \"Build Knowledge\" epic\nThen And Production story_bot with shape behavior\nThen And Scanner executes successfully\nThen And Instructions contain \"Build Knowledge\" in scope description",
                          "test": {
                            "method": "test_story_graph_scanner_receives_story_graph_data",
                            "file": "invoke_bot/perform_action/test_validate_with_rules.py",
                            "line": 88
                          }
                        },
                        {
                          "name": "File scanners receive scoped file paths",
                          "sequential_order": 4.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_file_scanner_receives_file_data",
                          "steps": "Given Multiple Python files (test_foo.py, test_bar.py, main.py)\nWhen Validate action executes with scope\nThen Scanner receives filtered files (only test_foo.py, test_bar.py)\nThen And Scope filtered to test files only (**/test*.py)\nThen And Production story_bot with code behavior\nThen And Scanner executes successfully\nThen And Instructions reference test file scope",
                          "test": {
                            "method": "test_file_scanner_receives_file_data",
                            "file": "invoke_bot/perform_action/test_validate_with_rules.py",
                            "line": 137
                          }
                        }
                      ],
                      "acceptance_criteria": [],
                      "behavior": null
                    },
                    {
                      "name": "Validate Rules Using CLI",
                      "sequential_order": 1.0,
                      "connector": null,
                      "story_type": "user",
                      "users": [
                        "User"
                      ],
                      "test_class": "TestValidateRulesUsingCLI",
                      "scenarios": [
                        {
                          "name": "Validate action shows rules in CLI output",
                          "sequential_order": 1.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_validate_action_shows_rules_in_output",
                          "steps": "GIVEN: CLI is at shape.validate\nAND: Story graph exists\nWHEN: user navigates to shape.validate\nTHEN: CLI output contains rule descriptions and DO/DON'T sections",
                          "test": {
                            "method": "test_validate_action_shows_rules_in_output",
                            "file": "invoke_bot/perform_action/test_validate_with_rules.py",
                            "line": 222
                          }
                        },
                        {
                          "name": "Code validate action shows file rules in CLI output",
                          "sequential_order": 2.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_validate_code_shows_file_rules",
                          "steps": "GIVEN: CLI is at code.validate\nAND: Story graph exists\nWHEN: user navigates to code.validate\nTHEN: CLI output contains file validation rules",
                          "test": {
                            "method": "test_validate_code_shows_file_rules",
                            "file": "invoke_bot/perform_action/test_validate_with_rules.py",
                            "line": 256
                          }
                        }
                      ],
                      "acceptance_criteria": [],
                      "behavior": null
                    },
                    {
                      "name": "Display Validation Results Through CLI",
                      "sequential_order": 2.0,
                      "connector": "and",
                      "story_type": "user",
                      "users": [
                        "User"
                      ],
                      "test_class": "TestDisplayValidationResultsThroughCLI",
                      "scenarios": [
                        {
                          "name": "Display validation violations",
                          "sequential_order": 1.0,
                          "type": "",
                          "background": [],
                          "test_method": "test_display_validation_violations",
                          "steps": "GIVEN: Validation has run\nWHEN: user views validate instructions\nTHEN: CLI displays violation report"
                        }
                      ],
                      "acceptance_criteria": [],
                      "behavior": null
                    },
                    {
                      "name": "Display Validation Scanners Through CLI",
                      "sequential_order": 3.0,
                      "connector": null,
                      "story_type": "user",
                      "users": [
                        "User"
                      ],
                      "test_class": "TestDisplayValidationScannersThroughCLI",
                      "scenarios": [
                        {
                          "name": "Display discovered scanners",
                          "sequential_order": 1.0,
                          "type": "",
                          "background": [],
                          "test_method": "test_display_discovered_scanners",
                          "steps": "GIVEN: Validation scanners exist\nWHEN: user views validate instructions\nTHEN: CLI displays list of available scanners"
                        }
                      ],
                      "acceptance_criteria": [],
                      "behavior": null
                    },
                    {
                      "name": "Display Validate Instructions Panel",
                      "sequential_order": 4.0,
                      "connector": "and",
                      "story_type": "user",
                      "users": [
                        "User"
                      ],
                      "test_class": "TestDisplayValidateInstructions",
                      "scenarios": [
                        {
                          "name": "",
                          "sequential_order": 1.0,
                          "type": "",
                          "background": [],
                          "test_method": null,
                          "steps": "Given Bot is at shape.validate\nWhen Panel displays instructions section\nThen Panel displays validation rules list\nAnd Each rule has clickable file link"
                        },
                        {
                          "name": "",
                          "sequential_order": 2.0,
                          "type": "",
                          "background": [],
                          "test_method": null,
                          "steps": "Given Panel displays validate instructions with rules\nWhen User clicks rule file link\nThen VS Code opens validation rule file in editor"
                        }
                      ],
                      "acceptance_criteria": [
                        {
                          "name": "WHEN Current action is validate\nTHEN System displays rules list",
                          "text": "WHEN Current action is validate\nTHEN System displays rules list",
                          "sequential_order": 1.0
                        },
                        {
                          "name": "WHEN User clicks rule file link\nTHEN System opens rule file in editor",
                          "text": "WHEN User clicks rule file link\nTHEN System opens rule file in editor",
                          "sequential_order": 2.0
                        }
                      ],
                      "behavior": null
                    },
                    {
                      "name": "Get Validate Instructions Through CLI",
                      "sequential_order": 5.0,
                      "connector": "and",
                      "story_type": "user",
                      "users": [
                        "User"
                      ],
                      "test_class": "TestGetValidateInstructionsThroughCLI",
                      "scenarios": [
                        {
                          "name": "Get validate instructions with rules",
                          "sequential_order": 1.0,
                          "type": "",
                          "background": [],
                          "test_method": "test_get_validate_instructions_with_rules",
                          "steps": "GIVEN: CLI is at shape.validate.instructions\nWHEN: user enters 'shape.validate.instructions'\nTHEN: CLI displays validation rules and scanners"
                        }
                      ],
                      "acceptance_criteria": [],
                      "behavior": null
                    },
                    {
                      "name": "Validate In Queue",
                      "sequential_order": 6.0,
                      "connector": null,
                      "story_type": "user",
                      "users": [],
                      "test_class": null,
                      "scenarios": [],
                      "acceptance_criteria": [],
                      "behavior": null
                    }
                  ]
                }
              ]
            },
            {
              "name": "Use Rules In Prompt",
              "sequential_order": 8.0,
              "behavior": null,
              "domain_concepts": [
                {
                  "name": "Rule",
                  "responsibilities": [
                    {
                      "name": "Validate content",
                      "collaborators": [
                        "Knowledge Graph",
                        "Violations"
                      ]
                    },
                    {
                      "name": "Find behavior specific rules from context",
                      "collaborators": [
                        "Behavior"
                      ]
                    },
                    {
                      "name": "Find common bot rules from context",
                      "collaborators": [
                        "Base Bot"
                      ]
                    },
                    {
                      "name": "Load + inject diagnostics results",
                      "collaborators": [
                        "AI Chat",
                        "Violations",
                        "Corrections"
                      ]
                    },
                    {
                      "name": "Suggest corrections",
                      "collaborators": [
                        "Violations",
                        "Suggestions",
                        "Fixes"
                      ]
                    },
                    {
                      "name": "Provide examples - Do",
                      "collaborators": [
                        "Example",
                        "Description"
                      ]
                    },
                    {
                      "name": "Provide examples - Dont",
                      "collaborators": [
                        "Example",
                        "Description"
                      ]
                    },
                    {
                      "name": "Specialized examples",
                      "collaborators": [
                        "Language",
                        "Framework",
                        "Pattern"
                      ]
                    }
                  ],
                  "module": "behaviors",
                  "_source_path": "Invoke Bot.Invoke Bot Directly"
                },
                {
                  "name": "Guardrails",
                  "responsibilities": [
                    {
                      "name": "Provide required context",
                      "collaborators": [
                        "Key Questions",
                        "Evidence"
                      ]
                    },
                    {
                      "name": "Guide Strategy decisions",
                      "collaborators": [
                        "Decision Criteria",
                        "Assumptions"
                      ]
                    },
                    {
                      "name": "Define recommended human activity",
                      "collaborators": [
                        "Human",
                        "Instructions"
                      ]
                    }
                  ],
                  "module": "behaviors",
                  "_source_path": "Invoke Bot.Invoke Bot Directly"
                }
              ],
              "test_file": "invoke_bot/perform_action/test_use_rules_in_prompt.py",
              "sub_epics": [],
              "story_groups": [
                {
                  "name": "",
                  "sequential_order": 0.0,
                  "type": "and",
                  "connector": null,
                  "behavior": null,
                  "stories": [
                    {
                      "name": "Display Rules",
                      "sequential_order": 0.0,
                      "connector": "or",
                      "story_type": "user",
                      "users": [
                        "Bot Behavior"
                      ],
                      "test_class": "TestDisplayRules",
                      "scenarios": [
                        {
                          "name": "Action loads and formats rules digest",
                          "sequential_order": 1.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_action_loads_and_formats_rules_digest",
                          "steps": "Given Production story_bot with tests behavior (has rules)\nWhen Rules action executes\nThen Instructions contain formatted rules digest with descriptions, priorities, DO/DON'T sections",
                          "test": {
                            "method": "test_action_loads_and_formats_rules_digest",
                            "file": "invoke_bot/perform_action/test_use_rules_in_prompt.py",
                            "line": 25
                          }
                        },
                        {
                          "name": "Rules list includes file paths for each rule",
                          "sequential_order": 2.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_rules_list_includes_file_paths",
                          "steps": "Given Production story_bot with tests behavior (has rules)\nWhen Rules action executes\nThen Display includes rule names with their file paths",
                          "test": {
                            "method": "test_rules_list_includes_file_paths",
                            "file": "invoke_bot/perform_action/test_use_rules_in_prompt.py",
                            "line": 48
                          }
                        },
                        {
                          "name": "All behavior rules are included in the digest",
                          "sequential_order": 3.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_all_behavior_rules_included_in_digest",
                          "steps": "Given Production story_bot with tests behavior (has multiple rules)\nWhen Rules action executes\nThen All rules from behavior are included in digest",
                          "test": {
                            "method": "test_all_behavior_rules_included_in_digest",
                            "file": "invoke_bot/perform_action/test_use_rules_in_prompt.py",
                            "line": 71
                          }
                        },
                        {
                          "name": "User message is included in instructions when provided",
                          "sequential_order": 4.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_user_message_included_when_provided",
                          "steps": "Given Production story_bot with tests behavior\nWhen Rules action executes with message\nThen Instructions include user message\nThen And User message requesting specific rule information",
                          "test": {
                            "method": "test_user_message_included_when_provided",
                            "file": "invoke_bot/perform_action/test_use_rules_in_prompt.py",
                            "line": 94
                          }
                        },
                        {
                          "name": "No user message section when message is empty",
                          "sequential_order": 5.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_no_user_message_section_when_empty",
                          "steps": "Given Production story_bot with tests behavior\nWhen Rules action executes without message\nThen Instructions do not include user message section",
                          "test": {
                            "method": "test_no_user_message_section_when_empty",
                            "file": "invoke_bot/perform_action/test_use_rules_in_prompt.py",
                            "line": 122
                          }
                        }
                      ],
                      "acceptance_criteria": [],
                      "behavior": null
                    },
                    {
                      "name": "Display Rules Using CLI",
                      "sequential_order": 1.0,
                      "connector": null,
                      "story_type": "user",
                      "users": [
                        "User"
                      ],
                      "test_class": "TestDisplayRulesUsingCLI",
                      "scenarios": [
                        {
                          "name": "Rules action shows rules digest in CLI output",
                          "sequential_order": 1.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_rules_action_shows_rules_digest",
                          "steps": "GIVEN: CLI is at shape.validate (which shows rules)\nWHEN: user navigates to shape.validate\nTHEN: CLI output contains formatted rules digest",
                          "test": {
                            "method": "test_rules_action_shows_rules_digest",
                            "file": "invoke_bot/perform_action/test_use_rules_in_prompt.py",
                            "line": 168
                          }
                        },
                        {
                          "name": "Validation output includes rules content",
                          "sequential_order": 2.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_rules_output_includes_validation_content",
                          "steps": "GIVEN: CLI is at shape.validate\nWHEN: user navigates to shape.validate\nTHEN: CLI output contains validation rules",
                          "test": {
                            "method": "test_rules_output_includes_validation_content",
                            "file": "invoke_bot/perform_action/test_use_rules_in_prompt.py",
                            "line": 194
                          }
                        },
                        {
                          "name": "User gets rules instructions for behavior",
                          "sequential_order": 3.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_user_gets_rules_instructions_for_behavior",
                          "steps": ""
                        },
                        {
                          "name": "User gets rules with message parameter",
                          "sequential_order": 4.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_user_gets_rules_with_message_parameter",
                          "steps": ""
                        },
                        {
                          "name": "User gets rules without message parameter",
                          "sequential_order": 5.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_user_gets_rules_without_message_parameter",
                          "steps": ""
                        }
                      ],
                      "acceptance_criteria": [
                        {
                          "name": "hello",
                          "text": "hello",
                          "sequential_order": 1.0
                        }
                      ],
                      "behavior": null
                    },
                    {
                      "name": "Submit Behavior Rules Through Panel",
                      "sequential_order": 2.0,
                      "connector": "and",
                      "story_type": "user",
                      "users": [
                        "User"
                      ],
                      "test_class": "TestSubmitBehaviorRulesThroughPanel",
                      "scenarios": [
                        {
                          "name": "",
                          "sequential_order": 1.0,
                          "type": "",
                          "background": [],
                          "test_method": "test_user_clicks_get_rules_button_for_behavior",
                          "steps": "Given Panel displays behavior hierarchy\nAnd Behavior has rules defined\nWhen User clicks Get Rules button for behavior\nThen System executes behavior.rules command via CLI\nAnd System submits formatted rules digest to AI chat\nAnd Rules digest includes descriptions, priorities, DO/DON'T sections\nAnd Rules digest includes file paths for each rule"
                        },
                        {
                          "name": "",
                          "sequential_order": 2.0,
                          "type": "",
                          "background": [],
                          "test_method": "test_get_rules_button_visible_for_behaviors_with_rules",
                          "steps": "Given Panel displays behavior hierarchy\nAnd Behavior has rules defined\nWhen User views behavior in hierarchy\nThen Get Rules button is visible next to behavior name"
                        },
                        {
                          "name": "",
                          "sequential_order": 3.0,
                          "type": "",
                          "background": [],
                          "test_method": "test_system_confirms_rules_submission_to_chat",
                          "steps": "Given Panel displays behavior hierarchy\nWhen User clicks Get Rules button\nAnd Rules are successfully submitted to chat\nThen System displays success confirmation message\nAnd Message indicates rules were submitted to chat"
                        }
                      ],
                      "acceptance_criteria": [
                        {
                          "name": "WHEN User clicks Get Rules button for a behavior\nTHEN System executes behavior.rules command AND System submits rules digest to AI chat AND Rules include formatted descriptions with DO/DON'T sections AND Rules include file paths for each rule AND All behavior rules are included in digest",
                          "text": "WHEN User clicks Get Rules button for a behavior\nTHEN System executes behavior.rules command AND System submits rules digest to AI chat AND Rules include formatted descriptions with DO/DON'T sections AND Rules include file paths for each rule AND All behavior rules are included in digest",
                          "sequential_order": 1.0
                        }
                      ],
                      "behavior": null
                    },
                    {
                      "name": "Get Rules Instructions Through CLI",
                      "sequential_order": 3.0,
                      "connector": null,
                      "story_type": "user",
                      "users": [
                        "User"
                      ],
                      "test_class": "TestGetRulesInstructionsThroughCLI",
                      "scenarios": [
                        {
                          "name": "User gets rules instructions for behavior",
                          "sequential_order": 1.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_user_gets_rules_instructions_for_behavior",
                          "steps": "Given Production story_bot with tests behavior (has rules)\nWhen User enters 'tests.rules' in CLI\nThen CLI displays formatted rules digest with descriptions, priorities, DO/DON'T sections\nAnd Display includes rule names with their file paths\nAnd All rules from behavior are included in digest"
                        },
                        {
                          "name": "User gets rules with message parameter",
                          "sequential_order": 2.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_user_gets_rules_with_message_parameter",
                          "steps": "Given Production story_bot with tests behavior\nWhen User enters 'tests.rules \"explain parameterized tests\"' in CLI\nThen CLI displays rules digest\nAnd Instructions include user message requesting specific rule information"
                        },
                        {
                          "name": "User gets rules without message parameter",
                          "sequential_order": 3.0,
                          "type": "happy_path",
                          "background": [],
                          "test_method": "test_user_gets_rules_without_message_parameter",
                          "steps": "Given Production story_bot with tests behavior\nWhen User enters 'tests.rules' without message\nThen CLI displays rules digest\nAnd Instructions do not include user message section"
                        }
                      ],
                      "acceptance_criteria": [
                        {
                          "name": "WHEN User navigates to behavior.rules\nTHEN CLI displays formatted rules digest with descriptions and DO/DON'T sections AND CLI includes rule names with their file paths AND CLI includes all rules from the behavior",
                          "text": "WHEN User navigates to behavior.rules\nTHEN CLI displays formatted rules digest with descriptions and DO/DON'T sections AND CLI includes rule names with their file paths AND CLI includes all rules from the behavior",
                          "sequential_order": 1.0
                        }
                      ],
                      "behavior": null
                    }
                  ]
                }
              ]
            }
          ],
          "story_groups": []
        },
        {
          "name": "Get Help",
          "sequential_order": 4.0,
          "behavior": null,
          "domain_concepts": [
            {
              "name": "TTYHelp",
              "responsibilities": [
                {
                  "name": "Serialize help to TTY",
                  "collaborators": [
                    "Help",
                    "String"
                  ]
                },
                {
                  "name": "Format help sections",
                  "collaborators": [
                    "Sections",
                    "String"
                  ]
                },
                {
                  "name": "Wraps domain help",
                  "collaborators": [
                    "Help"
                  ]
                }
              ],
              "module": "help",
              "inherits_from": "TTYAdapter",
              "_source_path": "Invoke Bot.Invoke Bot Directly"
            },
            {
              "name": "JSONHelp",
              "responsibilities": [
                {
                  "name": "Serialize help to JSON",
                  "collaborators": [
                    "Help",
                    "Dict"
                  ]
                },
                {
                  "name": "Include help sections",
                  "collaborators": [
                    "Sections",
                    "Array"
                  ]
                },
                {
                  "name": "Wraps domain help",
                  "collaborators": [
                    "Help"
                  ]
                }
              ],
              "module": "help",
              "inherits_from": "JSONAdapter",
              "_source_path": "Invoke Bot.Invoke Bot Directly"
            },
            {
              "name": "MarkdownHelp",
              "responsibilities": [
                {
                  "name": "Serialize help to Markdown",
                  "collaborators": [
                    "Help",
                    "String"
                  ]
                },
                {
                  "name": "Format help sections",
                  "collaborators": [
                    "Sections",
                    "Markdown"
                  ]
                },
                {
                  "name": "Wraps domain help",
                  "collaborators": [
                    "Help"
                  ]
                }
              ],
              "module": "help",
              "inherits_from": "MarkdownAdapter",
              "_source_path": "Invoke Bot.Invoke Bot Directly"
            },
            {
              "name": "Status",
              "responsibilities": [
                {
                  "name": "Get progress path",
                  "collaborators": [
                    "String"
                  ]
                },
                {
                  "name": "Get stage name",
                  "collaborators": [
                    "String"
                  ]
                },
                {
                  "name": "Get current behavior name",
                  "collaborators": [
                    "String"
                  ]
                },
                {
                  "name": "Get current action name",
                  "collaborators": [
                    "String"
                  ]
                },
                {
                  "name": "Get has current behavior",
                  "collaborators": [
                    "Boolean"
                  ]
                },
                {
                  "name": "Get has current action",
                  "collaborators": [
                    "Boolean"
                  ]
                }
              ],
              "module": "help",
              "_source_path": "Invoke Bot.Invoke Bot Directly"
            },
            {
              "name": "TTYStatus",
              "responsibilities": [
                {
                  "name": "Serialize status to TTY",
                  "collaborators": [
                    "Status",
                    "TTY String"
                  ]
                },
                {
                  "name": "Format progress line",
                  "collaborators": [
                    "Progress Path",
                    "Stage Name",
                    "TTY String"
                  ]
                },
                {
                  "name": "Format hierarchical status",
                  "collaborators": [
                    "Bot",
                    "Status",
                    "TTY String"
                  ]
                },
                {
                  "name": "Wraps domain status",
                  "collaborators": [
                    "Status"
                  ]
                }
              ],
              "module": "help",
              "inherits_from": "TTYAdapter",
              "_source_path": "Invoke Bot.Invoke Bot Directly"
            },
            {
              "name": "JSONStatus",
              "responsibilities": [
                {
                  "name": "Serialize status to JSON",
                  "collaborators": [
                    "Status",
                    "JSON String"
                  ]
                },
                {
                  "name": "Include progress path",
                  "collaborators": [
                    "Progress Path",
                    "String"
                  ]
                },
                {
                  "name": "Include stage name",
                  "collaborators": [
                    "Stage Name",
                    "String"
                  ]
                },
                {
                  "name": "Include current behavior",
                  "collaborators": [
                    "Behavior Name",
                    "String"
                  ]
                },
                {
                  "name": "Include current action",
                  "collaborators": [
                    "Action Name",
                    "String"
                  ]
                },
                {
                  "name": "Wraps domain status",
                  "collaborators": [
                    "Status"
                  ]
                }
              ],
              "module": "help",
              "inherits_from": "JSONAdapter",
              "_source_path": "Invoke Bot.Invoke Bot Directly"
            },
            {
              "name": "MarkdownStatus",
              "responsibilities": [
                {
                  "name": "Serialize status to Markdown",
                  "collaborators": [
                    "Status",
                    "Markdown String"
                  ]
                },
                {
                  "name": "Format progress section",
                  "collaborators": [
                    "Progress Path",
                    "Stage Name",
                    "Markdown String"
                  ]
                },
                {
                  "name": "Format workflow state",
                  "collaborators": [
                    "Status",
                    "Markdown String"
                  ]
                },
                {
                  "name": "Wraps domain status",
                  "collaborators": [
                    "Status"
                  ]
                }
              ],
              "module": "help",
              "inherits_from": "MarkdownAdapter",
              "_source_path": "Invoke Bot.Invoke Bot Directly"
            },
            {
              "name": "ExitResult",
              "responsibilities": [
                {
                  "name": "Get exit code",
                  "collaborators": [
                    "Integer"
                  ]
                },
                {
                  "name": "Get exit message",
                  "collaborators": [
                    "String"
                  ]
                },
                {
                  "name": "Get should cleanup",
                  "collaborators": [
                    "Boolean"
                  ]
                }
              ],
              "module": "exit_result",
              "_source_path": "Invoke Bot.Invoke Bot Directly"
            },
            {
              "name": "TTYExitResult",
              "responsibilities": [
                {
                  "name": "Serialize exit result to TTY",
                  "collaborators": [
                    "ExitResult",
                    "TTY String"
                  ]
                },
                {
                  "name": "Format exit message",
                  "collaborators": [
                    "Message",
                    "TTY String"
                  ]
                },
                {
                  "name": "Wraps domain exit result",
                  "collaborators": [
                    "ExitResult"
                  ]
                }
              ],
              "module": "exit_result",
              "inherits_from": "TTYAdapter",
              "_source_path": "Invoke Bot.Invoke Bot Directly"
            },
            {
              "name": "JSONExitResult",
              "responsibilities": [
                {
                  "name": "Serialize exit result to JSON",
                  "collaborators": [
                    "ExitResult",
                    "JSON String"
                  ]
                },
                {
                  "name": "Include exit code",
                  "collaborators": [
                    "Integer",
                    "JSON"
                  ]
                },
                {
                  "name": "Include exit message",
                  "collaborators": [
                    "String",
                    "JSON"
                  ]
                },
                {
                  "name": "Wraps domain exit result",
                  "collaborators": [
                    "ExitResult"
                  ]
                }
              ],
              "module": "exit_result",
              "inherits_from": "JSONAdapter",
              "_source_path": "Invoke Bot.Invoke Bot Directly"
            },
            {
              "name": "MarkdownExitResult",
              "responsibilities": [
                {
                  "name": "Serialize exit result to Markdown",
                  "collaborators": [
                    "ExitResult",
                    "Markdown String"
                  ]
                },
                {
                  "name": "Format exit documentation",
                  "collaborators": [
                    "ExitResult",
                    "Markdown String"
                  ]
                },
                {
                  "name": "Wraps domain exit result",
                  "collaborators": [
                    "ExitResult"
                  ]
                }
              ],
              "module": "exit_result",
              "inherits_from": "MarkdownAdapter",
              "_source_path": "Invoke Bot.Invoke Bot Directly"
            }
          ],
          "test_file": "invoke_bot/get_help/test_get_help_using_cli.py",
          "sub_epics": [],
          "story_groups": [
            {
              "name": "",
              "sequential_order": 0.0,
              "type": "and",
              "connector": null,
              "behavior": null,
              "stories": [
                {
                  "name": "Get Help",
                  "sequential_order": 1.0,
                  "connector": "or",
                  "story_type": "user",
                  "users": [
                    "Bot Behavior"
                  ],
                  "test_class": "TestGetHelp",
                  "scenarios": [
                    {
                      "name": "Verify actions can provide instructions",
                      "sequential_order": 1.0,
                      "type": "happy_path",
                      "background": [],
                      "test_method": "test_action_has_instructions_method",
                      "steps": "Given Bot has behavior with action\nWhen Action is accessed\nThen Action has method to get instructions\nThen Domain focus: Action instructions method availability"
                    },
                    {
                      "name": "Action provides parameter help via .help property",
                      "sequential_order": 2.0,
                      "type": "happy_path",
                      "background": [],
                      "test_method": "test_action_provides_parameter_help",
                      "steps": "Given Bot has behavior with action\nWhen Action.help is accessed\nThen Returns dict with description and parameters list\nThen Domain focus: Parameter help retrieval from Action.help",
                      "test": {
                        "method": "test_action_provides_parameter_help",
                        "file": "invoke_bot/get_help/test_get_help_using_cli.py",
                        "line": 70
                      }
                    },
                    {
                      "name": "Action provides command examples",
                      "sequential_order": 3.0,
                      "type": "happy_path",
                      "background": [],
                      "test_method": "test_action_provides_command_examples",
                      "steps": "Given Bot has behavior with action\nWhen Command examples are requested\nThen Action returns usage examples\nThen Domain focus: Command examples retrieval",
                      "test": {
                        "method": "test_action_provides_command_examples",
                        "file": "invoke_bot/get_help/test_get_help_using_cli.py",
                        "line": 125
                      }
                    }
                  ],
                  "acceptance_criteria": [],
                  "behavior": null
                },
                {
                  "name": "Display Parameter Help Using CLI",
                  "sequential_order": 2.0,
                  "connector": "or",
                  "story_type": "user",
                  "users": [
                    "User"
                  ],
                  "test_class": null,
                  "scenarios": [],
                  "acceptance_criteria": [],
                  "behavior": null
                },
                {
                  "name": "Display Action Help Using CLI",
                  "sequential_order": 3.0,
                  "connector": "or",
                  "story_type": "user",
                  "users": [
                    "User"
                  ],
                  "test_class": "TestDisplayActionHelpUsingCLI",
                  "scenarios": [
                    {
                      "name": "User views all available commands",
                      "sequential_order": 1.0,
                      "type": "",
                      "background": [],
                      "test_method": "test_user_views_all_available_commands",
                      "steps": "GIVEN: CLI is running\nWHEN: user enters 'help'\nTHEN: CLI displays help menu with commands"
                    }
                  ],
                  "acceptance_criteria": [
                    {
                      "name": "WHEN user enters help command\nTHEN CLI displays available commands AND their descriptions",
                      "text": "WHEN user enters help command\nTHEN CLI displays available commands AND their descriptions",
                      "sequential_order": 1.0
                    },
                    {
                      "name": "WHEN user requests help for specific action\nTHEN CLI displays detailed help for that action",
                      "text": "WHEN user requests help for specific action\nTHEN CLI displays detailed help for that action",
                      "sequential_order": 2.0
                    },
                    {
                      "name": "WHEN displaying help\nTHEN CLI shows command syntax AND parameter descriptions",
                      "text": "WHEN displaying help\nTHEN CLI shows command syntax AND parameter descriptions",
                      "sequential_order": 3.0
                    },
                    {
                      "name": "WHEN help is requested for non-existent command\nTHEN CLI displays error message with available commands",
                      "text": "WHEN help is requested for non-existent command\nTHEN CLI displays error message with available commands",
                      "sequential_order": 4.0
                    }
                  ],
                  "behavior": null
                },
                {
                  "name": "Display Command Examples Using CLI",
                  "sequential_order": 4.0,
                  "connector": "or",
                  "story_type": "user",
                  "users": [],
                  "test_class": null,
                  "scenarios": [],
                  "acceptance_criteria": [],
                  "behavior": null
                },
                {
                  "name": "Get Help Using CLI",
                  "sequential_order": 5.0,
                  "connector": "or",
                  "story_type": "user",
                  "users": [],
                  "test_class": "TestGetHelpUsingCLI",
                  "scenarios": [
                    {
                      "name": "Action instructions are shown in CLI output",
                      "sequential_order": 1.0,
                      "type": "happy_path",
                      "background": [],
                      "test_method": "test_action_shows_instructions_in_cli_output",
                      "steps": "GIVEN: CLI is at shape.clarify\nWHEN: user navigates to action\nTHEN: CLI output shows action instructions",
                      "test": {
                        "method": "test_action_shows_instructions_in_cli_output",
                        "file": "invoke_bot/get_help/test_get_help_using_cli.py",
                        "line": 191
                      }
                    },
                    {
                      "name": "Action parameter help is shown in CLI output",
                      "sequential_order": 2.0,
                      "type": "happy_path",
                      "background": [],
                      "test_method": "test_action_shows_parameter_help_in_output",
                      "steps": "GIVEN: CLI is at shape.clarify\nWHEN: user navigates to action with parameters\nTHEN: CLI output shows parameter information",
                      "test": {
                        "method": "test_action_shows_parameter_help_in_output",
                        "file": "invoke_bot/get_help/test_get_help_using_cli.py",
                        "line": 218
                      }
                    },
                    {
                      "name": "Action shows usage information in CLI output",
                      "sequential_order": 3.0,
                      "type": "happy_path",
                      "background": [],
                      "test_method": "test_action_shows_usage_information_in_output",
                      "steps": "GIVEN: CLI is at shape.clarify\nWHEN: user navigates to action\nTHEN: CLI output shows how to use the action",
                      "test": {
                        "method": "test_action_shows_usage_information_in_output",
                        "file": "invoke_bot/get_help/test_get_help_using_cli.py",
                        "line": 250
                      }
                    }
                  ],
                  "acceptance_criteria": [],
                  "behavior": null
                },
                {
                  "name": "Display Help Using CLI",
                  "sequential_order": 6.0,
                  "connector": "or",
                  "story_type": "user",
                  "users": [],
                  "test_class": "TestDisplayHelpUsingCLI",
                  "scenarios": [
                    {
                      "name": "Help command shows available commands (all channels)",
                      "sequential_order": 1.0,
                      "type": "happy_path",
                      "background": [],
                      "test_method": "test_help_command_shows_available_commands",
                      "steps": "GIVEN: CLI session active\nWHEN: user enters 'help'\nTHEN: CLI displays list of available commands",
                      "test": {
                        "method": "test_help_command_shows_available_commands",
                        "file": "invoke_bot/get_help/test_get_help_using_cli.py",
                        "line": 285
                      }
                    },
                    {
                      "name": "Help with command name shows command details (all channels)",
                      "sequential_order": 2.0,
                      "type": "happy_path",
                      "background": [],
                      "test_method": "test_help_with_command_shows_details",
                      "steps": "GIVEN: CLI session active\nWHEN: user enters 'help status'\nTHEN: CLI displays help for 'status' command",
                      "test": {
                        "method": "test_help_with_command_shows_details",
                        "file": "invoke_bot/get_help/test_get_help_using_cli.py",
                        "line": 308
                      }
                    }
                  ],
                  "acceptance_criteria": [],
                  "behavior": null
                }
              ]
            }
          ]
        },
        {
          "name": "Provide Context",
          "sequential_order": 5.0,
          "behavior": null,
          "domain_concepts": [],
          "sub_epics": [],
          "story_groups": [
            {
              "name": "",
              "sequential_order": 0.0,
              "type": "and",
              "connector": null,
              "behavior": null,
              "stories": [
                {
                  "name": "Warn when Workspace  not setup",
                  "sequential_order": 1.0,
                  "connector": null,
                  "story_type": "user",
                  "users": [],
                  "test_class": null,
                  "scenarios": [],
                  "acceptance_criteria": [],
                  "behavior": null
                },
                {
                  "name": "Scan Worspace for Context Fies",
                  "sequential_order": 2.0,
                  "connector": null,
                  "story_type": "user",
                  "users": [],
                  "test_class": null,
                  "scenarios": [],
                  "acceptance_criteria": [],
                  "behavior": null
                },
                {
                  "name": "Add Context Files",
                  "sequential_order": 3.0,
                  "connector": null,
                  "story_type": "user",
                  "users": [],
                  "test_class": null,
                  "scenarios": [],
                  "acceptance_criteria": [],
                  "behavior": null
                },
                {
                  "name": "Remove Context File",
                  "sequential_order": 4.0,
                  "connector": null,
                  "story_type": "user",
                  "users": [],
                  "test_class": null,
                  "scenarios": [],
                  "acceptance_criteria": [],
                  "behavior": null
                },
                {
                  "name": "Re-Scan Existing Context File",
                  "sequential_order": 5.0,
                  "connector": null,
                  "story_type": "user",
                  "users": [],
                  "test_class": null,
                  "scenarios": [],
                  "acceptance_criteria": [],
                  "behavior": null
                },
                {
                  "name": "Generate  Context Converter",
                  "sequential_order": 7.0,
                  "connector": null,
                  "story_type": "user",
                  "users": [],
                  "test_class": null,
                  "scenarios": [],
                  "acceptance_criteria": [],
                  "behavior": null
                },
                {
                  "name": "Convert Context",
                  "sequential_order": 8.0,
                  "connector": null,
                  "story_type": "user",
                  "users": [],
                  "test_class": null,
                  "scenarios": [],
                  "acceptance_criteria": [],
                  "behavior": null
                },
                {
                  "name": "Reset Scanned Context",
                  "sequential_order": 9.0,
                  "connector": null,
                  "story_type": "user",
                  "users": [],
                  "test_class": null,
                  "scenarios": [],
                  "acceptance_criteria": [],
                  "behavior": null
                }
              ]
            }
          ]
        }
      ],
      "story_groups": []
    }
  ],
  "increments": [
    {
      "name": "Bot Behavior",
      "priority": 1,
      "stories": [
        "Build Story Graph",
        "Clarify Requirements",
        "Deploy MCP BOT Server",
        "Display Piped Mode Instructions for AI Agents",
        "Display Rules",
        "Display Session Status panel",
        "Decide Strategy",
        "Execute Behavior Action",
        "Execute Behavior Action Panel",
        "Generate Behavior Action Tools",
        "Generate Bot Tools",
        "Get Help",
        "Inject Context Into Instructions",
        "Load Actions",
        "Load Bot Behaviors",
        "Manage Bot Registry",
        "Navigate Sequentially",
        "Navigate To First Behavior Action",
        "Persist Behavior Action State",
        "Proceed across End To End Workflow",
        "Record Activity Metrics And Paths",
        "Resolve Bot Path",
        "Restart MCP Server To Load Code Changes",
        "Save Clarification Answers",
        "Save Clarification Evidence",
        "Save File Isolation",
        "Save Multiple Guardrails Together",
        "Save Strategy Decisions",
        "Show Remaining Actions After Completion",
        "Submit Scope Instructions",
        "Toggle Panel Section",
        "Track Action Completion",
        "Track Action Start",
        "Track Activity For Workspace",
        "Update and Find Current Behavior",
        "Validate Rules"
      ]
    },
    {
      "name": "CLI",
      "priority": 2,
      "stories": [
        "Build Story Graph Using CLI",
        "Clarify Requirements Using CLI",
        "Detect CLI Mode",
        "Display CLI Navigation Menu Footer",
        "Display Clarification Data Through CLI",
        "Display Command Examples Using CLI",
        "Display Context Using CLI",
        "Display Current Position in CLI",
        "Display Headless Mode Status in CLI",
        "Display Help Using CLI",
        "Display Parameter Help Using CLI",
        "Display Render Configurations Through CLI",
        "Display Rules Using CLI",
        "Display Strategy Data Through CLI",
        "Display Synchronizer Output Through CLI",
        "Display Validation Results Through CLI",
        "Execute End To End Workflow Using CLI",
        "Exit CLI REPL",
        "Get Action Instructions Through CLI",
        "Get Build Instructions Through CLI",
        "Get Clarify Instructions Through CLI",
        "Get Help Using CLI",
        "Get Render Instructions Through CLI",
        "Get Rules Instructions Through CLI",
        "Get Strategy Instructions Through CLI",
        "Get Validate Instructions Through CLI",
        "Handle Operation Errors and Validation in CLI",
        "Initialize CLI Session",
        "Load Actions Using CLI",
        "Load Bot Behaviors Using CLI",
        "Load Bot Using CLI",
        "Load and Display Workspace Context in CLI",
        "Manage Behavior Action State Using CLI",
        "Manage Behaviors Using CLI",
        "Navigate Sequentially Using CLI",
        "Navigate Sequentially Using CLI Commands",
        "Navigate To Behavior Action And Execute Using CLI",
        "Navigate Using CLI Dot Notation",
        "Re-execute Current Operation Using CLI",
        "Render Output Using CLI",
        "Resolve Bot Path Using CLI",
        "Save Guardrails Through CLI",
        "Switch Registered Bots in CLI",
        "Submit Instructions Through CLI",
        "Validate Rules Using CLI",
        "Display Action Help Using CLI",
        "Display CLI Bot Command in Navigation Menu Footer",
        "Display CLI Header",
        "Decide Strategy Using CLI",
        "Display Validation Scanners Through CLI"
      ]
    },
    {
      "name": "Panel",
      "priority": 3,
      "stories": [
        "Display Build Instructions Panel",
        "Switch Bot panel",
        "Submit Instructions To AI Agent Panel",
        "Submit Behavior Rules Through Panel",
        "Open Panel",
        "Navigate Behavior Action Panel",
        "Display Validate Instructions Panel",
        "Display Strategy Instructions Panel",
        "Display Render Instructions Panel",
        "Display Raw Format Instructions In Panel",
        "Display Hierarchy In Panel",
        "Display Clarify Instructions Panel",
        "Change Workspace Path panel",
        "Save Guardrails Through Panel",
        "Apply Visual Branding",
        "Display Base Instructions Panel"
      ]
    },
    {
      "name": "Story Map Scoping",
      "priority": 4,
      "stories": [
        "Automatically Refresh Story Graph Changes  CLI",
        "Automatically Refresh Story Graph Changes Panel",
        "Copy Story Node To Clipboard",
        "Create Child Story Node",
        "Create Child Story Node Under Parent CLI",
        "Create Child Story Node Under Parent Panel",
        "Create Epic",
        "Delete Story Node",
        "Delete Story Node From Parent CLI",
        "Delete Story Node From Parent Panel",
        "Display Story Hierarchy Panel",
        "Enrich Scope With Links",
        "Move Story Node  CLI",
        "Move Story Node Panel",
        "Move Story Node To Parent",
        "Navigate Story Graph",
        "Navigate Story Graph Using CLI",
        "Open All Related Files",
        "Save Story Map Changes Asynchronously",
        "Set scope to selected story node",
        "Submit Current Behavior Action For Selected Node",
        "Submit action for selected story node",
        "Update Story Node Name",
        "Update Story Node name  CLI",
        "Update Story Node name Panel"
      ]
    },
    {
      "name": "Render Diagrams",
      "priority": 5,
      "stories": [
        "Create Rule Files From Bot Behavior",
        "Build Story Graph Using API",
        "Render Output Usng Story API",
        "Render acceptance criteria",
        "Render epic and sub-epic hierarchy",
        "Render increment lanes",
        "Render stories and actors",
        "Report acceptance criteria changes",
        "Report epic and sub-epic changes",
        "Report increment changes",
        "Report story moves between parents",
        "Update acceptance criteria from diagram",
        "Update epics and sub-epics from diagram",
        "Update increments from diagram",
        "Update stories from diagram"
      ]
    },
    {
      "name": "Increments On Panel",
      "priority": 6,
      "stories": [
        "Remove Increment",
        "Rename Increment",
        "Add Story to Increment",
        "Rename Story in Increment",
        "Story Deleted in Hierarchy Cascades to Increment",
        "Display Bot Hierarchy Tree with Progress Indicators CLI",
        "Set scope to selected Increment",
        "Remove Story from Increment",
        "Add Increment"
      ]
    },
    {
      "name": "Behavior Action Ux Improvements",
      "priority": 7,
      "stories": [
        "Configure Action Execution",
        "Configure Behavior Execute",
        "Add Special Instructions",
        "Render as Part of Build and Validate Actions",
        "Render Diagram Selected Node"
      ]
    },
    {
      "name": "Queue Behavior Action Workflow",
      "priority": 8,
      "stories": [
        "Add Context Files",
        "Associate Guard rail with scope",
        "Auto Refresh State Changing Events",
        "Display Rules in Queue",
        "Build Story Graph Through Queue",
        "Clarify in Queue",
        "Conssolidate and Expand Behavior Aciton Queies",
        "Convert Context",
        "Display  Behavior Action Qs",
        "Display  Context BAQ",
        "Display Bot  Help",
        "Display Chopices in Queue",
        "Display Syncing Message",
        "Display clarification answers in Queue",
        "Drop Context into Queue",
        "Drop Story Node in  Behavor Action Queue",
        "Execute Scope \"Runs\"",
        "Generate  Context Converter",
        "MAke Choices in queue",
        "Provide Bot Guidance",
        "Re-Scan Existing Context File",
        "Remove Context File",
        "Reset Scanned Context",
        "Save  / Load Queue Consolidation",
        "Scan Worspace for Context Fies",
        "Skip Behavior and Action Queie",
        "Update Queie based on selectged Node",
        "Validate In Queue",
        "Warn when Workspace  not setup",
        "Report and Update InQ"
      ]
    },
    {
      "name": "Trace and Edit",
      "priority": 9,
      "stories": [
        "Add / Remove Examples",
        "Display Code Trace",
        "Display Examples Table",
        "Display Scenario Steps",
        "Display Stories",
        "Edit Code Step",
        "Edit Example",
        "Edit Example Cell Data",
        "Edit Scenarios in Trace Editor",
        "Edit Stories in Trace Editor",
        "Navigate Code Trace",
        "Open Scenario Source",
        "Open Source File",
        "Open Story Files",
        "Design Example"
      ]
    }
  ]
}