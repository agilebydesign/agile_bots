<?xml version="1.0" ?>
<mxfile host="65bd71144e">
  <diagram id="story-map" name="Story Map">
    <mxGraphModel dx="2656" dy="1035" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="4000" pageHeight="3000" math="0" shadow="0">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>
        <mxCell id="epic-group" value="" style="group" parent="1" vertex="1" connectable="0">
          <mxGeometry x="0" y="0" width="2502" height="190" as="geometry"/>
        </mxCell>
        <mxCell id="e1" value="Build Agile Bots" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontColor=#000000;" parent="1" vertex="1">
          <mxGeometry x="20" y="120" width="2194" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="e1f1" value="Generate MCP Tools" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontColor=#000000;" parent="1" vertex="1">
          <mxGeometry x="20" y="200" width="1092" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="e1f1s1" value="Generate Bot Tools" style="whiteSpace=wrap;html=1;aspect=fixed;fillColor=#fff2cc;strokeColor=#d6b656;fontColor=#000000;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="22" y="475" width="50" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e1f1s1_0" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;&lt;b&gt;WHEN&lt;/b&gt;&amp;nbsp;MCP Server Generator receives Bot Config&lt;br&gt;&lt;b&gt;THEN&lt;/b&gt; Generator generates unique MCP Server instance with Unique server name from bot name AND Generated server includes Bot Config reference AND Generated server leverages Specific Bot instantiation code&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="22" y="535" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="user_e1f1s2_MCP Server Generator" value="MCP Server Generator" style="whiteSpace=wrap;html=1;aspect=fixed;fillColor=#dae8fc;strokeColor=#6c8ebf;fontColor=#000000;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="292" y="415" width="50" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="e1f1s2" value="Generate Behavior Action Tools" style="whiteSpace=wrap;html=1;aspect=fixed;fillColor=#fff2cc;strokeColor=#d6b656;fontColor=#000000;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="292" y="475" width="50" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e1f1s2_0" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;&lt;b&gt;WHEN&lt;/b&gt;&amp;nbsp;Generator processes Bot Config&lt;br&gt;&lt;b&gt;THEN&lt;/b&gt; Generator creates tool code for each (behavior, action) pair AND Enumerates all behaviors and actions from Bot Config AND For each pair, generates tool code with unique name, trigger words, forwarding logic AND Tool catalog prepared with all generated tool instances&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="292" y="535" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="e1f1s3" value="Deploy MCP BOT Server" style="whiteSpace=wrap;html=1;aspect=fixed;fillColor=#fff2cc;strokeColor=#d6b656;fontColor=#000000;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="562" y="475" width="50" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e1f1s3_0" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;&lt;b&gt;WHEN&lt;/b&gt;&amp;nbsp;Generation Complete&lt;br&gt;&lt;b&gt;THEN&lt;/b&gt; Generator deploys/starts generated MCP Server AND Server initializes in separate thread AND Server registers with MCP Protocol Handler using unique server name AND Server publishes tool catalog to AI Chat AND Each tool entry includes name, description, trigger patterns, parameters&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="562" y="535" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="e1f1s4" value="Restart MCP Server To Load Code Changes" style="whiteSpace=wrap;html=1;aspect=fixed;fillColor=#fff2cc;strokeColor=#d6b656;fontColor=#000000;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="832" y="475" width="50" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e1f1s4_0" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;&lt;b&gt;WHEN&lt;/b&gt;&amp;nbsp;Bot code changes are detected&lt;br&gt;&lt;b&gt;THEN&lt;/b&gt; MCP Server clears Python bytecode cache (__pycache__) AND MCP Server restarts to load new code AND Server restarts gracefully without losing state AND Server re-registers with MCP Protocol Handler after restart&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="832" y="535" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="e1f2" value="Generate CLI" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontColor=#000000;" parent="1" vertex="1">
          <mxGeometry x="1122" y="200" width="1092" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="user_e1f2s1_Generator" value="Generator" style="whiteSpace=wrap;html=1;aspect=fixed;fillColor=#dae8fc;strokeColor=#6c8ebf;fontColor=#000000;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="1124" y="290" width="50" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="e1f2s1" value="Generate Command Definitions" style="whiteSpace=wrap;html=1;aspect=fixed;fillColor=#fff2cc;strokeColor=#d6b656;fontColor=#000000;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="1124" y="350" width="50" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e1f2s1_0" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;&lt;b&gt;WHEN&lt;/b&gt;&amp;nbsp;generator runs,&lt;br&gt;&lt;b&gt;THEN&lt;/b&gt; Orchestrator walks all bot behaviors&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="1124" y="410" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e1f2s1_1" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;&lt;b&gt;WHEN&lt;/b&gt;&amp;nbsp;behaviors are walked,&lt;br&gt;&lt;b&gt;THEN&lt;/b&gt; ActionDataCollector gathers action metadata for each behavior&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="1124" y="480" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e1f2s1_2" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;&lt;b&gt;WHEN&lt;/b&gt;&amp;nbsp;actions are gathered,&lt;br&gt;&lt;b&gt;THEN&lt;/b&gt; generator extracts parameters from each action's context_class&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="1124" y="550" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e1f2s1_3" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;&lt;b&gt;WHEN&lt;/b&gt;&amp;nbsp;metadata is collected,&lt;br&gt;&lt;b&gt;THEN&lt;/b&gt; ReplCommandVisitor generates navigate commands for all behaviors and actions&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="1124" y="620" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e1f2s1_4" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;&lt;b&gt;WHEN&lt;/b&gt;&amp;nbsp;commands are generated,&lt;br&gt;&lt;b&gt;THEN&lt;/b&gt; scope commands are created for scope.type, scope.value, scope.exclude&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="1124" y="690" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e1f2s1_5" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;&lt;b&gt;WHEN&lt;/b&gt;&amp;nbsp;all commands are defined,&lt;br&gt;&lt;b&gt;THEN&lt;/b&gt; generator outputs command definition file&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="1124" y="760" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="e1f2s2" value="Generate CLI Entry Point" style="whiteSpace=wrap;html=1;aspect=fixed;fillColor=#fff2cc;strokeColor=#d6b656;fontColor=#000000;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="1394" y="350" width="50" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e1f2s2_0" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;&lt;b&gt;WHEN&lt;/b&gt;&amp;nbsp;generator creates PowerShell script,&lt;br&gt;&lt;b&gt;THEN&lt;/b&gt; it generates bot-specific CLI launcher (e.g., story_cli.ps1)&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="1394" y="410" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e1f2s2_1" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;&lt;b&gt;WHEN&lt;/b&gt;&amp;nbsp;PowerShell script is generated,&lt;br&gt;&lt;b&gt;THEN&lt;/b&gt; it sets BOT_DIRECTORY and PYTHONPATH environment variables&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="1394" y="480" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e1f2s2_2" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;&lt;b&gt;WHEN&lt;/b&gt;&amp;nbsp;script is generated,&lt;br&gt;&lt;b&gt;THEN&lt;/b&gt; it launches repl_main.py for the specific bot&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="1394" y="550" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e1f2s2_3" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;&lt;b&gt;WHEN&lt;/b&gt;&amp;nbsp;REPL is launched,&lt;br&gt;&lt;b&gt;THEN&lt;/b&gt; it includes TTY detection, state display, command parsing, and execution&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="1394" y="620" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="e1f2s3" value="Generate Cursor Commands" style="whiteSpace=wrap;html=1;aspect=fixed;fillColor=#fff2cc;strokeColor=#d6b656;fontColor=#000000;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="1664" y="350" width="50" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e1f2s3_0" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;&lt;b&gt;WHEN&lt;/b&gt;&amp;nbsp;generator creates CursorReplVisitor,&lt;br&gt;&lt;b&gt;THEN&lt;/b&gt; it follows existing visitor pattern&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="1664" y="410" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e1f2s3_1" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;&lt;b&gt;WHEN&lt;/b&gt;&amp;nbsp;visitor generates shortcuts,&lt;br&gt;&lt;b&gt;THEN&lt;/b&gt; it creates navigate shortcuts for behaviors&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="1664" y="480" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e1f2s3_2" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;&lt;b&gt;WHEN&lt;/b&gt;&amp;nbsp;visitor generates action shortcuts,&lt;br&gt;&lt;b&gt;THEN&lt;/b&gt; it creates shortcuts for behavior-action combinations&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="1664" y="550" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e1f2s3_3" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;&lt;b&gt;WHEN&lt;/b&gt;&amp;nbsp;visitor generates help shortcuts,&lt;br&gt;&lt;b&gt;THEN&lt;/b&gt; it creates help and status commands&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="1664" y="620" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="e1f2s4" value="Generate Help Documentation" style="whiteSpace=wrap;html=1;aspect=fixed;fillColor=#fff2cc;strokeColor=#d6b656;fontColor=#000000;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="1934" y="350" width="50" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e1f2s4_0" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;&lt;b&gt;WHEN&lt;/b&gt;&amp;nbsp;generator creates HelpReplVisitor,&lt;br&gt;&lt;b&gt;THEN&lt;/b&gt; it generates command reference with all REPL commands&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="1934" y="410" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e1f2s4_1" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;&lt;b&gt;WHEN&lt;/b&gt;&amp;nbsp;help is generated,&lt;br&gt;&lt;b&gt;THEN&lt;/b&gt; it includes parameter reference with descriptions for all action parameters&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="1934" y="480" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e1f2s4_2" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;&lt;b&gt;WHEN&lt;/b&gt;&amp;nbsp;examples are generated,&lt;br&gt;&lt;b&gt;THEN&lt;/b&gt; it includes scope examples with dot-notation syntax&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="1934" y="550" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e1f2s4_3" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;&lt;b&gt;WHEN&lt;/b&gt;&amp;nbsp;documentation is output,&lt;br&gt;&lt;b&gt;THEN&lt;/b&gt; it creates Markdown help files in .cursor/commands/ and terminal help&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="1934" y="620" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="e2" value="Invoke Bot" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontColor=#000000;" parent="1" vertex="1">
          <mxGeometry x="2244" y="120" width="258" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="e2f1" value="Get Help" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontColor=#000000;" parent="1" vertex="1">
          <mxGeometry x="2244" y="200" width="258" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="user_e2f1s1_User" value="User" style="whiteSpace=wrap;html=1;aspect=fixed;fillColor=#dae8fc;strokeColor=#6c8ebf;fontColor=#000000;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="2246" y="290" width="50" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="e2f1s1" value="Display Action Help Using CLI" style="whiteSpace=wrap;html=1;aspect=fixed;fillColor=#fff2cc;strokeColor=#d6b656;fontColor=#000000;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="2246" y="350" width="50" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e2f1s1_0" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;&lt;b&gt;WHEN&lt;/b&gt;&amp;nbsp;user enters help command&lt;br&gt;&lt;b&gt;THEN&lt;/b&gt; CLI displays available commands AND their descriptions&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="2246" y="410" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e2f1s1_1" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;&lt;b&gt;WHEN&lt;/b&gt;&amp;nbsp;user requests help for specific action&lt;br&gt;&lt;b&gt;THEN&lt;/b&gt; CLI displays detailed help for that action&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="2246" y="480" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e2f1s1_2" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;&lt;b&gt;WHEN&lt;/b&gt;&amp;nbsp;displaying help&lt;br&gt;&lt;b&gt;THEN&lt;/b&gt; CLI shows command syntax AND parameter descriptions&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="2246" y="550" width="250" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="ac_e2f1s1_3" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;&lt;b&gt;WHEN&lt;/b&gt;&amp;nbsp;help is requested for non-existent command&lt;br&gt;&lt;b&gt;THEN&lt;/b&gt; CLI displays error message with available commands&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="2246" y="620" width="250" height="60" as="geometry"/>
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
